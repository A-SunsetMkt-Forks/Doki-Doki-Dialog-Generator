{"version":3,"sources":["webpack:///./src/components/repo/SearchBar.vue?c01a","webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./src/components/repo/List.vue?8ab5","webpack:///./node_modules/core-js/modules/_same-value.js","webpack:///./src/components/repo/PackDisplay.vue?762f","webpack:///./src/components/repo/layouts/SingleBox.vue?dc21","webpack:///./src/components/repo/SearchBar.vue?aefa","webpack:///./src/components/repo/SearchBar.vue?ecbe","webpack:///./src/components/repo/SearchBar.vue?b392","webpack:///./src/components/repo/SearchBar.vue","webpack:///./src/components/repo/List.vue?c11b","webpack:///./node_modules/@edave64/dddg-repo-filters/dist/parse.js","webpack:///./node_modules/@edave64/dddg-repo-filters/dist/optimize.js","webpack:///./node_modules/@edave64/dddg-repo-filters/dist/compile.js","webpack:///./node_modules/@edave64/dddg-repo-filters/dist/main.js","webpack:///./src/components/repo/types.ts","webpack:///./src/util/exhaust.ts","webpack:///./src/components/repo/List.vue?b662","webpack:///./src/components/repo/List.vue?4d8c","webpack:///./src/components/repo/List.vue","webpack:///./src/components/repo/PackDisplay.vue?3d08","webpack:///./src/components/toolbox/panels/character-pack-sanitizer.ts","webpack:///./src/components/repo/PackDisplay.vue?bc42","webpack:///./src/components/repo/PackDisplay.vue?07b5","webpack:///./src/components/repo/PackDisplay.vue","webpack:///./src/components/repo/layouts/SingleBox.vue?6887","webpack:///./src/components/repo/layouts/SingleBox.vue?82c2","webpack:///./src/components/repo/layouts/SingleBox.vue","webpack:///./src/components/repo/layouts/SingleBox.vue?7c11"],"names":["anObject","sameValue","regExpExec","defined","SEARCH","$search","maybeCallNative","regexp","O","this","fn","undefined","call","RegExp","String","res","done","value","rx","S","previousLastIndex","lastIndex","result","index","module","exports","Object","is","x","y","render","_vm","_h","$createElement","_c","_self","staticClass","on","keydownHandler","selected","_e","class","blured","ref","attrs","focusListHandler","$event","$emit","model","callback","$$v","search","expression","authors","packsArgmented","onSelect","$refs","searchBar","focus","leavePackDisplay","staticRenderFns","directives","name","rawName","disabled","domProps","target","composing","message","onUpdate","dontCloseHelp","help","toggled","showHelp","stopPropagation","_v","_m","debounce","debounceTimeout","lastSend","input","document","body","addEventListener","documentClickHandler","updateInternalValue","removeEventListener","event","key","preventDefault","clearTimeout","setTimeout","doUpdate","div","createElement","innerHTML","innerText","default","component","_l","header","idx","sortBy","headerKeydownListener","_s","sort","desc","nativeOn","updateFocusedItem","pack","id","focused","focusedItem","source","characters","join","kind","translatePackState","state","availablePrefixes","prefixLookup","Map","prefix","i","length","short","slice","set","spaceMatcher","parseSearchwords","str","matchers","word","type","quote","escape","finishWord","push","payload","toLowerCase","char","lowerWord","has","get","test","matchCost","optimize","sortByCost","deduplicateMatchers","a","b","splitByType","matcher","list","keys","quickDeprefix","localeCompare","filter","ary","startsWith","find","collision","collIdx","indexOf","specializedTypes","Array","from","typeKey","competingMatcher","values","flatMap","EngineMatcher","replace","matchingProps","Set","searchText","engines","add","matchingProp","map","searchTerm","prop","AuthorMatcher","peopleRepository","matchingAuthors","authorKey","prototype","hasOwnProperty","author","props","size","CharacterMatcher","_peopleRepository","packRepository","matchingCharacters","getUniqueCharacters","character","repo","unique","uniqueCharacters","TypeMatcher","matchingTypes","types","PackMatcher","triplets","getTriplets","substr","isImpossible","searchWords","tripletCache","splitTriplets","cache","AllMatcher","allMatchers","compiler","match","CompilerMatch","compile","packs","parsed","optimized","compiled","every","PackStates","exhaust","Error","pageKeyMoveBy","wordCache","tbody","$el","findIndex","console","log","newIdx","max","headerId","$nextTick","element","querySelector","containerHeight","offsetHeight","scrollTop","scrollBottom","itemTop","offsetTop","itemBottom","by","Unknown","Installed","Active","filtered","filterList","sortFunc","oldSort","style","backgroundImage","disclaimer","installable","remove","uninstallable","authorId","authorName","authorsLinks","link","platform","icon","sanitize","description","allowedTags","allowedAttributes","img","schemaLimitedAttributes","allowedSchemas","enforceAttributes","rel","html","retDoc","doc","childNodes","node","sanitizeElement","sanitizedNode","appendChild","protocolMatcher","nodeType","Node","ELEMENT_NODE","el","ret","tagName","includes","attributes","allowedAttrs","attr","protocolMatch","removeAttribute","enforce","attrName","setAttribute","createTextNode","subNode","concat","linkablePlatforms","toFocus","currentName","toUpperCase","credits","$store","dispatch","dddg2Path","dddg1Path","preview","environment","isAutoLoadingSupported","isLocalRepoSupported","Boolean","repoUrl","localPacks","localPacksPromise","fetchJSON","localRepositoryUrl","Promise","all","path","fetch","req","json","moveFocus","dialog","loadedPacks","content","contentPacks","repoPacks","repoLookup","loadedLookup","packId","localLookup","installedRet","repoPack","isLoaded","isInstalled","inLocalRepo","notInstalledPacks","components","SearchBar","List","PackDisplay"],"mappings":"2IAAA,yBAA2jB,EAAG,G,6DCE9jB,IAAIA,EAAW,EAAQ,QACnBC,EAAY,EAAQ,QACpBC,EAAa,EAAQ,QAGzB,EAAQ,OAAR,CAAyB,SAAU,GAAG,SAAUC,EAASC,EAAQC,EAASC,GACxE,MAAO,CAGL,SAAgBC,GACd,IAAIC,EAAIL,EAAQM,MACZC,OAAeC,GAAVJ,OAAsBI,EAAYJ,EAAOH,GAClD,YAAcO,IAAPD,EAAmBA,EAAGE,KAAKL,EAAQC,GAAK,IAAIK,OAAON,GAAQH,GAAQU,OAAON,KAInF,SAAUD,GACR,IAAIQ,EAAMT,EAAgBD,EAASE,EAAQE,MAC3C,GAAIM,EAAIC,KAAM,OAAOD,EAAIE,MACzB,IAAIC,EAAKlB,EAASO,GACdY,EAAIL,OAAOL,MACXW,EAAoBF,EAAGG,UACtBpB,EAAUmB,EAAmB,KAAIF,EAAGG,UAAY,GACrD,IAAIC,EAASpB,EAAWgB,EAAIC,GAE5B,OADKlB,EAAUiB,EAAGG,UAAWD,KAAoBF,EAAGG,UAAYD,GAC9C,OAAXE,GAAmB,EAAIA,EAAOC,Y,oCC3B3C,yBAAsjB,EAAG,G,qBCCzjBC,EAAOC,QAAUC,OAAOC,IAAM,SAAYC,EAAGC,GAE3C,OAAOD,IAAMC,EAAU,IAAND,GAAW,EAAIA,IAAM,EAAIC,EAAID,GAAKA,GAAKC,GAAKA,I,oCCH/D,yBAA6jB,EAAG,G,uFCAhkB,IAAIC,EAAS,WAAa,IAAIC,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQC,GAAG,CAAC,QAAUN,EAAIO,iBAAiB,CAAGP,EAAIQ,SAA8lBR,EAAIS,KAAxlBN,EAAG,MAAM,CAACE,YAAY,gBAAgBK,MAAM,CAAEC,OAAQX,EAAIQ,WAAY,CAACL,EAAG,aAAa,CAACS,IAAI,YAAYP,YAAY,aAAaQ,MAAM,CAAC,WAAab,EAAIQ,UAAUF,GAAG,CAAC,aAAaN,EAAIc,iBAAiB,MAAQ,SAASC,GAAQ,OAAOf,EAAIgB,MAAM,WAAWC,MAAM,CAAC/B,MAAOc,EAAU,OAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,OAAOD,GAAKE,WAAW,YAAYlB,EAAG,OAAO,CAACS,IAAI,OAAOP,YAAY,OAAOQ,MAAM,CAAC,OAASb,EAAIoB,OAAO,QAAUpB,EAAIsB,QAAQ,MAAQtB,EAAIuB,eAAe,WAAavB,EAAIQ,UAAUF,GAAG,CAAC,SAAWN,EAAIwB,SAAS,oBAAoB,SAAST,GAAQ,OAAOf,EAAIyB,MAAMC,UAAUC,aAAa,GAAa3B,EAAY,SAAEG,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,eAAe,CAACS,IAAI,SAASP,YAAY,eAAeQ,MAAM,CAAC,QAAUb,EAAIsB,QAAQ,MAAQtB,EAAIuB,eAAe,SAAWvB,EAAIQ,SAAS,YAAY,IAAIF,GAAG,CAAC,MAAQN,EAAI4B,qBAAqB,GAAG5B,EAAIS,QAC1gCoB,EAAkB,G,gNCDlB,EAAS,WAAa,IAAI7B,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAAC2B,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU9C,MAAOc,EAAW,QAAEqB,WAAW,YAAYT,IAAI,QAAQP,YAAY,QAAQQ,MAAM,CAAC,SAAWb,EAAIiC,UAAUC,SAAS,CAAC,MAASlC,EAAW,SAAGM,GAAG,CAAC,MAAQ,CAAC,SAASS,GAAWA,EAAOoB,OAAOC,YAAqBpC,EAAIqC,QAAQtB,EAAOoB,OAAOjD,QAAOc,EAAIsC,UAAU,MAAQ,SAASvB,GAAQA,EAAOwB,eAAgB,GAAM,QAAUvC,EAAIO,kBAAkBJ,EAAG,SAAS,CAACO,MAAM,CAAE8B,MAAM,EAAMC,QAASzC,EAAI0C,UAAW7B,MAAM,CAAC,SAAWb,EAAIiC,UAAU3B,GAAG,CAAC,MAAQ,SAASS,GAAQA,EAAO4B,kBAAkB3C,EAAI0C,UAAY1C,EAAI0C,SACvtB3B,EAAOwB,eAAgB,KAAS,CAACpC,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,YAAYzC,EAAG,SAAS,CAACE,YAAY,cAAcC,GAAG,CAAC,MAAQ,SAASS,GAAQ,OAAOf,EAAIgB,MAAM,SAAS,MAAS,CAACb,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,eAAgB5C,EAAY,SAAEG,EAAG,MAAM,CAACE,YAAY,YAAYC,GAAG,CAAC,MAAQ,SAASS,GAAQA,EAAOwB,eAAgB,KAAQ,CAACvC,EAAI6C,GAAG,GAAG7C,EAAI6C,GAAG,GAAG7C,EAAI6C,GAAG,GAAG1C,EAAG,IAAI,CAACH,EAAI4C,GAAG,kGAAkG5C,EAAI6C,GAAG,GAAG7C,EAAI6C,GAAG,KAAK7C,EAAIS,QACvhB,EAAkB,CAAC,WAAa,IAAIT,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACH,EAAI4C,GAAG,gDAAgDzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,eAAe,WAAa,IAAI5C,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACH,EAAI4C,GAAG,gEAAgEzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,oBAAoB,WAAa,IAAI5C,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACH,EAAI4C,GAAG,2EAA2EzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,0BAA4B,WAAa,IAAI5C,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,YAAYzC,EAAG,KAAK,CAACH,EAAI4C,GAAG,iBAAiBzC,EAAG,KAAK,CAACH,EAAI4C,GAAG,eAAezC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,gBAAgBzC,EAAG,MAAMA,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,2BAA2BzC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,aAAazC,EAAG,MAAMA,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,yBAAyBzC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,WAAWzC,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,iBAAiB5C,EAAI4C,GAAG,MAAMzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,YAAY5C,EAAI4C,GAAG,MAAMzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,WAAW5C,EAAI4C,GAAG,QAAQzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,kBAAkBzC,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,qBAAqBzC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,aAAazC,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,gCAAgC5C,EAAI4C,GAAG,MAAMzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,UAAU5C,EAAI4C,GAAG,QAAQzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,0BAA0B5C,EAAI4C,GAAG,MAAMzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,YAAYzC,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,sBAAsBzC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,WAAWzC,EAAG,KAAK,CAACH,EAAI4C,GAAG,2CAA2CzC,EAAG,KAAK,CAACA,EAAG,OAAO,CAACH,EAAI4C,GAAG,wBAAwB,WAAa,IAAI5C,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACH,EAAI4C,GAAG,iCAAiCzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,uBAAuB5C,EAAI4C,GAAG,wBAAwBzC,EAAG,OAAO,CAACH,EAAI4C,GAAG,mBCyF94DE,EAAW,IAGI,EAArB,6D,+DAIS,EAAAJ,UAAW,EACX,EAAAL,QAAU,GACV,EAAAU,gBAAiC,KACjC,EAAAC,SAAW,GAPpB,6EAUGtE,KAAK+C,MAAMwB,MAAsBtB,UAVpC,gCAcEuB,SAASC,KAAKC,iBAAiB,QAAS1E,KAAK2E,sBAC7C3E,KAAK4E,wBAfP,kCAmBEJ,SAASC,KAAKI,oBAAoB,QAAS7E,KAAK2E,wBAnBlD,2CAuBEG,GAEIA,EAAMjB,gBACV7D,KAAKgE,UAAW,KA1BlB,qCA6BwBc,GACJ,cAAdA,EAAMC,MACT/E,KAAKsC,MAAM,cACXwC,EAAME,iBACNF,EAAMb,qBAjCT,4CAuCMjE,KAAKsE,WAAatE,KAAKQ,MAI3BR,KAAK2D,QAAU3D,KAAKQ,MAHnBR,KAAKsE,SAAW,KAxCnB,iCA+CMtE,KAAKqE,iBAAiBY,aAAajF,KAAKqE,iBAC5CrE,KAAKqE,gBAAkBa,WAAWlF,KAAKmF,SAAUf,KAhDnD,iCAoDMpE,KAAKqE,iBAAiBY,aAAajF,KAAKqE,iBAC5CrE,KAAKqE,gBAAkB,KACvB,IAAMe,EAAMZ,SAASa,cAAc,OACnCD,EAAIE,UAAYtF,KAAK2D,QACrB3D,KAAKsE,SAAWc,EAAIG,UACpBvF,KAAKsC,MAAM,QAAS8C,EAAIG,eAzD1B,GAAuC,QACZ,gBAAzB,eAAK,CAAEC,SAAS,K,+BACT,gBAAP,kB,4BAoCD,gBADC,eAAM,U,kCAON,MA5CmB,EAAS,gBAD7B,eAAU,KACU,WC9FiY,I,wBCQlZC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAInE,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACS,IAAI,UAAUZ,EAAIoE,GAAG,CAC/K,CAAC,OAAQ,QACT,CAAC,aAAc,aACf,CAAC,OAAQ,QACT,CAAC,UAAW,WACZ,CAAC,QAAS,YAAa,SAASC,EAAOC,GAAK,OAAOnE,EAAG,KAAK,CAACsD,IAAIa,EAAIzD,MAAM,CAAC,SAAWb,EAAIiC,UAAY,EAAI,GAAG3B,GAAG,CAAC,MAAQ,SAASS,GAAQ,OAAOf,EAAIuE,OAAOF,EAAO,KAAK,QAAU,SAAStD,GAAQ,OAAOf,EAAIwE,sBAAsBzD,EAAQsD,EAAO,OAAO,CAAClE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGJ,EAAO,OAAQrE,EAAI0E,OAASL,EAAO,GAAIlE,EAAG,MAAM,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGzE,EAAI2E,KAAO,IAAM,QAAQ3E,EAAIS,YAAW,KAAKN,EAAG,mBAAmB,CAACS,IAAI,QAAQC,MAAM,CAAC,KAAO,cAAc,IAAM,QAAQ,SAAWb,EAAIiC,UAAY,EAAI,GAAG2C,SAAS,CAAC,QAAU,SAAS7D,GAAQ,OAAOf,EAAIO,eAAeQ,IAAS,MAAQ,SAASA,GAAQ,OAAOf,EAAI6E,kBAAkB9D,MAAWf,EAAIoE,GAAIpE,EAAQ,MAAE,SAAS8E,GAAM,OAAO3E,EAAG,KAAK,CAACsD,IAAIqB,EAAKC,GAAGrE,MAAM,CACrsB,oBAAoB,EACpBsE,QAAShF,EAAIiF,cAAgBH,EAAKC,IACjCzE,GAAG,CAAC,UAAY,SAASS,GAAQf,EAAIiF,YAAcH,EAAKC,IAAI,MAAQ,SAAShE,GAAQ,OAAOf,EAAIgB,MAAM,WAAY,CAAE+D,GAAID,EAAKC,GAAIG,OAAQ,eAAgB,CAAC/E,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGK,EAAK/C,SAAS5B,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGK,EAAKK,WAAWC,KAAK,UAAUjF,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGK,EAAKO,KAAKD,KAAK,UAAUjF,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGK,EAAKxD,QAAQ8D,KAAK,UAAUjF,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGzE,EAAIsF,mBAAmBR,EAAKS,gBAAe,IAAI,MACha,EAAkB,G,4DCTtB,MAAMC,EAAoB,CAAC,SAAU,YAAa,OAAQ,OAAQ,UAC5DC,EAAe,IAAIC,IACzB,IAAK,MAAMC,MAAUH,EACjB,IAAK,IAAII,EAAI,EAAGA,GAAKD,GAAOE,SAAUD,EAAG,CACrC,MAAME,EAAQH,GAAOI,MAAM,EAAGH,GAC9BH,EAAaO,IAAIF,EAAOH,IAGhC,MAAMM,EAAe,KACN,SAASC,EAAiBC,GACrC,MAAMC,EAAW,GACjB,IAAIC,EAAO,GACPC,EAAO,GACPC,GAAQ,EACRC,GAAS,EACb,SAASC,IACLL,EAASM,KAAK,CACVJ,KAAMA,GAAQ,MACdK,QAASN,EAAKO,gBAElBP,EAAO,GACPC,EAAO,GACPE,GAAS,EACTD,GAAQ,EAEZ,IAAK,MAAMM,KAAQV,EACf,GAAIK,EACAH,GAAQQ,EACRL,GAAS,MAFb,CAKA,OAAQK,GACJ,IAAK,KACDL,GAAS,EACT,SACJ,IAAK,IAED,MAAMM,EAAYT,EAAKO,cACvB,IAAKL,GAAkB,KAATD,GAAeb,EAAasB,IAAID,GAAY,CACtDR,EAAOb,EAAauB,IAAIF,GACxBT,EAAO,GACP,SAEJ,MACJ,IAAK,IACGE,EACAE,IAGAF,GAAQ,EAEZ,UAEHA,GAASN,EAAagB,KAAKJ,GACxBR,GACAI,IAIJJ,GAAQQ,EAKhB,OAFIR,GACAI,IACGL,EChEX,MAAMc,EAAY,IAAIxB,IAAI,CAEtB,CAAC,SAAU,GAEX,CAAC,OAAQ,GAET,CAAC,OAAQ,GACT,CAAC,YAAa,GACd,CAAC,SAAU,GAEX,CAAC,MAAO,KAEG,SAASyB,EAASf,GAC7B,OAAOgB,EAAWC,EAAoBjB,IAEnC,SAASgB,EAAWhB,GACvB,OAAOA,EAAS1B,KAAK,CAAC4C,EAAGC,IAAML,EAAUF,IAAIM,EAAEhB,MAAQY,EAAUF,IAAIO,EAAEjB,OACnEiB,EAAEZ,QAAQd,OAASyB,EAAEX,QAAQd,QAK9B,SAASwB,EAAoBjB,GAChC,MAAMoB,EAAc,IAAI9B,IACxB,IAAK,MAAM+B,KAAWrB,EAAU,CAC5B,IAAIsB,EAAOF,EAAYR,IAAIS,EAAQnB,MAC9BoB,IACDA,EAAO,GACPF,EAAYxB,IAAIyB,EAAQnB,KAAMoB,IAElCA,EAAKhB,KAAKe,GAEd,IAAK,MAAMhE,KAAO+D,EAAYG,OAAQ,CAClC,MAAMzI,EAAQsI,EAAYR,IAAIvD,GACxBmE,EAAgB1I,EACjBwF,KAAK,CAAC4C,EAAGC,IAAMD,EAAEX,QAAQkB,cAAcN,EAAEZ,UACzCmB,OAAO,CAACL,EAASnD,EAAKyD,KAClBA,EAAIzD,EAAM,KAEPyD,EAAIzD,EAAM,GAAGqC,QAAQqB,WAAWP,EAAQd,UAEpDa,EAAYxB,IAAIvC,EAAKmE,EAAcE,OAAO,CAACL,EAASnD,EAAKyD,KAC7CA,EAAIE,KAAK,CAACC,EAAWC,IAAYA,IAAY7D,IAAuD,IAAhD4D,EAAUvB,QAAQyB,QAAQX,EAAQd,YAGtG,MAAM0B,EAAmBC,MAAMC,KAAKf,EAAYG,QAAQG,OAAOxB,GAAiB,QAATA,GAMvE,OALAkB,EAAYxB,IAAI,OAAQwB,EAAYR,IAAI,QAAU,IAAIc,OAAOL,IACjDY,EAAiBJ,KAAKO,GAAWhB,EACpCR,IAAIwB,GACJP,KAAKQ,IAA2E,IAAvDA,EAAiB9B,QAAQyB,QAAQX,EAAQd,aAEpE,IAAIa,EAAYkB,UAAUC,QAAQ9I,GAAKA,GCnDlD,MAAM+I,EACF,YAAYjC,GACRA,EAAUA,EAAQkC,QAAQ,SAAU,IAAIjC,cACxC,MAAMkC,EAAgB,IAAIC,IAC1B,IAAK,MAAOC,EAAYvF,KAAQmF,EAAcK,QACtCD,EAAWpC,cAAcwB,QAAQzB,IAAY,GAC7CmC,EAAcI,IAAIzF,GAG1B/E,KAAKoK,cAAgBR,MAAMC,KAAKO,GAEpC,mBACI,OAAqC,IAA9BpK,KAAKoK,cAAcjD,OAE9B,MAAMf,GACF,IAAK,MAAMqE,KAAgBzK,KAAKoK,cAC5B,GAAIhE,EAAKqE,GACL,OAAO,EAEf,OAAO,GAGfP,EAAcK,QAAU,CACpB,CAAC,+BAAgC,aACjC,CAAC,iCAAkC,aACnC,CAAC,QAAS,aACV,CAAC,+BAAgC,aACjC,CAAC,iCAAkC,aACnC,CAAC,QAAS,aACV,CAAC,yBAA0B,aAC3B,CAAC,QAAS,cACZG,IAAI,EAAEC,EAAYC,KAAU,CAC1BD,EAAWR,QAAQ,MAAO,IAAIjC,cAC9B0C,IAEJ,MAAMC,EACF,YAAY5C,EAAS6C,GACjB7C,EAAUA,EAAQC,cAClB,MAAM6C,EAAkB,IAAIV,IAC5B,IAAK,MAAMW,KAAaF,EAAkB,CAEtC,IAAK7J,OAAOgK,UAAUC,eAAe/K,KAAK2K,EAAkBE,GACxD,SACJ,MAAMG,EAASL,EAAiBE,GAC1BI,EAAQnK,OAAOgI,KAAKkC,IACtBH,EAAU9C,cAAcwB,QAAQzB,IAAY,GAC5CmD,EAAM7B,KAAKqB,GAAQO,EAAOP,GAAM1C,cAAcwB,QAAQzB,IAAY,KAClE8C,EAAgBP,IAAIQ,GAG5BhL,KAAK+K,gBAAkBA,EAE3B,mBACI,OAAqC,IAA9B/K,KAAK+K,gBAAgBM,KAEhC,MAAMjF,GACF,QAASA,EAAKxD,QAAQ2G,KAAK4B,GAAUnL,KAAK+K,gBAAgB1C,IAAI8C,KAGtE,MAAMG,EACF,YAAYrD,EAASsD,EAAmBC,GACpCvD,EAAUA,EAAQC,cAClBlI,KAAKyL,mBAAqB,IAAIpB,IAAIiB,EAAiBI,oBAAoBF,GAAgBpC,OAAOjB,GAAQA,EAAKD,cAAcwB,QAAQzB,IAAY,IAEjJ,mBACI,OAAwC,IAAjCjI,KAAKyL,mBAAmBJ,KAEnC,MAAMjF,GACF,QAASA,EAAKK,WAAW8C,KAAKoC,GAAa3L,KAAKyL,mBAAmBpD,IAAIsD,IAE3E,2BAA2BC,GACvB,IAAIC,EAAS7L,KAAK8L,iBAAiBxD,IAAIsD,GAKvC,OAJKC,IACDA,EAASjC,MAAMC,KAAK,IAAIQ,IAAIuB,EAAK3B,QAAQ7D,GAAQA,EAAKK,cACtDzG,KAAK8L,iBAAiBxE,IAAIsE,EAAMC,IAE7BA,GAGfP,EAAiBQ,iBAAmB,IAAI9E,IACxC,MAAM+E,EACF,YAAY9D,GACRA,EAAUA,EAAQC,cAClBlI,KAAKgM,cAAgB,IAAI3B,IAAI0B,EAAYE,MAAM7C,OAAOxB,GAAQA,EAAKM,cAAcwB,QAAQzB,IAAY,IAEzG,mBACI,OAAmC,IAA5BjI,KAAKgM,cAAcX,KAE9B,MAAMjF,GACF,QAASA,EAAKO,KAAK4C,KAAKoC,GAAa3L,KAAKgM,cAAc3D,IAAIsD,KAGpEI,EAAYE,MAAQ,CAChB,SACA,aACA,cACA,QACA,QAEJ,MAAMC,EACF,YAAYjE,EAASsD,EAAmBC,GACpCvD,EAAUA,EAAQC,cAClBlI,KAAKiI,QAAUA,EACf,MAAMkE,EAAWD,EAAYE,YAAYZ,GACzC,IAAK,IAAItE,EAAI,EAAGC,EAASc,EAAQd,OAAS,EAAGD,EAAIC,IAAUD,EACvD,IAAKiF,EAAS9D,IAAIJ,EAAQoE,OAAOnF,EAAG,IAEhC,YADAlH,KAAKsM,cAAe,GAI5BtM,KAAKsM,cAAe,EAExB,MAAMlG,GACF,GAAIpG,KAAKsM,aACL,OAAO,EACX,MAAMrE,EAAUjI,KAAKiI,QACrB,SAAU7B,EAAKC,GAAG6B,cAAcwB,QAAQzB,IAAY,GAChD7B,EAAK/C,KAAK6E,cAAcwB,QAAQzB,IAAY,GAC5C7B,EAAKmG,YAAYhD,KAAK5B,GAAQA,EAAKO,cAAcwB,QAAQzB,IAAY,IAE7E,mBAAmB2D,GACf,IAAIO,EAAWnM,KAAKwM,aAAalE,IAAIsD,GACrC,IAAKO,EAAU,CACXA,EAAW,IAAI9B,IACf,IAAK,MAAMjE,KAAQwF,EAAM,CACrBM,EAAYO,cAAcrG,EAAKC,GAAI8F,GACnCD,EAAYO,cAAcrG,EAAK/C,KAAM8I,GACrC,IAAK,MAAMxE,KAAQvB,EAAKmG,YACpBL,EAAYO,cAAc9E,EAAMwE,GAGxCnM,KAAKwM,aAAalF,IAAIsE,EAAMO,GAEhC,OAAOA,EAEX,qBAAqB1E,EAAKiF,GACtBjF,EAAMA,EAAIS,cACV,IAAK,IAAIhB,EAAI,EAAGC,EAASM,EAAIN,OAAS,EAAGD,EAAIC,IAAUD,EACnDwF,EAAMlC,IAAI/C,EAAI4E,OAAOnF,EAAG,KAIpCgF,EAAYM,aAAe,IAAIxF,IAC/B,MAAM2F,EACF,YAAY1E,EAAS6C,EAAkBU,GACnCxL,KAAK0H,SAAWiF,EAAWC,YACtBlC,IAAImC,GAAY,IAAIA,EAAS5E,EAAS6C,EAAkBU,IACxDpC,OAAOL,IAAYA,EAAQuD,cAEpC,mBACI,OAAgC,IAAzBtM,KAAK0H,SAASP,OAEzB,MAAMf,GACF,QAASpG,KAAK0H,SAAS6B,KAAKR,GAAWA,EAAQ+D,MAAM1G,KAG7DuG,EAAWC,YAAc,CACrB1C,EACAW,EACAS,EACAS,EACAG,GAEJ,MAAMa,EAAgB,IAAI/F,IAAI,CAC1B,CAAC,MAAO2F,GACR,CAAC,SAAU9B,GACX,CAAC,YAAaS,GACd,CAAC,SAAUpB,GACX,CAAC,OAAQgC,GACT,CAAC,OAAQH,KAEE,SAASiB,EAAQtF,EAAU9E,EAASqK,GAC/C,OAAOvF,EAASgD,IAAI3B,GAAW,IAAKgE,EAAczE,IAAIS,EAAQnB,MAA/B,CAAsCmB,EAAQd,QAASrF,EAASqK,ICzKpF,SAAS7D,EAAO1G,EAAQE,EAASoG,GAC5C,MAAMkE,EAAS,EAAMxK,GACfyK,EAAY1E,EAASyE,GACrBE,EAAWJ,EAAQG,EAAWvK,EAASoG,GAC7C,OAAIoE,EAAS7D,KAAKR,GAAWA,EAAQuD,cAC1B,GACJtD,EAAKI,OAAOhD,GAAQgH,EAASC,MAAMtE,GAAWA,EAAQ+D,MAAM1G,KCFvE,IAAYkH,ECPN,SAAUC,EAAQ3E,GACvB,MAAM,IAAI4E,MAAJ,4BAA+B5E,EAA/B,ODMP,SAAY0E,GACX,4BACA,gCACA,2BAHD,CAAYA,MAAU,KEuDtB,IAAMG,EAAgB,GAGD,EAArB,6D,+DAKS,EAAAzH,KAAyB,GACzB,EAAAC,MAAO,EACP,EAAAM,YAAc,GAEd,EAAAmH,UAA2C,GATpD,6EAwCI1N,KAAK+C,MAAM4K,MAAcC,IAAoB3K,UAxCjD,qCA2CwB6B,GAAoB,WACpC4E,EAAU1J,KAAKgJ,KAAK6E,WAAU,SAAAzH,GAAI,OAAIA,EAAKC,KAAO,EAAKE,eAE7D,OADAuH,QAAQC,IAAIrE,GACJ5E,EAAMC,KACb,IAAK,QACJ/E,KAAKsC,MAAM,WAAY,CAAE+D,GAAIrG,KAAKuG,YAAaC,OAAQ,aACvD1B,EAAMb,kBACNa,EAAME,iBACN,MACD,IAAK,UACJF,EAAME,iBACNF,EAAMb,kBACU,IAAZyF,EACH1J,KAAKsC,MAAM,qBAEXtC,KAAKuG,YAAcvG,KAAKgJ,KAAKU,EAAU,GAAGrD,GAE3C,MACD,IAAK,YACJvB,EAAME,iBACNF,EAAMb,kBACFyF,EAAU1J,KAAKgJ,KAAK7B,OAAS,IAChCnH,KAAKuG,YAAcvG,KAAKgJ,KAAKU,EAAU,GAAGrD,IAE3C,MACD,IAAK,SACJvB,EAAME,iBACNF,EAAMb,kBACN,IAAI+J,EAAStE,EAAU+D,EACnBO,EAAS,IACZA,EAAS,GAEVhO,KAAKuG,YAAcvG,KAAKgJ,KAAKgF,GAAQ3H,GACrC,MAED,IAAK,WACJvB,EAAME,iBACNF,EAAMb,kBACN,IAAI,EAASyF,EAAU+D,EACjBQ,EAAMjO,KAAKgJ,KAAK7B,OAAS,EAC3B,EAAS8G,IACZ,EAASA,GAEVjO,KAAKuG,YAAcvG,KAAKgJ,KAAK,GAAQ3C,GACrC,SAvFJ,4CA4F+BvB,EAAsBoJ,GACnD,OAAQpJ,EAAMC,KACb,IAAK,QACL,IAAK,IACJ/E,KAAK6F,OAAOqI,GACZpJ,EAAME,iBACNF,EAAMb,kBACN,MACD,IAAK,YACJjE,KAAKiD,QACL6B,EAAMb,kBACNa,EAAME,iBACN,MACD,IAAK,UACJhF,KAAKsC,MAAM,qBACXwC,EAAMb,kBACNa,EAAME,iBACN,SA7GJ,0CAkH0B,WACC,IAArBhF,KAAKgJ,KAAK7B,QAIW,KAArBnH,KAAKuG,cACRvG,KAAKuG,YAAcvG,KAAKgJ,KAAK,GAAG3C,IAGjCrG,KAAKmO,WAAU,WACd,IAAMxI,EAAS,EAAK5C,MAAM4C,OACpByI,EAAU5J,SAAS6J,cACxB,wBAGKC,EACJ,EAAKV,IAAoBW,aAAe5I,EAAO4I,aAC3CC,EAAY,EAAKZ,IAAIY,UACrBC,EAAeD,EAAYF,EAEjC,GAAIF,EAAS,CACZ,IAAMM,EAAUN,EAAQO,UAAYhJ,EAAO4I,aACrCK,EAAaF,EAAUN,EAAQG,aAEjCK,EAAaH,EAChB,EAAKb,IAAIY,UAAYI,EAAaN,EACxBI,EAAUF,IACpB,EAAKZ,IAAIY,UAAYE,QAzBvB1O,KAAKuG,YAAc,KApHtB,6BA6JgBsI,GACV7O,KAAKgG,OAAS6I,EACZ7O,KAAKiG,MAGTjG,KAAKgG,KAAO,GACZhG,KAAKiG,MAAO,GAHZjG,KAAKiG,MAAO,GAMbjG,KAAKgG,KAAO6I,EACZ7O,KAAKiG,MAAO,KAvKf,iCA2KoB+C,EAAwBtG,GAC1C,OAAKA,EACE,EAAIA,EAAQ1C,KAAK4C,QAASoG,GADb,eAAIA,KA5K1B,yCAgL4BnC,GAC1B,OAAQA,GACP,KAAKyG,EAAWwB,QACf,MAAO,YACR,KAAKxB,EAAWyB,UACf,MAAO,YACR,KAAKzB,EAAW0B,OACf,MAAO,SACR,QACCzB,EAAQ1G,MAzLZ,2BAYE,IAAMoI,EAAWjP,KAAKkP,WAAWlP,KAAKiN,MAAOjN,KAAK0C,QAClD,GAAI1C,KAAKgG,MAAQiJ,EAAS9H,OAAS,EAAG,CACrC,IACIgI,EADEnJ,EAAOhG,KAAKgG,KAUlB,GARiC,kBAAtBiJ,EAAS,GAAGjJ,GACtBmJ,EAAW,SAACvG,EAAGC,GAAJ,OAAUD,EAAEvF,KAAK8F,cAAcN,EAAExF,OAClC4L,EAAS,GAAGjJ,aAAiB4D,QACvCuF,EAAW,SAACvG,EAAGC,GAAJ,OACTD,EAAU5C,GACTU,KAAK,MACLyC,cAAeN,EAAU7C,GAAMU,KAAK,SAEpCyI,EAAU,CACb,GAAInP,KAAKiG,KAAM,CACd,IAAMmJ,EAAUD,EAChBA,EAAW,SAACtG,EAAGD,GAAJ,OAAUwG,EAAQxG,EAAGC,IAEjCoG,EAASjJ,KAAKmJ,IAGhB,OAAOF,IAhCT,+BAoCE,OAAO,IAAIjI,IAAIhH,KAAKiN,MAAMvC,KAAI,SAAAtE,GAAI,MAAI,CAACA,EAAKC,GAAID,SApClD,uCAoJE,OAAOwD,MAAMC,KACZ,IAAIQ,IACHrK,KAAKiN,MAAMhD,SAAQ,SAAA7D,GAAI,OACtBA,EAAKK,WAAWiE,KAAI,SAAAvC,GAAI,OAAIA,EAAKD,0BAvJtC,GAAkC,QACzB,gBAAP,kB,6BACO,gBAAP,kB,8BACO,gBAAP,kB,4BACyB,gBAAzB,eAAK,CAAE1C,SAAS,K,+BA8GjB,gBADC,eAAM,gB,gCAgCN,MAjJmB,EAAI,gBADxB,QACoB,WCjE4X,ICQ7Y,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAIlE,EAAItB,KAASuB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe0N,MAAM,CAAGC,gBAAiBhO,EAAIgO,iBAAmB1N,GAAG,CAAC,MAAQ,SAASS,GAAQA,EAAO4B,qBAAsB,CAACxC,EAAG,SAAS,CAACA,EAAG,KAAK,CAAEH,EAAY,SAAEG,EAAG,SAAS,CAACE,YAAY,cAAcC,GAAG,CAAC,MAAQ,SAASS,GAAQ,OAAOf,EAAIgB,MAAM,SAAS,MAAS,CAACb,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,kBAAkB5C,EAAIS,KAAKT,EAAI4C,GAAG,IAAI5C,EAAIyE,GAAGzE,EAAI8E,KAAK/C,MAAM,OAAO5B,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGzE,EAAI8E,KAAKC,SAAU/E,EAAI8E,KAAe,WAAE3E,EAAG,UAAU,CAACE,YAAY,cAAc,CAACL,EAAI4C,GAAG,IAAI5C,EAAIyE,GAAGzE,EAAI8E,KAAKmJ,YAAY,OAAOjO,EAAIS,KAAMT,EAAI8E,KAAW,OAAE3E,EAAG,UAAU,CAACA,EAAG,IAAI,CAACU,MAAM,CAAC,KAAOb,EAAI8E,KAAKI,OAAO,OAAS,SAAS,IAAM,wBAAwB,CAAClF,EAAI4C,GAAG,cAAc5C,EAAIS,KAAKN,EAAG,UAAU,CAAEH,EAAW,QAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAIkJ,MAAM,CAAC/I,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,SAAS5C,EAAI4C,GAAG,QAAQ5C,EAAIyE,GAAGzE,EAAIkO,YAAc,cAAgB,IAAI,OAAOlO,EAAIS,KAAMT,EAAa,UAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAImO,SAAS,CAAChO,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,YAAY5C,EAAI4C,GAAG,WAAW5C,EAAIyE,GAAGzE,EAAIoO,cAAgB,cAAgB,IAAI,OAAOpO,EAAIS,KAAMT,EAAe,YAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAIkJ,MAAM,CAAC/I,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,SAAS5C,EAAI4C,GAAG,eAAe5C,EAAIS,KAAMT,EAAiB,cAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAImO,SAAS,CAAChO,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,YAAY5C,EAAI4C,GAAG,iBAAiB5C,EAAIS,KAAMT,EAAe,YAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAIkJ,MAAM,CAAC/I,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,SAAS5C,EAAI4C,GAAG,gBAAgB5C,EAAIS,KAAMT,EAAiB,cAAEG,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQN,EAAImO,SAAS,CAAChO,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACL,EAAI4C,GAAG,YAAY5C,EAAI4C,GAAG,kBAAkB5C,EAAIS,OAAON,EAAG,UAAU,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,aAAazC,EAAG,QAAQ,CAACA,EAAG,QAAQH,EAAIoE,GAAIpE,EAAI8E,KAAY,SAAE,SAASuJ,GAAU,OAAOlO,EAAG,KAAK,CAACsD,IAAI4K,GAAU,CAAClO,EAAG,KAAK,CAACH,EAAI4C,GAAG5C,EAAIyE,GAAGzE,EAAIsO,WAAWD,OAAclO,EAAG,KAAKH,EAAIoE,GAAIpE,EAAIuO,aAAaF,IAAW,SAASG,GAAM,OAAOrO,EAAG,IAAI,CAACsD,IAAI+K,EAAKrM,OAAO9B,YAAY,kBAAkBQ,MAAM,CAAC,KAAO2N,EAAKrM,OAAO,OAAS,SAAS,IAAM,wBAAwB,CAAChC,EAAG,MAAM,CAACU,MAAM,CAAC,MAAQ2N,EAAKC,SAAS,IAAMD,EAAKE,KAAK,OAAS,KAAK,MAAQ,aAAY,QAAO,OAAQ1O,EAAI8E,KAAgB,YAAE3E,EAAG,UAAU,CAACA,EAAG,KAAK,CAACH,EAAI4C,GAAG,aAAazC,EAAG,IAAI,CAAC+B,SAAS,CAAC,UAAYlC,EAAIyE,GAAGzE,EAAI2O,SAAS3O,EAAI8E,KAAK8J,mBAAmB5O,EAAIS,QAC52E,EAAkB,GCDhBoO,I,sEAAc,CACnB,KACA,KACA,KACA,KACA,aACA,IACA,IACA,KACA,KACA,KACA,KACA,IACA,IACA,SACA,KACA,SACA,OACA,KACA,KACA,MACA,QACA,QACA,UACA,QACA,KACA,KACA,KACA,QAEKC,GAAiE,CACtExH,EAAG,CAAC,QACJyH,IAAK,CAAC,QAEDC,GAA0B,CAAC,OAAQ,OACnCC,GAAiB,CAAC,OAAQ,SAC1BC,GAEF,CACH5H,EAAG,CACFnF,OAAQ,SACRgN,IAAK,wBAID,SAAU,GAASC,GACxB,IAAMC,EAASnM,SAASa,cAAc,OAChCuL,EAAMpM,SAASa,cAAc,OACnCuL,EAAItL,UAAYoL,EAEhB,cAAmB9G,MAAMC,KAAK+G,EAAIC,YAAlC,eAA+C,CAA1C,IAAMC,EAAI,KAAgC,uBAC9C,YAA4BC,GAAgBD,GAA5C,+CAA8D,KAAnDE,EAAmD,QAC7DL,EAAOM,YAAYD,IAF0B,mFAM/C,OAAOL,EAAOrL,UAGf,IAAM4L,GAAkB,UAExB,SAASH,GAAgBD,GACxB,GAAIA,EAAKK,WAAaC,KAAKC,aAAc,MAAO,CAACP,GACjD,IAAMQ,EAAKR,EACPS,EAAc,GACZC,EAAUF,EAAGE,QAAQtJ,cAC3B,GAAIiI,GAAYsB,SAASD,GAAU,CAClCD,EAAIvJ,KAAKsJ,GACT,IAAMnP,EAAgByH,MAAMqB,UAAU5D,MAAMlH,KAAKmR,EAAGI,YAC9CC,EAAevB,GAAkBoB,IAAY,GAHjB,uBAIlC,YAAmBrP,EAAnB,+CAA0B,KAAfyP,EAAe,QACzB,GAAKD,EAAaF,SAASG,EAAKvO,OAEzB,GAAIiN,GAAwBmB,SAASG,EAAKvO,MAAO,CACvD,IAAMwO,EAAgBD,EAAKpR,MAAMsM,MAAMoE,IACnCW,IAAkBtB,GAAekB,SAASI,EAAc,KAC3DP,EAAGQ,gBAAgBF,EAAKvO,YAJzBiO,EAAGQ,gBAAgBF,EAAKvO,OANQ,kFAclC,IAAM0O,EAAUvB,GAAkBgB,GAClC,GAAIO,EACH,IAAK,IAAMC,KAAYD,EACjBA,EAAQ7G,eAAe8G,IAC5BV,EAAGW,aAAaD,EAAUD,EAAQC,QAG9B,CACNT,EAAIvJ,KAAKxD,SAAS0N,eAAT,WAA4BV,EAA5B,OADH,2BAEN,YAAsBF,EAAGT,WAAzB,+CAAqC,KAA1BsB,EAA0B,QACpCZ,EAAMA,EAAIa,OAAOrB,GAAgBoB,KAH5B,kFAKNZ,EAAIvJ,KAAKxD,SAAS0N,eAAT,YAA6BV,EAA7B,OAEV,OAAOD,E,iBCHFc,GAA4D,CACjE,CAAC,SAAU,0BAA2B,cACtC,CAAC,aAAc,gCAAiC,kBAChD,CAAC,UAAW,yBAA0B,eACtC,CAAC,QAAS,iCAAkC,aAC5C,CAAC,UAAW,6BAA8B,eAC1C,CAAC,WAAY,8BAA+B,gBAC5C,CAAC,SAAU,wBAAyB,cACpC,CAAC,UAAW,KAAM,gBAIE,GAArB,+LAQGrS,KAAK+C,MAAMuP,QAAwBrP,UARtC,iCAWoB0M,GAClB,IAAMxE,EAASnL,KAAK4C,QAAQ+M,GAC5B,OAAIxE,GAAUA,EAAOoH,YAAoBpH,EAAOoH,YACzC5C,IAdT,mCAiBsBA,GACpB,IAAMxE,EAASnL,KAAK4C,QAAQ+M,GAC5B,OAAKxE,EACEkH,GACLjJ,QAAO,SAAA2G,GAAQ,OAAI5E,EAAO4E,EAAS,OACnCrF,KAAI,SAAAqF,GACJ,IAAMvP,EAAQ2K,EAAO4E,EAAS,IACxBtM,EAASsM,EAAS,GAAG5F,QAAQ,KAAM3J,GACzC,MAAO,CACNiD,SACAsM,SAAUA,EAAS,GAAG,GAAGyC,cAAgBzC,EAAS,GAAG1I,MAAM,GAC3D2I,KAAM,SAAWD,EAAS,OATT,KAnBtB,+BAiCkB0C,GAChB,OAAO,GAASA,KAlClB,2LAwFQzS,KAAK0S,OAAOC,SAAS,cAAe,CACzC1F,MAAO,IAAI5C,IAAI,CAACrK,KAAKoG,KAAKC,OAzF7B,iSAkGQrG,KAAK0S,OAAOC,SACjB,2BACA3S,KAAKoG,KAAKwM,WAAa5S,KAAKoG,KAAKyM,WApGpC,uKAqCiB,WACf,OAAO7S,KAAKiN,MAAM1D,MAAK,SAAAnD,GAAI,OAAIA,EAAKC,KAAO,EAAKvE,cAtClD,sCA0CE,OAAO9B,KAAKoG,KAAK0M,QAAQpI,KAAI,SAAAoI,GAAO,qBAAYA,EAAZ,SAAyBpM,KAAK,OA1CpE,kCA8CE,QAAKqM,GAAA,KAAYC,4BACXhT,KAAKoG,KAAKS,MAAQyG,EAAWyB,cAC1B/O,KAAKoG,KAAKS,MAAQyG,EAAW0B,WAhDxC,oCAmDE,QAAK+D,GAAA,KAAYC,4BACXhT,KAAKoG,KAAKS,MAAQyG,EAAWyB,eACzB/O,KAAKoG,KAAKS,MAAQyG,EAAW0B,WArDzC,kCAyDE,QAAK+D,GAAA,KAAYE,wBACbjT,KAAKoG,KAAKS,MAAQyG,EAAWyB,aA1DnC,oCA8DE,QAAKgE,GAAA,KAAYE,yBACXjT,KAAKoG,KAAKS,MAAQyG,EAAWyB,aA/DrC,gCAoFE,SAAU/O,KAAKoG,KAAKS,MAAQyG,EAAW0B,UApFzC,8BA8FE,OAAOhP,KAAKoG,KAAKS,QAAUyG,EAAWwB,YA9FxC,GAAyC,QAEhC,gBAAP,kB,gCACO,gBAAP,kB,+BACO,gBAAP,kB,6BACwC,gBAAxC,eAAK,CAAElH,KAAMsL,QAAS1N,SAAS,K,gCALZ,GAAW,gBAD/B,eAAU,KACU,cCvGmY,MCQpZ,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,wlBC8Bf,IAAM2N,GAAU,8DASK,GAArB,6D,+DAES,EAAAzQ,OAAS,GACT,EAAAE,QAAoB,GACpB,EAAAqK,MAAiB,GACjB,EAAAmG,WAAsB,GACtB,EAAAtR,SAA0B,KANnC,4OASMuR,EAA2C,GAE3CN,GAAA,KAAYE,uBACfI,EAAoBrT,KAAKsT,UAAUP,GAAA,KAAYQ,qBAZlD,SAesDC,QAAQC,IAAI,CAC/DzT,KAAKsT,UAAmBH,GAAU,aAClCnT,KAAKsT,UAAoBH,GAAU,eACnCE,IAlBH,sCAeGrT,KAAKiN,MAfR,KAeejN,KAAK4C,QAfpB,KAe6B5C,KAAKoT,WAflC,+KAuBkB3L,GAChBzH,KAAK8B,SAAW,KAChB9B,KAAK0C,OAAS+E,IAzBhB,2FA4B4BiM,GA5B5B,uGA6BoBC,MAAMD,GA7B1B,cA6BQE,EA7BR,gBA8BeA,EAAIC,OA9BnB,oLAiC0BC,GAAkB,WAC1C9T,KAAK8B,SAAW,KACZgS,GACH9T,KAAKmO,WAAU,WACb,EAAKpL,MAAMC,UAAkBC,aArClC,qCA0CwB6B,GAAoB,WACxB,WAAdA,EAAMC,MACT/E,KAAK8B,SAAW,GAChB9B,KAAKmO,WAAU,WACb,EAAKpL,MAAMC,UAAkBC,cA9ClC,kCAmD+C,WAA3BoD,EAA2B,EAA3BA,GAAIG,EAAuB,EAAvBA,OACtBxG,KAAK8B,SAAWuE,EACD,aAAXG,GACHxG,KAAKmO,WAAU,WACd,IAAM4F,EAAS,EAAKhR,MAAMgR,OAC1BA,EAAO9Q,aAxDX,yCA8DGjD,KAAK+C,MAAMiG,KAAa/F,UA9D3B,qCAkEE,IAAM+Q,EAAchU,KAAK0S,OAAO7L,MAAMoN,QAAQC,aACxCC,EAAYnU,KAAKiN,MAEjBmH,EAAa,IAAIpN,IAAImN,EAAUzJ,KAAI,SAAAtE,GAAI,MAAI,CAACA,EAAKC,GAAID,OACrDiO,EAAe,IAAIrN,IAAIgN,EAAYtJ,KAAI,SAAAtE,GAAI,MAAI,CAACA,EAAKkO,OAAQlO,OAC7DmO,EAAc,IAAIvN,IAAIhH,KAAKoT,WAAW1I,KAAI,SAAAtE,GAAI,MAAI,CAACA,EAAKC,GAAID,OAE5DoO,EAAiCR,EAAYtJ,KAAI,SAAAtE,GACtD,IAAMqO,EAAWL,EAAW9L,IAAIlC,EAAKkO,QAC/BI,EAAWL,EAAahM,IAAIjC,EAAKkO,QACpChH,EAAW0B,OACX1B,EAAWwB,QACR6F,EAAcJ,EAAYlM,IAAIjC,EAAKkO,QACtChH,EAAWyB,UACXzB,EAAWwB,QACRjI,EAAoB6N,EAAWC,EAErC,OAAIF,EACH,MACIA,EADJ,CAEC5N,UAGM,CACNA,QACAR,GAAID,EAAKkO,OACT7N,WAAY,GACZpD,KAAM+C,EAAKkO,OACXM,aAAa,EACb9B,QAAS,GACTnM,KAAM,GACNuJ,YAAa,GACb2C,UAAW,GACXD,UAAW,GACXrG,YAAa,GACb3J,QAAS,OAKNiS,EAAoBV,EACxB/K,QAAO,SAAAhD,GAAI,OAAKiO,EAAahM,IAAIjC,EAAKC,OACtCqE,KAAI,SAAAtE,GACJ,aACIA,EADJ,CAECS,MAAOyG,EAAWwB,aAIrB,+BACI0F,EAAapL,QAAO,SAAAmI,GAAG,OAAKA,EAAIlL,GAAGiD,WAAW,qBADlD,eAEIuL,QArHN,GAAuC,QAAlB,GAAS,gBAP7B,eAAU,CACVC,WAAY,CACXC,UAAA,EACAC,KAAA,EACAC,YAAA,OAGmB,cC1DmZ,MCQpa,I,UAAY,eACd,GACA5T,EACA8B,GACA,EACA,KACA,WACA,OAIa,gB,2CCnBf,yBAAglB,EAAG","file":"js/chunk-d699e572.752588f8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"","'use strict';\n\nvar anObject = require('./_an-object');\nvar sameValue = require('./_same-value');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[SEARCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative($search, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=d6811b48&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=d6811b48&scoped=true&lang=scss&\"","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=style&index=0&id=4a00eee6&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=style&index=0&id=4a00eee6&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pages\",on:{\"keydown\":_vm.keydownHandler}},[(!_vm.selected)?_c('div',{staticClass:\"page fly-left\",class:{ blured: _vm.selected }},[_c('search-bar',{ref:\"searchBar\",staticClass:\"search-bar\",attrs:{\"disabled\":!!_vm.selected},on:{\"focus-list\":_vm.focusListHandler,\"leave\":function($event){return _vm.$emit('leave')}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('list',{ref:\"list\",staticClass:\"list\",attrs:{\"search\":_vm.search,\"authors\":_vm.authors,\"packs\":_vm.packsArgmented,\"disabled\":!!_vm.selected},on:{\"selected\":_vm.onSelect,\"select-search-bar\":function($event){return _vm.$refs.searchBar.focus()}}})],1):_vm._e(),(_vm.selected)?_c('div',{staticClass:\"page fly-right\"},[_c('pack-display',{ref:\"dialog\",staticClass:\"pack-display\",attrs:{\"authors\":_vm.authors,\"packs\":_vm.packsArgmented,\"selected\":_vm.selected,\"show-back\":\"\"},on:{\"leave\":_vm.leavePackDisplay}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-area\"},[_c('div',{staticClass:\"search-bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],ref:\"input\",staticClass:\"input\",attrs:{\"disabled\":_vm.disabled},domProps:{\"value\":(_vm.message)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.message=$event.target.value},_vm.onUpdate],\"click\":function($event){$event.dontCloseHelp = true},\"keydown\":_vm.keydownHandler}}),_c('button',{class:{ help: true, toggled: _vm.showHelp },attrs:{\"disabled\":_vm.disabled},on:{\"click\":function($event){$event.stopPropagation();_vm.showHelp = !_vm.showHelp;\n\t\t\t\t$event.dontCloseHelp = true;}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"info\")])]),_c('button',{staticClass:\"exit-button\",on:{\"click\":function($event){return _vm.$emit('leave', true)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"clear\")])])]),(_vm.showHelp)?_c('div',{staticClass:\"info-area\",on:{\"click\":function($event){$event.dontCloseHelp = true}}},[_vm._m(0),_vm._m(1),_vm._m(2),_c('p',[_vm._v(\" To limit your search to specific attributes of a pack, you can use the following prefixes: \")]),_vm._m(3),_vm._m(4)]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Enter the text you want to search for. E.g. \"),_c('code',[_vm._v(\"Monika\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" If multiple words are given, each word must be found. E.g. \"),_c('code',[_vm._v(\"Monika Pose\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" To search phrases with spaces, surround them with double quotes. E.g. \"),_c('code',[_vm._v(\"\\\"Monika R63\\\" Pose\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_c('th',[_vm._v(\"Prefix\")]),_c('th',[_vm._v(\"Description\")]),_c('th',[_vm._v(\"Example\")])]),_c('tr',[_c('td',[_vm._v(\"Character:\")]),_c('td'),_c('td',[_c('code',[_vm._v(\"Character: Monika\")])])]),_c('tr',[_c('td',[_vm._v(\"Artist:\")]),_c('td'),_c('td',[_c('code',[_vm._v(\"Artist: edave64\")])])]),_c('tr',[_c('td',[_vm._v(\"Type:\")]),_c('td',[_c('code',[_vm._v(\"Expressions\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Styles\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Poses\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"Characters\")])]),_c('td',[_c('code',[_vm._v(\"Type: Poses\")])])]),_c('tr',[_c('td',[_vm._v(\"Engine:\")]),_c('td',[_c('code',[_vm._v(\"Doki Doki Dialog Generator\")]),_vm._v(\", \"),_c('code',[_vm._v(\"DDDG\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"Doki Doki Comic Club\")]),_vm._v(\", \"),_c('code',[_vm._v(\"DDCC\")])]),_c('td',[_c('code',[_vm._v(\"Engine: DDCC\")])])]),_c('tr',[_c('td',[_vm._v(\"Pack:\")]),_c('td',[_vm._v(\"The pack itself must contain the text\")]),_c('td',[_c('code',[_vm._v(\"Pack: Angry\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" Prefixes can be shorted, so \"),_c('code',[_vm._v(\"Character: Monika\")]),_vm._v(\" can be shortend to \"),_c('code',[_vm._v(\"C: Monika\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Watch } from 'vue-property-decorator';\n\nconst debounce = 250;\n\n@Component({})\nexport default class SearchBar extends Vue {\n\t@Prop({ default: false }) private disabled!: boolean;\n\t@Prop() private value!: string;\n\n\tprivate showHelp = false;\n\tprivate message = '';\n\tprivate debounceTimeout: number | null = null;\n\tprivate lastSend = '';\n\n\tpublic focus() {\n\t\t(this.$refs.input as HTMLElement).focus();\n\t}\n\n\tprivate created() {\n\t\tdocument.body.addEventListener('click', this.documentClickHandler);\n\t\tthis.updateInternalValue();\n\t}\n\n\tprivate destroyed() {\n\t\tdocument.body.removeEventListener('click', this.documentClickHandler);\n\t}\n\n\tprivate documentClickHandler(\n\t\tevent: MouseEvent & { dontCloseHelp?: boolean }\n\t) {\n\t\tif (event.dontCloseHelp) return;\n\t\tthis.showHelp = false;\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'ArrowDown') {\n\t\t\tthis.$emit('focus-list');\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t@Watch('value')\n\tprivate updateInternalValue() {\n\t\tif (this.lastSend === this.value) {\n\t\t\tthis.lastSend = '';\n\t\t\treturn;\n\t\t}\n\t\tthis.message = this.value;\n\t}\n\n\tprivate onUpdate() {\n\t\tif (this.debounceTimeout) clearTimeout(this.debounceTimeout);\n\t\tthis.debounceTimeout = setTimeout(this.doUpdate, debounce);\n\t}\n\n\tprivate doUpdate() {\n\t\tif (this.debounceTimeout) clearTimeout(this.debounceTimeout);\n\t\tthis.debounceTimeout = null;\n\t\tconst div = document.createElement('div');\n\t\tdiv.innerHTML = this.message;\n\t\tthis.lastSend = div.innerText;\n\t\tthis.$emit('input', div.innerText);\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchBar.vue?vue&type=template&id=2bae2f1a&scoped=true&\"\nimport script from \"./SearchBar.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchBar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bae2f1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('table',[_c('thead',[_c('tr',{ref:\"header\"},_vm._l(([\n\t\t\t\t\t\t['name', 'Pack'],\n\t\t\t\t\t\t['characters', 'Character'],\n\t\t\t\t\t\t['kind', 'Type'],\n\t\t\t\t\t\t['authors', 'Authors'],\n\t\t\t\t\t\t['state', 'Status'] ]),function(header,idx){return _c('th',{key:idx,attrs:{\"tabindex\":_vm.disabled ? -1 : 0},on:{\"click\":function($event){return _vm.sortBy(header[0])},\"keydown\":function($event){return _vm.headerKeydownListener($event, header[0])}}},[_c('div',[_c('div',[_vm._v(_vm._s(header[1]))]),(_vm.sort === header[0])?_c('div',[_vm._v(_vm._s(_vm.desc ? '▼' : '▲'))]):_vm._e()])])}),0)]),_c('transition-group',{ref:\"tbody\",attrs:{\"name\":\"tbody-group\",\"tag\":\"tbody\",\"tabindex\":_vm.disabled ? -1 : 0},nativeOn:{\"keydown\":function($event){return _vm.keydownHandler($event)},\"focus\":function($event){return _vm.updateFocusedItem($event)}}},_vm._l((_vm.list),function(pack){return _c('tr',{key:pack.id,class:{\n\t\t\t\t\t'tbody-group-item': true,\n\t\t\t\t\tfocused: _vm.focusedItem === pack.id,\n\t\t\t\t},on:{\"mousedown\":function($event){_vm.focusedItem = pack.id},\"click\":function($event){return _vm.$emit('selected', { id: pack.id, source: 'pointer' })}}},[_c('td',[_vm._v(_vm._s(pack.name))]),_c('td',[_vm._v(_vm._s(pack.characters.join(', ')))]),_c('td',[_vm._v(_vm._s(pack.kind.join(', ')))]),_c('td',[_vm._v(_vm._s(pack.authors.join(', ')))]),_c('td',[_vm._v(_vm._s(_vm.translatePackState(pack.state)))])])}),0)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const availablePrefixes = ['author', 'character', 'type', 'pack', 'engine'];\nconst prefixLookup = new Map();\nfor (const prefix of availablePrefixes) {\n    for (let i = 1; i <= prefix.length; ++i) {\n        const short = prefix.slice(0, i);\n        prefixLookup.set(short, prefix);\n    }\n}\nconst spaceMatcher = /\\s/;\nexport default function parseSearchwords(str) {\n    const matchers = [];\n    let word = '';\n    let type = '';\n    let quote = false;\n    let escape = false;\n    function finishWord() {\n        matchers.push({\n            type: type || 'all',\n            payload: word.toLowerCase(),\n        });\n        word = '';\n        type = '';\n        escape = false;\n        quote = false;\n    }\n    for (const char of str) {\n        if (escape) {\n            word += char;\n            escape = false;\n            continue;\n        }\n        switch (char) {\n            case '\\\\':\n                escape = true;\n                continue;\n            case ':':\n                // eslint-disable-next-line no-case-declarations\n                const lowerWord = word.toLowerCase();\n                if (!quote && type === '' && prefixLookup.has(lowerWord)) {\n                    type = prefixLookup.get(lowerWord);\n                    word = '';\n                    continue;\n                }\n                break;\n            case '\"':\n                if (quote) {\n                    finishWord();\n                }\n                else {\n                    quote = true;\n                }\n                continue;\n        }\n        if (!quote && spaceMatcher.test(char)) {\n            if (word) {\n                finishWord();\n            }\n        }\n        else {\n            word += char;\n        }\n    }\n    if (word)\n        finishWord();\n    return matchers;\n}\n","const matchCost = new Map([\n    // static property equals\n    ['engine', 0],\n    // search on pack properties\n    ['pack', 1],\n    // find in array\n    ['type', 2],\n    ['character', 2],\n    ['author', 2],\n    // mayhem\n    ['all', 3],\n]);\nexport default function optimize(matchers) {\n    return sortByCost(deduplicateMatchers(matchers));\n}\nexport function sortByCost(matchers) {\n    return matchers.sort((a, b) => matchCost.get(a.type) - matchCost.get(b.type) ||\n        b.payload.length - a.payload.length);\n}\n/**\n * @private\n */\nexport function deduplicateMatchers(matchers) {\n    const splitByType = new Map();\n    for (const matcher of matchers) {\n        let list = splitByType.get(matcher.type);\n        if (!list) {\n            list = [];\n            splitByType.set(matcher.type, list);\n        }\n        list.push(matcher);\n    }\n    for (const key of splitByType.keys()) {\n        const value = splitByType.get(key);\n        const quickDeprefix = value\n            .sort((a, b) => a.payload.localeCompare(b.payload))\n            .filter((matcher, idx, ary) => {\n            if (!ary[idx + 1])\n                return true;\n            return !ary[idx + 1].payload.startsWith(matcher.payload);\n        });\n        splitByType.set(key, quickDeprefix.filter((matcher, idx, ary) => {\n            return !ary.find((collision, collIdx) => collIdx !== idx && collision.payload.indexOf(matcher.payload) !== -1);\n        }));\n    }\n    const specializedTypes = Array.from(splitByType.keys()).filter(type => type !== 'all');\n    splitByType.set('all', (splitByType.get('all') || []).filter(matcher => {\n        return !specializedTypes.find(typeKey => splitByType\n            .get(typeKey)\n            .find(competingMatcher => competingMatcher.payload.indexOf(matcher.payload) !== -1));\n    }));\n    return [...splitByType.values()].flatMap(x => x);\n}\n","class EngineMatcher {\n    constructor(payload) {\n        payload = payload.replace(/[\\s-]/g, '').toLowerCase();\n        const matchingProps = new Set();\n        for (const [searchText, key] of EngineMatcher.engines) {\n            if (searchText.toLowerCase().indexOf(payload) >= 0) {\n                matchingProps.add(key);\n            }\n        }\n        this.matchingProps = Array.from(matchingProps);\n    }\n    get isImpossible() {\n        return this.matchingProps.length === 0;\n    }\n    match(pack) {\n        for (const matchingProp of this.matchingProps) {\n            if (pack[matchingProp])\n                return true;\n        }\n        return false;\n    }\n}\nEngineMatcher.engines = [\n    ['Doki Doki Dialog Generator 1', 'dddg1Path'],\n    ['Doki Doki Dialouge Generator 1', 'dddg1Path'],\n    ['DDDG1', 'dddg1Path'],\n    ['Doki Doki Dialog Generator 2', 'dddg2Path'],\n    ['Doki Doki Dialouge Generator 2', 'dddg2Path'],\n    ['DDDG2', 'dddg2Path'],\n    ['Doki Doki Comic Club 2', 'ddcc2Path'],\n    ['DDCC2', 'ddcc2Path'],\n].map(([searchTerm, prop]) => [\n    searchTerm.replace(/\\s/g, '').toLowerCase(),\n    prop,\n]);\nclass AuthorMatcher {\n    constructor(payload, peopleRepository) {\n        payload = payload.toLowerCase();\n        const matchingAuthors = new Set();\n        for (const authorKey in peopleRepository) {\n            /* istanbul ignore next */\n            if (!Object.prototype.hasOwnProperty.call(peopleRepository, authorKey))\n                continue;\n            const author = peopleRepository[authorKey];\n            const props = Object.keys(author);\n            if (authorKey.toLowerCase().indexOf(payload) >= 0 ||\n                props.find(prop => author[prop].toLowerCase().indexOf(payload) >= 0)) {\n                matchingAuthors.add(authorKey);\n            }\n        }\n        this.matchingAuthors = matchingAuthors;\n    }\n    get isImpossible() {\n        return this.matchingAuthors.size === 0;\n    }\n    match(pack) {\n        return !!pack.authors.find(author => this.matchingAuthors.has(author));\n    }\n}\nclass CharacterMatcher {\n    constructor(payload, _peopleRepository, packRepository) {\n        payload = payload.toLowerCase();\n        this.matchingCharacters = new Set(CharacterMatcher.getUniqueCharacters(packRepository).filter(char => char.toLowerCase().indexOf(payload) >= 0));\n    }\n    get isImpossible() {\n        return this.matchingCharacters.size === 0;\n    }\n    match(pack) {\n        return !!pack.characters.find(character => this.matchingCharacters.has(character));\n    }\n    static getUniqueCharacters(repo) {\n        let unique = this.uniqueCharacters.get(repo);\n        if (!unique) {\n            unique = Array.from(new Set(repo.flatMap(pack => pack.characters)));\n            this.uniqueCharacters.set(repo, unique);\n        }\n        return unique;\n    }\n}\nCharacterMatcher.uniqueCharacters = new Map();\nclass TypeMatcher {\n    constructor(payload) {\n        payload = payload.toLowerCase();\n        this.matchingTypes = new Set(TypeMatcher.types.filter(type => type.toLowerCase().indexOf(payload) >= 0));\n    }\n    get isImpossible() {\n        return this.matchingTypes.size === 0;\n    }\n    match(pack) {\n        return !!pack.kind.find(character => this.matchingTypes.has(character));\n    }\n}\nTypeMatcher.types = [\n    'Styles',\n    'Characters',\n    'Expressions',\n    'Poses',\n    'Misc',\n];\nclass PackMatcher {\n    constructor(payload, _peopleRepository, packRepository) {\n        payload = payload.toLowerCase();\n        this.payload = payload;\n        const triplets = PackMatcher.getTriplets(packRepository);\n        for (let i = 0, length = payload.length - 2; i < length; ++i) {\n            if (!triplets.has(payload.substr(i, 3))) {\n                this.isImpossible = true;\n                return;\n            }\n        }\n        this.isImpossible = false;\n    }\n    match(pack) {\n        if (this.isImpossible)\n            return false;\n        const payload = this.payload;\n        return !!(pack.id.toLowerCase().indexOf(payload) >= 0 ||\n            pack.name.toLowerCase().indexOf(payload) >= 0 ||\n            pack.searchWords.find(word => word.toLowerCase().indexOf(payload) >= 0));\n    }\n    static getTriplets(repo) {\n        let triplets = this.tripletCache.get(repo);\n        if (!triplets) {\n            triplets = new Set();\n            for (const pack of repo) {\n                PackMatcher.splitTriplets(pack.id, triplets);\n                PackMatcher.splitTriplets(pack.name, triplets);\n                for (const word of pack.searchWords) {\n                    PackMatcher.splitTriplets(word, triplets);\n                }\n            }\n            this.tripletCache.set(repo, triplets);\n        }\n        return triplets;\n    }\n    static splitTriplets(str, cache) {\n        str = str.toLowerCase();\n        for (let i = 0, length = str.length - 2; i < length; ++i) {\n            cache.add(str.substr(i, 3));\n        }\n    }\n}\nPackMatcher.tripletCache = new Map();\nclass AllMatcher {\n    constructor(payload, peopleRepository, packRepository) {\n        this.matchers = AllMatcher.allMatchers\n            .map(compiler => new compiler(payload, peopleRepository, packRepository))\n            .filter(matcher => !matcher.isImpossible);\n    }\n    get isImpossible() {\n        return this.matchers.length === 0;\n    }\n    match(pack) {\n        return !!this.matchers.find(matcher => matcher.match(pack));\n    }\n}\nAllMatcher.allMatchers = [\n    EngineMatcher,\n    AuthorMatcher,\n    CharacterMatcher,\n    TypeMatcher,\n    PackMatcher,\n];\nconst CompilerMatch = new Map([\n    ['all', AllMatcher],\n    ['author', AuthorMatcher],\n    ['character', CharacterMatcher],\n    ['engine', EngineMatcher],\n    ['pack', PackMatcher],\n    ['type', TypeMatcher],\n]);\nexport default function compile(matchers, authors, packs) {\n    return matchers.map(matcher => new (CompilerMatch.get(matcher.type))(matcher.payload, authors, packs));\n}\n","import parse from './parse';\nimport optimize from './optimize';\nimport compile from './compile';\nexport default function filter(search, authors, list) {\n    const parsed = parse(search);\n    const optimized = optimize(parsed);\n    const compiled = compile(optimized, authors, list);\n    if (compiled.find(matcher => matcher.isImpossible))\n        return [];\n    return list.filter(pack => compiled.every(matcher => matcher.match(pack)));\n}\n","import { IPack } from '@edave64/dddg-repo-filters/dist/pack';\r\n\r\nexport interface SelectedEvent {\r\n\tid: string;\r\n\tsource: 'keyboard' | 'pointer';\r\n}\r\n\r\nexport enum PackStates {\r\n\tUnknown = 0b00,\r\n\tInstalled = 0b01,\r\n\tActive = 0b10,\r\n}\r\n\r\nexport interface IPackWithState extends IPack {\r\n\tstate: PackStates;\r\n}\r\n","export function exhaust(a: never): never {\r\n\tthrow new Error(`Unexpected value \"${a}\"`);\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { IPack } from '@edave64/dddg-repo-filters/dist/pack';\nimport { IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\nimport run from '@edave64/dddg-repo-filters/dist/main';\nimport { PackStates, IPackWithState } from './types';\nimport { exhaust } from '@/util/exhaust';\n\nconst pageKeyMoveBy = 10;\n\n@Component\nexport default class List extends Vue {\n\t@Prop() private search!: string;\n\t@Prop() private authors!: IAuthors;\n\t@Prop() private packs!: IPackWithState[];\n\t@Prop({ default: false }) private disabled!: boolean;\n\tprivate sort: keyof IPack | '' = '';\n\tprivate desc = false;\n\tprivate focusedItem = '';\n\n\tprivate wordCache: { [id: string]: Set<string> } = {};\n\n\tpublic get list(): IPackWithState[] {\n\t\tconst filtered = this.filterList(this.packs, this.search);\n\t\tif (this.sort && filtered.length > 0) {\n\t\t\tconst sort = this.sort as keyof IPack;\n\t\t\tlet sortFunc: ((a: IPack, b: IPack) => number) | undefined;\n\t\t\tif (typeof filtered[0][sort] === 'string') {\n\t\t\t\tsortFunc = (a, b) => a.name.localeCompare(b.name);\n\t\t\t} else if (filtered[0][sort] instanceof Array) {\n\t\t\t\tsortFunc = (a, b) =>\n\t\t\t\t\t(a as any)[sort]\n\t\t\t\t\t\t.join(', ')\n\t\t\t\t\t\t.localeCompare((b as any)[sort].join(', '));\n\t\t\t}\n\t\t\tif (sortFunc) {\n\t\t\t\tif (this.desc) {\n\t\t\t\t\tconst oldSort = sortFunc;\n\t\t\t\t\tsortFunc = (b, a) => oldSort(a, b);\n\t\t\t\t}\n\t\t\t\tfiltered.sort(sortFunc);\n\t\t\t}\n\t\t}\n\t\treturn filtered;\n\t}\n\n\tpublic get listById(): Map<string, IPack> {\n\t\treturn new Map(this.packs.map(pack => [pack.id, pack]));\n\t}\n\n\tpublic focus(): void {\n\t\t((this.$refs.tbody as Vue).$el as HTMLElement).focus();\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tconst indexOf = this.list.findIndex(pack => pack.id === this.focusedItem);\n\t\tconsole.log(indexOf);\n\t\tswitch (event.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.$emit('selected', { id: this.focusedItem, source: 'keyboard' });\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tif (indexOf === 0) {\n\t\t\t\t\tthis.$emit('select-search-bar');\n\t\t\t\t} else {\n\t\t\t\t\tthis.focusedItem = this.list[indexOf - 1].id;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tif (indexOf < this.list.length - 1) {\n\t\t\t\t\tthis.focusedItem = this.list[indexOf + 1].id;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'PageUp': {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet newIdx = indexOf - pageKeyMoveBy;\n\t\t\t\tif (newIdx < 0) {\n\t\t\t\t\tnewIdx = 0;\n\t\t\t\t}\n\t\t\t\tthis.focusedItem = this.list[newIdx].id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'PageDown': {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet newIdx = indexOf + pageKeyMoveBy;\n\t\t\t\tconst max = this.list.length - 1;\n\t\t\t\tif (newIdx > max) {\n\t\t\t\t\tnewIdx = max;\n\t\t\t\t}\n\t\t\t\tthis.focusedItem = this.list[newIdx].id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate headerKeydownListener(event: KeyboardEvent, headerId: keyof IPack) {\n\t\tswitch (event.key) {\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\tthis.sortBy(headerId);\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.focus();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.$emit('select-search-bar');\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Watch('focusedItem')\n\tprivate updateFocusedItem() {\n\t\tif (this.list.length === 0) {\n\t\t\tthis.focusedItem = '';\n\t\t\treturn;\n\t\t}\n\t\tif (this.focusedItem === '') {\n\t\t\tthis.focusedItem = this.list[0].id;\n\t\t}\n\n\t\tthis.$nextTick(() => {\n\t\t\tconst header = this.$refs.header as HTMLElement;\n\t\t\tconst element = document.querySelector(\n\t\t\t\t'.list tbody .focused'\n\t\t\t) as HTMLDivElement;\n\n\t\t\tconst containerHeight =\n\t\t\t\t(this.$el as HTMLElement).offsetHeight - header.offsetHeight;\n\t\t\tconst scrollTop = this.$el.scrollTop;\n\t\t\tconst scrollBottom = scrollTop + containerHeight;\n\n\t\t\tif (element) {\n\t\t\t\tconst itemTop = element.offsetTop - header.offsetHeight;\n\t\t\t\tconst itemBottom = itemTop + element.offsetHeight;\n\n\t\t\t\tif (itemBottom > scrollBottom) {\n\t\t\t\t\tthis.$el.scrollTop = itemBottom - containerHeight;\n\t\t\t\t} else if (itemTop < scrollTop) {\n\t\t\t\t\tthis.$el.scrollTop = itemTop;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate get uniqueCharacters(): string[] {\n\t\treturn Array.from(\n\t\t\tnew Set(\n\t\t\t\tthis.packs.flatMap(pack =>\n\t\t\t\t\tpack.characters.map(char => char.toLowerCase())\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n\n\tprivate sortBy(by: keyof IPack) {\n\t\tif (this.sort === by) {\n\t\t\tif (!this.desc) {\n\t\t\t\tthis.desc = true;\n\t\t\t} else {\n\t\t\t\tthis.sort = '';\n\t\t\t\tthis.desc = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sort = by;\n\t\t\tthis.desc = false;\n\t\t}\n\t}\n\n\tprivate filterList(list: IPackWithState[], search: string): IPackWithState[] {\n\t\tif (!search) return [...list];\n\t\treturn run(search, this.authors, list) as IPackWithState[];\n\t}\n\n\tprivate translatePackState(state: PackStates) {\n\t\tswitch (state) {\n\t\t\tcase PackStates.Unknown:\n\t\t\t\treturn 'Not added';\n\t\t\tcase PackStates.Installed:\n\t\t\t\treturn 'Installed';\n\t\t\tcase PackStates.Active:\n\t\t\t\treturn 'Active';\n\t\t\tdefault:\n\t\t\t\texhaust(state);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=d6811b48&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=ts&\"\nexport * from \"./List.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=d6811b48&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d6811b48\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pack-display\",style:({ backgroundImage: _vm.backgroundImage }),on:{\"click\":function($event){$event.stopPropagation();}}},[_c('header',[_c('h1',[(_vm.showBack)?_c('button',{staticClass:\"exit-button\",on:{\"click\":function($event){return _vm.$emit('leave', true)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_back\")])]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.pack.name)+\" \")]),_c('h2',[_vm._v(_vm._s(_vm.pack.id))])]),(_vm.pack.disclaimer)?_c('section',{staticClass:\"disclaimer\"},[_vm._v(\" \"+_vm._s(_vm.pack.disclaimer)+\" \")]):_vm._e(),(_vm.pack.source)?_c('section',[_c('a',{attrs:{\"href\":_vm.pack.source,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Source\")])]):_vm._e(),_c('section',[(_vm.addable)?_c('button',{on:{\"click\":_vm.add}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add\")]),_vm._v(\" Add \"+_vm._s(_vm.installable ? 'Temporarily' : '')+\" \")]):_vm._e(),(_vm.removable)?_c('button',{on:{\"click\":_vm.remove}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove\")]),_vm._v(\" Remove \"+_vm._s(_vm.uninstallable ? 'Temporarily' : '')+\" \")]):_vm._e(),(_vm.installable)?_c('button',{on:{\"click\":_vm.add}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add\")]),_vm._v(\" Install \")]):_vm._e(),(_vm.uninstallable)?_c('button',{on:{\"click\":_vm.remove}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove\")]),_vm._v(\" Uninstall \")]):_vm._e(),(_vm.activatable)?_c('button',{on:{\"click\":_vm.add}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add\")]),_vm._v(\" Activate \")]):_vm._e(),(_vm.deactivatable)?_c('button',{on:{\"click\":_vm.remove}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove\")]),_vm._v(\" Deactivate \")]):_vm._e()]),_c('section',[_c('h3',[_vm._v(\"Authors\")]),_c('table',[_c('tbody',_vm._l((_vm.pack.authors),function(authorId){return _c('tr',{key:authorId},[_c('td',[_vm._v(_vm._s(_vm.authorName(authorId)))]),_c('td',_vm._l((_vm.authorsLinks(authorId)),function(link){return _c('a',{key:link.target,staticClass:\"platform_button\",attrs:{\"href\":link.target,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_c('img',{attrs:{\"title\":link.platform,\"src\":link.icon,\"height\":\"32\",\"width\":\"32\"}})])}),0)])}),0)])]),(_vm.pack.description)?_c('section',[_c('h3',[_vm._v(\"Credits\")]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.sanitize(_vm.pack.description))}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const allowedTags = [\r\n\t'h3',\r\n\t'h4',\r\n\t'h5',\r\n\t'h6',\r\n\t'blockquote',\r\n\t'p',\r\n\t'a',\r\n\t'ul',\r\n\t'ol',\r\n\t'nl',\r\n\t'li',\r\n\t'b',\r\n\t'i',\r\n\t'strong',\r\n\t'em',\r\n\t'strike',\r\n\t'code',\r\n\t'hr',\r\n\t'br',\r\n\t'div',\r\n\t'table',\r\n\t'thead',\r\n\t'caption',\r\n\t'tbody',\r\n\t'tr',\r\n\t'th',\r\n\t'td',\r\n\t'pre',\r\n];\r\nconst allowedAttributes: { [tagName: string]: string[] | undefined } = {\r\n\ta: ['href'],\r\n\timg: ['src'],\r\n};\r\nconst schemaLimitedAttributes = ['href', 'src'];\r\nconst allowedSchemas = ['http', 'https'];\r\nconst enforceAttributes: {\r\n\t[tagName: string]: { [attr: string]: string } | undefined;\r\n} = {\r\n\ta: {\r\n\t\ttarget: '_blank',\r\n\t\trel: 'noopener noreferrer',\r\n\t},\r\n};\r\n\r\nexport function sanitize(html: string) {\r\n\tconst retDoc = document.createElement('div');\r\n\tconst doc = document.createElement('div');\r\n\tdoc.innerHTML = html;\r\n\r\n\tfor (const node of Array.from(doc.childNodes)) {\r\n\t\tfor (const sanitizedNode of sanitizeElement(node as Element)) {\r\n\t\t\tretDoc.appendChild(sanitizedNode);\r\n\t\t}\r\n\t}\r\n\r\n\treturn retDoc.innerHTML;\r\n}\r\n\r\nconst protocolMatcher = /^(\\w+):/;\r\n\r\nfunction sanitizeElement(node: Node): Node[] {\r\n\tif (node.nodeType !== Node.ELEMENT_NODE) return [node];\r\n\tconst el = node as Element;\r\n\tlet ret: Node[] = [];\r\n\tconst tagName = el.tagName.toLowerCase();\r\n\tif (allowedTags.includes(tagName)) {\r\n\t\tret.push(el);\r\n\t\tconst attrs: Attr[] = Array.prototype.slice.call(el.attributes);\r\n\t\tconst allowedAttrs = allowedAttributes[tagName] || [];\r\n\t\tfor (const attr of attrs) {\r\n\t\t\tif (!allowedAttrs.includes(attr.name)) {\r\n\t\t\t\tel.removeAttribute(attr.name);\r\n\t\t\t} else if (schemaLimitedAttributes.includes(attr.name)) {\r\n\t\t\t\tconst protocolMatch = attr.value.match(protocolMatcher);\r\n\t\t\t\tif (protocolMatch && !allowedSchemas.includes(protocolMatch[1])) {\r\n\t\t\t\t\tel.removeAttribute(attr.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst enforce = enforceAttributes[tagName];\r\n\t\tif (enforce) {\r\n\t\t\tfor (const attrName in enforce) {\r\n\t\t\t\tif (!enforce.hasOwnProperty(attrName)) continue;\r\n\t\t\t\tel.setAttribute(attrName, enforce[attrName]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tret.push(document.createTextNode(`<${tagName}>`));\r\n\t\tfor (const subNode of el.childNodes) {\r\n\t\t\tret = ret.concat(sanitizeElement(subNode));\r\n\t\t}\r\n\t\tret.push(document.createTextNode(`</${tagName}>`));\r\n\t}\r\n\treturn ret;\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* tslint:disable:no-bitwise */\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport { Store } from 'vuex';\r\nimport { IAuthor, IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\r\nimport { sanitize } from '@/components/toolbox/panels/character-pack-sanitizer';\r\nimport environment from '@/environments/environment';\r\nimport { IRootState, IRemovePacksAction } from '@/store';\r\nimport { IPackWithState, PackStates } from './types';\r\n\r\nconst linkablePlatforms: Array<[keyof IAuthor, string, string]> = [\r\n\t['reddit', 'https://reddit.com/u/%1', 'reddit.png'],\r\n\t['deviantart', 'https://www.deviantart.com/%1', 'deviantart.png'],\r\n\t['twitter', 'https://twitter.com/%1', 'twitter.svg'],\r\n\t['pixiv', 'https://www.pixiv.net/users/%1', 'pixiv.ico'],\r\n\t['patreon', 'https://www.patreon.com/%1', 'patreon.png'],\r\n\t['facebook', 'https://www.facebook.com/%1', 'facebook.png'],\r\n\t['github', 'https://github.com/%1', 'github.png'],\r\n\t['website', '%1', 'website.svg'],\r\n];\r\n\r\n@Component({})\r\nexport default class PackDisplay extends Vue {\r\n\tpublic $store!: Store<IRootState>;\r\n\t@Prop() private selected!: string;\r\n\t@Prop() private authors!: IAuthors;\r\n\t@Prop() private packs!: IPackWithState[];\r\n\t@Prop({ type: Boolean, default: false }) private showBack!: boolean;\r\n\r\n\tpublic focus() {\r\n\t\t(this.$refs.toFocus as HTMLElement).focus();\r\n\t}\r\n\r\n\tprivate authorName(authorId: string) {\r\n\t\tconst author = this.authors[authorId];\r\n\t\tif (author && author.currentName) return author.currentName;\r\n\t\treturn authorId;\r\n\t}\r\n\r\n\tprivate authorsLinks(authorId: string): AuthorLink[] {\r\n\t\tconst author = this.authors[authorId];\r\n\t\tif (!author) return [];\r\n\t\treturn linkablePlatforms\r\n\t\t\t.filter(platform => author[platform[0]])\r\n\t\t\t.map(platform => {\r\n\t\t\t\tconst value = author[platform[0]]!;\r\n\t\t\t\tconst target = platform[1].replace('%1', value);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttarget,\r\n\t\t\t\t\tplatform: platform[0][0].toUpperCase() + platform[0].slice(1),\r\n\t\t\t\t\ticon: 'icons/' + platform[2],\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate sanitize(credits: string) {\r\n\t\treturn sanitize(credits);\r\n\t}\r\n\r\n\tprivate get pack(): IPackWithState {\r\n\t\treturn this.packs.find(pack => pack.id === this.selected)!;\r\n\t}\r\n\r\n\tprivate get backgroundImage(): string {\r\n\t\treturn this.pack.preview.map(preview => `url('${preview}')`).join(',');\r\n\t}\r\n\r\n\tprivate get activatable(): boolean {\r\n\t\tif (!environment.isAutoLoadingSupported) return false;\r\n\t\tif (!(this.pack.state & PackStates.Installed)) return false;\r\n\t\treturn !(this.pack.state & PackStates.Active);\r\n\t}\r\n\tprivate get deactivatable(): boolean {\r\n\t\tif (!environment.isAutoLoadingSupported) return false;\r\n\t\tif (!(this.pack.state & PackStates.Installed)) return false;\r\n\t\treturn !!(this.pack.state & PackStates.Active);\r\n\t}\r\n\r\n\tprivate get installable(): boolean {\r\n\t\tif (!environment.isLocalRepoSupported) return false;\r\n\t\tif (this.pack.state & PackStates.Installed) return false;\r\n\t\treturn true;\r\n\t}\r\n\tprivate get uninstallable(): boolean {\r\n\t\tif (!environment.isLocalRepoSupported) return false;\r\n\t\tif (!(this.pack.state & PackStates.Installed)) return false;\r\n\t\treturn true;\r\n\t}\r\n\t/*\r\n\tprivate install(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.installContentPack(this.pack.dddg2Path || this.pack.dddg1Path);\r\n\t\tif (this.installedPack.queuedUninstall) {\r\n\t\t\tthis.installedPack.queuedUninstall = false;\r\n\t\t} else {\r\n\t\t\tthis.installedPack.installed = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate uninstall(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.uninstallContentPack(this.installedPack.url);\r\n\t\tthis.installedPack.queuedUninstall = true;\r\n\t}\r\n*/\r\n\tprivate get removable(): boolean {\r\n\t\treturn !!(this.pack.state & PackStates.Active);\r\n\t}\r\n\r\n\tprivate async remove(): Promise<void> {\r\n\t\tawait this.$store.dispatch('removePacks', {\r\n\t\t\tpacks: new Set([this.pack.id]),\r\n\t\t} as IRemovePacksAction);\r\n\t}\r\n\r\n\tprivate get addable(): boolean {\r\n\t\treturn this.pack.state === PackStates.Unknown;\r\n\t}\r\n\r\n\tprivate async add(): Promise<void> {\r\n\t\tawait this.$store.dispatch(\r\n\t\t\t'content/loadContentPacks',\r\n\t\t\tthis.pack.dddg2Path || this.pack.dddg1Path\r\n\t\t);\r\n\t}\r\n\r\n\tprivate isAdded() {}\r\n}\r\n\r\ninterface AuthorLink {\r\n\treadonly target: string;\r\n\treadonly platform: string;\r\n\treadonly icon: string;\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PackDisplay.vue?vue&type=template&id=4a00eee6&scoped=true&\"\nimport script from \"./PackDisplay.vue?vue&type=script&lang=ts&\"\nexport * from \"./PackDisplay.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PackDisplay.vue?vue&type=style&index=0&id=4a00eee6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a00eee6\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* tslint:disable:no-bitwise */\nimport { Component, Vue } from 'vue-property-decorator';\nimport { Store } from 'vuex';\nimport { IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\nimport { IPack } from '@edave64/dddg-repo-filters/dist/pack';\nimport SearchBar from '../SearchBar.vue';\nimport List from '../List.vue';\nimport { SelectedEvent, IPackWithState, PackStates } from '../types';\nimport PackDisplay from '../PackDisplay.vue';\nimport { IRootState } from '@/store';\nimport environment from '@/environments/environment';\n\nconst repoUrl = 'https://edave64.github.io/Doki-Doki-Dialog-Generator-Packs/';\n\n@Component({\n\tcomponents: {\n\t\tSearchBar,\n\t\tList,\n\t\tPackDisplay,\n\t},\n})\nexport default class SingleBox extends Vue {\n\tpublic $store!: Store<IRootState>;\n\tprivate search = '';\n\tprivate authors: IAuthors = {};\n\tprivate packs: IPack[] = [];\n\tprivate localPacks: IPack[] = [];\n\tprivate selected: string | null = null;\n\n\tpublic async created() {\n\t\tlet localPacksPromise: Promise<IPack[]> | [] = [];\n\n\t\tif (environment.isLocalRepoSupported) {\n\t\t\tlocalPacksPromise = this.fetchJSON(environment.localRepositoryUrl);\n\t\t}\n\n\t\t[this.packs, this.authors, this.localPacks] = await Promise.all([\n\t\t\tthis.fetchJSON<IPack[]>(repoUrl + 'repo.json'),\n\t\t\tthis.fetchJSON<IAuthors>(repoUrl + 'people.json'),\n\t\t\tlocalPacksPromise,\n\t\t]);\n\t}\n\n\tpublic focus(): void {}\n\tpublic setSearch(str: string): void {\n\t\tthis.selected = null;\n\t\tthis.search = str;\n\t}\n\n\tprivate async fetchJSON<A>(path: string): Promise<A> {\n\t\tconst req = await fetch(path);\n\t\treturn await req.json();\n\t}\n\n\tprivate leavePackDisplay(moveFocus: boolean) {\n\t\tthis.selected = null;\n\t\tif (moveFocus) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t(this.$refs.searchBar as any).focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\tthis.selected = '';\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t(this.$refs.searchBar as any).focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate onSelect({ id, source }: SelectedEvent) {\n\t\tthis.selected = id;\n\t\tif (source === 'keyboard') {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst dialog = this.$refs.dialog as any;\n\t\t\t\tdialog.focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate focusListHandler() {\n\t\t(this.$refs.list as any).focus();\n\t}\n\n\tprivate get packsArgmented(): IPackWithState[] {\n\t\tconst loadedPacks = this.$store.state.content.contentPacks;\n\t\tconst repoPacks = this.packs;\n\n\t\tconst repoLookup = new Map(repoPacks.map(pack => [pack.id, pack]));\n\t\tconst loadedLookup = new Map(loadedPacks.map(pack => [pack.packId, pack]));\n\t\tconst localLookup = new Map(this.localPacks.map(pack => [pack.id, pack]));\n\n\t\tconst installedRet: IPackWithState[] = loadedPacks.map(pack => {\n\t\t\tconst repoPack = repoLookup.get(pack.packId!);\n\t\t\tconst isLoaded = loadedLookup.has(pack.packId!)\n\t\t\t\t? PackStates.Active\n\t\t\t\t: PackStates.Unknown;\n\t\t\tconst isInstalled = localLookup.has(pack.packId!)\n\t\t\t\t? PackStates.Installed\n\t\t\t\t: PackStates.Unknown;\n\t\t\tconst state: PackStates = isLoaded | isInstalled;\n\n\t\t\tif (repoPack) {\n\t\t\t\treturn {\n\t\t\t\t\t...repoPack,\n\t\t\t\t\tstate,\n\t\t\t\t} as IPackWithState;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tstate,\n\t\t\t\t\tid: pack.packId,\n\t\t\t\t\tcharacters: [],\n\t\t\t\t\tname: pack.packId,\n\t\t\t\t\tinLocalRepo: false,\n\t\t\t\t\tpreview: [],\n\t\t\t\t\tkind: [],\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tdddg1Path: '',\n\t\t\t\t\tdddg2Path: '',\n\t\t\t\t\tsearchWords: [],\n\t\t\t\t\tauthors: [],\n\t\t\t\t} as IPackWithState;\n\t\t\t}\n\t\t});\n\n\t\tconst notInstalledPacks = repoPacks\n\t\t\t.filter(pack => !loadedLookup.has(pack.id))\n\t\t\t.map(pack => {\n\t\t\t\treturn {\n\t\t\t\t\t...pack,\n\t\t\t\t\tstate: PackStates.Unknown,\n\t\t\t\t} as IPackWithState;\n\t\t\t});\n\n\t\treturn [\n\t\t\t...installedRet.filter(ret => !ret.id.startsWith('dddg.buildin.')),\n\t\t\t...notInstalledPacks,\n\t\t];\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SingleBox.vue?vue&type=template&id=52bdb6f1&scoped=true&\"\nimport script from \"./SingleBox.vue?vue&type=script&lang=ts&\"\nexport * from \"./SingleBox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SingleBox.vue?vue&type=style&index=0&id=52bdb6f1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52bdb6f1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=style&index=0&id=52bdb6f1&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=style&index=0&id=52bdb6f1&lang=scss&scoped=true&\""],"sourceRoot":""}