(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Doki-Doki-Dialog-Generator/pre/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"013b":function(t,e,n){},"018c":function(t,e,n){},"01a7":function(t,e,n){"use strict";var r=n("cdd1"),i=n.n(r);i.a},"028d":function(t,e,n){},"074e":function(t,e,n){},"08b2":function(t,e,n){"use strict";var r=n("f055"),i=n.n(r);i.a},"0cf4":function(t,e,n){},"20f7":function(t,e,n){"use strict";var r=n("013b"),i=n.n(r);i.a},"23b6":function(t,e,n){},"270e":function(t,e,n){},"2c4c":function(t,e,n){},"4a58":function(t,e,n){"use strict";var r=n("018c"),i=n.n(r);i.a},"515d":function(t){t.exports={id:"ddlc.natsuki",name:"Natsuki",internalId:"natsuki",folder:"natsuki",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1t","scream","corrupt"],straight_nsfw:{all:["crying"],nsfw:!0},sideways:["2ta","2tb","2tc","2td","2te","2tf","2tg","2th","2ti"],sidewaysCasuals:["2bta","2btb","2btc","2btd","2bte","2btf","2btg","2bth","2bti"]},poses:[{compatibleHeads:["straight","straight_nsfw","sideways"],headInForeground:!0,left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight","straight_nsfw"],headAnchor:[18,22],static:"3"},{compatibleHeads:[],static:"old2/5"},{compatibleHeads:[],nsfw:!0,static:"vomit"},{compatibleHeads:["straight","straight_nsfw","sidewaysCasuals"],headInForeground:!0,left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight","straight_nsfw"],headAnchor:[18,22],static:"3b"},{compatibleHeads:[],nsfw:!0,variant:["ghost1","ghost2","ghost3"]},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],static:"glitch1"}]}},"521b":function(t,e,n){"use strict";var r=n("074e"),i=n.n(r);i.a},"530d":function(t,e,n){},5747:function(t,e,n){},"5c0b":function(t,e,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5d7c":function(t){t.exports={id:"ddlc.fan.amy1",name:"Amy (classic)",internalId:"classic_amy",folder:"classic_amy",heads:{straight:["aa","ab","ac","ad","ae","af","ag","ah","ai","ba","bb","bc","bd","be","bf","bg","bh","bi","ca","cb","cc","cd","ce","cf","cg","ch","ci","da","db","dc","dd","de","df","dg","dh","di","ea","eb","ec","ed","ee","ef","eg","eh","ei","fa","fb","fc","fd","fe","ff","fg","fh","fi"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r"],headInForeground:!0},{compatibleHeads:["straight"],static:"3"}]}},"5e27":function(t,e,n){},6089:function(t,e,n){"use strict";var r=n("6b51"),i=n.n(r);i.a},6785:function(t){t.exports={id:"ddlc.yuri",name:"Yuri",internalId:"yuri",folder:"yuri",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","k-old","l","l-old","m","m-old","n","o","p","q","r","s","t","u","v","w","w-old","y1","y2","y3","y4","y5","y6","y7","hisui"],sideways:["a2","b2","c2","d2","e2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r",{img:"2r_cuts",nsfw:!0}]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["sideways"],static:"3b"},{compatibleHeads:[],folder:"/stab/",variant:["1","2","3","4","5","6-full"],nsfw:!0},{compatibleHeads:[],variant:["0a","0b","eyesfull","glitch1","glitch2","glitch3","glitch4","glitch5"],nsfw:!0},{compatibleHeads:[],variant:["dragon1","dragon2"]}]}},"6b47":function(t){t.exports={id:"ddlc.monika",name:"Monika",internalId:"monika",folder:"monika",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r"],sideways:["a2","b2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],variant:["g1_scaled","g2","g3","g4"]}]}},"6b51":function(t,e,n){},"712c":function(t,e,n){},"794c":function(t){t.exports={id:"ddlc.fan.amy2",name:"Amy",internalId:"amy",folder:"amy",heads:{straight:["a","b","c","d","e","f","g","h","i","h","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],straight_broken_glases:["!1","!2","!3","!4","!5"]},poses:[{compatibleHeads:["straight","straight_broken_glases"],left:["1l","2l","3l"],right:["1r","2r"],headInForeground:!0},{compatibleHeads:["straight","straight_broken_glases"],static:"5"},{compatibleHeads:["straight","straight_broken_glases"],static:"6"},{compatibleHeads:["straight"],left:["4l"],right:["1r","2r"]}]}},"7b43":function(t){t.exports={id:"ddlc.fan.mc_chad",name:"MC (Chad)",internalId:"chad",folder:"chad",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","y","z","error","error1","shock"],straight_closed:["u","w","v","x1","x2","x3","x4"],straight_red:{folder:"red",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","y","z","error","error1","shock"]}},poses:[{compatibleHeads:["straight","straight_closed"],left:["1l","2l","4l"],right:["1r","2r"]},{compatibleHeads:["straight","straight_closed"],static:"3"},{compatibleHeads:["straight","straight_closed"],left:["1bl","2bl","4bl"],right:["1br","2br"]},{compatibleHeads:["straight","straight_closed"],static:"3b"},{compatibleHeads:["straight_red","straight_closed"],left:["1l","2l","4l"],right:["1r","2r"]},{compatibleHeads:["straight_red","straight_closed"],static:"3"},{compatibleHeads:["straight_red","straight_closed"],left:["1bl","2bl","4bl"],right:["1br","2br"]},{compatibleHeads:["straight_red","straight_closed"],static:"3b"}]}},"7f67":function(t,e,n){},"81c5":function(t){t.exports={id:"ddlc.sayori",name:"Sayori",internalId:"sayori",folder:"sayori",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y"],sideways:["a2","b2","c2","d2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],variant:["glitch1","glitch2","end-glitch1","end-glitch2"]},{compatibleHeads:[],variant:["dead1","dead2"],nsfw:!0}]}},"8f2c":function(t,e,n){"use strict";var r=n("5747"),i=n.n(r);i.a},"901b":function(t,e,n){"use strict";var r=n("0cf4"),i=n.n(r);i.a},bd46:function(t,e,n){"use strict";var r=n("270e"),i=n.n(r);i.a},cd49:function(t,e,n){"use strict";n.r(e);n("8e6e"),n("ac6a"),n("456d");var r=n("bd86"),i=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),a=n("2f62"),o=(n("ac4d"),n("8a81"),n("7f7f"),n("28a5"),n("7618")),s=(n("96cf"),n("3b8d")),c=(n("7514"),{install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t._installedPlugins.find(function(t){return t.Store}))throw new Error("VuexUndoRedo plugin must be installed after the Vuex plugin.");function n(t){return r.apply(this,arguments)}function r(){return r=Object(s["a"])(regeneratorRuntime.mark(function t(n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=n.done.slice(0),n.done=[],n.$store.commit(e.resetStateMutation),a=0;case 4:if(!(a<r.length)){t.next=10;break}return t.next=7,i(n,r[a]);case 7:++a,t.next=4;break;case 10:case"end":return t.stop()}},t)})),r.apply(this,arguments)}function i(t,e){return a.apply(this,arguments)}function a(){return a=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.transaction(function(){n.forEach(function(t){c(e,t)})});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),a.apply(this,arguments)}function c(t,e){switch(Object(o["a"])(e.payload)){case"object":var n={};e.payload instanceof Array&&(n=[]),t.$store.commit("".concat(e.type),Object.assign(n,e.payload));break;default:t.$store.commit("".concat(e.type),e.payload)}}e.resetStateMutation||(e.resetStateMutation="emptyState"),e.mutations||(e.mutations={}),t.mixin({data:function(){return{done:[],undone:[],newMutation:!0,ignoreMutations:e.ignoreMutations||[],currentTransaction:null,transactionQueue:[]}},created:function(){var t=this;window.historyStuff=this,this.$store&&this.$store.subscribe(function(n){var r=function(){n.type===e.resetStateMutation||u(n.type).ignore(n)||(t.currentTransaction.push(n),t.newMutation&&(t.undone=[]))};t.currentTransaction?r():t.transaction(function(){r()})})},computed:{canRedo:function(){return this.undone.length},canUndo:function(){return this.done.length}},methods:{redo:function(){if(!(this.undone.length<=0)){var t=this.undone.pop();this.newMutation=!1,i(this,t),this.newMutation=!0}},undo:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.done.length<=0)){t.next=2;break}return t.abrupt("return");case 2:return this.undone.push(this.done.pop()),this.newMutation=!1,t.next=6,n(this);case 6:this.newMutation=!0;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),transaction:function(t){var e=this;return new Promise(function(r,i){var a=function(){var a=Object(s["a"])(regeneratorRuntime.mark(function a(){var o,s,c;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.currentTransaction=[],a.prev=1,a.next=4,t();case 4:a.next=12;break;case 6:a.prev=6,a.t0=a["catch"](1),console.log("Error during transaction!: ",a.t0),i(a.t0),e.currentTransaction=[],n(e);case 12:o=e.done[e.done.length-1],1===e.currentTransaction.length&&o&&1===o.length&&(s=u(e.currentTransaction[0].type),s.combinable(o[0],e.currentTransaction[0])&&(c=s.combinator(o[0],e.currentTransaction[0]),e.done.pop(),e.currentTransaction=c?[c]:[])),e.currentTransaction.length>0&&e.done.push(e.currentTransaction),e.currentTransaction=null,e.transactionQueue.length>0&&e.transactionQueue.pop()(),r();case 18:case"end":return a.stop()}},a,null,[[1,6]])}));return function(){return a.apply(this,arguments)}}();e.currentTransaction?e.transactionQueue.push(a):a()})}}});var l={};function u(t){if(!l[t]){var n=t.split("/"),r={ignore:function(t){return!1},combinable:function(t,e){return!1},combinator:function(t,e){return e}},i="",a=!0,o=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;e.mutations[i+"*"]&&Object.assign(r,e.mutations[i+"*"]),i+=d+"/"}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}e.mutations[t]&&Object.assign(r,e.mutations[t]),l[t]=r}return l[t]}}}),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"container"}},[n("canvas",{ref:"sd",style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px"},attrs:{id:"scaled_display",height:"720",width:"1280",draggable:""},on:{click:t.onUiClick,touchstart:t.onTouchStart,dragstart:t.onDragStart,touchmove:t.onSpriteDragMove,mousemove:t.onSpriteDragMove,touchend:t.onSpriteDrop,mouseup:t.onSpriteDrop,dragover:t.onDragOver,drop:t.onDrop,mouseenter:t.onMouseEnter}},[t._v("HTML5 is required to use the Doki Doki Dialog Generator.")])]),n("message-console",{attrs:{loading:t.currentlyRendering}}),n("tool-box",{attrs:{selected:t.selected?t.selected.obj:null,lqRendering:t.lqRendering,prevRender:t.prevRender,currentBackground:t.currentBackground},on:{"update:lqRendering":function(e){t.lqRendering=e},"update:lq-rendering":function(e){t.lqRendering=e},"update:currentBackground":function(e){t.currentBackground=e},"update:current-background":function(e){t.currentBackground=e},download:t.download,"clear-selection":function(e){t.selected=null},"show-prev-render":t.showPreviousRender}})],1)},u=[],d=(n("6762"),n("2fdb"),n("75fc")),h=(n("4917"),n("768b")),f=(n("5df3"),n("d225")),p=n("b0b4"),b=n("308d"),g=n("6bb5"),v=n("4e2b"),m=n("9ab4"),y=n("60a3"),w=n("2298"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{vertical:t.vertical},attrs:{id:"panels"}},[n("div",{attrs:{id:"toolbar"}},[n("button",{class:{active:"add"===t.panel},on:{click:function(e){return t.setPanel("add")}}},[t._v("A")]),n("button",{class:{active:"backgrounds"===t.panel},on:{click:function(e){return t.setPanel("backgrounds")}}},[t._v("B")]),n("button",{class:{active:"credits"===t.panel},on:{click:function(e){return t.setPanel("credits")}}},[t._v("C")]),n("button",{on:{click:function(e){return t.$emit("download")}}},[t._v("D")])]),n("keep-alive",[""===t.panel?n("general-panel",{attrs:{"has-prev-render":""!==t.prevRender,lqRendering:t.lqRendering},on:{"update:lqRendering":function(e){return t.$emit("update:lqRendering",e)},"show-prev-render":function(e){return t.$emit("show-prev-render")}}}):t._e(),"add"===t.panel?n("add-panel"):t._e(),"backgrounds"===t.panel?n("backgrounds-panel",{attrs:{value:t.currentBackground},on:{input:function(e){return t.$emit("update:currentBackground",e)}}}):t._e(),"credits"===t.panel?n("credits-panel"):t._e(),"character"===t.panel?n("character-panel",{attrs:{character:t.selected}}):t._e(),"sprite"===t.panel?n("sprite-panel",{attrs:{sprite:t.selected}}):t._e(),"textBox"===t.panel?n("text-box-panel",{attrs:{textbox:t.selected}}):t._e()],1)],1)},j=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v("General")]),n("a",{staticClass:"btn_link",attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/edave64/Doki-Doki-Dialog-Generator/blob/v1/docs/index.md"}},[t._v("Help")]),n("toggle",{attrs:{label:"Low quality preview?",title:"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.",value:t.lqRendering},on:{input:function(e){return t.$emit("update:lqRendering",e)}}}),n("button",{attrs:{disabled:!t.hasPrevRender},on:{click:function(e){return t.$emit("show-prev-render")}}},[t._v("Compare to last download")]),n("toggle",{attrs:{label:"NSFW Mode?",value:t.nsfw},on:{input:t.setNsfw}})],1)},x=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"checkbox",attrs:{id:t._uid,type:"checkbox"},domProps:{checked:t.value},on:{change:t.onChange}}),n("label",{attrs:{for:t._uid}},[t._v(t._s(t.label))])])},C=[],P=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"onChange",value:function(t){this.$emit("input",!!this.$refs.checkbox.checked)}},{key:"checkbox",get:function(){return this.$refs.checkbox}}]),e}(y["c"]);m["a"]([Object(y["b"])({type:String})],P.prototype,"label",void 0),m["a"]([Object(y["b"])({type:Boolean,default:!1})],P.prototype,"value",void 0),P=m["a"]([Object(y["a"])({components:{}})],P);var R=P,S=R,T=(n("bd46"),n("2877")),$=Object(T["a"])(S,O,C,!1,null,"21f1fd74",null),L=$.exports,M=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"setNsfw",value:function(t){this.$store.commit("ui/setNsfw",t)}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0,type:Boolean})],M.prototype,"lqRendering",void 0),m["a"]([Object(y["b"])({required:!0,type:Boolean})],M.prototype,"hasPrevRender",void 0),m["a"]([Object(w["a"])("nsfw",{namespace:"ui"})],M.prototype,"nsfw",void 0),M=m["a"]([Object(y["a"])({components:{Toggle:L}})],M);var D=M,H=D,E=(n("08b2"),Object(T["a"])(H,k,x,!1,null,"0480c882",null)),A=E.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return void 0!==t.isWebPSupported?n("div",{class:{panel:!0}},[n("h1",[t._v("Add character")]),t._l(t.characters,function(e){return n("div",{key:e.id,staticClass:"character",attrs:{title:e.name},on:{click:function(n){t.onChosen(e.id.toLowerCase())}}},[n("img",{attrs:{src:t.assetPath(e),alt:e.name}})])}),n("div",{staticClass:"btn custom-sprite",on:{click:function(e){return t.$refs.upload.click()}}},[t._v("\n\t\tCustom sprite upload\n\t\t"),n("input",{ref:"upload",attrs:{type:"file"},on:{change:t.onFileUpload}})]),n("div",{staticClass:"btn custom-sprite",on:{click:t.uploadFromURL}},[t._v("Custom sprite from URL")]),n("button",{on:{click:t.addTextBox}},[t._v("Textbox")])],2):t._e()},F=[];n("a481");function B(t,e,n,r){var i=e,a=t.length;do{i+=n,i<0&&(i+=a),i>=a&&(i-=a)}while(t[i].nsfw&&!r);return i}var q=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f["a"])(this,t),this.name=e,this.basefolder=n,this.nsfw=i,this.flip=!1,this.variantI=0,this.variants=r.map(function(t){return t instanceof Array?{images:t.map(function(t){return(n+t).replace(/\/+/g,"/")}),nsfw:!1}:{images:t.images.map(function(t){return(n+t).replace(/\/+/g,"/")}),nsfw:t.nsfw}}),this.path=this.variants[0].images[0]}return Object(p["a"])(t,[{key:"hasVariants",value:function(t){return this.variants.filter(function(e){return!e.nsfw||t}).length>1}},{key:"seekVariant",value:function(t,e){this.variantI=B(this.variants,this.variantI,t,e)}},{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r,i,a,o,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.variants[this.variantI].images.map(function(t){return bt(t,e.hq)}));case 2:for(n=t.sent,r=!0,i=!1,a=void 0,t.prev=6,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)c=s.value,e.drawImage({image:c,x:0,y:0,flip:this.flip});t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](6),i=!0,a=t.t0;case 14:t.prev=14,t.prev=15,r||null==o.return||o.return();case 17:if(t.prev=17,!i){t.next=20;break}throw a;case 20:return t.finish(17);case 21:return t.finish(14);case 22:case"end":return t.stop()}},t,this,[[6,10,14,22],[15,,17,21]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"variant",get:function(){return this.variantI}}]),t}(),U=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f["a"])(this,t),this.name=n,this.nsfw=r,this.custom=i,this.flip=!1,this.path=(i?"":"/backgrounds/")+e}return Object(p["a"])(t,[{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,bt(this.path,e.hq);case 3:t.t1=t.sent,t.t2=this.flip,t.t3={image:t.t1,x:0,y:0,flip:t.t2},t.t0.drawImage.call(t.t0,t.t3);case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),N={name:"Static color",color:"#000000",render:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.drawRect({x:0,y:0,w:1280,h:720,fill:{style:this.color}});case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},z={name:"Transparent",render:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()};function W(t){t instanceof q&&t.variants[t.variant].nsfw&&t.seekVariant(1,!1)}var Y=n("81c5"),V=n("6785"),G=n("6b47"),X=n("515d"),K=n("f721"),Q=n("fdec"),J=n("7b43"),Z=n("d0ca"),tt=n("794c"),et=n("5d7c"),nt=new i["a"],rt={fireCommand:function(t){nt.$emit("command",t)},subscribeCommand:function(t){nt.$on("command",t)},fire:function(t){nt.$emit(t.kind,t)},subscribe:function(t,e){nt.$on(t.kind,e)},unsubscribe:function(t,e){nt.$off(t.kind,e)}},it=function t(e){Object(f["a"])(this,t),this.path=e,this.kind="AssetFailureEvent"};it.kind="AssetFailureEvent";var at=function t(e){Object(f["a"])(this,t),this.error=e,this.kind="CustomAssetFailureEvent"};at.kind="CustomAssetFailureEvent";var ot=function t(){Object(f["a"])(this,t),this.kind="InvalidateRenderEvent"};ot.kind="InvalidateRenderEvent";var st,ct,lt=function t(){Object(f["a"])(this,t)},ut=[G,X,Y,V,K,Q,J,Z,tt,et],dt=(st={},Object(r["a"])(st,Y.id,Y),Object(r["a"])(st,V.id,V),Object(r["a"])(st,X.id,X),Object(r["a"])(st,G.id,G),Object(r["a"])(st,K.id,K),Object(r["a"])(st,Q.id,Q),Object(r["a"])(st,J.id,J),Object(r["a"])(st,Z.id,Z),Object(r["a"])(st,tt.id,tt),Object(r["a"])(st,et.id,et),st);function ht(){return ct||(ct=new Promise(function(t,e){var n="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",r=document.createElement("img");r.addEventListener("load",function(){t(2===r.width&&1===r.height)}),r.addEventListener("error",function(){t(!1)}),r.src=n})),ct}var ft={},pt={};function bt(t){return gt.apply(this,arguments)}function gt(){return gt=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],!pt[e]){t.next=3;break}return t.abrupt("return",pt[e]);case 3:return t.t0="".concat("/Doki-Doki-Dialog-Generator/pre/","/assets/").concat(e).concat(n?"":".lq"),t.next=6,ht();case 6:if(!t.sent){t.next=10;break}t.t1=".webp",t.next=11;break;case 10:t.t1=".png";case 11:return t.t2=t.t1,r=t.t0.concat.call(t.t0,t.t2).replace(/\/+/,"/"),ft[r]||(ft[r]=new Promise(function(t,e){var n=new Image;n.addEventListener("load",function(){t(n)}),n.addEventListener("error",function(){rt.fire(new it(r)),ft[r]=void 0,t(new lt)}),n.crossOrigin="Anonymous",n.src=r,n.style.display="none",document.body.appendChild(n)})),t.abrupt("return",ft[r]);case 15:case"end":return t.stop()}},t)})),gt.apply(this,arguments)}function vt(t,e){var n=URL.createObjectURL(e);return pt[t]=new Promise(function(t,e){var r=new Image;r.addEventListener("load",function(){t(r)}),r.addEventListener("error",function(t){rt.fire(new at(t)),e('Failed to load "'.concat(n,'"'))}),r.crossOrigin="Anonymous",r.src=n,r.style.display="none",document.body.appendChild(r)}),n}function mt(t,e){return pt[t]=new Promise(function(t,n){var r=new Image;r.addEventListener("load",function(){t(r)}),r.addEventListener("error",function(t){rt.fire(new at(t)),n('Failed to load "'.concat(e,'"'))}),r.crossOrigin="Anonymous",r.src=e,r.style.display="none",document.body.appendChild(r)})}var yt=[new q("Clubroom","/backgrounds/",[["club"],{nsfw:!0,images:["club-skill"]}]),new U("closet","Closet"),new U("corridor","Corridor"),new U("class","Classroom"),new U("residential","Street"),new U("house","House"),new U("bedroom","Bedroom"),new U("kitchen","Kitchen"),new q("Sayori's bedroom","",[["/backgrounds/sayori_bedroom"],["/cg/sayori_kill/s_kill_bg"],["/cg/sayori_kill/s_kill_bg2"]]),new U("bsod","Blue screen of death"),new U("unused-house","Unused house found in game files"),new q("Natsuki reading manga","/cg/natsuki_1/",[["n_cg1_bg"],["n_cg1_bg","n_cg1_base"],["n_cg1_bg","n_cg1_base","n_cg1_exp1"],["n_cg1_bg","n_cg1_base","n_cg1_exp2"],["n_cg1_bg","n_cg1_base","n_cg1_exp3"],["n_cg1_bg","n_cg1_base","n_cg1_exp4"],["n_cg1_bg","n_cg1_base","n_cg1_exp5"]]),new q("Natsuki in the closet","/cg/natsuki_2/",[["n_cg2_bg"],["n_cg2_bg","n_cg2_base"],["n_cg2_bg","n_cg2_base","n_cg2_exp1"],["n_cg2_bg","n_cg2_base","n_cg2_exp2"]]),new q("Natsuki against the wall","/cg/natsuki_3/",[["n_cg3_base"],["n_cg3_base","n_cg3_exp1"],["n_cg3_base","n_cg3_exp2"],["n_cg3_base","n_cg3_cake"],["n_cg3_base","n_cg3_exp1","n_cg3_cake"],["n_cg3_base","n_cg3_exp2","n_cg3_cake"]]),new U("../cg/sayori_1/s_cg1","Sayori dressing"),new q("Sayori bumped head","/cg/sayori_2/",[["s_cg2_base1"],["s_cg2_base1","s_cg2_exp1"],["s_cg2_base1","s_cg2_exp2"],["s_cg2_base1","s_cg2_exp3"],["s_cg2_base1","s_cg2_exp1","s_cg2_exp3"],["s_cg2_base1","s_cg2_exp2","s_cg2_exp3"],["s_cg2_base2"],["s_cg2_base2","s_cg2_exp1"],["s_cg2_base2","s_cg2_exp2"],["s_cg2_base2","s_cg2_exp3"],["s_cg2_base2","s_cg2_exp1","s_cg2_exp3"],["s_cg2_base2","s_cg2_exp2","s_cg2_exp3"]]),new U("../cg/sayori_3/s_cg3","Sayori hug"),new q("Yuri reading","/cg/yuri_1/",[["y_cg1_base"],["y_cg1_base","y_cg1_exp2"],["y_cg1_base","y_cg1_exp1"],["y_cg1_base","y_cg1_exp1","y_cg1_exp2"],["y_cg1_base","y_cg1_exp3"]]),new q("Yuri against the wall","/cg/yuri_2/",[["y_cg2_bg1"],["y_cg2_bg1","y_cg2_base","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base","y_cg2_exp2","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base","y_cg2_exp3","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base"],["y_cg2_bg1","y_cg2_base","y_cg2_exp2"],["y_cg2_bg1","y_cg2_base","y_cg2_exp3"],["y_cg2_bg2"],["y_cg2_bg2","y_cg2_base","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base","y_cg2_exp2","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base","y_cg2_exp3","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base"],["y_cg2_bg2","y_cg2_base","y_cg2_exp2"],["y_cg2_bg2","y_cg2_base","y_cg2_exp3"]]),new q("Yuri with towel","/cg/yuri_3/",[["y_cg3_base"],["y_cg3_base","y_cg3_exp1"]]),new q("Yuri's death","/cg/yuri_kill/",[["1a"],["1b"],["1c"],["2a"],["2b"],["2c"],["3a"],["3b"],["3c"]],!0),new q("The spaceroom","/cg/monika/",[["monika_room"],["space","monika_room"],["monika_room_highlight"],["space","monika_room_highlight"],["monika_bg"],["space","monika_bg"],["monika_bg_highlight"],["space","monika_bg_highlight"],["room"],["space","room"],["monika_bg_glitch"],["monika_bg_glitch","monika_glitch1"],["monika_bg_glitch","monika_glitch2"],["monika_bg_glitch","monika_glitch3"],["monika_bg_glitch","monika_glitch4"],{nsfw:!0,images:["monika_scare"]},{nsfw:!0,images:["space","monika_scare"]}]),N,z],wt=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.isWebPSupported=null,t.customAssetCount=0,t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ht();case 2:this.isWebPSupported=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"assetPath",value:function(t){return"".concat("/Doki-Doki-Dialog-Generator/pre/","/assets/chibis/").concat(t.internalId,".lq.").concat(this.isWebPSupported?"webp":"png").replace(/\/+/,"/")}},{key:"onFileUpload",value:function(t){var e=this,n=this.$refs.upload;if(n.files){var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value;(function(n){var r="customAsset"+n;vt(r,t);e.$emit("add-custom-asset",r)})(++e.customAssetCount)},c=n.files[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(l){i=!0,a=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}}},{key:"uploadFromURL",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=prompt("Enter the URL of the image"),e){t.next=3;break}return t.abrupt("return");case 3:return n="customAsset"+ ++this.customAssetCount,t.next=6,mt(n,e);case 6:this.$emit("add-custom-asset",n);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"addTextBox",value:function(){this.$store.dispatch("objects/createTextBox",{})}},{key:"onChosen",value:function(t){this.$store.dispatch("objects/createCharacters",{characterType:t})}},{key:"characters",get:function(){return ut}}]),e}(y["c"]);wt=m["a"]([Object(y["a"])({components:{}})],wt);var _t=wt,jt=_t,kt=(n("de40"),Object(T["a"])(jt,I,F,!1,null,"504dbf3e",null)),xt=kt.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v(t._s(t.label))]),t.hasMultiplePoses||t.parts.length>0?n("fieldset",[n("legend",[t._v("Pose:")]),n("table",[n("tbody",[t.hasMultiplePoses?n("tr",[n("td",[n("button",{on:{click:function(e){return t.seekPose(-1,t.nsfw)}}},[t._v("<")])]),n("td",[t._v("Pose")]),n("td",[n("button",{on:{click:function(e){return t.seekPose(1,t.nsfw)}}},[t._v(">")])])]):t._e(),t._l(t.parts,function(e){return n("tr",{key:e},[n("td",[n("button",{on:{click:function(n){return t.seekPart(e,-1,t.nsfw)}}},[t._v("<")])]),n("td",[t._v(t._s(t.captialize(e)))]),n("td",[n("button",{on:{click:function(n){return t.seekPart(e,1,t.nsfw)}}},[t._v(">")])])])})],2)])]):t._e(),n("position-and-size",{attrs:{obj:t.character}}),n("layers",{attrs:{obj:t.character}}),n("opacity",{attrs:{obj:t.character}}),n("toggle",{attrs:{label:"Close up?"},model:{value:t.closeUp,callback:function(e){t.closeUp=e},expression:"closeUp"}}),n("toggle",{attrs:{label:"Flip?"},model:{value:t.flip,callback:function(e){t.flip=e},expression:"flip"}}),n("delete",{attrs:{obj:t.character}})],1)},Ct=[],Pt=(n("55dd"),["4-1","3-1","2-1","4-2","center","4-3","2-2","3-3","4-4"]),Rt=[200,240,400,493,640,786,880,1040,1080];function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var $t=-74,Lt=-26,Mt={setPose:function(t,e){var n=t.objects[e.id];n.poseId=e.poseId,++n.version},setPosePosition:function(t,e){var n=t.objects[e.id];n.posePositions=Tt({},n.posePositions,{},e.posePositions),++n.version},setClose:function(t,e){var n=t.objects[e.id];n.close=e.close,n.y+=$t*(n.close?1:-1)},setFreeMove:function(t,e){var n=t.objects[e.id];n.freeMove=e.freeMove,n.freeMove||(n.x=Rt[It(n.x)],n.y=Lt+$t*(n.close?1:0))}};function Dt(t){return dt[t.characterType]}function Ht(t){return Dt(t).poses[t.poseId]}function Et(t){var e=Ht(t),n=e.compatibleHeads.length>0?["head"]:[];return"variant"in e?[].concat(n,["variant"]):"left"in e?[].concat(n,["left","right"]):n}function At(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.posePositions.headType,n=Dt(t),r=Ht(t).compatibleHeads;if(!r||0===r.length)return null;var i=n.heads[r[e]];return i instanceof Array?{all:i}:i}function It(t){var e=Rt.map(function(e,n){return{pos:Math.abs(t-e),idx:n}}).sort(function(t,e){return t.pos-e.pos});return e[0].idx}var Ft=0,Bt={createCharacters:function(t,e){t.state;var n=t.commit;n("create",{object:{flip:!1,id:"characters_"+ ++Ft,onTop:!1,opacity:100,type:"character",x:640,y:Lt,preserveRatio:!0,ratio:1,height:768,width:768,characterType:e.characterType,close:!1,freeMove:!1,version:0,poseId:0,posePositions:{head:0,headType:0,left:0,right:0,variant:0}}})},seekPart:function(t,e){var n=t.state,i=t.commit,a=t.dispatch,o=e.delta,s=e.id,c=e.part,l=e.nsfw;if("head"!==c){var u=n.objects[s],d=Ht(u);d[c]&&i("setPosePosition",{id:s,posePositions:Object(r["a"])({},c,B(d[c],u.posePositions[c],o,l))})}else a("seekHead",{id:s,delta:o,nsfw:l})},seekPose:function(t,e){var n,r=t.state,i=t.commit,a=e.id,o=e.delta,s=e.nsfw,c=r.objects[a],l=Dt(c),u=Ht(c).compatibleHeads[c.posePositions.headType],d=B(l.poses,c.poseId,o,s),h=l.poses[d],f=h.compatibleHeads.indexOf(u),p=c.posePositions.head;f>=0?n=f:(n=0,p=0),i("setPose",{id:a,poseId:d}),i("setPosePosition",{id:a,posePositions:{head:p,headType:n,left:0,right:0,variant:0}})},seekHead:function(t,e){var n=t.state,r=t.commit,i=e.id,a=e.delta,o=e.nsfw,s=n.objects[i],c=Dt(s),l=Ht(s),u=At(s);if(u){var d=s.posePositions.head+a,h=s.posePositions.headType;(d<0||d>=u.all.length)&&(h=B(l.compatibleHeads.map(function(t){return c.heads[t]}),h,a,o),u=At(s,h),d=1===a?0:u.all.length-1),r("setPosePosition",{id:i,posePositions:{head:d,headType:h}})}},nsfwCheck:function(t,e){var n=t.state,r=t.commit,i=t.dispatch,a=e.id,o=n.objects[a],s=Ht(o),c=Et(o);s.nsfw&&i("seekPose",{id:a,delta:1,nsfw:!1});var l=!0,u=!1,d=void 0;try{for(var h,f=c[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;if("head"!==p){var b=s[p][o.posePositions[p]];b.nsfw&&i("seekPart",{id:a,delta:1,nsfw:!1})}}}catch(v){u=!0,d=v}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}var g=At(o);g&&g.nsfw&&r("setPosePosition",{id:a,posePositions:{head:0,headType:0}})},setCharacterPosition:function(t,e){var n=t.state,r=t.commit,i=(t.dispatch,e.id),a=e.x,o=e.y,s=n.objects[i];s.freeMove?r("setPosition",{id:i,x:a,y:o}):r("setPosition",{id:i,x:Rt[It(a)],y:Lt+(s.close?$t:0)})},shiftCharacterSlot:function(t,e){var n=t.state,r=t.commit,i=(t.dispatch,e.id),a=e.delta,o=n.objects[i],s=It(o.x),c=s+a;c<0&&(c=0),c>=Rt.length&&(c=Rt.length-1),r("setPosition",{id:i,x:Rt[c],y:o.y})}},qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",[n("legend",[t._v("Position"+t._s(t.allowSize?"/Size":"")+":")]),t.allowStepMove?n("toggle",{attrs:{label:"Move freely?"},model:{value:t.freeMove,callback:function(e){t.freeMove=e},expression:"freeMove"}}):t._e(),t.allowStepMove&&!t.freeMove?n("div",[n("button",{attrs:{disabled:t.isFirstPos},on:{click:function(e){--t.pos}}},[t._v("<")]),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.pos,expression:"pos",modifiers:{number:!0}}],attrs:{id:"current_talking"},on:{input:function(e){return t.$emit("invalidate-render")},change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.pos=e.target.multiple?n:n[0]}}},t._l(t.positionNames,function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v(t._s(e))])}),0),n("button",{attrs:{disabled:t.isLastPos},on:{click:function(e){++t.pos}}},[t._v(">")])]):n("div",[n("label",{attrs:{for:"sprite_x"}},[t._v("X:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.x,expression:"x",modifiers:{number:!0}}],attrs:{id:"sprite_x",type:"number"},domProps:{value:t.x},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.x=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("br"),n("label",{attrs:{for:"sprite_y"}},[t._v("Y:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.y,expression:"y",modifiers:{number:!0}}],attrs:{id:"sprite_y",type:"number"},domProps:{value:t.y},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.y=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t.allowSize?n("div",[n("label",{attrs:{for:"sprite_w"}},[t._v("Width:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],attrs:{id:"sprite_w",type:"number"},domProps:{value:t.width},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("br"),n("label",{attrs:{for:"sprite_h"}},[t._v("Height:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.height,expression:"height",modifiers:{number:!0}}],attrs:{id:"sprite_h",type:"number"},domProps:{value:t.height},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.height=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("toggle",{attrs:{label:"Lock ratio?"},model:{value:t.preserveRatio,callback:function(e){t.preserveRatio=e},expression:"preserveRatio"}})],1):t._e()],1)},Ut=[],Nt=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"history",get:function(){return this.$root}},{key:"allowSize",get:function(){this.obj;return("textBox"!==this.obj.type||"custom"===this.obj.style)&&!("character"===this.obj.type&&!this.obj.freeMove)}},{key:"allowStepMove",get:function(){return"freeMove"in this.obj}},{key:"freeMove",get:function(){return this.obj.freeMove},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setFreeMove",{id:e.obj.id,freeMove:t})})}},{key:"positionNames",get:function(){return Pt}},{key:"pos",get:function(){return It(this.obj.x)},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setPosition",{id:e.obj.id,x:Rt[t],y:e.obj.y})})}},{key:"isFirstPos",get:function(){return 0===this.pos}},{key:"isLastPos",get:function(){return this.pos===Pt.length-1}},{key:"x",get:function(){return this.obj.x},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setPosition",{id:e.obj.id,x:t,y:e.y})})}},{key:"y",get:function(){return this.obj.y},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setPosition",{id:e.obj.id,x:e.x,y:t})})}},{key:"height",get:function(){return this.obj.height},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setHeight",{id:e.obj.id,height:t})})}},{key:"width",get:function(){return this.obj.width},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setWidth",{id:e.obj.id,width:t})})}},{key:"preserveRatio",get:function(){return this.obj.preserveRatio},set:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setPreserveRatio",{id:e.obj.id,preserveRatio:t})})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],Nt.prototype,"obj",void 0),Nt=m["a"]([Object(y["a"])({components:{Toggle:L}})],Nt);var zt=Nt,Wt=zt,Yt=(n("e50c"),Object(T["a"])(Wt,qt,Ut,!1,null,"721fb59d",null)),Vt=Yt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{attrs:{id:"layerfs"}},[n("legend",[t._v("Layer:")]),n("button",{attrs:{title:"Move to back"},on:{click:function(e){return t.shiftLayer(-1/0)}}},[t._v("⤓")]),n("button",{attrs:{title:"Move backwards"},on:{click:function(e){return t.shiftLayer(-1)}}},[t._v("↓")]),n("button",{attrs:{title:"Move forwards"},on:{click:function(e){return t.shiftLayer(1)}}},[t._v("↑")]),n("button",{attrs:{title:"Move to front"},on:{click:function(e){return t.shiftLayer(1/0)}}},[t._v("⤒")]),n("toggle",{attrs:{value:t.obj.onTop,label:"In front?"},on:{input:t.setInFront}})],1)},Xt=[],Kt=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"shiftLayer",value:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/shiftLayer",{id:e.obj.id,delta:t})})}},{key:"setInFront",value:function(t){var e=this;this.history.transaction(function(){e.$store.dispatch("objects/setOnTop",{id:e.obj.id,onTop:t})})}},{key:"history",get:function(){return this.$root}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],Kt.prototype,"obj",void 0),Kt=m["a"]([Object(y["a"])({components:{Toggle:L}})],Kt);var Qt=Kt,Jt=Qt,Zt=(n("8f2c"),Object(T["a"])(Jt,Gt,Xt,!1,null,"371f7813",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{attrs:{for:"characterOpacity"}},[t._v("Opacity:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.opacity,expression:"opacity",modifiers:{number:!0}}],attrs:{type:"number",max:"100",min:"0",id:"characterOpacity"},domProps:{value:t.opacity},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.opacity=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])},ne=[],re=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"history",get:function(){return this.$root}},{key:"opacity",get:function(){return this.obj.opacity},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setOpacity",{id:e.obj.id,opacity:t})})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],re.prototype,"obj",void 0),re=m["a"]([Object(y["a"])({})],re);var ie=re,ae=ie,oe=(n("521b"),Object(T["a"])(ae,ee,ne,!1,null,"472cd2fc",null)),se=oe.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{on:{click:t.onClick}},[t._v("Delete")])},le=[],ue=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"onClick",value:function(){var t=this;this.history.transaction(function(){t.$store.dispatch("objects/removeObject",{id:t.obj.id})})}},{key:"history",get:function(){return this.$root}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],ue.prototype,"obj",void 0),ue=m["a"]([Object(y["a"])({})],ue);var de=ue,he=de,fe=Object(T["a"])(he,ce,le,!1,null,null,null),pe=fe.exports,be=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"seekPose",value:function(t,e){var n=this;this.history.transaction(function(){n.$store.dispatch("objects/seekPose",{id:n.character.id,delta:t,nsfw:e})})}},{key:"seekPart",value:function(t,e,n){var r=this;this.history.transaction(function(){r.$store.dispatch("objects/seekPart",{id:r.character.id,delta:e,nsfw:n,part:t})})}},{key:"captialize",value:function(t){return t.charAt(0).toUpperCase()+t.substring(1)}},{key:"history",get:function(){return this.$root}},{key:"label",get:function(){return Dt(this.character).name}},{key:"parts",get:function(){return Et(this.character)}},{key:"hasMultiplePoses",get:function(){return Dt(this.character).poses.length>1}},{key:"flip",get:function(){return this.character.flip},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setFlip",{id:e.character.id,flip:t})})}},{key:"closeUp",get:function(){return this.character.close},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setClose",{id:e.character.id,close:t})})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],be.prototype,"character",void 0),m["a"]([Object(w["a"])("nsfw",{namespace:"ui"})],be.prototype,"nsfw",void 0),be=m["a"]([Object(y["a"])({components:{Toggle:L,PositionAndSize:Vt,Layers:te,Opacity:se,Delete:pe}})],be);var ge=be,ve=ge,me=(n("d721"),Object(T["a"])(ve,Ot,Ct,!1,null,"462630bb",null)),ye=me.exports,we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v("Custom Sprite")]),n("position-and-size",{attrs:{obj:t.sprite}}),n("layers",{attrs:{obj:t.sprite}}),n("opacity",{attrs:{obj:t.sprite}}),n("toggle",{attrs:{label:"Flip?"},model:{value:t.flip,callback:function(e){t.flip=e},expression:"flip"}}),n("delete",{attrs:{obj:t.sprite}})],1)},_e=[],je=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"history",get:function(){return this.$root}},{key:"flip",get:function(){return this.sprite.flip},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setFlip",{id:e.sprite.id,flip:t})})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],je.prototype,"sprite",void 0),je=m["a"]([Object(y["a"])({components:{Toggle:L,PositionAndSize:Vt,Layers:te,Opacity:se,Delete:pe}})],je);var ke=je,xe=ke,Oe=(n("20f7"),Object(T["a"])(xe,we,_e,!1,null,"4dcc1f39",null)),Ce=Oe.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v("Textbox")]),n("div",[n("label",{attrs:{for:"text_style"}},[t._v("Style:")]),n("br"),n("select",{directives:[{name:"model",rawName:"v-model",value:t.textBoxStyle,expression:"textBoxStyle"}],attrs:{id:"text_style"},on:{keydown:function(t){t.stopPropagation()},change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.textBoxStyle=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"normal"}},[t._v("Normal")]),n("option",{attrs:{value:"corrupt"}},[t._v("Corrupt")]),n("option",{attrs:{value:"custom"}},[t._v("Custom")])])]),n("div",[n("label",{attrs:{for:"current_talking"}},[t._v("Person talking:")]),n("br"),n("select",{directives:[{name:"model",rawName:"v-model",value:t.talkingDefaults,expression:"talkingDefaults"}],attrs:{id:"current_talking"},on:{keydown:function(t){t.stopPropagation()},change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.talkingDefaults=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"None"}},[t._v("No-one")]),n("option",{attrs:{value:"Sayori"}},[t._v("Sayori")]),n("option",{attrs:{value:"Yuri"}},[t._v("Yuri")]),n("option",{attrs:{value:"Natsuki"}},[t._v("Natsuki")]),n("option",{attrs:{value:"Monika"}},[t._v("Monika")]),n("option",{attrs:{value:"FeMC"}},[t._v("FeMC")]),n("option",{attrs:{value:"MC"}},[t._v("MC")]),n("option",{attrs:{value:"Amy"}},[t._v("Amy")]),n("option",{attrs:{value:"Other"}},[t._v("Other")])])]),n("div",[n("label",{attrs:{for:"custom_name"}},[t._v("Other name:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.talking,expression:"talking"}],attrs:{id:"custom_name"},domProps:{value:t.talking},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.talking=e.target.value)}}})]),n("toggle",{attrs:{label:"Controls visible?"},model:{value:t.showControls,callback:function(e){t.showControls=e},expression:"showControls"}}),n("toggle",{attrs:{label:"Able to skip?"},model:{value:t.allowSkipping,callback:function(e){t.allowSkipping=e},expression:"allowSkipping"}}),n("toggle",{attrs:{label:"Continue arrow?"},model:{value:t.showContinueArrow,callback:function(e){t.showContinueArrow=e},expression:"showContinueArrow"}}),n("div",{attrs:{id:"dialog_text_wrapper"}},[n("label",{attrs:{for:"dialog_text"}},[t._v("Dialog:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dialog,expression:"dialog"}],attrs:{id:"dialog_text"},domProps:{value:t.dialog},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.dialog=e.target.value)}}})]),t._m(0),n("position-and-size",{attrs:{obj:t.textbox}}),n("layers",{attrs:{obj:t.textbox}}),n("opacity",{attrs:{obj:t.textbox}}),n("toggle",{attrs:{label:"Flip?"},model:{value:t.flip,callback:function(e){t.flip=e},expression:"flip"}}),n("fieldset",[n("legend",[t._v("Customization:")]),n("label",{attrs:{for:"textbox_color"}},[t._v("Color:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.textboxColor,expression:"textboxColor"}],attrs:{id:"textbox_color",type:"color"},domProps:{value:t.textboxColor},on:{input:function(e){e.target.composing||(t.textboxColor=e.target.value)}}})]),n("delete",{attrs:{obj:t.textbox}})],1)},Re=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tFormatting:\n\t\t"),n("br"),t._v("[In brackets] for editied style text\n\t")])}],Se=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"history",get:function(){return this.$root}},{key:"talkingDefaults",get:function(){switch(this.talking){case null:return"None";case"Sayori":case"Yuri":case"Natsuki":case"Monika":case"FeMC":case"MC":case"Amy":return this.talking;default:return"Other"}},set:function(t){this.talking="None"===t?null:"Other"===t?"":t}},{key:"talking",get:function(){return this.textbox.talking},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setTalking",{id:e.textbox.id,talking:t})})}},{key:"showControls",get:function(){return this.textbox.controls},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setControlsVisible",{id:e.textbox.id,controls:t})})}},{key:"allowSkipping",get:function(){return this.textbox.controls},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setSkipable",{id:e.textbox.id,skip:t})})}},{key:"showContinueArrow",get:function(){return this.textbox.continue},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setContinueArrow",{id:e.textbox.id,continue:t})})}},{key:"dialog",get:function(){return this.textbox.text},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setText",{id:e.textbox.id,text:t})})}},{key:"flip",get:function(){return this.textbox.flip},set:function(t){var e=this;this.history.transaction(function(){e.$store.commit("objects/setFlip",{id:e.textbox.id,flip:t})})}},{key:"textBoxStyle",get:function(){return this.textbox.style},set:function(t){this.$store.dispatch("objects/setStyle",{id:this.textbox.id,style:t})}},{key:"textboxColor",get:function(){return this.textbox.customColor},set:function(t){this.$store.commit("objects/setCustomColor",{id:this.textbox.id,color:t})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],Se.prototype,"textbox",void 0),Se=m["a"]([Object(y["a"])({components:{Toggle:L,PositionAndSize:Vt,Layers:te,Opacity:se,Delete:pe}})],Se);var Te=Se,$e=Te,Le=(n("f183"),Object(T["a"])($e,Pe,Re,!1,null,"1b03ed86",null)),Me=Le.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v("Credits")]),n("p",[t._v("All assets used are IP of Team Salvato and created by them, unless noted otherwise.")]),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),n("p",[t._v("Classic Amy Sprite by Meddy-sin")]),n("p",[t._v("Amy Sprite by Meddy-sin and SlightlySimple")]),n("p",[t._v("Special thanks to SlightlySimple for testing and technical help")])])},He=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tUnused House Background by\n\t\t"),n("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.deviantart.com/fatelogic/art/VN-Background-Practice-295671161"}},[t._v("Fatelogic")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tDoki Doki Dialog Generator developed by EDave64\n\t\t"),n("br"),t._v("Based on gemdude46's DDLC Shitpost generator\n\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tMC Classic Sprite by Childish-N\n\t\t"),n("br"),t._v("MC Classic Chibi by GyleToTheRescue\n\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tMC Sprite by Childish-N\n\t\t"),n("br"),t._v("MC Casual Sprite by SlightlySimple\n\t\t"),n("br"),t._v("MC Chibi by SlightlySimple\n\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tMC Chad Sprite by Cylent-Nite\n\t\t"),n("br"),t._v("MC Chad Poses and expressions by SlightlySimple\n\t\t"),n("br"),t._v("MC Chad Poses and chibi by Meddy-sin\n\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tFeMC Sprite by Meddy-sin\n\t\t"),n("br"),t._v("FeMC Casual Sprite by SlightlySimple\n\t")])}],Ee=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(y["c"]);Ee=m["a"]([Object(y["a"])({components:{}})],Ee);var Ae=Ee,Ie=Ae,Fe=(n("6089"),Object(T["a"])(Ie,De,He,!1,null,"30dc8f87",null)),Be=Fe.exports,qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{panel:!0}},[n("h1",[t._v("Background")]),n("background-settings",{attrs:{value:t.value,nsfw:t.nsfw},on:{"invalidate-render":function(e){return t.$emit("invalidate-render")}}}),t._l(t.backgrounds,function(e){return n("background-button",{key:e.name,attrs:{background:e,value:t.value,customPathLookup:t.customPathLookup},on:{input:function(n){t.nsfwFilter(e),t.$emit("input",e)}}})}),n("div",{staticClass:"btn upload-background",on:{click:function(e){return t.$refs.upload.click()}}},[t._v("\n\t\tUpload\n\t\t"),n("input",{ref:"upload",attrs:{type:"file"},on:{change:t.onFileUpload}})])],2)},Ue=[],Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{background:!0,active:t.background===t.value},style:t.style,attrs:{title:t.background.name},on:{click:function(e){return t.$emit("input",t.background)}}},[t._v(t._s(t.background.name))])},ze=[],We=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.isWebPSupported=null,t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ht();case 2:this.isWebPSupported=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"style",get:function(){return this.background===N?{backgroundColor:N.color}:this.background instanceof U?this.background.custom?{backgroundImage:"url(".concat(this.customPathLookup[this.background.path],")")}:void 0===this.isWebPSupported?{}:{backgroundImage:"url(".concat("/Doki-Doki-Dialog-Generator/pre/","/assets/").concat(this.background.path,".lq.").concat(this.isWebPSupported?"webp":"png",")").replace(/\/+/,"/")}:this.background instanceof q?void 0===this.isWebPSupported?{}:{backgroundImage:"url(".concat("/Doki-Doki-Dialog-Generator/pre/","/assets/").concat(this.background.path,".lq.").concat(this.isWebPSupported?"webp":"png",")").replace(/\/+/,"/")}:{}}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],We.prototype,"background",void 0),m["a"]([Object(y["b"])({required:!0})],We.prototype,"value",void 0),m["a"]([Object(y["b"])({required:!0})],We.prototype,"customPathLookup",void 0),We=m["a"]([Object(y["a"])({components:{}})],We);var Ye=We,Ve=Ye,Ge=(n("fa2c"),Object(T["a"])(Ve,Ne,ze,!1,null,"a7bba164",null)),Xe=Ge.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value===t.colorBackground?n("fieldset",[n("legend",[t._v("Settings:")]),n("label",{attrs:{for:"bg_color"}},[t._v("Color:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value.color,expression:"value.color"}],attrs:{id:"bg_color",type:"color"},domProps:{value:t.value.color},on:{input:[function(e){e.target.composing||t.$set(t.value,"color",e.target.value)},function(e){return t.$emit("invalidate-render")}]}})]):n("fieldset",[n("legend",[t._v("Settings:")]),n("table",[n("tr",[n("td",{attrs:{colspan:"3"}},[n("toggle",{attrs:{label:"Flipped?"},on:{input:function(e){return t.$emit("invalidate-render")}},model:{value:t.value.flip,callback:function(e){t.$set(t.value,"flip",e)},expression:"value.flip"}})],1)]),t.isVariant?n("tr",[n("td",[n("button",{on:{click:function(e){t.value.seekVariant(-1,t.nsfw),t.$emit("invalidate-render")}}},[t._v("<")])]),n("td",[t._v("Variant")]),n("td",[n("button",{on:{click:function(e){t.value.seekVariant(1,t.nsfw),t.$emit("invalidate-render")}}},[t._v(">")])])]):t._e()])])},Qe=[],Je=function(t){function e(){return Object(f["a"])(this,e),Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"isVariant",get:function(){return this.value instanceof q&&this.value.hasVariants(this.nsfw)}},{key:"colorBackground",get:function(){return N}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],Je.prototype,"value",void 0),m["a"]([Object(w["a"])("nsfw",{namespace:"ui"})],Je.prototype,"nsfw",void 0),Je=m["a"]([Object(y["a"])({components:{Toggle:L}})],Je);var Ze=Je,tn=Ze,en=(n("01a7"),Object(T["a"])(tn,Ke,Qe,!1,null,"1a85d10b",null)),nn=en.exports,rn=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.customPathLookup={},t.customBGCount=0,t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"onFileUpload",value:function(t){var e=this,n=this.$refs.upload;if(n.files){var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value;(function(n){var r="customBg"+n,i=vt(r,t);yt.push(new U(r,t.name,!1,!0)),e.$set(e.customPathLookup,r,i)})(++e.customBGCount)},c=n.files[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(l){i=!0,a=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}}},{key:"nsfwFilter",value:function(t){this.nsfw||W(t)}},{key:"backgrounds",get:function(){return this.customBGCount,this.nsfw?yt:yt.filter(function(t){return!t.nsfw})}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],rn.prototype,"value",void 0),m["a"]([Object(w["a"])("nsfw",{namespace:"ui"})],rn.prototype,"nsfw",void 0),rn=m["a"]([Object(y["a"])({components:{BackgroundButton:Xe,BackgroundSettings:nn}})],rn);var an=rn,on=an,sn=(n("d309"),Object(T["a"])(on,qe,Ue,!1,null,"5a206118",null)),cn=sn.exports,ln=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.selected=null,t.currentBackground=null,t.panelSelection="",t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"setPanel",value:function(t){t===this.panelSelection&&(t=""),this.panelSelection=t,this.selected&&this.$emit("clear-selection")}},{key:"onSelectionChange",value:function(t){t?this.panelSelection="selection":"selection"===this.panelSelection&&(this.panelSelection="")}},{key:"panel",get:function(){if("selection"===this.panelSelection){if(null!==this.selected)return this.selected.type;this.panelSelection=""}return this.panelSelection}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0})],ln.prototype,"selected",void 0),m["a"]([Object(y["b"])({required:!0,default:""})],ln.prototype,"prevRender",void 0),m["a"]([Object(y["b"])({required:!0})],ln.prototype,"lqRendering",void 0),m["a"]([Object(y["b"])({required:!0})],ln.prototype,"currentBackground",void 0),m["a"]([Object(w["a"])("vertical",{namespace:"ui"})],ln.prototype,"vertical",void 0),m["a"]([Object(y["d"])("selected")],ln.prototype,"onSelectionChange",null),ln=m["a"]([Object(y["a"])({components:{GeneralPanel:A,AddPanel:xt,BackgroundsPanel:cn,CreditsPanel:Be,CharacterPanel:ye,TextBoxPanel:Me,SpritePanel:Ce}})],ln);var un=ln,dn=un,hn=(n("4a58"),Object(T["a"])(dn,_,j,!1,null,null,null)),fn=hn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{vertical:t.vertical},attrs:{id:"messageConsole"}},[t.showLoading?n("p",[t._v("Loading...")]):t._e(),t._l(t.messages,function(e,r){return n("p",{key:e+"_"+r},[t._v(t._s(e))])})],2)},bn=[],gn=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.messages=[],t.showLoading=!1,t.showLoadingTimeout=0,t.hideLoadingTimeout=0,t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=this;this.onLoadingChange(this.loading),rt.subscribe(it,function(e){t.messages.push("Failed to load asset '".concat(e.path,"'")),setTimeout(function(){t.messages.pop()},5e3)}),rt.subscribe(at,function(e){t.messages.push("Failed to load custom asset. Try to download it manually and then upload it."),setTimeout(function(){t.messages.pop()},5e4)})}},{key:"onLoadingChange",value:function(t){var e=this;t?(this.hideLoadingTimeout&&(clearTimeout(this.hideLoadingTimeout),this.hideLoadingTimeout=0),this.showLoading||this.showLoadingTimeout||(this.showLoadingTimeout=setTimeout(function(){e.showLoading=!0,e.showLoadingTimeout=0},100))):(this.showLoadingTimeout&&(clearTimeout(this.showLoadingTimeout),this.showLoadingTimeout=0),this.showLoading&&!this.hideLoadingTimeout&&(this.hideLoadingTimeout=setTimeout(function(){e.showLoading=!1,e.hideLoadingTimeout=0},100)))}}]),e}(y["c"]);m["a"]([Object(y["b"])({required:!0,type:Boolean})],gn.prototype,"loading",void 0),m["a"]([Object(w["a"])("vertical",{namespace:"ui"})],gn.prototype,"vertical",void 0),m["a"]([Object(y["d"])("loading")],gn.prototype,"onLoadingChange",null),gn=m["a"]([Object(y["a"])({components:{}})],gn);var vn=gn,mn=vn,yn=(n("901b"),Object(T["a"])(mn,pn,bn,!1,null,"24b2b581",null)),wn=yn.exports;function _n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_n(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_n(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var kn=816,xn=900,On=146,Cn=568,Pn=0,Rn=29,Sn=8,Tn=38,$n=50,Ln=9,Mn=9,Dn=39,Hn=168,En=34,An=29,In=12,Fn=-126,Bn=-72,qn=-38,Un=30.75,Nn=26,zn=426,Wn=58,Yn={align:"center",font:"24px riffic",outline:{style:"#b59",width:6},fill:{style:"white"}},Vn={align:"left",font:"13px aller",fill:{style:"#522"}},Gn=jn({},Vn,{fill:{style:"#a66"}}),Xn={align:"left",font:"24px aller",outline:{style:"#523140",width:4},fill:{style:"#fff"}},Kn={align:"left",font:"24px verily",outline:{style:"#000",width:20},fill:{style:"#fff"}},Qn=Cn-Dn,Jn=(n("34ef"),n("6c7b"),function t(){Object(f["a"])(this,t)});function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zn(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var er=function(){function t(e,n,r){Object(f["a"])(this,t),this.fsCtx=e,this.hq=n,this.preview=r,this.aborted=!1}return Object(p["a"])(t,[{key:"drawText",value:function(t){if(this.aborted)throw new Jn;this.fsCtx.save();var e=tr({},{font:"20px aller",align:"left"},{},t),n=e.font,r=e.align,i=e.x,a=void 0===i?0:i,o=e.y,s=void 0===o?0:o,c=e.text,l=void 0===c?"":c;this.fsCtx.lineJoin="round",this.fsCtx.textAlign=r,this.fsCtx.font=n,t.outline&&(this.fsCtx.strokeStyle=t.outline.style,this.fsCtx.lineWidth=t.outline.width,this.fsCtx.strokeText(l,a,s)),t.fill&&(this.fsCtx.fillStyle=t.fill.style,this.fsCtx.fillText(l,a,s)),this.fsCtx.restore()}},{key:"measureText",value:function(t){if(this.aborted)throw new Jn;this.fsCtx.save();var e=tr({},{font:"20px aller",align:"left"},{},t),n=e.font,r=e.align,i=e.text,a=void 0===i?"":i;this.fsCtx.lineJoin="round",this.fsCtx.textAlign=r,this.fsCtx.font=n,t.outline&&(this.fsCtx.strokeStyle=t.outline.style,this.fsCtx.lineWidth=t.outline.width),t.fill&&(this.fsCtx.fillStyle=t.fill.style);var o=this.fsCtx.measureText(a);return this.fsCtx.restore(),o}},{key:"drawImage",value:function(t){if(this.aborted)throw new Jn;if(!(t.image instanceof lt)){var e=tr({flip:!1,w:t.image.width,h:t.image.height,opacity:100},t),n=e.image,r=e.flip,i=e.x,a=e.y,o=e.w,s=e.h,c=e.opacity;if(this.fsCtx.save(),c<100&&(this.fsCtx.globalAlpha=c/100),t.shadow){var l=t.shadow;l.color&&(this.fsCtx.shadowColor=l.color),l.blur&&(this.fsCtx.shadowBlur=l.blur),l.offsetX&&(this.fsCtx.shadowOffsetX=l.offsetX),l.offsetY&&(this.fsCtx.shadowOffsetY=l.offsetY)}this.fsCtx.translate(i+o/2,a+s/2),this.fsCtx.scale(r?-1:1,1),n instanceof nr?n.paintOnto(this.fsCtx,-o/2,-s/2,o,s):this.fsCtx.drawImage(n,-o/2,-s/2,o,s),this.fsCtx.restore()}}},{key:"drawRect",value:function(t){var e=t.x,n=t.y,r=t.w,i=t.h,a=t.outline,o=t.fill,s=t.composition;if(this.aborted)throw new Jn;this.fsCtx.save(),this.fsCtx.beginPath(),this.fsCtx.rect(e,n,r,i),s&&(this.fsCtx.globalCompositeOperation=s),o&&(this.fsCtx.fillStyle=o.style,this.fsCtx.fill()),a&&(this.fsCtx.strokeStyle=a.style,this.fsCtx.lineWidth=a.width,this.fsCtx.stroke()),this.fsCtx.restore()}},{key:"drawPath",value:function(t){var e=t.outline,n=t.fill,r=t.path;if(this.aborted)throw new Jn;this.fsCtx.save(),this.fsCtx.beginPath(),r(this.fsCtx),n&&(this.fsCtx.fillStyle=n.style,this.fsCtx.fill()),e&&(this.fsCtx.strokeStyle=e.style,this.fsCtx.lineWidth=e.width,this.fsCtx.stroke()),this.fsCtx.restore()}},{key:"patternFrom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"repeat";return t instanceof nr&&(t=t.previewCanvas),this.fsCtx.createPattern(t,e)}},{key:"customTransform",value:function(t,e){this.fsCtx.save(),t(this.fsCtx),e(this),this.fsCtx.restore()}},{key:"linearGradient",value:function(t,e,n,r){return this.fsCtx.createLinearGradient(t,e,n,r)}},{key:"abort",value:function(){this.aborted=!0}}]),t}(),nr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1280,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:720;Object(f["a"])(this,t),this.runningContext=null,this.previewCanvas=document.createElement("canvas"),this.previewCanvas.width=e,this.previewCanvas.height=n}return Object(p["a"])(t,[{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],this.runningContext&&this.runningContext.abort(),r=this.previewCanvas.getContext("2d"),r.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height),i=this.runningContext=new er(r,n,!0),t.prev=5,t.next=8,e(this.runningContext);case 8:t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](5),!(t.t0 instanceof Jn)){t.next=14;break}return t.abrupt("return",!1);case 14:throw t.t0;case 15:return t.prev=15,i===this.runningContext&&(this.runningContext=null),t.finish(15);case 18:return t.abrupt("return",!0);case 19:case"end":return t.stop()}},t,this,[[5,10,15,18]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"paintOnto",value:function(t,e,n,r,i){r&&i?t.drawImage(this.previewCanvas,e,n,r,i):t.drawImage(this.previewCanvas,e,n)}},{key:"download",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=document.createElement("canvas"),r.width=this.previewCanvas.width,r.height=this.previewCanvas.height,i=r.getContext("2d"),i.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height),t.next=7,e(new er(i,!0,!1));case 7:if(void 0!==window.navigator.msSaveOrOpenBlob){t.next=19;break}return o=document.createElement("a"),o.setAttribute("download",n),t.next=12,this.createObjectURL(r);case 12:a=t.sent,o.setAttribute("href",a),document.body.appendChild(o),o.click(),document.body.removeChild(o),t.next=23;break;case 19:a=r.toDataURL(),s=this.dataURItoBlob(a),window.URL&&window.URL.createObjectURL&&(a=URL.createObjectURL(s)),window.navigator.msSaveBlob(s,n);case 23:return t.abrupt("return",a);case 24:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"createObjectURL",value:function(t){var e=this;return new Promise(function(n,r){if(t.toBlob&&window.URL&&window.URL.createObjectURL)t.toBlob(function(t){t?n(URL.createObjectURL(t)):r()},"image/png");else if(window.URL&&window.URL.createObjectURL){var i=t.toDataURL(),a=e.dataURItoBlob(i);n(URL.createObjectURL(a))}else n(t.toDataURL())})}},{key:"getDataAt",value:function(t,e){var n=this.previewCanvas.getContext("2d");return n.getImageData(t,e,1,1).data}},{key:"dataURItoBlob",value:function(t){for(var e=atob(t.split(",")[1]),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return new Blob([r],{type:"image/png"})}},{key:"width",get:function(){return this.previewCanvas.width}},{key:"height",get:function(){return this.previewCanvas.height}}]),t}();function rr(t,e,n,r,i,a){r<2*a&&(a=r/2),i<2*a&&(a=i/2),t.moveTo(e+a,n),t.arcTo(e+r,n,e+r,n+i,a),t.arcTo(e+r,n+i,e,n+i,a),t.arcTo(e,n+i,e,n,a),t.arcTo(e,n,e+r,n,a),t.closePath()}var ir=function(){function t(e,n,r,i){Object(f["a"])(this,t),this.h=e,this.s=n,this.l=r,this.a=i}return Object(p["a"])(t,[{key:"toCss",value:function(){return this.a>=1?"hsl(".concat(this.h,", ").concat(this.s,", ").concat(this.l,")"):"hsla(".concat(this.h,", ").concat(this.s,", ").concat(this.l,", ").concat(this.a,")")}},{key:"shift",value:function(e){var n=this.h,r=this.s,i=this.l,a=this.a;return n+e.h>1||n+e.h<0?n-=e.h:n+=e.h,r+e.s>1||r+e.s<0?r-=e.s:r+=e.s,i+e.l>1||i+e.l<0?i-=e.l:i+=e.l,a+e.a>1||a+e.a<0?a-=e.a:a+=e.a,new t(n,r,i,a)}},{key:"toRgb",value:function(){var t,e,n,r=this.h,i=this.s,a=this.l,o=this.a;if(0===i)t=e=n=a;else{var s=a<.5?a*(1+i):a+i-a*i,c=2*a-s;t=this.hue2rgb(c,s,r+1/3),e=this.hue2rgb(c,s,r),n=this.hue2rgb(c,s,r-1/3)}return new ar(Math.round(255*t),Math.round(255*e),Math.round(255*n),o)}},{key:"toHSL",value:function(){return this}},{key:"hue2rgb",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}}]),t}(),ar=function(){function t(e,n,r,i){Object(f["a"])(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return Object(p["a"])(t,[{key:"toCss",value:function(){return this.a>1?"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")"):"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")")}},{key:"toRgb",value:function(){return this}},{key:"toHSL",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;t/=255,e/=255,n/=255;var i,a,o=Math.max(t,e,n),s=Math.min(t,e,n),c=(o+s)/2;if(o===s)i=a=0;else{var l=o-s;switch(a=c>.5?l/(2-o-s):l/(o+s),o){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4;break}i/=6}return new ir(i,a,c,r)}}],[{key:"validCss",value:function(t){return this.validCssRgb(t)||this.validHex(t)}},{key:"fromCss",value:function(t){if(this.validCssRgb(t))return this.fromCssRgb(t);if(this.validHex(t))return this.fromHex(t);throw new Error("Invalid RGB color format")}},{key:"validCssRgb",value:function(t){return this.rgbEx.test(t)||this.rgbaEx.test(t)}},{key:"fromCssRgb",value:function(e){if(!this.validCssRgb(e))throw new Error("Invalid RGB color format");var n=e.slice(0,-1),r=n.indexOf("("),i=n.slice(r),a=i.split(",").map(function(t){return parseFloat(t.trim())});return new t(a[0],a[1],a[2],4===a.length?a[3]:1)}},{key:"validHex",value:function(t){return this.hexShortEx.test(t)||this.hexLongEx.test(t)}},{key:"fromHex",value:function(e){if(!this.validHex(e))throw new Error("Invalid Hex color format");var n=e.slice(1);if(3===n.length)return new t(parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),1);if(4===n.length)return new t(parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)/255);if(6===n.length)return new t(parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16),1);if(8===n.length)return new t(parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16),parseInt(n[6]+n[7],16)/255);throw new Error("Invalid Hex color format length")}}]),t}();function or(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?or(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):or(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}ar.rgbEx=/^rbg\((\d*?)\,(\d*?)\,(\d*?)\)$/i,ar.rgbaEx=/^rbg\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\,([\d\.]+)\)$/i,ar.hexShortEx=/^\#[0-9A-Z]{3,4}$/i,ar.hexLongEx=/^\#[0-9A-Z]{6,8}$/i;var cr=function(){function t(e){Object(f["a"])(this,t),this.obj=e,this.display=!0,this.lastVersion=-1,this.lastX=0,this.lastY=0,this.lastH=0,this.lastW=0,this.localRenderer=new nr(1280,720)}return Object(p["a"])(t,[{key:"hitTest",value:function(t,e){var n=kn/2,r=this.obj.x-n,i=r+kn,a=this.obj.y,o=a+Dn+On;return r<=t&&i>=t&&a<=e&&o>=e}},{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.lastVersion===this.obj.version&&this.lastX===this.obj.x&&this.lastY===this.obj.y&&this.lastH===this.obj.height&&this.lastW===this.obj.width){t.next=6;break}return t.next=3,this.updateLocalCanvas();case 3:this.lastVersion=this.obj.version,this.lastX=this.obj.x,this.lastY=this.obj.y;case 6:n.drawImage({image:this.localRenderer,x:0,y:0,flip:this.obj.flip,shadow:e&&n.preview?{blur:20,color:"red"}:void 0,opacity:this.obj.opacity});case 7:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"updateLocalCanvas",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.localRenderer.render(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(n){var r,i,a,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="custom"===e.obj.style?e.obj.width:kn,i="custom"===e.obj.style?e.obj.height+Dn:On+Dn,a=r/2,o=e.obj.x-a,s=e.obj.y,t.next=7,e.renderBackdrop(n,o,s+Dn);case 7:if(c=e.obj.talking,!c){t.next=18;break}return t.t0=n,t.next=12,bt("namebox");case 12:t.t1=t.sent,t.t2=o+En,t.t3=s,t.t4={image:t.t1,x:t.t2,y:t.t3},t.t0.drawImage.call(t.t0,t.t4),n.drawText(sr({x:o+En+Hn/2,y:s+An,text:c},Yn));case 18:if(e.renderText(n,o,s),l=s+i,u=l-In,d=o+r/2,e.obj.controls&&(n.drawText(sr({text:"History",x:d+Fn,y:u},Vn)),n.drawText(sr({text:"Skip",x:d+Bn,y:u},e.obj.skip?Vn:Gn)),n.drawText(sr({text:"Auto   Save   Load   Settings",x:d+qn,y:u},Vn))),!e.obj.continue){t.next=32;break}return t.t5=n,t.next=27,bt("next");case 27:t.t6=t.sent,t.t7=o+r-Un,t.t8=l-Nn,t.t9={image:t.t6,x:t.t7,y:t.t8},t.t5.drawImage.call(t.t5,t.t9);case 32:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"renderBackdrop",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n,r){var i,a,o,c,l,u=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("custom"!==this.obj.style){t.next=10;break}i=ar.fromCss(this.obj.customColor).toHSL(),a=new nr(47,47),a.render(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=new ir(.004269293924466178,-.01869158878504662,-.039215686274509665,0),r={style:i.shift(n).toRgb().toCss()},e.drawPath({path:function(t){t.ellipse(0,0,9.5,9.5,0,0,2*Math.PI)},fill:r}),e.drawPath({path:function(t){t.ellipse(47,0,9.5,9.5,0,0,2*Math.PI)},fill:r}),e.drawPath({path:function(t){t.ellipse(0,47,9.5,9.5,0,0,2*Math.PI)},fill:r}),e.drawPath({path:function(t){t.ellipse(47,47,9.5,9.5,0,0,2*Math.PI)},fill:r}),e.drawPath({path:function(t){t.ellipse(23.5,24.5,9.5,9.5,0,0,2*Math.PI)},fill:r});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),!0),e.customTransform(function(t){t.beginPath(),rr(t,n+1.5,r+1.5,u.obj.width-3,u.obj.height-3,12),t.clip()},function(t){var e=u.obj.height,i=u.obj.width,o=t.linearGradient(n,r,n,r+e);o.addColorStop(0,u.obj.customColor+"FF"),o.addColorStop(1,u.obj.customColor+"AA"),t.drawRect({x:n,y:r,w:i,h:e,fill:{style:o},outline:{style:"#ffdfee",width:6}}),t.customTransform(function(t){t.translate(n,r)},function(n){var r=t.patternFrom(a);t.drawRect({x:0,y:0,w:i,h:e,fill:{style:r},composition:"source-atop"})}),console.log("Glow:",r+e-Wn,r+e);var s=t.linearGradient(n,r+e-Wn,n,r+e);s.addColorStop(0,"#FFFFFF50"),s.addColorStop(.5,"#FFFFFF10"),s.addColorStop(1,"#FFFFFF00"),t.drawPath({path:function(t){t.ellipse(n+i/2,r+e,zn,Wn,0,0,2*Math.PI)},fill:{style:s}})}),o=new ir(.0023347701149424305,0,.10784313725490202,0),c=i.shift(o).toRgb().toCss(),e.drawPath({path:function(t){rr(t,n+1.5,r+1.5,u.obj.width-3,u.obj.height-3,12)},outline:{style:c,width:3}}),t.next=15;break;case 10:return"corrupt"===this.obj.style&&(n+=(kn-xn)/2),t.next=13,bt("corrupt"===this.obj.style?"textbox_monika":"textbox");case 13:l=t.sent,e.drawImage({image:l,x:n,y:r});case 15:case"end":return t.stop()}},t,this)}));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"renderText",value:function(t,e,n){var r=[],i=!1,a=!0,o=!1,s=void 0;try{for(var c,l=this.obj.text.split("\n")[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value,d=void 0;r.push(d=[]);var h=!0,f=!1,p=void 0;try{for(var b,g=u[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var v=b.value;"["===v?i=!0:"]"===v?i=!1:d.push({l:v,b:i})}}catch(L){f=!0,p=L}finally{try{h||null==g.return||g.return()}finally{if(f)throw p}}}}catch(L){o=!0,s=L}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}var m=e+Tn,y=n+Dn+$n;r[0]&&r[0][0]&&r[0][0].b&&(y+=Mn);for(var w=0,_=r;w<_.length;w++){var j=_[w],k=m;j[0]&&j[0].b&&(k+=Ln);var x=!0,O=!1,C=void 0;try{for(var P,R=j[Symbol.iterator]();!(x=(P=R.next()).done);x=!0){var S=P.value,T=S.l,$=S.b;t.drawText(sr({text:T,x:k,y:y},$?Kn:Xn)),k+=t.measureText(sr({text:T},$?Kn:Xn)).width,k+=$?Sn:Pn}}catch(L){O=!0,C=L}finally{try{x||null==R.return||R.return()}finally{if(O)throw C}}y+=Rn}}},{key:"id",get:function(){return this.obj.id}}]),t}(),lr=n("01c8"),ur=function(){function t(e){Object(f["a"])(this,t),this.obj=e,this.lq=!0,this.localRenderer=new nr(960,960),this.lastVersion=-1,this.hitDetectionFallback=!1}return Object(p["a"])(t,[{key:"updateLocalCanvas",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.localRenderer.render(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(n){var r,i,a,o,s,c,l,u,h,f,p,b,g,v,m,y,w,_,j,k,x,O,C,P,R,S;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=Ht(e.obj),i=[],a=Et(e.obj),o=Dt(e.obj),s=At(e.obj),c=(o.folder?o.folder+"/":"")+(r.folder?r.folder+"/":""),l=(o.folder?o.folder+"/":"")+(s&&s.folder?s.folder+"/":""),!r.static){t.next=11;break}i.push(c+r.static),t.next=39;break;case 11:u=!0,h=!1,f=void 0,t.prev=14,p=a[Symbol.iterator]();case 16:if(u=(b=p.next()).done){t.next=25;break}if(g=b.value,"head"!==g){t.next=20;break}return t.abrupt("continue",22);case 20:v=r[g][e.obj.posePositions[g]],i.push(c+("string"===typeof v?v:v.img));case 22:u=!0,t.next=16;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](14),h=!0,f=t.t0;case 31:t.prev=31,t.prev=32,u||null==p.return||p.return();case 34:if(t.prev=34,!h){t.next=37;break}throw f;case 37:return t.finish(34);case 38:return t.finish(31);case 39:return m=s?l+s.all[e.obj.posePositions.head]:null,t.next=42,Promise.all([m?bt(m,n.hq):Promise.resolve(null)].concat(Object(d["a"])(i.map(function(t){return bt(t,n.hq)}))));case 42:for(y=t.sent,w=Object(lr["a"])(y),_=w[0],j=w.slice(1),k=function(){if(_){var t=r.headAnchor?r.headAnchor:[0,0];n.drawImage({image:_,x:t[0],y:("ddlc.monika"===e.obj.characterType?1:0)+t[1]})}},r.headInForeground||k(),x=!0,O=!1,C=void 0,t.prev=51,P=j[Symbol.iterator]();!(x=(R=P.next()).done);x=!0)S=R.value,n.drawImage({image:S,x:0,y:0});t.next=59;break;case 55:t.prev=55,t.t1=t["catch"](51),O=!0,C=t.t1;case 59:t.prev=59,t.prev=60,x||null==P.return||P.return();case 62:if(t.prev=62,!O){t.next=65;break}throw C;case 65:return t.finish(62);case 66:return t.finish(59);case 67:r.headInForeground&&k(),e.lastVersion=e.obj.version;case 69:case"end":return t.stop()}},t,null,[[14,27,31,39],[32,,34,38],[51,55,59,67],[60,,62,66]])}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){var r,i,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.lastVersion===this.obj.version&&this.lq===!n.hq){t.next=3;break}return t.next=3,this.updateLocalCanvas();case 3:r=this.obj.close?2:1,i=this.obj.width*r,a=this.obj.x-i/2,o=(this.obj.close?$t:0)+this.obj.y,n.drawImage({image:this.localRenderer,x:a,y:o,w:this.obj.width,h:this.obj.height,flip:this.obj.flip,shadow:e&&n.preview?{blur:20,color:"red"}:void 0,opacity:this.obj.opacity});case 8:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"hitTest",value:function(t,e){var n=this.obj.close?1.6:.8,r=960*n,i=(t-this.obj.x+r/2)/n,a=(e-this.obj.y)/n;if(this.obj.flip&&(i=960-i),!this.hitDetectionFallback)try{var o=this.localRenderer.getDataAt(i,a);return 0!==o[3]}catch(s){if(!(s instanceof DOMException&&s.message.includes("cross-origin")))throw s;this.hitDetectionFallback=!0}return!(a<50||a>680)&&Math.abs(i-480)<150}},{key:"id",get:function(){return this.obj.id}}]),t}(),dr=function(){function t(e){var n=this;Object(f["a"])(this,t),this.obj=e,this.ratio=0,this.lockedRatio=!0,this.asset=null,bt(e.assetName).then(function(t){t instanceof lt||(n.asset=t,rt.fire(new ot))}).catch(function(t){console.error("Failed to load asset: ".concat(t))})}return Object(p["a"])(t,[{key:"render",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.asset){t.next=2;break}return t.abrupt("return");case 2:r=this.obj.x-this.obj.width/2,n.drawImage({image:this.asset,x:r,y:this.obj.y,w:this.obj.width,h:this.obj.height,shadow:e&&n.preview?{blur:20,color:"red"}:void 0,flip:this.obj.flip,opacity:this.obj.opacity});case 4:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"hitTest",value:function(t,e){var n=t-this.obj.x+this.obj.width/2,r=e-this.obj.y;return n>=0&&n<=this.obj.width&&r>=0&&r<=this.obj.height}},{key:"id",get:function(){return this.obj.id}},{key:"infront",get:function(){return this.obj.onTop}}]),t}(),hr=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(b["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.canvasWidth=0,t.canvasHeight=0,t.currentBackground=null,t.selected=null,t.renderer=new nr,t.showUI=!0,t.loaded=!1,t.uiSize=192,t.lqRendering=!0,t.currentlyRendering=!1,t.panel="",t.queuedRender=null,t.prevRender="",t.showingLast=!1,t.dropSpriteCount=0,t.dropPreventClick=!1,t.draggedObject=null,t.dragXOffset=0,t.dragYOffset=0,t.dragXOriginal=0,t.dragYOriginal=0,t.renderObjectCache={},t}return Object(v["a"])(e,t),Object(p["a"])(e,[{key:"invalidateRender",value:function(){var t=this;this.queuedRender||(this.queuedRender=requestAnimationFrame(function(){return t.render_()}))}},{key:"render_",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.queuedRender&&(cancelAnimationFrame(this.queuedRender),this.queuedRender=null),t.next=3,this.renderer.render(this.renderCallback,!this.lqRendering);case 3:e=t.sent,e&&this.display();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"renderCallback",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r,i,a,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.currentlyRendering=!0,t.prev=1,this.loaded){t.next=6;break}e.drawText({text:"Starting...",x:this.renderer.width/2,y:this.renderer.height/2,align:"center",outline:{width:5,style:"#b59"},font:"32px riffic",fill:{style:"white"}}),t.next=42;break;case 6:if(!e.preview){t.next=13;break}return t.t0=e,t.next=10,bt("backgrounds/transparent");case 10:t.t1=t.sent,t.t2={x:0,y:0,image:t.t1},t.t0.drawImage.call(t.t0,t.t2);case 13:if(!this.currentBackground){t.next=16;break}return t.next=16,this.currentBackground.render(e);case 16:n=!0,r=!1,i=void 0,t.prev=19,a=this.renderObjects[Symbol.iterator]();case 21:if(n=(o=a.next()).done){t.next=28;break}return s=o.value,t.next=25,s.render(this.selected===s,e);case 25:n=!0,t.next=21;break;case 28:t.next=34;break;case 30:t.prev=30,t.t3=t["catch"](19),r=!0,i=t.t3;case 34:t.prev=34,t.prev=35,n||null==a.return||a.return();case 37:if(t.prev=37,!r){t.next=40;break}throw i;case 40:return t.finish(37);case 41:return t.finish(34);case 42:return t.prev=42,this.currentlyRendering=!1,t.finish(42);case 45:case"end":return t.stop()}},t,this,[[1,,42,45],[19,30,34,42],[35,,37,41]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=this;window.cats=this,this.updateArea(),window.addEventListener("resize",this.updateArea),window.removeEventListener("keydown",this.onKeydown),window.addEventListener("keydown",this.onKeydown),rt.subscribe(ot,function(e){t.invalidateRender()}),this.$store.subscribe(this.invalidateRender),0===Object.keys(this.$store.state.objects.objects).length&&this.$store.dispatch("objects/createTextBox",{})}},{key:"destroyed",value:function(){window.removeEventListener("keydown",this.onKeydown)}},{key:"mounted",value:function(){var t=this,e=this.$refs.sd;this.sdCtx=e.getContext("2d")||void 0,window.addEventListener("keypress",function(e){27===e.keyCode&&(t.selected=null)}),this.currentBackground=yt[0],this.invalidateRender(),Promise.all([bt(this.currentBackground.path,!1),bt("textbox"),bt("namebox"),bt("next"),bt("backgrounds/transparent")]).then(function(){t.loaded=!0,t.invalidateRender()}).catch(function(){alert("Error while loading. Sorry :/")})}},{key:"optimum",value:function(t,e){var n=t/(16/9),r=e*(16/9);return n>e?n=e:r=t,[r,n]}},{key:"optimizeWithMenu",value:function(t,e){var n=this.optimum(t,e-this.uiSize),r=this.optimum(t-this.uiSize,e);return n[0]*n[1]>r[0]*r[1]?[n[0],n[1],!1]:[r[0],r[1],!0]}},{key:"updateArea",value:function(){var t=this,e=this.optimizeWithMenu(document.documentElement.clientWidth,document.documentElement.clientHeight),n=Object(h["a"])(e,3),r=n[0],i=n[1],a=n[2];this.canvasWidth=r,this.canvasHeight=i,this.$store.commit("ui/setVertical",a),this.$nextTick(function(){t.display()})}},{key:"display",value:function(){this.sdCtx&&(this.showingLast=!1,this.renderer.paintOnto(this.sdCtx,0,0,1280,720))}},{key:"download",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.prevRender&&window.URL&&window.URL.revokeObjectURL&&URL.revokeObjectURL(this.prevRender),t.next=3,this.renderer.download(this.renderCallback,"panel.png");case 3:this.prevRender=t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"showPreviousRender",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.showingLast){t.next=3;break}return this.display(),t.abrupt("return");case 3:this.showingLast=!0,e=new Image,e.onload=function(){n.sdCtx.drawImage(e,0,0,1280,720)},e.src=this.prevRender;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"toRendererCoordinate",value:function(t,e){var n=this.$refs.sd,r=t-n.offsetLeft,i=e-n.offsetTop,a=r/n.offsetWidth*n.width,o=i/n.offsetWidth*n.width;return[a,o]}},{key:"onUiClick",value:function(t){if(this.dropPreventClick)this.dropPreventClick=!1;else{this.panel="";var e,n=this.toRendererCoordinate(t.clientX,t.clientY),r=Object(h["a"])(n,2),i=r[0],a=r[1],o=this.objectsAt(i,a),s=o.indexOf(this.selected);e=0===s?null:-1!==s?o[s-1]:o[o.length-1]||null,this.selected=e||null}}},{key:"objectsAt",value:function(t,e){return this.renderObjects.filter(function(n){return n.hitTest(t,e)})}},{key:"onDragStart",value:function(t){t.preventDefault();var e=this.selected;if(e){this.draggedObject=e.obj;var n=this.toRendererCoordinate(t.clientX,t.clientY),r=Object(h["a"])(n,2),i=r[0],a=r[1];this.dragXOffset=i-this.draggedObject.x,this.dragYOffset=a-this.draggedObject.y,this.dragXOriginal=this.draggedObject.x,this.dragYOriginal=this.draggedObject.y}}},{key:"onTouchStart",value:function(t){var e=this.selected;if(e){this.draggedObject=e.obj;var n=this.toRendererCoordinate(t.touches[0].clientX,t.touches[0].clientY),r=Object(h["a"])(n,2),i=r[0],a=r[1];this.dragXOffset=i-this.draggedObject.x,this.dragYOffset=a-this.draggedObject.y,this.dragXOriginal=this.draggedObject.x,this.dragYOriginal=this.draggedObject.y}}},{key:"onDragOver",value:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}},{key:"onSpriteDragMove",value:function(t){var e=this;if(this.draggedObject){t.preventDefault();var n=t instanceof MouseEvent?this.toRendererCoordinate(t.clientX,t.clientY):this.toRendererCoordinate(t.touches[0].clientX,t.touches[0].clientY),r=Object(h["a"])(n,2),i=r[0],a=r[1];i-=this.dragXOffset,a-=this.dragYOffset;var o=Math.abs(i-this.dragXOriginal),s=Math.abs(a-this.dragYOriginal);o+s>1&&(this.dropPreventClick=!0),t.shiftKey&&(o>s?a=this.dragYOriginal:i=this.dragXOriginal),this.history.transaction(function(){e.$store.dispatch("objects/setPosition",{id:e.draggedObject.id,x:i,y:a})})}}},{key:"onDrop",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var n,r,i,a,o,c,l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){t.next=4;break}return t.abrupt("return");case 4:for(n=!0,r=!1,i=void 0,t.prev=7,a=e.dataTransfer.items[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)c=o.value,"file"===c.kind&&c.type.match(/image.*/)&&function(){var t="dropCustomAsset"+ ++l.dropSpriteCount;vt(t,c.getAsFile());l.history.transaction(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.$store.dispatch("objects/createSprite",{assetName:t});case 2:case"end":return e.stop()}},e)})))}();t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),r=!0,i=t.t0;case 15:t.prev=15,t.prev=16,n||null==a.return||a.return();case 18:if(t.prev=18,!r){t.next=21;break}throw i;case 21:return t.finish(18);case 22:return t.finish(15);case 23:case"end":return t.stop()}},t,null,[[7,11,15,23],[16,,18,22]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"onSpriteDrop",value:function(t){this.draggedObject&&("TouchEvent"in window&&t instanceof TouchEvent&&(this.dropPreventClick=!1),this.draggedObject=null)}},{key:"onMouseEnter",value:function(t){1!==t.buttons&&(this.draggedObject=null)}},{key:"onKeydown",value:function(t){var e=this.selected;if(e&&"Delete"===t.key)this.$store.dispatch("objects/removeObject",{id:e.obj.id});else if("z"===t.key&&t.ctrlKey)this.$store.commit("history/undo");else if("y"===t.key&&t.ctrlKey)this.$store.commit("history/redo");else{if(e){if(e instanceof ur&&!e.obj.freeMove)return"ArrowLeft"===t.key&&this.$store.dispatch("objects/shiftCharacterSlot",{id:e.obj.id,delta:-1}),void("ArrowRight"===t.key&&this.$store.dispatch("objects/shiftCharacterSlot",{id:e.obj.id,delta:1}));var n=e?e.obj.x:0,r=e?e.obj.y:0;if("ArrowLeft"===t.key)n-=t.shiftKey?1:20;else if(e&&"ArrowRight"===t.key)n+=t.shiftKey?1:20;else if(e&&"ArrowUp"===t.key)r-=t.shiftKey?1:20;else{if(!e||"ArrowDown"!==t.key)return void console.log(t);r+=t.shiftKey?1:20}this.$store.dispatch("objects/setPosition",{id:e.obj.id,x:n,y:r})}console.log(t)}}},{key:"onNSFWChange",value:function(t){if(this.currentBackground&&!t){this.currentBackground.nsfw&&(this.currentBackground=yt[0]),W(this.currentBackground);var e=!0,n=!1,r=void 0;try{for(var i,a=this.renderObjects[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o instanceof ur&&this.$store.dispatch("objects/nsfwCheck",{id:o.obj.id})}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.invalidateRender()}}},{key:"history",get:function(){return this.$root}},{key:"renderObjects",get:function(){var t=this,e=this.$store.state.objects,n=[].concat(Object(d["a"])(e.order),Object(d["a"])(e.onTopOrder)),r=this.$store.state.objects.objects,i=Object.keys(this.renderObjectCache).filter(function(t){return!n.includes(t)}),a=!0,o=!1,s=void 0;try{for(var c,l=i[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;this.selected&&this.selected.id===u&&(this.selected=null),this.$delete(this.renderObjectCache,u)}}catch(h){o=!0,s=h}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return n.map(function(e){if(!t.renderObjectCache[e]){var n=r[e];switch(n.type){case"sprite":t.renderObjectCache[e]=new dr(n);break;case"character":t.renderObjectCache[e]=new ur(n);break;case"textBox":t.renderObjectCache[e]=new cr(n);break}}return t.renderObjectCache[e].obj=r[e],t.renderObjectCache[e]})}}]),e}(y["c"]);m["a"]([Object(w["a"])("vertical",{namespace:"ui"})],hr.prototype,"vertical",void 0),m["a"]([Object(w["a"])("nsfw",{namespace:"ui"})],hr.prototype,"nsfw",void 0),m["a"]([Object(y["d"])("selected"),Object(y["d"])("lqRendering"),Object(y["d"])("currentBackground")],hr.prototype,"invalidateRender",null),m["a"]([Object(y["d"])("nsfw")],hr.prototype,"onNSFWChange",null),hr=m["a"]([Object(y["a"])({components:{ToolBox:fn,MessageConsole:wn}})],hr);var fr=hr,pr=fr,br=(n("5c0b"),Object(T["a"])(pr,l,u,!1,null,null,null)),gr=br.exports,vr={},mr=0,yr={createSprite:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,bt(n.assetName,!1);case 3:if(i=t.sent,i instanceof HTMLImageElement){t.next=6;break}return t.abrupt("return");case 6:r("create",{object:{assetName:n.assetName,flip:!1,height:i.height,width:i.width,id:"sprite_"+ ++mr,onTop:!1,opacity:100,preserveRatio:!0,ratio:i.width/i.height,type:"sprite",version:0,x:640,y:0}});case 7:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},wr={setText:function(t,e){var n=t.objects[e.id];n.text=e.text,++n.version},setTalking:function(t,e){var n=t.objects[e.id];n.talking=e.talking,++n.version},setStyle:function(t,e){var n=t.objects[e.id];n.style=e.style,++n.version},setControlsVisible:function(t,e){var n=t.objects[e.id];n.controls=e.controls,++n.version},setSkipable:function(t,e){var n=t.objects[e.id];n.skip=e.skip,++n.version},setContinueArrow:function(t,e){var n=t.objects[e.id];n.continue=e.continue,++n.version},setCustomColor:function(t,e){var n=t.objects[e.id];n.customColor=e.color,++n.version}},_r=0,jr={createTextBox:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.state,r=e.commit,r("create",{object:{flip:!1,id:"textBox_"+ ++_r,onTop:!0,opacity:100,type:"textBox",version:0,x:640,y:Qn,width:kn,height:On,preserveRatio:!1,ratio:kn/On,continue:!0,controls:!0,skip:!0,style:"normal",customColor:"#ffa8d2",talking:null,text:""}});case 2:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),setStyle:function(t,e){t.state;var n=t.commit;n("setStyle",{id:e.id,style:e.style})}};function kr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kr(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kr(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Or={namespaced:!0,state:{objects:{},order:[],onTopOrder:[]},mutations:xr({create:function(t,e){t.objects[e.object.id]=e.object,e.object.onTop?t.onTopOrder.push(e.object.id):t.order.push(e.object.id)},removeFromList:function(t,e){var n=e.onTop?t.onTopOrder:t.order,r=n.indexOf(e.id);n.splice(r,1)},addToList:function(t,e){var n=e.onTop?t.onTopOrder:t.order;n.splice(e.position,0,e.id)},setOnTop:function(t,e){var n=t.objects[e.id];n.onTop=e.onTop},setPosition:function(t,e){var n=t.objects[e.id];n.x=e.x,n.y=e.y},setFlip:function(t,e){var n=t.objects[e.id];n.flip=e.flip},setOpacity:function(t,e){var n=t.objects[e.id];n.opacity=e.opacity},setSize:function(t,e){var n=t.objects[e.id];n.width=e.width,n.height=e.height},setRatio:function(t,e){var n=t.objects[e.id];n.preserveRatio=e.preserveRatio,n.ratio=e.ratio},removeObject:function(t,e){delete t.objects[e.id]}},vr,{},Mt,{},wr),actions:xr({removeObject:function(t,e){var n=t.state,r=t.commit,i=n.objects[e.id];r("removeFromList",{id:e.id,onTop:i.onTop}),r("removeObject",{id:e.id})},setPosition:function(t,e){var n=t.state,r=t.commit,i=t.dispatch,a=n.objects[e.id];"character"===a.type?i("setCharacterPosition",e):r("setPosition",e)},setOnTop:function(t,e){var n=t.state,r=t.commit,i=n.objects[e.id];i.onTop!==e.onTop&&(r("removeFromList",{id:e.id,onTop:i.onTop}),r("addToList",{id:e.id,position:(e.onTop?n.onTopOrder:n.order).length,onTop:e.onTop}),r("setOnTop",{id:e.id,onTop:e.onTop}))},shiftLayer:function(t,e){var n=t.state,r=t.commit,i=n.objects[e.id],a=i.onTop?n.onTopOrder:n.order,o=a.indexOf(i.id),s=o+e.delta;s<0&&(s=0),s>a.length&&(s=a.length),r("removeFromList",{id:e.id,onTop:i.onTop}),r("addToList",{id:e.id,position:s,onTop:i.onTop})},setPreserveRatio:function(t,e){var n=t.commit,r=t.state,i=r.objects[e.id],a=e.preserveRatio?i.width/i.height:0;n("setRatio",{id:e.id,preserveRatio:e.preserveRatio,ratio:a})},setWidth:function(t,e){var n=t.commit,r=t.state,i=r.objects[e.id],a=i.preserveRatio?e.width/i.ratio:i.height;n("setSize",{id:e.id,height:a,width:e.width})},setHeight:function(t,e){var n=t.commit,r=t.state,i=r.objects[e.id],a=i.preserveRatio?e.height*i.ratio:i.width;n("setSize",{id:e.id,height:e.height,width:a})}},yr,{},Bt,{},jr)},Cr={namespaced:!0,state:{vertical:!1,nsfw:!1,selection:""},mutations:{setVertical:function(t,e){t.vertical=e},setNsfw:function(t,e){t.nsfw=e}}};i["a"].use(a["a"]);var Pr=new a["a"].Store({modules:{objects:Or,ui:Cr},mutations:{},actions:{}}),Rr={mutations:{}};function Sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sr(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sr(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var $r={mutations:Tr({"objects/*":{combinable:function(t,e){return t.type===e.type&&t.payload.id===e.payload.id}},"objects/create":{combinable:function(){return!1}},"objects/removeObject":{combinable:function(){return!1}}},Rr.mutations)};function Lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lr(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lr(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}i["a"].config.productionTip=!1,i["a"].use(a["a"]),i["a"].use(c,{mutations:Mr({},$r.mutations)}),new i["a"]({store:Pr,render:function(t){return t(gr)}}).$mount("#app")},cdd1:function(t,e,n){},d0ca:function(t){t.exports={id:"ddlc.fan.mc1",name:"MC (Classic)",internalId:"classic_mc",folder:"classic_mc",heads:{straight:["a","b","c","d","e","f","g","h","i","j"]},poses:[{compatibleHeads:["straight"],static:"1"}]}},d309:function(t,e,n){"use strict";var r=n("530d"),i=n.n(r);i.a},d721:function(t,e,n){"use strict";var r=n("23b6"),i=n.n(r);i.a},de40:function(t,e,n){"use strict";var r=n("2c4c"),i=n.n(r);i.a},e50c:function(t,e,n){"use strict";var r=n("7f67"),i=n.n(r);i.a},f055:function(t,e,n){},f183:function(t,e,n){"use strict";var r=n("712c"),i=n.n(r);i.a},f721:function(t){t.exports={id:"ddlc.fan.femc",internalId:"femc",name:"FeMC",heads:{straight:{folder:"femc",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","glitch1","glitch2","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_10alt","_11","_12","_13","_14"]},straight_lh:{folder:"femc_lh",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","glitch1","glitch2","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_10alt","_11","_12","_13","_14"]}},poses:[{compatibleHeads:["straight"],folder:"femc",left:["1l","2l","4l","5l"],right:["1r","4r"]},{compatibleHeads:["straight"],folder:"femc",static:"3"},{compatibleHeads:["straight"],folder:"femc",left:["1bl","2bl","4bl","5bl"],right:["1br","4br"]},{compatibleHeads:["straight"],folder:"femc",static:"3b"},{compatibleHeads:["straight"],folder:"femc",left:["1cl","2cl","4cl","5cl"],right:["1cr","4cr"]},{compatibleHeads:["straight"],folder:"femc",static:"3c"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1l","2l","4l","5l"],right:["1r","4r"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1bl","2bl","4bl","5bl"],right:["1br","4br"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3b"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1cl","2cl","4cl","5cl"],right:["1cr","4cr"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3c"}]}},fa2c:function(t,e,n){"use strict";var r=n("028d"),i=n.n(r);i.a},fdec:function(t){t.exports={id:"ddlc.fan.mc2",name:"MC",internalId:"mc",folder:"mc",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","error","error1","shock"],straight_red:{folder:"red",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","error","error1","shock"]}},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight"],static:"3b"},{compatibleHeads:["straight_red"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight_red"],static:"3"},{compatibleHeads:["straight_red"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight_red"],static:"3b"}]}}});
//# sourceMappingURL=app.b6aa5e8e.js.map