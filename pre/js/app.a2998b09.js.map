{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/toolbox/panels/background/settings.vue?3abe","webpack:///./src/components/toolbox/panels/general.vue?b8c5","webpack:///./src/components/toolbox/panels/sprite.vue?85a7","webpack:///./src/components/toolbox/panels/textbox.vue?34bd","webpack:///./src/components/toolbox/toolbox.vue?cd4b","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?fcb1","webpack:///./src/App.vue?926f","webpack:///./src/components/toolbox/panels/credits.vue?8902","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?a211","webpack:///./src/components/message-console.vue?f58d","webpack:///./src/components/toggle.vue?cce1","webpack:///./src/plugins/vuex-history.js","webpack:///./src/App.vue?4970","webpack:///./src/components/toolbox/toolbox.vue?06ea","webpack:///./src/components/toolbox/panels/general.vue?af0c","webpack:///./src/components/toggle.vue?2965","webpack:///./src/components/toggle.vue?c831","webpack:///./src/components/toggle.vue?111d","webpack:///./src/components/toggle.vue","webpack:///./src/components/toolbox/panels/general.vue?3d06","webpack:///./src/components/toolbox/panels/general.vue?3af4","webpack:///./src/components/toolbox/panels/general.vue","webpack:///./src/components/toolbox/panels/add.vue?1db8","webpack:///./src/models/seekers.ts","webpack:///./src/models/variant-background.ts","webpack:///./src/models/background.ts","webpack:///./src/eventbus/event-bus.ts","webpack:///./src/models/error-asset.ts","webpack:///./src/asset-manager.ts","webpack:///./src/components/toolbox/panels/add.vue?d112","webpack:///./src/components/toolbox/panels/add.vue?6c2e","webpack:///./src/components/toolbox/panels/add.vue","webpack:///./src/components/toolbox/panels/character.vue?a355","webpack:///./src/models/constants.ts","webpack:///./src/store/objectTypes/characters.ts","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?388b","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?8e58","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?de84","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?192d","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?dcb7","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?a903","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?7d9c","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?e6e1","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?4d33","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?6330","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?c3eb","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?4121","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue","webpack:///./src/components/toolbox/panels/character.vue?081c","webpack:///./src/components/toolbox/panels/character.vue?283a","webpack:///./src/components/toolbox/panels/character.vue","webpack:///./src/components/toolbox/panels/sprite.vue?72e7","webpack:///./src/components/toolbox/panels/sprite.vue?dbdb","webpack:///./src/components/toolbox/panels/sprite.vue?bfdb","webpack:///./src/components/toolbox/panels/sprite.vue","webpack:///./src/components/toolbox/panels/textbox.vue?f42a","webpack:///./src/components/toolbox/panels/textbox.vue?ca5f","webpack:///./src/components/toolbox/panels/textbox.vue?500e","webpack:///./src/components/toolbox/panels/textbox.vue","webpack:///./src/components/toolbox/panels/credits.vue?7690","webpack:///./src/components/toolbox/panels/credits.vue?05b9","webpack:///./src/components/toolbox/panels/credits.vue?3709","webpack:///./src/components/toolbox/panels/credits.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?409a","webpack:///./src/components/toolbox/panels/background/button.vue?ec1e","webpack:///./src/components/toolbox/panels/background/button.vue?92ee","webpack:///./src/components/toolbox/panels/background/button.vue?9649","webpack:///./src/components/toolbox/panels/background/button.vue","webpack:///./src/components/toolbox/panels/background/settings.vue?dbd5","webpack:///./src/components/toolbox/panels/background/settings.vue?93fe","webpack:///./src/components/toolbox/panels/background/settings.vue?50a9","webpack:///./src/components/toolbox/panels/background/settings.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?9ca2","webpack:///./src/components/toolbox/panels/backgrounds.vue?18da","webpack:///./src/components/toolbox/panels/backgrounds.vue","webpack:///./src/components/toolbox/toolbox.vue?5a64","webpack:///./src/components/toolbox/toolbox.vue?983b","webpack:///./src/components/toolbox/toolbox.vue","webpack:///./src/components/message-console.vue?be78","webpack:///./src/components/message-console.vue?092b","webpack:///./src/components/message-console.vue?1d97","webpack:///./src/components/message-console.vue","webpack:///./src/models/textBoxConstants.ts","webpack:///./src/renderer/renderAbortedException.ts","webpack:///./src/renderer/rendererContext.ts","webpack:///./src/renderer/renderer.ts","webpack:///./src/renderer/pathTools.ts","webpack:///./src/util/colors/hsl.ts","webpack:///./src/util/colors/rgb.ts","webpack:///./src/models/textbox.ts","webpack:///./src/models/character.ts","webpack:///./src/models/sprite.ts","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/store/objectTypes/sprite.ts","webpack:///./src/store/objectTypes/textbox.ts","webpack:///./src/store/objects.ts","webpack:///./src/store/ui.ts","webpack:///./src/store/index.ts","webpack:///./src/store/objectTypes/sprite_history_properties.ts","webpack:///./src/store/objects_history_properties.ts","webpack:///./src/main.ts","webpack:///./src/components/toolbox/panels/backgrounds.vue?1ea7","webpack:///./src/components/toolbox/panels/character.vue?0e48","webpack:///./src/components/toolbox/panels/add.vue?a456","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?4342","webpack:///./src/components/toolbox/panels/background/button.vue?2e14"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","install","Vue","options","_installedPlugins","find","plugin","Store","Error","replayAll","vm","oldTransactions","done","$store","commit","resetStateMutation","replayTransaction","transaction","forEach","mutation","replayMutation","payload","baseObj","Array","type","assign","mutations","mixin","undone","newMutation","ignoreMutations","currentTransaction","transactionQueue","created","historyStuff","this","subscribe","exec","getMutationProperties","ignore","computed","canRedo","canUndo","methods","redo","pop","undo","callback","Promise","resolve","reject","console","log","lastUndo","combinable","combination","combinator","mutationProperiesCache","parts","split","mutationProperties","oldMutation","currentWildcard","part","_vm","_h","$createElement","_c","_self","attrs","ref","style","width","canvasWidth","height","canvasHeight","on","onUiClick","onTouchStart","onDragStart","onSpriteDragMove","onSpriteDrop","onDragOver","onDrop","onMouseEnter","_v","currentlyRendering","selected","obj","lqRendering","prevRender","currentBackground","$event","download","showPreviousRender","staticRenderFns","class","vertical","active","panel","setPanel","$emit","_e","staticClass","hasPrevRender","nsfw","setNsfw","_uid","domProps","onChange","_s","label","event","$refs","checkbox","checked","String","Boolean","default","components","component","required","namespace","Toggle","undefined","isWebPSupported","_l","character","id","onChosen","toLowerCase","assetPath","upload","click","onFileUpload","uploadFromURL","addTextBox","nsfwArraySeeker","array","pos","delta","val","basefolder","variants","flip","variantI","map","variant","images","img","replace","path","filter","rx","all","getAsset","hq","assets","asset","drawImage","image","x","y","custom","color","render","drawRect","w","h","fill","transparent","background","seekVariant","eventBus","fireCommand","command","subscribeCommand","handler","$on","fire","kind","eventType","unsubscribe","$off","error","webpSupportPromise","characterOrder","losslessCode","document","createElement","addEventListener","src","assetCache","customAssets","url","Image","crossOrigin","display","body","appendChild","registerAsset","file","URL","createObjectURL","registerAssetWithURL","backgrounds","customAssetCount","internalId","e","uploadInput","files","nr","prompt","dispatch","characterType","hasMultiplePoses","seekPose","seekPart","captialize","model","$$v","closeUp","expression","positions","characterPositions","CloseUpYOffset","BaseCharacterYPos","characterMutations","setPose","state","objects","poseId","version","setPosePosition","posePositions","setClose","close","setFreeMove","freeMove","closestCharacterSlot","getData","getPose","poses","getParts","pose","head","compatibleHeads","getHeads","headTypeId","headType","heads","sorted","idx","Math","abs","sort","a","b","lastSpriteId","characterActions","createCharacters","onTop","opacity","preserveRatio","ratio","left","right","oldHeadCollection","newPoseId","newPose","newHeadCollectionNr","indexOf","seekHead","currentHeads","headKey","nsfwCheck","partKeys","setCharacterPosition","shiftCharacterSlot","currentSlotNr","newSlotNr","allowSize","allowStepMove","isFirstPos","directives","rawName","modifiers","$$selectedVal","target","_value","_n","multiple","isLastPos","stopPropagation","composing","$forceUpdate","$root","history","shiftLayer","Infinity","setInFront","newValue","onClick","str","charAt","toUpperCase","substring","PositionAndSize","Layers","Opacity","Delete","sprite","textBoxStyle","textbox","$set","talkingDefaults","talking","showControls","allowSkipping","showContinueArrow","dialog","_m","textboxColor","controls","skip","continue","text","customColor","customPathLookup","nsfwFilter","backgroundColor","backgroundImage","colorBackground","hasVariants","customBGCount","bg","BackgroundButton","BackgroundSettings","panelSelection","newSelection","GeneralPanel","AddPanel","BackgroundsPanel","CreditsPanel","CharacterPanel","TextBoxPanel","SpritePanel","message","messages","showLoading","showLoadingTimeout","hideLoadingTimeout","onLoadingChange","loading","ev","setTimeout","clearTimeout","TextBoxWidth","TextBoxCorruptedWidth","TextBoxHeight","TextBoxY","TextBoxKerning","TextBoxLineHeight","TextBoxCorruptedKerning","TextBoxTextXOffset","TextBoxTextYOffset","TextBoxTextCorruptedXOffset","TextBoxTextCorruptedYOffset","NameboxHeight","NameboxWidth","NameboxXOffset","NameboxTextYOffset","ControlsYBottomOffset","ControlsXHistoryOffset","ControlsXSkipOffset","ControlsXStuffOffset","ArrowXRightOffset","ArrowYBottomOffset","GlowRX","GlowRY","NameboxTextStyle","align","font","outline","ControlsTextStyle","ControlsTextDisabledStyle","TextBoxStyle","TextBoxCorruptedStyle","NameboxY","fsCtx","preview","aborted","params","save","lineJoin","textAlign","strokeStyle","lineWidth","strokeText","fillStyle","fillText","restore","ret","measureText","globalAlpha","shadow","shadowColor","blur","shadowBlur","offsetX","shadowOffsetX","offsetY","shadowOffsetY","translate","scale","paintOnto","composition","beginPath","rect","globalCompositeOperation","stroke","repetition","previewCanvas","createPattern","transform","x0","y0","x1","y1","createLinearGradient","runningContext","renderCallback","abort","ctx","getContext","clearRect","context","filename","downloadCanvas","navigator","msSaveOrOpenBlob","setAttribute","removeChild","toDataURL","blob","dataURItoBlob","msSaveBlob","canvas","toBlob","getImageData","dataURI","binStr","atob","len","arr","Uint8Array","charCodeAt","Blob","roundedRectangle","moveTo","arcTo","closePath","deltas","HSLAColor","g","q","hue2rgb","round","max","min","validCssRgb","validHex","fromCssRgb","fromHex","rgbEx","test","rgbaEx","rgbHead","parentesisPos","rbgTail","elements","parseFloat","trim","RGBAColor","hexShortEx","hexLongEx","hexTail","parseInt","lastVersion","lastX","lastY","lastH","lastW","localRenderer","hx","hy","w2","x2","y2","updateLocalCanvas","renderBackdrop","drawText","renderText","bottom","controlsY","controlsCenter","hslColor","fromCss","toHSL","dotPattern","toRgb","toCss","drawPath","ellipse","PI","customTransform","clip","subRx","gradient","linearGradient","addColorStop","subSubRx","pattern","patternFrom","glowGradient","outlineColor","baseX","baseY","line","cl","startX","letter","ct","cb","lq","hitDetectionFallback","poseFolder","folder","headFolder","static","headAsset","bodyParts","drawHead","headAnchor","headInForeground","bodyPart","zoom","size","getDataAt","DOMException","includes","lockedRatio","assetName","then","catch","err","hitX","hitY","renderer","showUI","loaded","uiSize","queuedRender","showingLast","dropSpriteCount","dropPreventClick","draggedObject","dragXOffset","dragYOffset","dragXOriginal","dragYOriginal","renderObjectCache","requestAnimationFrame","render_","cancelAnimationFrame","completed","renderObjects","cats","updateArea","removeEventListener","onKeydown","invalidateRender","keys","sd","sdCtx","keyCode","alert","sw","sh","rh","rw","opth","optimum","optv","optimizeWithMenu","documentElement","clientWidth","clientHeight","cw","ch","v","$nextTick","revokeObjectURL","onload","offsetLeft","ry","offsetTop","sx","offsetWidth","sy","selectedObject","toRendererCoordinate","clientX","clientY","characters","objectsAt","currentCharacterIdx","renderObject","hitTest","preventDefault","touches","dataTransfer","dropEffect","MouseEvent","deltaX","deltaY","shiftKey","items","item","match","getAsFile","TouchEvent","buttons","ctrlKey","newNSFW","objectsState","order","onTopOrder","toUncache","$delete","ToolBox","MessageConsole","spriteMutations","spriteActions","createSprite","HTMLImageElement","textBoxMutations","setText","setTalking","setStyle","setControlsVisible","setSkipable","setContinueArrow","setCustomColor","lastTextBoxId","textBoxActions","createTextBox","namespaced","removeFromList","collection","addToList","position","setOnTop","setPosition","setFlip","setOpacity","setSize","setRatio","removeObject","actions","newPosition","setPreserveRatio","setWidth","setHeight","selection","setVertical","use","ui","oldMut","newMut","config","productionTip","store","$mount"],"mappings":"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","file":"js/app.a2998b09.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/Doki-Doki-Dialog-Generator/pre/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=1a85d10b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=1a85d10b&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=style&index=0&id=0480c882&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=style&index=0&id=0480c882&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=4dcc1f39&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=4dcc1f39&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=73267e3a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=73267e3a&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=472cd2fc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=472cd2fc&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=30dc8f87&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=30dc8f87&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=371f7813&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=371f7813&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=24b2b581&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=24b2b581&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=21f1fd74&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=21f1fd74&lang=scss&scoped=true&\"","export default {\n\t/**\n\t *\n\t * @param {Vue} Vue\n\t * @param {{}} options\n\t */\n\tinstall(Vue, options = {}) {\n\t\tif (!Vue._installedPlugins.find(plugin => plugin.Store)) {\n\t\t\tthrow new Error(\n\t\t\t\t'VuexUndoRedo plugin must be installed after the Vuex plugin.'\n\t\t\t);\n\t\t}\n\t\tif (!options.resetStateMutation) options.resetStateMutation = 'emptyState';\n\t\tif (!options.mutations) options.mutations = {};\n\t\tVue.mixin({\n\t\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tdone: [],\n\t\t\t\t\tundone: [],\n\t\t\t\t\tnewMutation: true,\n\t\t\t\t\tignoreMutations: options.ignoreMutations || [],\n\t\t\t\t\tcurrentTransaction: null,\n\t\t\t\t\ttransactionQueue: [],\n\t\t\t\t};\n\t\t\t},\n\t\t\tcreated() {\n\t\t\t\twindow.historyStuff = this;\n\t\t\t\tif (this.$store) {\n\t\t\t\t\tthis.$store.subscribe(mutation => {\n\t\t\t\t\t\tconst exec = () => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tmutation.type === options.resetStateMutation ||\n\t\t\t\t\t\t\t\tgetMutationProperties(mutation.type).ignore(mutation)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.currentTransaction.push(mutation);\n\t\t\t\t\t\t\tif (this.newMutation) {\n\t\t\t\t\t\t\t\tthis.undone = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (this.currentTransaction) {\n\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If a mutation triggers outside of any transaction, it gets it's own transaction\n\t\t\t\t\t\t\tthis.transaction(() => {\n\t\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed: {\n\t\t\t\tcanRedo() {\n\t\t\t\t\treturn this.undone.length;\n\t\t\t\t},\n\t\t\t\tcanUndo() {\n\t\t\t\t\treturn this.done.length;\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods: {\n\t\t\t\tredo() {\n\t\t\t\t\tif (this.undone.length <= 0) return;\n\t\t\t\t\tlet commit = this.undone.pop();\n\t\t\t\t\tthis.newMutation = false;\n\t\t\t\t\treplayTransaction(this, commit);\n\t\t\t\t\tthis.newMutation = true;\n\t\t\t\t},\n\t\t\t\tasync undo() {\n\t\t\t\t\tif (this.done.length <= 0) return;\n\t\t\t\t\tthis.undone.push(this.done.pop());\n\t\t\t\t\tthis.newMutation = false;\n\t\t\t\t\tawait replayAll(this);\n\t\t\t\t\tthis.newMutation = true;\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @param {transactionCallback} callback\n\t\t\t\t */\n\t\t\t\ttransaction(callback) {\n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tconst exec = async () => {\n\t\t\t\t\t\t\tthis.currentTransaction = [];\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('Error during transaction!: ', e);\n\t\t\t\t\t\t\t\treject(e);\n\t\t\t\t\t\t\t\tthis.currentTransaction = [];\n\t\t\t\t\t\t\t\t// The transaction that just failed is not in the undo history yet.\n\t\t\t\t\t\t\t\t// So replaying that is equivalent to undoing the transaction.\n\t\t\t\t\t\t\t\treplayAll(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst lastUndo = this.done[this.done.length - 1];\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.currentTransaction.length === 1 &&\n\t\t\t\t\t\t\t\tlastUndo &&\n\t\t\t\t\t\t\t\tlastUndo.length === 1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst options = getMutationProperties(\n\t\t\t\t\t\t\t\t\tthis.currentTransaction[0].type\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\toptions.combinable(lastUndo[0], this.currentTransaction[0])\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst combination = options.combinator(\n\t\t\t\t\t\t\t\t\t\tlastUndo[0],\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction[0]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.done.pop();\n\t\t\t\t\t\t\t\t\tif (combination) {\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [combination];\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Returning a non-truthy value in the combinator simply eliminates both transactions.\n\t\t\t\t\t\t\t\t\t\t// So if the user manually undoes an action, you can just pretend it never happened.\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.currentTransaction.length > 0) {\n\t\t\t\t\t\t\t\tthis.done.push(this.currentTransaction);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.currentTransaction = null;\n\t\t\t\t\t\t\tif (this.transactionQueue.length > 0) {\n\t\t\t\t\t\t\t\tthis.transactionQueue.pop()();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (this.currentTransaction) {\n\t\t\t\t\t\t\tthis.transactionQueue.push(exec);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * @param {Vue} vm\n\t\t * @param {*} mutation\n\t\t */\n\t\tasync function replayAll(vm) {\n\t\t\tconst oldTransactions = vm.done.slice(0);\n\t\t\tvm.done = [];\n\t\t\tvm.$store.commit(options.resetStateMutation);\n\t\t\tfor (let i = 0; i < oldTransactions.length; ++i) {\n\t\t\t\tawait replayTransaction(vm, oldTransactions[i]);\n\t\t\t}\n\t\t}\n\n\t\tasync function replayTransaction(vm, transaction) {\n\t\t\treturn await vm.transaction(() => {\n\t\t\t\ttransaction.forEach(mutation => {\n\t\t\t\t\treplayMutation(vm, mutation);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @param {Vue} vm\n\t\t * @param {*} mutation\n\t\t */\n\t\tfunction replayMutation(vm, mutation) {\n\t\t\tswitch (typeof mutation.payload) {\n\t\t\t\tcase 'object':\n\t\t\t\t\tlet baseObj = {};\n\t\t\t\t\tif (mutation.payload instanceof Array) {\n\t\t\t\t\t\tbaseObj = [];\n\t\t\t\t\t}\n\t\t\t\t\tvm.$store.commit(\n\t\t\t\t\t\t`${mutation.type}`,\n\t\t\t\t\t\tObject.assign(baseObj, mutation.payload)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvm.$store.commit(`${mutation.type}`, mutation.payload);\n\t\t\t}\n\t\t}\n\n\t\tconst mutationProperiesCache = {};\n\n\t\t/**\n\t\t *\n\t\t * @param {IHistoryOptions} options\n\t\t * @param {*} name\n\t\t */\n\t\tfunction getMutationProperties(name) {\n\t\t\tif (!mutationProperiesCache[name]) {\n\t\t\t\tconst parts = name.split('/');\n\t\t\t\tconst mutationProperties = {\n\t\t\t\t\tignore: mutation => false,\n\t\t\t\t\tcombinable: (oldMutation, newMutation) => false,\n\t\t\t\t\tcombinator: (oldMutation, newMutation) => newMutation,\n\t\t\t\t};\n\t\t\t\tlet currentWildcard = '';\n\t\t\t\tfor (const part of parts) {\n\t\t\t\t\tif (options.mutations[currentWildcard + '*']) {\n\t\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t\tmutationProperties,\n\t\t\t\t\t\t\toptions.mutations[currentWildcard + '*']\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentWildcard += part + '/';\n\t\t\t\t}\n\t\t\t\tif (options.mutations[name]) {\n\t\t\t\t\tObject.assign(mutationProperties, options.mutations[name]);\n\t\t\t\t}\n\t\t\t\tmutationProperiesCache[name] = mutationProperties;\n\t\t\t}\n\t\t\treturn mutationProperiesCache[name];\n\t\t}\n\t},\n};\n\n/**\n * @callback transactionCallback\n * @async\n */\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"container\"}},[_c('canvas',{ref:\"sd\",style:({width: _vm.canvasWidth+ 'px', height: _vm.canvasHeight + 'px'}),attrs:{\"id\":\"scaled_display\",\"height\":\"720\",\"width\":\"1280\",\"draggable\":\"\"},on:{\"click\":_vm.onUiClick,\"touchstart\":_vm.onTouchStart,\"dragstart\":_vm.onDragStart,\"touchmove\":_vm.onSpriteDragMove,\"mousemove\":_vm.onSpriteDragMove,\"touchend\":_vm.onSpriteDrop,\"mouseup\":_vm.onSpriteDrop,\"dragover\":_vm.onDragOver,\"drop\":_vm.onDrop,\"mouseenter\":_vm.onMouseEnter}},[_vm._v(\"HTML5 is required to use the Doki Doki Dialog Generator.\")])]),_c('message-console',{attrs:{\"loading\":_vm.currentlyRendering}}),_c('tool-box',{attrs:{\"selected\":_vm.selected ? _vm.selected.obj : null,\"lqRendering\":_vm.lqRendering,\"prevRender\":_vm.prevRender,\"currentBackground\":_vm.currentBackground},on:{\"update:lqRendering\":function($event){_vm.lqRendering=$event},\"update:lq-rendering\":function($event){_vm.lqRendering=$event},\"update:currentBackground\":function($event){_vm.currentBackground=$event},\"update:current-background\":function($event){_vm.currentBackground=$event},\"download\":_vm.download,\"clear-selection\":function($event){_vm.selected = null},\"show-prev-render\":_vm.showPreviousRender}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"panels\"}},[_c('div',{attrs:{\"id\":\"toolbar\"}},[_c('button',{class:{ active: _vm.panel === 'add' },on:{\"click\":function($event){return _vm.setPanel('add')}}},[_vm._v(\"A\")]),_c('button',{class:{ active: _vm.panel === 'backgrounds' },on:{\"click\":function($event){return _vm.setPanel('backgrounds')}}},[_vm._v(\"B\")]),_c('button',{class:{ active: _vm.panel === 'credits' },on:{\"click\":function($event){return _vm.setPanel('credits')}}},[_vm._v(\"C\")]),_c('button',{on:{\"click\":function($event){return _vm.$emit('download')}}},[_vm._v(\"D\")])]),_c('keep-alive',[(_vm.panel === '')?_c('general-panel',{attrs:{\"has-prev-render\":_vm.prevRender !== '',\"lqRendering\":_vm.lqRendering},on:{\"update:lqRendering\":function($event){return _vm.$emit('update:lqRendering', $event)},\"show-prev-render\":function($event){return _vm.$emit('show-prev-render')}}}):_vm._e(),(_vm.panel === 'add')?_c('add-panel'):_vm._e(),(_vm.panel === 'backgrounds')?_c('backgrounds-panel',{attrs:{\"value\":_vm.currentBackground},on:{\"input\":function($event){return _vm.$emit('update:currentBackground', $event)}}}):_vm._e(),(_vm.panel === 'credits')?_c('credits-panel'):_vm._e(),(_vm.panel === 'character')?_c('character-panel',{attrs:{\"character\":_vm.selected}}):_vm._e(),(_vm.panel === 'sprite')?_c('sprite-panel',{attrs:{\"sprite\":_vm.selected}}):_vm._e(),(_vm.panel === 'textBox')?_c('text-box-panel',{attrs:{\"textbox\":_vm.selected}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"General\")]),_c('a',{staticClass:\"btn_link\",attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/edave64/Doki-Doki-Dialog-Generator/blob/v1/docs/index.md\"}},[_vm._v(\"Help\")]),_c('toggle',{attrs:{\"label\":\"Low quality preview?\",\"title\":\"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.\",\"value\":_vm.lqRendering},on:{\"input\":function($event){return _vm.$emit('update:lqRendering', $event)}}}),_c('button',{attrs:{\"disabled\":!_vm.hasPrevRender},on:{\"click\":function($event){return _vm.$emit('show-prev-render')}}},[_vm._v(\"Compare to last download\")]),_c('toggle',{attrs:{\"label\":\"NSFW Mode?\",\"value\":_vm.nsfw},on:{\"input\":_vm.setNsfw}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"checkbox\",attrs:{\"id\":_vm._uid,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.value},on:{\"change\":_vm.onChange}}),_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class Toggle extends Vue {\r\n\t@Prop({ type: String }) private label!: string | undefined;\r\n\t@Prop({ type: Boolean, default: false }) private value!: boolean;\r\n\r\n\tprivate onChange(event: Event) {\r\n\t\tthis.$emit('input', !!(this.$refs.checkbox as HTMLInputElement).checked);\r\n\t}\r\n\r\n\tprivate get checkbox(): HTMLInputElement {\r\n\t\treturn this.$refs.checkbox as HTMLInputElement;\r\n\t}\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toggle.vue?vue&type=template&id=21f1fd74&scoped=true&\"\nimport script from \"./toggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./toggle.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toggle.vue?vue&type=style&index=0&id=21f1fd74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21f1fd74\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { TextBox } from '@/models/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class GeneralPanel extends Vue {\n\t@Prop({ required: true, type: Boolean })\n\tprivate readonly lqRendering!: boolean;\n\t@Prop({ required: true, type: Boolean })\n\tprivate readonly hasPrevRender!: boolean;\n\t@State('nsfw', { namespace: 'ui' }) private readonly nsfw!: boolean;\n\n\tprivate setNsfw(value: boolean) {\n\t\tthis.$store.commit('ui/setNsfw', value);\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./general.vue?vue&type=template&id=0480c882&scoped=true&\"\nimport script from \"./general.vue?vue&type=script&lang=ts&\"\nexport * from \"./general.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./general.vue?vue&type=style&index=0&id=0480c882&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0480c882\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isWebPSupported !== undefined)?_c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"Add character\")]),_vm._l((_vm.characters),function(character){return _c('div',{key:character.id,staticClass:\"character\",attrs:{\"title\":character.name},on:{\"click\":function($event){_vm.onChosen(character.id.toLowerCase())}}},[_c('img',{attrs:{\"src\":_vm.assetPath(character),\"alt\":character.name}})])}),_c('div',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\"\\n\\t\\tCustom sprite upload\\n\\t\\t\"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})]),_c('div',{staticClass:\"btn custom-sprite\",on:{\"click\":_vm.uploadFromURL}},[_vm._v(\"Custom sprite from URL\")]),_c('button',{on:{\"click\":_vm.addTextBox}},[_vm._v(\"Textbox\")])],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function arraySeeker(array: any[], pos: number, delta: number) {\n\tlet val = pos + delta;\n\tconst length = array.length;\n\n\tif (val < 0) {\n\t\tval += length;\n\t}\n\tif (val >= length) {\n\t\tval -= length;\n\t}\n\treturn val;\n}\n\nexport function nsfwArraySeeker(\n\tarray: Array<{ nsfw?: boolean }>,\n\tpos: number,\n\tdelta: number,\n\tnsfw: boolean\n) {\n\tlet val = pos;\n\tconst length = array.length;\n\tdo {\n\t\tval += delta;\n\t\tif (val < 0) {\n\t\t\tval += length;\n\t\t}\n\t\tif (val >= length) {\n\t\t\tval -= length;\n\t\t}\n\t} while (array[val].nsfw && !nsfw);\n\treturn val;\n}\n","import { IBackground } from './background';\r\nimport { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAsset } from '@/asset-manager';\r\nimport { nsfwArraySeeker } from './seekers';\r\n\r\n// Formatter quirk\r\n// tslint:disable:indent\r\ntype VariantParam =\r\n\t| string[]\r\n\t| {\r\n\t\t\tnsfw: boolean;\r\n\t\t\timages: string[];\r\n\t  };\r\n// tslint:enable:indent\r\n\r\ninterface IVariant {\r\n\tnsfw: boolean;\r\n\timages: string[];\r\n}\r\n\r\nexport class VariantBackground implements IBackground {\r\n\tpublic readonly path: string;\r\n\tpublic flip: boolean = false;\r\n\tpublic readonly variants: IVariant[];\r\n\tprivate variantI: number = 0;\r\n\r\n\tpublic constructor(\r\n\t\tpublic readonly name: string,\r\n\t\treadonly basefolder: string,\r\n\t\tvariants: VariantParam[],\r\n\t\tpublic readonly nsfw = false\r\n\t) {\r\n\t\tthis.variants = variants.map(variant => {\r\n\t\t\tif (variant instanceof Array) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\timages: variant.map(img => (basefolder + img).replace(/\\/+/g, '/')),\r\n\t\t\t\t\tnsfw: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\timages: variant.images.map(img =>\r\n\t\t\t\t\t(basefolder + img).replace(/\\/+/g, '/')\r\n\t\t\t\t),\r\n\t\t\t\tnsfw: variant.nsfw,\r\n\t\t\t};\r\n\t\t});\r\n\t\tthis.path = this.variants[0].images[0];\r\n\t}\r\n\r\n\tpublic get variant(): number {\r\n\t\treturn this.variantI;\r\n\t}\r\n\r\n\tpublic hasVariants(nsfw: boolean): boolean {\r\n\t\treturn (\r\n\t\t\tthis.variants.filter(variant => {\r\n\t\t\t\treturn !variant.nsfw || nsfw;\r\n\t\t\t}).length > 1\r\n\t\t);\r\n\t}\r\n\r\n\tpublic seekVariant(delta: 1 | -1, nsfw: boolean) {\r\n\t\tthis.variantI = nsfwArraySeeker(this.variants, this.variantI, delta, nsfw);\r\n\t}\r\n\r\n\tpublic async render(rx: RenderContext): Promise<void> {\r\n\t\tconst assets = await Promise.all(\r\n\t\t\tthis.variants[this.variantI].images.map(img => getAsset(img, rx.hq))\r\n\t\t);\r\n\t\tfor (const asset of assets) {\r\n\t\t\trx.drawImage({ image: asset, x: 0, y: 0, flip: this.flip });\r\n\t\t}\r\n\t}\r\n}\r\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { VariantBackground } from './variant-background';\n\nexport interface IBackground {\n\tname: string;\n\tnsfw?: boolean;\n\trender(rx: RenderContext): Promise<void>;\n}\n\nexport class Background implements IBackground {\n\tpublic readonly path: string;\n\tpublic flip: boolean = false;\n\tpublic constructor(\n\t\tpath: string,\n\t\tpublic readonly name: string,\n\t\tpublic readonly nsfw: boolean = false,\n\t\tpublic readonly custom: boolean = false\n\t) {\n\t\tthis.path = (custom ? '' : '/backgrounds/') + path;\n\t}\n\n\tpublic async render(rx: RenderContext): Promise<void> {\n\t\trx.drawImage({\n\t\t\timage: await getAsset(this.path, rx.hq),\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.flip,\n\t\t});\n\t}\n}\n\nexport const color = {\n\tname: 'Static color',\n\tcolor: '#000000',\n\n\tasync render(rx: RenderContext): Promise<void> {\n\t\trx.drawRect({ x: 0, y: 0, w: 1280, h: 720, fill: { style: this.color } });\n\t},\n};\n\nexport const transparent = {\n\tname: 'Transparent',\n\t// tslint:disable-next-line: no-empty\n\tasync render(rx: RenderContext): Promise<void> {},\n};\n\nexport function nsfwFilter(background: IBackground) {\n\tif (\n\t\tbackground instanceof VariantBackground &&\n\t\tbackground.variants[background.variant].nsfw\n\t) {\n\t\tbackground.seekVariant(1, false);\n\t}\n}\n","import Vue from 'vue';\nimport { ICommand } from './command';\n\nconst eventBus = new Vue();\n\nexport default {\n\tfireCommand(command: ICommand) {\n\t\teventBus.$emit('command', command);\n\t},\n\tsubscribeCommand(handler: (ev: ICommand) => void): void {\n\t\teventBus.$on('command', handler);\n\t},\n\n\tfire(event: IEvent) {\n\t\teventBus.$emit(event.kind, event);\n\t},\n\n\tsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$on(eventType.kind, handler);\n\t},\n\n\tunsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$off(eventType.kind, handler);\n\t},\n};\n\ninterface IEvent {\n\tkind: string;\n}\n\ninterface IEventClass<T> {\n\tkind: string;\n\tnew (...args: any[]): T;\n}\n\n// tslint:disable: max-classes-per-file\n\nexport class AssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'AssetFailureEvent';\n\tpublic readonly kind = 'AssetFailureEvent';\n\tpublic constructor(public path: string) {}\n}\n\nexport class CustomAssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'CustomAssetFailureEvent';\n\tpublic readonly kind = 'CustomAssetFailureEvent';\n\tpublic constructor(public error: ErrorEvent) {}\n}\n\nexport class InvalidateRenderEvent implements IEvent {\n\tpublic static readonly kind = 'InvalidateRenderEvent';\n\tpublic readonly kind = 'InvalidateRenderEvent';\n}\n","export class ErrorAsset {}\n","import {\n\tBackground,\n\ttransparent,\n\tcolor,\n\tIBackground,\n} from './models/background';\nimport Sayori from './characters/sayori.json';\nimport Yuri from './characters/yuri.json';\nimport Monika from './characters/monika.json';\nimport Natsuki from './characters/natsuki.json';\nimport FeMC from './characters/femc.json';\nimport MC from './characters/mc.json';\nimport MCChad from './characters/mc_chad.json';\nimport MCClassic from './characters/mc_classic.json';\nimport Amy from './characters/amy.json';\nimport AmyClassic from './characters/amy_classic.json';\nimport { VariantBackground } from './models/variant-background';\nimport EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n} from './eventbus/event-bus';\nimport { ErrorAsset } from './models/error-asset';\n\nexport const characterOrder = ([\n\tMonika,\n\tNatsuki,\n\tSayori,\n\tYuri,\n\tFeMC,\n\tMC,\n\tMCChad,\n\tMCClassic,\n\tAmy,\n\tAmyClassic,\n] as any) as Array<ICharacter<any>>;\n\nexport const characters: { [name: string]: ICharacter<any> } = {\n\t[Sayori.id]: Sayori as any,\n\t[Yuri.id]: Yuri as any,\n\t[Natsuki.id]: Natsuki as any,\n\t[Monika.id]: Monika as any,\n\t[FeMC.id]: FeMC as any,\n\t[MC.id]: MC as any,\n\t[MCChad.id]: MCChad as any,\n\t[MCClassic.id]: MCClassic as any,\n\t[Amy.id]: Amy as any,\n\t[AmyClassic.id]: AmyClassic as any,\n};\n\nlet webpSupportPromise: Promise<boolean>;\n\nexport function isWebPSupported(): Promise<boolean> {\n\tif (!webpSupportPromise) {\n\t\twebpSupportPromise = new Promise((resolve, reject) => {\n\t\t\tconst losslessCode =\n\t\t\t\t'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img.width === 2 && img.height === 1);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tresolve(false);\n\t\t\t});\n\t\t\timg.src = losslessCode;\n\t\t});\n\t}\n\treturn webpSupportPromise;\n}\n\nconst assetCache: {\n\t[url: string]: Promise<HTMLImageElement | ErrorAsset> | undefined;\n} = {};\nconst customAssets: { [id: string]: Promise<HTMLImageElement> } = {};\n\nexport async function getAsset(\n\tasset: string,\n\thq: boolean = true\n): Promise<HTMLImageElement | ErrorAsset> {\n\tif (customAssets[asset]) {\n\t\treturn customAssets[asset];\n\t}\n\n\tconst url = `${process.env.BASE_URL}/assets/${asset}${hq ? '' : '.lq'}${\n\t\t(await isWebPSupported()) ? '.webp' : '.png'\n\t}`.replace(/\\/+/, '/');\n\n\tif (!assetCache[url]) {\n\t\tassetCache[url] = new Promise((resolve, reject) => {\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tEventBus.fire(new AssetFailureEvent(url));\n\t\t\t\tassetCache[url] = undefined;\n\t\t\t\tresolve(new ErrorAsset());\n\t\t\t});\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.src = url;\n\t\t\timg.style.display = 'none';\n\t\t\tdocument.body.appendChild(img);\n\t\t});\n\t}\n\n\treturn assetCache[url]!;\n}\n\nexport function registerAsset(asset: string, file: File): string {\n\tconst url = URL.createObjectURL(file);\n\tcustomAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t});\n\treturn url;\n}\n\nexport function registerAssetWithURL(\n\tasset: string,\n\turl: string\n): Promise<HTMLImageElement> {\n\treturn (customAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t}));\n}\n\nexport const backgrounds: IBackground[] = [\n\tnew VariantBackground('Clubroom', '/backgrounds/', [\n\t\t['club'],\n\t\t{\n\t\t\tnsfw: true,\n\t\t\timages: ['club-skill'],\n\t\t},\n\t]),\n\tnew Background('closet', 'Closet'),\n\tnew Background('corridor', 'Corridor'),\n\tnew Background('class', 'Classroom'),\n\tnew Background('residential', 'Street'),\n\tnew Background('house', 'House'),\n\tnew Background('bedroom', 'Bedroom'),\n\tnew Background('kitchen', 'Kitchen'),\n\tnew VariantBackground(\"Sayori's bedroom\", '', [\n\t\t['/backgrounds/sayori_bedroom'],\n\t\t['/cg/sayori_kill/s_kill_bg'],\n\t\t['/cg/sayori_kill/s_kill_bg2'],\n\t]),\n\tnew Background('bsod', 'Blue screen of death'),\n\tnew Background('unused-house', 'Unused house found in game files'),\n\tnew VariantBackground('Natsuki reading manga', '/cg/natsuki_1/', [\n\t\t['n_cg1_bg'],\n\t\t['n_cg1_bg', 'n_cg1_base'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp1'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp2'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp3'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp4'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp5'],\n\t]),\n\tnew VariantBackground('Natsuki in the closet', '/cg/natsuki_2/', [\n\t\t['n_cg2_bg'],\n\t\t['n_cg2_bg', 'n_cg2_base'],\n\t\t['n_cg2_bg', 'n_cg2_base', 'n_cg2_exp1'],\n\t\t['n_cg2_bg', 'n_cg2_base', 'n_cg2_exp2'],\n\t]),\n\tnew VariantBackground('Natsuki against the wall', '/cg/natsuki_3/', [\n\t\t['n_cg3_base'],\n\t\t['n_cg3_base', 'n_cg3_exp1'],\n\t\t['n_cg3_base', 'n_cg3_exp2'],\n\t\t['n_cg3_base', 'n_cg3_cake'],\n\t\t['n_cg3_base', 'n_cg3_exp1', 'n_cg3_cake'],\n\t\t['n_cg3_base', 'n_cg3_exp2', 'n_cg3_cake'],\n\t]),\n\tnew Background('../cg/sayori_1/s_cg1', 'Sayori dressing'),\n\tnew VariantBackground('Sayori bumped head', '/cg/sayori_2/', [\n\t\t['s_cg2_base1'],\n\t\t['s_cg2_base1', 's_cg2_exp1'],\n\t\t['s_cg2_base1', 's_cg2_exp2'],\n\t\t['s_cg2_base1', 's_cg2_exp3'],\n\t\t['s_cg2_base1', 's_cg2_exp1', 's_cg2_exp3'],\n\t\t['s_cg2_base1', 's_cg2_exp2', 's_cg2_exp3'],\n\t\t['s_cg2_base2'],\n\t\t['s_cg2_base2', 's_cg2_exp1'],\n\t\t['s_cg2_base2', 's_cg2_exp2'],\n\t\t['s_cg2_base2', 's_cg2_exp3'],\n\t\t['s_cg2_base2', 's_cg2_exp1', 's_cg2_exp3'],\n\t\t['s_cg2_base2', 's_cg2_exp2', 's_cg2_exp3'],\n\t]),\n\tnew Background('../cg/sayori_3/s_cg3', 'Sayori hug'),\n\tnew VariantBackground('Yuri reading', '/cg/yuri_1/', [\n\t\t['y_cg1_base'],\n\t\t['y_cg1_base', 'y_cg1_exp2'],\n\t\t['y_cg1_base', 'y_cg1_exp1'],\n\t\t['y_cg1_base', 'y_cg1_exp1', 'y_cg1_exp2'],\n\t\t['y_cg1_base', 'y_cg1_exp3'],\n\t]),\n\tnew VariantBackground('Yuri against the wall', '/cg/yuri_2/', [\n\t\t['y_cg2_bg1'],\n\t\t['y_cg2_bg1', 'y_cg2_base', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg1', 'y_cg2_base', 'y_cg2_exp2', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg1', 'y_cg2_base', 'y_cg2_exp3', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg1', 'y_cg2_base'],\n\t\t['y_cg2_bg1', 'y_cg2_base', 'y_cg2_exp2'],\n\t\t['y_cg2_bg1', 'y_cg2_base', 'y_cg2_exp3'],\n\t\t['y_cg2_bg2'],\n\t\t['y_cg2_bg2', 'y_cg2_base', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg2', 'y_cg2_base', 'y_cg2_exp2', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg2', 'y_cg2_base', 'y_cg2_exp3', 'y_cg2_nochoc'],\n\t\t['y_cg2_bg2', 'y_cg2_base'],\n\t\t['y_cg2_bg2', 'y_cg2_base', 'y_cg2_exp2'],\n\t\t['y_cg2_bg2', 'y_cg2_base', 'y_cg2_exp3'],\n\t]),\n\tnew VariantBackground('Yuri with towel', '/cg/yuri_3/', [\n\t\t['y_cg3_base'],\n\t\t['y_cg3_base', 'y_cg3_exp1'],\n\t]),\n\tnew VariantBackground(\n\t\t\"Yuri's death\",\n\t\t'/cg/yuri_kill/',\n\t\t[['1a'], ['1b'], ['1c'], ['2a'], ['2b'], ['2c'], ['3a'], ['3b'], ['3c']],\n\t\ttrue\n\t),\n\tnew VariantBackground('The spaceroom', '/cg/monika/', [\n\t\t['monika_room'],\n\t\t['space', 'monika_room'],\n\t\t['monika_room_highlight'],\n\t\t['space', 'monika_room_highlight'],\n\t\t['monika_bg'],\n\t\t['space', 'monika_bg'],\n\t\t['monika_bg_highlight'],\n\t\t['space', 'monika_bg_highlight'],\n\t\t['room'],\n\t\t['space', 'room'],\n\t\t['monika_bg_glitch'],\n\t\t['monika_bg_glitch', 'monika_glitch1'],\n\t\t['monika_bg_glitch', 'monika_glitch2'],\n\t\t['monika_bg_glitch', 'monika_glitch3'],\n\t\t['monika_bg_glitch', 'monika_glitch4'],\n\t\t{\n\t\t\tnsfw: true,\n\t\t\timages: ['monika_scare'],\n\t\t},\n\t\t{\n\t\t\tnsfw: true,\n\t\t\timages: ['space', 'monika_scare'],\n\t\t},\n\t]),\n\tcolor,\n\ttransparent,\n];\n\nexport interface IHeads {\n\tfolder?: string;\n\tnsfw?: boolean;\n\tall: string[];\n}\n\nexport interface Heads {\n\t[id: string]: IHeads | string[];\n}\n\ninterface IPose<H> {\n\tcompatibleHeads: Array<keyof H>;\n\theadInForeground?: boolean;\n\tfolder?: string;\n\tnsfw?: boolean;\n\theadAnchor?: [number, number];\n}\n\ninterface IStaticPose<H> extends IPose<H> {\n\tstatic: string;\n}\n\nexport interface INsfwAbleImg {\n\timg: string;\n\tnsfw: boolean;\n}\n\ninterface IVariantPose<H> extends IPose<H> {\n\tvariant: Array<string | INsfwAbleImg>;\n}\n\ninterface ITwoSidedPose<H> extends IPose<H> {\n\tleft: Array<string | INsfwAbleImg>;\n\tright: Array<string | INsfwAbleImg>;\n}\n\nexport type Pose<H extends Heads> =\n\t| IStaticPose<H>\n\t| IVariantPose<H>\n\t| ITwoSidedPose<H>;\n\nexport interface ICharacter<H extends Heads> {\n\tid: string;\n\tinternalId: string;\n\tname: string;\n\tfolder?: string;\n\tnsfw?: boolean;\n\theads: H;\n\tposes: Array<Pose<H>>;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tICharacter,\n\tcharacterOrder,\n\tregisterAsset,\n\tregisterAssetWithURL,\n} from '@/asset-manager';\nimport { ICreateCharacterAction } from '@/store/objectTypes/characters';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Vue {\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate customAssetCount = 0;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get characters(): Array<ICharacter<any>> {\n\t\treturn characterOrder;\n\t}\n\n\tprivate assetPath(character: ICharacter<any>) {\n\t\treturn `${process.env.BASE_URL}/assets/chibis/${character.internalId}.lq.${\n\t\t\tthis.isWebPSupported ? 'webp' : 'png'\n\t\t}`.replace(/\\/+/, '/');\n\t}\n\n\tprivate onFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\t(nr => {\n\t\t\t\tconst name = 'customAsset' + nr;\n\t\t\t\tconst url = registerAsset(name, file);\n\t\t\t\tthis.$emit('add-custom-asset', name);\n\t\t\t})(++this.customAssetCount);\n\t\t}\n\t}\n\n\tprivate async uploadFromURL() {\n\t\tconst url = prompt('Enter the URL of the image');\n\t\tif (!url) return;\n\t\tconst name = 'customAsset' + ++this.customAssetCount;\n\t\tawait registerAssetWithURL(name, url);\n\t\tthis.$emit('add-custom-asset', name);\n\t}\n\n\tprivate addTextBox() {\n\t\tthis.$store.dispatch('objects/createTextBox', {} as ICreateTextBoxAction);\n\t}\n\n\tprivate onChosen(id: string) {\n\t\tthis.$store.dispatch('objects/createCharacters', {\n\t\t\tcharacterType: id,\n\t\t} as ICreateCharacterAction);\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=504dbf3e&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=ts&\"\nexport * from \"./add.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=504dbf3e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"504dbf3e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(_vm._s(_vm.label))]),(_vm.hasMultiplePoses || _vm.parts.length > 0)?_c('fieldset',[_c('legend',[_vm._v(\"Pose:\")]),_c('table',[_c('tbody',[(_vm.hasMultiplePoses)?_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){return _vm.seekPose(-1, _vm.nsfw);}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(\"Pose\")]),_c('td',[_c('button',{on:{\"click\":function($event){return _vm.seekPose(1, _vm.nsfw);}}},[_vm._v(\">\")])])]):_vm._e(),_vm._l((_vm.parts),function(part){return _c('tr',{key:part},[_c('td',[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, -1, _vm.nsfw);}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(_vm._s(_vm.captialize(part)))]),_c('td',[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, 1, _vm.nsfw);}}},[_vm._v(\">\")])])])})],2)])]):_vm._e(),_c('position-and-size',{attrs:{\"obj\":_vm.character}}),_c('layers',{attrs:{\"obj\":_vm.character}}),_c('opacity',{attrs:{\"obj\":_vm.character}}),_c('toggle',{attrs:{\"label\":\"Close up?\"},model:{value:(_vm.closeUp),callback:function ($$v) {_vm.closeUp=$$v},expression:\"closeUp\"}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.character}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Background } from './background';\r\n\r\nexport const backgrounds = [] as Background[];\r\n\r\nexport type Part = 'variant' | 'left' | 'right' | 'head';\r\n\r\nexport type CharacterIds =\r\n\t| 'ddlc.monika'\r\n\t| 'ddlc.natsuki'\r\n\t| 'ddlc.sayori'\r\n\t| 'ddlc.yuri'\r\n\t| 'ddlc.fan.mc_classic'\r\n\t| 'ddlc.fan.femc';\r\n\r\nexport const positions = [\r\n\t'4-1',\r\n\t'3-1',\r\n\t'2-1',\r\n\t'4-2',\r\n\t'center',\r\n\t'4-3',\r\n\t'2-2',\r\n\t'3-3',\r\n\t'4-4',\r\n];\r\n\r\nexport const characterPositions = [\r\n\t200,\r\n\t240,\r\n\t400,\r\n\t493,\r\n\t640,\r\n\t786,\r\n\t880,\r\n\t1040,\r\n\t1080,\r\n];\r\n\r\nexport const poses = {\r\n\tsayori: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tyuri: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tnatsuki: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tmonika: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n};\r\n","import { ICommand } from '@/eventbus/command';\nimport { Pose, characters, IHeads } from '@/asset-manager';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n} from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { Part, characterPositions } from '@/models/constants';\nimport { ICharacter as ICharacterData } from '@/asset-manager';\nimport { nsfwArraySeeker } from '@/models/seekers';\nimport { IHistoryOptions } from '@/plugins/vuex-history';\n\nexport interface ICharacter extends IObject {\n\ttype: 'character';\n\tcharacterType: string;\n\tfreeMove: boolean;\n\tclose: boolean;\n\tposeId: number;\n\tposePositions: {\n\t\tvariant: number;\n\t\tleft: number;\n\t\tright: number;\n\t\thead: number;\n\t\theadType: number;\n\t};\n}\n\nexport const CloseUpYOffset = -74;\nexport const BaseCharacterYPos = -26;\n\nexport const characterMutations: MutationTree<IObjectsState> = {\n\tsetPose(state, command: ISetPoseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.poseId = command.poseId;\n\t\t++obj.version;\n\t},\n\tsetPosePosition(state, command: ISetPosePositionMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.posePositions = {\n\t\t\t...obj.posePositions,\n\t\t\t...command.posePositions,\n\t\t};\n\t\t++obj.version;\n\t},\n\tsetClose(state, command: ISetCloseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.close = command.close;\n\t\tobj.y += CloseUpYOffset * (obj.close ? 1 : -1);\n\t},\n\tsetFreeMove(state, command: ISetFreeMoveMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.freeMove = command.freeMove;\n\t\tif (!obj.freeMove) {\n\t\t\tobj.x = characterPositions[closestCharacterSlot(obj.x)];\n\t\t\tobj.y = BaseCharacterYPos + CloseUpYOffset * (obj.close ? 1 : 0);\n\t\t}\n\t},\n};\n\nexport function getData(\n\tstate: Readonly<ICharacter>\n): Readonly<ICharacterData<any>> {\n\treturn characters[state.characterType];\n}\n\nexport function getPose(state: Readonly<ICharacter>): Readonly<Pose<any>> {\n\treturn getData(state).poses[state.poseId];\n}\n\nexport function getParts(state: Readonly<ICharacter>): Part[] {\n\tconst pose = getPose(state);\n\tconst head: Array<'head'> = pose.compatibleHeads.length > 0 ? ['head'] : [];\n\n\tif ('variant' in pose) {\n\t\treturn [...head, 'variant'];\n\t}\n\tif ('left' in pose) {\n\t\treturn [...head, 'left', 'right'];\n\t}\n\treturn head;\n}\n\nexport function getHeads(\n\tstate: Readonly<ICharacter>,\n\theadTypeId: number = state.posePositions.headType\n): IHeads | null {\n\tconst data = getData(state);\n\tconst compatibleHeads = getPose(state).compatibleHeads;\n\tif (!compatibleHeads || compatibleHeads.length === 0) {\n\t\treturn null;\n\t}\n\tconst heads = data.heads[compatibleHeads[headTypeId]];\n\tif (heads instanceof Array) {\n\t\treturn {\n\t\t\tall: heads,\n\t\t};\n\t}\n\treturn heads;\n}\n\nexport function closestCharacterSlot(pos: number): number {\n\tconst sorted = characterPositions\n\t\t.map((x, idx) => ({ pos: Math.abs(pos - x), idx }))\n\t\t.sort((a, b) => a.pos - b.pos);\n\treturn sorted[0].idx;\n}\n\nlet lastSpriteId = 0;\n\nexport const characterActions: ActionTree<IObjectsState, never> = {\n\tcreateCharacters({ state, commit }, command: ICreateCharacterAction) {\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tflip: false,\n\t\t\t\tid: 'characters_' + ++lastSpriteId,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'character',\n\t\t\t\tx: 640,\n\t\t\t\ty: BaseCharacterYPos,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: 1,\n\t\t\t\theight: 768,\n\t\t\t\twidth: 768,\n\t\t\t\tcharacterType: command.characterType,\n\t\t\t\tclose: false,\n\t\t\t\tfreeMove: false,\n\t\t\t\tversion: 0,\n\t\t\t\tposeId: 0,\n\t\t\t\tposePositions: {\n\t\t\t\t\thead: 0,\n\t\t\t\t\theadType: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tvariant: 0,\n\t\t\t\t},\n\t\t\t} as ICharacter,\n\t\t} as ICreateObjectMutation);\n\t},\n\n\tseekPart(\n\t\t{ state, commit, dispatch },\n\t\t{ delta, id, part, nsfw }: ISeekPosePartAction\n\t) {\n\t\tif (part === 'head') {\n\t\t\tdispatch('seekHead', { id, delta, nsfw } as ISeekHeadAction);\n\t\t\treturn;\n\t\t}\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst pose = getPose(obj);\n\t\tif (!(pose as any)[part]) return;\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\t[part]: nsfwArraySeeker(\n\t\t\t\t\t(pose as any)[part],\n\t\t\t\t\tobj.posePositions[part],\n\t\t\t\t\tdelta,\n\t\t\t\t\tnsfw\n\t\t\t\t),\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tseekPose({ state, commit }, { id, delta, nsfw }: ISeekPoseAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getData(obj);\n\t\tconst oldHeadCollection = getPose(obj).compatibleHeads[\n\t\t\tobj.posePositions.headType\n\t\t];\n\n\t\tconst newPoseId = nsfwArraySeeker(data.poses, obj.poseId, delta, nsfw);\n\t\tconst newPose = data.poses[newPoseId];\n\t\tconst newHeadCollectionNr = newPose.compatibleHeads.indexOf(\n\t\t\toldHeadCollection\n\t\t);\n\t\tlet headType: number;\n\t\tlet head = obj.posePositions.head;\n\t\tif (newHeadCollectionNr >= 0) {\n\t\t\theadType = newHeadCollectionNr;\n\t\t} else {\n\t\t\theadType = 0;\n\t\t\thead = 0;\n\t\t}\n\t\tcommit('setPose', {\n\t\t\tid,\n\t\t\tposeId: newPoseId,\n\t\t} as ISetPoseMutation);\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\thead,\n\t\t\t\theadType,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\tvariant: 0,\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tseekHead({ state, commit }, { id, delta, nsfw }: ISeekHeadAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getData(obj);\n\t\tconst pose = getPose(obj);\n\t\tlet currentHeads = getHeads(obj);\n\t\tif (!currentHeads) return;\n\t\tlet head = obj.posePositions.head + delta;\n\t\tlet headType = obj.posePositions.headType;\n\t\tif (head < 0 || head >= currentHeads.all.length) {\n\t\t\theadType = nsfwArraySeeker(\n\t\t\t\tpose.compatibleHeads.map(headKey => data.heads[headKey]),\n\t\t\t\theadType,\n\t\t\t\tdelta,\n\t\t\t\tnsfw\n\t\t\t);\n\t\t\tcurrentHeads = getHeads(obj, headType)!;\n\t\t\thead = delta === 1 ? 0 : currentHeads.all.length - 1;\n\t\t}\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\thead,\n\t\t\t\theadType,\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tnsfwCheck({ state, commit, dispatch }, { id }: INsfwCheckAction): void {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst pose = getPose(obj);\n\t\tconst partKeys = getParts(obj);\n\n\t\tif (pose.nsfw) {\n\t\t\tdispatch('seekPose', {\n\t\t\t\tid,\n\t\t\t\tdelta: 1,\n\t\t\t\tnsfw: false,\n\t\t\t} as ISeekPoseAction);\n\t\t}\n\n\t\tfor (const key of partKeys) {\n\t\t\tif (key === 'head') continue;\n\t\t\tconst image: { nsfw?: boolean } = (pose as any)[key][\n\t\t\t\tobj.posePositions[key]\n\t\t\t];\n\n\t\t\tif (image.nsfw) {\n\t\t\t\tdispatch('seekPart', {\n\t\t\t\t\tid,\n\t\t\t\t\tdelta: 1,\n\t\t\t\t\tnsfw: false,\n\t\t\t\t} as ISeekPosePartAction);\n\t\t\t}\n\t\t}\n\n\t\tconst heads = getHeads(obj);\n\t\tif (heads) {\n\t\t\tif (heads.nsfw) {\n\t\t\t\tcommit('setPosePosition', {\n\t\t\t\t\tid,\n\t\t\t\t\tposePositions: {\n\t\t\t\t\t\thead: 0,\n\t\t\t\t\t\theadType: 0,\n\t\t\t\t\t},\n\t\t\t\t} as ISetPosePositionMutation);\n\t\t\t}\n\t\t}\n\t},\n\n\tsetCharacterPosition(\n\t\t{ state, commit, dispatch },\n\t\t{ id, x, y }: ISetPositionAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tif (obj.freeMove) {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t} else {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx: characterPositions[closestCharacterSlot(x)],\n\t\t\t\ty: BaseCharacterYPos + (obj.close ? CloseUpYOffset : 0),\n\t\t\t} as ISetObjectPositionMutation);\n\t\t}\n\t},\n\n\tshiftCharacterSlot(\n\t\t{ state, commit, dispatch },\n\t\t{ id, delta }: IShiftCharacterSlotAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tconst currentSlotNr = closestCharacterSlot(obj.x);\n\t\tlet newSlotNr = currentSlotNr + delta;\n\t\tif (newSlotNr < 0) {\n\t\t\tnewSlotNr = 0;\n\t\t}\n\t\tif (newSlotNr >= characterPositions.length) {\n\t\t\tnewSlotNr = characterPositions.length - 1;\n\t\t}\n\t\tcommit('setPosition', {\n\t\t\tid,\n\t\t\tx: characterPositions[newSlotNr],\n\t\t\ty: obj.y,\n\t\t} as ISetObjectPositionMutation);\n\t},\n};\n\nexport const propertyOptions: IHistoryOptions = {\n\tmutations: {\n\t\tsetPosePosition: {\n\t\t\tcombinable: (oldMut, newMut) => oldMut.payload.id === newMut.payload.id,\n\t\t\tcombinator: (oldMut, newMut) => ({\n\t\t\t\ttype: newMut.type,\n\t\t\t\tpayload: {\n\t\t\t\t\tid: newMut.payload.id,\n\t\t\t\t\tposePositions: {\n\t\t\t\t\t\t...oldMut.payload.posePositions,\n\t\t\t\t\t\t...newMut.payload.posePositions,\n\t\t\t\t\t},\n\t\t\t\t} as ISetPosePositionMutation,\n\t\t\t}),\n\t\t},\n\t},\n};\n\nexport interface ISetPoseMutation extends ICommand {\n\treadonly poseId: number;\n}\n\nexport interface ISetPosePositionMutation extends ICommand {\n\tposePositions: {\n\t\tvariant: number;\n\t\tleft: number;\n\t\tright: number;\n\t\thead: number;\n\t\theadType: number;\n\t};\n}\n\nexport interface ISetFreeMoveMutation extends ICommand {\n\treadonly freeMove: boolean;\n}\n\nexport interface ISetCloseMutation extends ICommand {\n\treadonly close: boolean;\n}\n\nexport interface ICreateCharacterAction {\n\treadonly characterType: string;\n}\n\nexport interface ISeekPoseAction extends ICommand {\n\treadonly delta: number;\n\treadonly nsfw: boolean;\n}\n\nexport interface ISeekHeadAction extends ICommand {\n\tdelta: -1 | 1;\n\tnsfw: boolean;\n}\n\nexport interface INsfwCheckAction extends ICommand {}\n\nexport interface ISeekPosePartAction extends ICommand {\n\treadonly part: Part;\n\treadonly delta: number;\n\treadonly nsfw: boolean;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetSpriteWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetSpriteHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assetName: string;\n}\n\nexport interface IShiftCharacterSlotAction extends ICommand {\n\treadonly delta: number;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',[_c('legend',[_vm._v(\"Position\"+_vm._s(_vm.allowSize ? \"/Size\" : \"\")+\":\")]),(_vm.allowStepMove)?_c('toggle',{attrs:{\"label\":\"Move freely?\"},model:{value:(_vm.freeMove),callback:function ($$v) {_vm.freeMove=$$v},expression:\"freeMove\"}}):_vm._e(),(_vm.allowStepMove && !_vm.freeMove)?_c('div',[_c('button',{attrs:{\"disabled\":_vm.isFirstPos},on:{\"click\":function($event){--_vm.pos}}},[_vm._v(\"<\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.pos),expression:\"pos\",modifiers:{\"number\":true}}],attrs:{\"id\":\"current_talking\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.pos=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.positionNames),function(val,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(_vm._s(val))])}),0),_c('button',{attrs:{\"disabled\":_vm.isLastPos},on:{\"click\":function($event){++_vm.pos}}},[_vm._v(\">\")])]):_c('div',[_c('label',{attrs:{\"for\":\"sprite_x\"}},[_vm._v(\"X:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.x),expression:\"x\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_x\",\"type\":\"number\"},domProps:{\"value\":(_vm.x)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.x=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_y\"}},[_vm._v(\"Y:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.y),expression:\"y\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_y\",\"type\":\"number\"},domProps:{\"value\":(_vm.y)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.y=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),(_vm.allowSize)?_c('div',[_c('label',{attrs:{\"for\":\"sprite_w\"}},[_vm._v(\"Width:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.width),expression:\"width\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_w\",\"type\":\"number\"},domProps:{\"value\":(_vm.width)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.width=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_h\"}},[_vm._v(\"Height:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.height),expression:\"height\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_h\",\"type\":\"number\"},domProps:{\"value\":(_vm.height)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.height=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('toggle',{attrs:{\"label\":\"Lock ratio?\"},model:{value:(_vm.preserveRatio),callback:function ($$v) {_vm.preserveRatio=$$v},expression:\"preserveRatio\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { IRenderable } from '@/models/renderable';\nimport { positions, characterPositions } from '@/models/constants';\nimport {\n\tclosestCharacterSlot,\n\tISetFreeMoveMutation,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { State } from 'vuex-class-decorator';\nimport {\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n\tIObject,\n\tISetHeightAction,\n\tISetWidthAction,\n\tISetRatioAction,\n} from '@/store/objects';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { ITextBox } from '../../../store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class PositionAndSize extends Vue {\n\t@Prop({ required: true })\n\tprivate readonly obj!: IObject;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate get allowSize() {\n\t\tconst obj = this.obj;\n\t\tif (\n\t\t\tthis.obj.type === 'textBox' &&\n\t\t\t(this.obj as ITextBox).style !== 'custom'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.obj.type === 'character' && !(this.obj as ICharacter).freeMove) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate get allowStepMove() {\n\t\treturn 'freeMove' in this.obj;\n\t}\n\n\tprivate get freeMove() {\n\t\treturn (this.obj as ICharacter).freeMove;\n\t}\n\n\tprivate set freeMove(val: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFreeMove', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tfreeMove: val,\n\t\t\t} as ISetFreeMoveMutation);\n\t\t});\n\t}\n\n\tprivate get positionNames(): string[] {\n\t\treturn positions;\n\t}\n\n\tprivate get pos(): number {\n\t\treturn closestCharacterSlot(this.obj.x);\n\t}\n\n\tprivate set pos(value: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: characterPositions[value],\n\t\t\t\ty: this.obj.y,\n\t\t\t} as ISetPositionAction);\n\t\t});\n\t}\n\n\tprivate get isFirstPos(): boolean {\n\t\treturn this.pos === 0;\n\t}\n\n\tprivate get isLastPos(): boolean {\n\t\treturn this.pos === positions.length - 1;\n\t}\n\n\tprivate get x(): number {\n\t\treturn this.obj.x;\n\t}\n\n\tprivate set x(val: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: val,\n\t\t\t\ty: this.y,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get y(): number {\n\t\treturn this.obj.y;\n\t}\n\n\tprivate set y(val: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: this.x,\n\t\t\t\ty: val,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get height(): number {\n\t\treturn (this.obj as ISprite).height;\n\t}\n\n\tprivate set height(val: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setHeight', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\theight: val,\n\t\t\t} as ISetHeightAction);\n\t\t});\n\t}\n\n\tprivate get width(): number {\n\t\treturn (this.obj as ISprite).width;\n\t}\n\n\tprivate set width(val: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setWidth', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\twidth: val,\n\t\t\t} as ISetWidthAction);\n\t\t});\n\t}\n\n\tprivate get preserveRatio(): boolean {\n\t\treturn (this.obj as ISprite).preserveRatio;\n\t}\n\n\tprivate set preserveRatio(val: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPreserveRatio', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tpreserveRatio: val,\n\t\t\t} as ISetRatioAction);\n\t\t});\n\t}\n}\n\nexport interface MoveObject {\n\tobject: IRenderable;\n\tmove: 'Forward' | 'Backward' | 'Back' | 'Front' | 'Delete';\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./positionAndSize.vue?vue&type=template&id=721fb59d&scoped=true&\"\nimport script from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nexport * from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./positionAndSize.vue?vue&type=style&index=0&id=721fb59d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"721fb59d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',{attrs:{\"id\":\"layerfs\"}},[_c('legend',[_vm._v(\"Layer:\")]),_c('button',{attrs:{\"title\":\"Move to back\"},on:{\"click\":function($event){return _vm.shiftLayer(-Infinity)}}},[_vm._v(\"⤓\")]),_c('button',{attrs:{\"title\":\"Move backwards\"},on:{\"click\":function($event){return _vm.shiftLayer(-1)}}},[_vm._v(\"↓\")]),_c('button',{attrs:{\"title\":\"Move forwards\"},on:{\"click\":function($event){return _vm.shiftLayer(1)}}},[_vm._v(\"↑\")]),_c('button',{attrs:{\"title\":\"Move to front\"},on:{\"click\":function($event){return _vm.shiftLayer(Infinity)}}},[_vm._v(\"⤒\")]),_c('toggle',{attrs:{\"value\":_vm.obj.onTop,\"label\":\"In front?\"},on:{\"input\":_vm.setInFront}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tIObjectShiftLayerAction,\n\tIObject,\n} from '@/store/objects';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class Layers extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate shiftLayer(delta: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/shiftLayer', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tdelta,\n\t\t\t} as IObjectShiftLayerAction);\n\t\t});\n\t}\n\n\tprivate setInFront(newValue: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setOnTop', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tonTop: newValue,\n\t\t\t} as IObjectSetOnTopAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./layers.vue?vue&type=template&id=371f7813&scoped=true&\"\nimport script from \"./layers.vue?vue&type=script&lang=ts&\"\nexport * from \"./layers.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./layers.vue?vue&type=style&index=0&id=371f7813&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"371f7813\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"characterOpacity\"}},[_vm._v(\"Opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.opacity),expression:\"opacity\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"max\":\"100\",\"min\":\"0\",\"id\":\"characterOpacity\"},domProps:{\"value\":(_vm.opacity)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.opacity=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, ISetObjectOpacityMutation } from '@/store/objects';\n\n@Component({})\nexport default class Opacity extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate get opacity() {\n\t\treturn this.obj.opacity;\n\t}\n\n\tprivate set opacity(opacity: number) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setOpacity', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\topacity,\n\t\t\t} as ISetObjectOpacityMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./opacity.vue?vue&type=template&id=472cd2fc&scoped=true&\"\nimport script from \"./opacity.vue?vue&type=script&lang=ts&\"\nexport * from \"./opacity.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./opacity.vue?vue&type=style&index=0&id=472cd2fc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"472cd2fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{on:{\"click\":_vm.onClick}},[_vm._v(\"Delete\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, IRemoveObjectAction } from '@/store/objects';\n\n@Component({})\nexport default class Delete extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate onClick() {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\tid: this.obj.id,\n\t\t\t} as IRemoveObjectAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./delete.vue?vue&type=template&id=2baede2f&\"\nimport script from \"./delete.vue?vue&type=script&lang=ts&\"\nexport * from \"./delete.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { Part } from '@/models/constants';\nimport {\n\tgetData,\n\tgetParts,\n\tISeekPoseAction,\n\tISetCloseMutation,\n\tISeekPosePartAction,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { ISetObjectFlipMutation } from '@/store/objects';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t},\n})\nexport default class CharacterPanel extends Vue {\n\t@Prop({ required: true })\n\tprivate readonly character!: ICharacter;\n\n\t@State('nsfw', { namespace: 'ui' })\n\tprivate readonly nsfw!: boolean;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate get label(): string {\n\t\treturn getData(this.character).name;\n\t}\n\n\tprivate get parts(): string[] {\n\t\treturn getParts(this.character);\n\t}\n\n\tprivate get hasMultiplePoses(): boolean {\n\t\treturn getData(this.character).poses.length > 1;\n\t}\n\n\tprivate seekPose(delta: number, nsfw: boolean): void {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t\tnsfw,\n\t\t\t} as ISeekPoseAction);\n\t\t});\n\t}\n\n\tprivate seekPart(part: Part, delta: number, nsfw: boolean): void {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPart', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t\tnsfw,\n\t\t\t\tpart,\n\t\t\t} as ISeekPosePartAction);\n\t\t});\n\t}\n\n\tprivate captialize(str: string) {\n\t\treturn str.charAt(0).toUpperCase() + str.substring(1);\n\t}\n\n\tprivate get flip() {\n\t\treturn this.character.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get closeUp() {\n\t\treturn this.character.close;\n\t}\n\n\tprivate set closeUp(newValue: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setClose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tclose: newValue,\n\t\t\t} as ISetCloseMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./character.vue?vue&type=template&id=462630bb&scoped=true&\"\nimport script from \"./character.vue?vue&type=script&lang=ts&\"\nexport * from \"./character.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./character.vue?vue&type=style&index=0&id=462630bb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"462630bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"Custom Sprite\")]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/models/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/models/renderable';\nimport { Sprite } from '@/models/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t},\n})\nexport default class SpritePanel extends Vue {\n\t@Prop({ required: true }) private sprite!: ISprite;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sprite.vue?vue&type=template&id=4dcc1f39&scoped=true&\"\nimport script from \"./sprite.vue?vue&type=script&lang=ts&\"\nexport * from \"./sprite.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sprite.vue?vue&type=style&index=0&id=4dcc1f39&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dcc1f39\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"Textbox\")]),_c('div',[_c('label',{attrs:{\"for\":\"text_style\"}},[_vm._v(\"Style:\")]),_c('br'),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textBoxStyle),expression:\"textBoxStyle\"}],attrs:{\"id\":\"text_style\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.textBoxStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"normal\"}},[_vm._v(\"Normal\")]),_c('option',{attrs:{\"value\":\"corrupt\"}},[_vm._v(\"Corrupt\")]),_c('option',{attrs:{\"value\":\"custom\"}},[_vm._v(\"Custom\")])])]),_c('toggle',{attrs:{\"label\":\"Textbox corrupt?\"},model:{value:(_vm.textbox.corrupted),callback:function ($$v) {_vm.$set(_vm.textbox, \"corrupted\", $$v)},expression:\"textbox.corrupted\"}}),_c('div',[_c('label',{attrs:{\"for\":\"current_talking\"}},[_vm._v(\"Person talking:\")]),_c('br'),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talkingDefaults),expression:\"talkingDefaults\"}],attrs:{\"id\":\"current_talking\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.talkingDefaults=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"None\"}},[_vm._v(\"No-one\")]),_c('option',{attrs:{\"value\":\"Sayori\"}},[_vm._v(\"Sayori\")]),_c('option',{attrs:{\"value\":\"Yuri\"}},[_vm._v(\"Yuri\")]),_c('option',{attrs:{\"value\":\"Natsuki\"}},[_vm._v(\"Natsuki\")]),_c('option',{attrs:{\"value\":\"Monika\"}},[_vm._v(\"Monika\")]),_c('option',{attrs:{\"value\":\"FeMC\"}},[_vm._v(\"FeMC\")]),_c('option',{attrs:{\"value\":\"MC\"}},[_vm._v(\"MC\")]),_c('option',{attrs:{\"value\":\"Amy\"}},[_vm._v(\"Amy\")]),_c('option',{attrs:{\"value\":\"Other\"}},[_vm._v(\"Other\")])])]),_c('div',[_c('label',{attrs:{\"for\":\"custom_name\"}},[_vm._v(\"Other name:\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talking),expression:\"talking\"}],attrs:{\"id\":\"custom_name\"},domProps:{\"value\":(_vm.talking)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.talking=$event.target.value}}})]),_c('toggle',{attrs:{\"label\":\"Controls visible?\"},model:{value:(_vm.showControls),callback:function ($$v) {_vm.showControls=$$v},expression:\"showControls\"}}),_c('toggle',{attrs:{\"label\":\"Able to skip?\"},model:{value:(_vm.allowSkipping),callback:function ($$v) {_vm.allowSkipping=$$v},expression:\"allowSkipping\"}}),_c('toggle',{attrs:{\"label\":\"Continue arrow?\"},model:{value:(_vm.showContinueArrow),callback:function ($$v) {_vm.showContinueArrow=$$v},expression:\"showContinueArrow\"}}),_c('div',{attrs:{\"id\":\"dialog_text_wrapper\"}},[_c('label',{attrs:{\"for\":\"dialog_text\"}},[_vm._v(\"Dialog:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dialog),expression:\"dialog\"}],attrs:{\"id\":\"dialog_text\"},domProps:{\"value\":(_vm.dialog)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.dialog=$event.target.value}}})]),_vm._m(0),_c('position-and-size',{attrs:{\"obj\":_vm.textbox}}),_c('layers',{attrs:{\"obj\":_vm.textbox}}),_c('opacity',{attrs:{\"obj\":_vm.textbox}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('fieldset',[_c('legend',[_vm._v(\"Customization:\")]),_c('label',{attrs:{\"for\":\"textbox_color\"}},[_vm._v(\"Color:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textboxColor),expression:\"textboxColor\"}],attrs:{\"id\":\"textbox_color\",\"type\":\"color\"},domProps:{\"value\":(_vm.textboxColor)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.textboxColor=$event.target.value}}})]),_c('delete',{attrs:{\"obj\":_vm.textbox}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tFormatting:\\n\\t\\t\"),_c('br'),_vm._v(\"[In brackets] for editied style text\\n\\t\")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport {\n\tITextBox,\n\tISetTextBoxTalkingMutation,\n\tISetTextBoxControlsVisibleMutation,\n\tISetTextBoxControlsSkipMutation,\n\tISetTextBoxControlsContinueMutation,\n\tISetTextBoxTextMutation,\n\tISetTextBoxStyleAction,\n\tISetTextBoxCustomColorMutation,\n} from '@/store/objectTypes/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { ISetObjectFlipMutation } from '@/store/objects';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t},\n})\nexport default class TextPanel extends Vue {\n\t@Prop({ required: true }) private readonly textbox!: ITextBox;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\tprivate get talkingDefaults(): string {\n\t\tswitch (this.talking) {\n\t\t\tcase null:\n\t\t\t\treturn 'None';\n\t\t\tcase 'Sayori':\n\t\t\tcase 'Yuri':\n\t\t\tcase 'Natsuki':\n\t\t\tcase 'Monika':\n\t\t\tcase 'FeMC':\n\t\t\tcase 'MC':\n\t\t\tcase 'Amy':\n\t\t\t\treturn this.talking;\n\t\t\tdefault:\n\t\t\t\treturn 'Other';\n\t\t}\n\t}\n\n\tprivate set talkingDefaults(value: string) {\n\t\tif (value === 'None') {\n\t\t\tthis.talking = null;\n\t\t} else if (value === 'Other') {\n\t\t\tthis.talking = '';\n\t\t} else {\n\t\t\tthis.talking = value;\n\t\t}\n\t}\n\n\tprivate get talking(): string | null {\n\t\treturn this.textbox.talking;\n\t}\n\n\tprivate set talking(talking: string | null) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setTalking', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttalking,\n\t\t\t} as ISetTextBoxTalkingMutation);\n\t\t});\n\t}\n\n\tprivate get showControls(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set showControls(controls: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setControlsVisible', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontrols,\n\t\t\t} as ISetTextBoxControlsVisibleMutation);\n\t\t});\n\t}\n\n\tprivate get allowSkipping(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set allowSkipping(skip: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setSkipable', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tskip,\n\t\t\t} as ISetTextBoxControlsSkipMutation);\n\t\t});\n\t}\n\n\tprivate get showContinueArrow(): boolean {\n\t\treturn this.textbox.continue;\n\t}\n\n\tprivate set showContinueArrow(value: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setContinueArrow', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontinue: value,\n\t\t\t} as ISetTextBoxControlsContinueMutation);\n\t\t});\n\t}\n\n\tprivate get dialog(): string {\n\t\treturn this.textbox.text;\n\t}\n\n\tprivate set dialog(text: string) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setText', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttext,\n\t\t\t} as ISetTextBoxTextMutation);\n\t\t});\n\t}\n\n\tprivate get flip(): boolean {\n\t\treturn this.textbox.flip;\n\t}\n\n\tprivate set flip(flip: boolean) {\n\t\tthis.history.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tflip,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get textBoxStyle(): ITextBox['style'] {\n\t\treturn this.textbox.style;\n\t}\n\n\tprivate set textBoxStyle(style: ITextBox['style']) {\n\t\tthis.$store.dispatch('objects/setStyle', {\n\t\t\tid: this.textbox.id,\n\t\t\tstyle,\n\t\t} as ISetTextBoxStyleAction);\n\t}\n\n\tprivate get textboxColor(): string {\n\t\treturn this.textbox.customColor;\n\t}\n\n\tprivate set textboxColor(color: string) {\n\t\tthis.$store.commit('objects/setCustomColor', {\n\t\t\tid: this.textbox.id,\n\t\t\tcolor,\n\t\t} as ISetTextBoxCustomColorMutation);\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./textbox.vue?vue&type=template&id=73267e3a&scoped=true&\"\nimport script from \"./textbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./textbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./textbox.vue?vue&type=style&index=0&id=73267e3a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73267e3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"Credits\")]),_c('p',[_vm._v(\"All assets used are IP of Team Salvato and created by them, unless noted otherwise.\")]),_vm._m(0),_vm._m(1),_vm._m(2),_vm._m(3),_vm._m(4),_vm._m(5),_c('p',[_vm._v(\"Classic Amy Sprite by Meddy-sin\")]),_c('p',[_vm._v(\"Amy Sprite by Meddy-sin and SlightlySimple\")]),_c('p',[_vm._v(\"Special thanks to SlightlySimple for testing and technical help\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tUnused House Background by\\n\\t\\t\"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.deviantart.com/fatelogic/art/VN-Background-Practice-295671161\"}},[_vm._v(\"Fatelogic\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tDoki Doki Dialog Generator developed by EDave64\\n\\t\\t\"),_c('br'),_vm._v(\"Based on gemdude46's DDLC Shitpost generator\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Classic Sprite by Childish-N\\n\\t\\t\"),_c('br'),_vm._v(\"MC Classic Chibi by GyleToTheRescue\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Sprite by Childish-N\\n\\t\\t\"),_c('br'),_vm._v(\"MC Casual Sprite by SlightlySimple\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chibi by SlightlySimple\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Chad Sprite by Cylent-Nite\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chad Poses and expressions by SlightlySimple\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chad Poses and chibi by Meddy-sin\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tFeMC Sprite by Meddy-sin\\n\\t\\t\"),_c('br'),_vm._v(\"FeMC Casual Sprite by SlightlySimple\\n\\t\")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Vue {}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./credits.vue?vue&type=template&id=30dc8f87&scoped=true&\"\nimport script from \"./credits.vue?vue&type=script&lang=ts&\"\nexport * from \"./credits.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./credits.vue?vue&type=style&index=0&id=30dc8f87&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30dc8f87\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true }},[_c('h1',[_vm._v(\"Background\")]),_c('background-settings',{attrs:{\"value\":_vm.value,\"nsfw\":_vm.nsfw},on:{\"invalidate-render\":function($event){return _vm.$emit('invalidate-render')}}}),_vm._l((_vm.backgrounds),function(background){return _c('background-button',{key:background.name,attrs:{\"background\":background,\"value\":_vm.value,\"customPathLookup\":_vm.customPathLookup},on:{\"input\":function($event){_vm.nsfwFilter(background);_vm.$emit('input', background)}}})}),_c('div',{staticClass:\"btn upload-background\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\"\\n\\t\\tUpload\\n\\t\\t\"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{background: true, active: _vm.background === _vm.value},style:(_vm.style),attrs:{\"title\":_vm.background.name},on:{\"click\":function($event){return _vm.$emit('input', _vm.background)}}},[_vm._v(_vm._s(_vm.background.name))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { IBackground, color, Background } from '@/models/background';\nimport { VariantBackground } from '@/models/variant-background';\nimport { isWebPSupported } from '@/asset-manager';\n\n@Component({\n\tcomponents: {},\n})\nexport default class BackgroundButton extends Vue {\n\t@Prop({ required: true }) private readonly background!: IBackground;\n\t@Prop({ required: true }) private readonly value!: IBackground;\n\t@Prop({ required: true }) private readonly customPathLookup!: {\n\t\t[name: string]: string;\n\t};\n\n\tprivate isWebPSupported: boolean | null = null;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get style(): { [id: string]: string } {\n\t\tif (this.background === color) {\n\t\t\treturn { backgroundColor: color.color };\n\t\t}\n\t\tif (this.background instanceof Background) {\n\t\t\tif (this.background.custom) {\n\t\t\t\treturn {\n\t\t\t\t\tbackgroundImage: `url(${\n\t\t\t\t\t\tthis.customPathLookup[this.background.path]\n\t\t\t\t\t})`,\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.isWebPSupported === undefined) return {};\n\t\t\treturn {\n\t\t\t\tbackgroundImage: `url(${process.env.BASE_URL}/assets/${\n\t\t\t\t\tthis.background.path\n\t\t\t\t}.lq.${this.isWebPSupported ? 'webp' : 'png'})`.replace(/\\/+/, '/'),\n\t\t\t};\n\t\t}\n\t\tif (this.background instanceof VariantBackground) {\n\t\t\tif (this.isWebPSupported === undefined) return {};\n\t\t\treturn {\n\t\t\t\tbackgroundImage: `url(${process.env.BASE_URL}/assets/${\n\t\t\t\t\tthis.background.path\n\t\t\t\t}.lq.${this.isWebPSupported ? 'webp' : 'png'})`.replace(/\\/+/, '/'),\n\t\t\t};\n\t\t}\n\t\treturn {};\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./button.vue?vue&type=template&id=a7bba164&scoped=true&\"\nimport script from \"./button.vue?vue&type=script&lang=ts&\"\nexport * from \"./button.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./button.vue?vue&type=style&index=0&id=a7bba164&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7bba164\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.value === _vm.colorBackground)?_c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),_c('label',{attrs:{\"for\":\"bg_color\"}},[_vm._v(\"Color:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.color),expression:\"value.color\"}],attrs:{\"id\":\"bg_color\",\"type\":\"color\"},domProps:{\"value\":(_vm.value.color)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"color\", $event.target.value)},function($event){return _vm.$emit('invalidate-render')}]}})]):_c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"3\"}},[_c('toggle',{attrs:{\"label\":\"Flipped?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.value.flip),callback:function ($$v) {_vm.$set(_vm.value, \"flip\", $$v)},expression:\"value.flip\"}})],1)]),(_vm.isVariant)?_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){_vm.value.seekVariant(-1, _vm.nsfw);_vm.$emit('invalidate-render')}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(\"Variant\")]),_c('td',[_c('button',{on:{\"click\":function($event){_vm.value.seekVariant(1, _vm.nsfw);_vm.$emit('invalidate-render')}}},[_vm._v(\">\")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { IBackground, color, Background } from '@/models/background';\nimport { VariantBackground } from '@/models/variant-background';\nimport { isWebPSupported } from '@/asset-manager';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\n\n@Component({\n\tcomponents: { Toggle },\n})\nexport default class BackgroundSettings extends Vue {\n\t@Prop({ required: true }) private readonly value!: IBackground;\n\t@State('nsfw', { namespace: 'ui' }) private readonly nsfw!: boolean;\n\n\tprivate get isVariant() {\n\t\treturn (\n\t\t\tthis.value instanceof VariantBackground &&\n\t\t\tthis.value.hasVariants(this.nsfw)\n\t\t);\n\t}\n\n\tprivate get colorBackground() {\n\t\treturn color;\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=1a85d10b&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=ts&\"\nexport * from \"./settings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=1a85d10b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a85d10b\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { backgrounds, registerAsset, getAsset } from '@/asset-manager';\nimport {\n\tBackground,\n\tIBackground,\n\tcolor,\n\tnsfwFilter,\n} from '@/models/background';\nimport { VariantBackground } from '@/models/variant-background';\nimport BackgroundButton from './background/button.vue';\nimport BackgroundSettings from './background/settings.vue';\nimport { State } from 'vuex-class-decorator';\n\n@Component({\n\tcomponents: {\n\t\tBackgroundButton,\n\t\tBackgroundSettings,\n\t},\n})\nexport default class BackgroundsPanel extends Vue {\n\t@Prop({ required: true }) private readonly value!: IBackground;\n\t@State('nsfw', { namespace: 'ui' }) private readonly nsfw!: boolean;\n\n\tprivate customPathLookup: { [name: string]: string } = {};\n\tprivate customBGCount = 0;\n\n\tprivate get backgrounds(): IBackground[] {\n\t\t// tslint:disable-next-line: no-unused-expression\n\t\tthis.customBGCount;\n\t\treturn this.nsfw ? backgrounds : backgrounds.filter(bg => !bg.nsfw);\n\t}\n\n\tprivate onFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\t(nr => {\n\t\t\t\tconst name = 'customBg' + nr;\n\t\t\t\tconst url = registerAsset(name, file);\n\t\t\t\tbackgrounds.push(new Background(name, file.name, false, true));\n\t\t\t\tthis.$set(this.customPathLookup, name, url);\n\t\t\t})(++this.customBGCount);\n\t\t}\n\t}\n\n\tprivate nsfwFilter(background: IBackground) {\n\t\tif (!this.nsfw) {\n\t\t\tnsfwFilter(background);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./backgrounds.vue?vue&type=template&id=5a206118&scoped=true&\"\nimport script from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nexport * from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./backgrounds.vue?vue&type=style&index=0&id=5a206118&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a206118\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\n\nimport GeneralPanel from './panels/general.vue';\nimport AddPanel from './panels/add.vue';\nimport CharacterPanel from './panels/character.vue';\nimport SpritePanel from './panels/sprite.vue';\nimport TextBoxPanel from './panels/textbox.vue';\nimport CreditsPanel from './panels/credits.vue';\nimport BackgroundsPanel from './panels/backgrounds.vue';\nimport { IObject } from '@/store/objects';\nimport { IBackground } from '../../models/background';\n\n@Component({\n\tcomponents: {\n\t\tGeneralPanel,\n\t\tAddPanel,\n\t\tBackgroundsPanel,\n\t\tCreditsPanel,\n\t\tCharacterPanel,\n\t\tTextBoxPanel,\n\t\tSpritePanel,\n\t},\n})\nexport default class ToolBox extends Vue {\n\t@Prop({ required: true })\n\tprivate selected: IObject | null = null;\n\t@Prop({ required: true, default: '' })\n\tprivate prevRender!: string;\n\t@Prop({ required: true })\n\tprivate lqRendering!: boolean;\n\t@Prop({ required: true })\n\tprivate currentBackground: IBackground | null = null;\n\tprivate panelSelection: 'add' | 'backgrounds' | 'credits' | 'selection' | '' =\n\t\t'';\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate get panel() {\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tif (this.selected === null) {\n\t\t\t\tthis.panelSelection = '';\n\t\t\t} else {\n\t\t\t\treturn this.selected.type;\n\t\t\t}\n\t\t}\n\t\treturn this.panelSelection;\n\t}\n\n\tprivate setPanel(name: 'add' | 'backgrounds' | 'credits' | 'selection' | '') {\n\t\tif (name === this.panelSelection) name = '';\n\t\tthis.panelSelection = name;\n\t\tif (this.selected) {\n\t\t\tthis.$emit('clear-selection');\n\t\t}\n\t}\n\n\t@Watch('selected')\n\tprivate onSelectionChange(newSelection: IObject | null) {\n\t\tif (newSelection) {\n\t\t\tthis.panelSelection = 'selection';\n\t\t\treturn;\n\t\t}\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tthis.panelSelection = '';\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toolbox.vue?vue&type=template&id=22370771&\"\nimport script from \"./toolbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./toolbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toolbox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"messageConsole\"}},[(_vm.showLoading)?_c('p',[_vm._v(\"Loading...\")]):_vm._e(),_vm._l((_vm.messages),function(message,i){return _c('p',{key:message + '_' + i},[_vm._v(_vm._s(message))])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n} from '@/eventbus/event-bus';\n\n@Component({\n\tcomponents: {},\n})\nexport default class MessageConsole extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly loading!: boolean;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\tprivate messages: string[] = [];\n\tprivate showLoading: boolean = false;\n\tprivate showLoadingTimeout: number = 0;\n\tprivate hideLoadingTimeout: number = 0;\n\n\tprivate created() {\n\t\tthis.onLoadingChange(this.loading);\n\t\tEventBus.subscribe(AssetFailureEvent, ev => {\n\t\t\tthis.messages.push(`Failed to load asset '${ev.path}'`);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.pop();\n\t\t\t}, 5000);\n\t\t});\n\n\t\tEventBus.subscribe(CustomAssetFailureEvent, ev => {\n\t\t\tthis.messages.push(\n\t\t\t\t'Failed to load custom asset. Try to download it manually and then upload it.'\n\t\t\t);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.pop();\n\t\t\t}, 50000);\n\t\t});\n\t}\n\n\t@Watch('loading')\n\tprivate onLoadingChange(newValue: boolean) {\n\t\tif (newValue) {\n\t\t\tif (this.hideLoadingTimeout) {\n\t\t\t\tclearTimeout(this.hideLoadingTimeout);\n\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (!this.showLoading && !this.showLoadingTimeout) {\n\t\t\t\tthis.showLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.showLoadingTimeout) {\n\t\t\t\tclearTimeout(this.showLoadingTimeout);\n\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (this.showLoading && !this.hideLoadingTimeout) {\n\t\t\t\tthis.hideLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./message-console.vue?vue&type=template&id=24b2b581&scoped=true&\"\nimport script from \"./message-console.vue?vue&type=script&lang=ts&\"\nexport * from \"./message-console.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./message-console.vue?vue&type=style&index=0&id=24b2b581&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24b2b581\",\n  null\n  \n)\n\nexport default component.exports","export const ScreenWidth = 1280;\n\nexport const TextBoxWidth = 816;\nexport const TextBoxCorruptedWidth = 900;\nexport const TextBoxHeight = 146;\nexport const TextBoxY = 568;\nexport const TextBoxKerning = 0;\nexport const TextBoxLineHeight = 29;\nexport const TextBoxCorruptedKerning = 8;\nexport const TextBoxTextXOffset = 38;\nexport const TextBoxTextYOffset = 50;\n\nexport const TextBoxTextCorruptedXOffset = 9;\nexport const TextBoxTextCorruptedYOffset = 9;\n\nexport const NameboxHeight = 39;\nexport const NameboxWidth = 168;\nexport const NameboxXOffset = 34;\nexport const NameboxTextYOffset = 29;\n\nexport const ControlsYBottomOffset = 12;\nexport const ControlsXHistoryOffset = -126;\nexport const ControlsXSkipOffset = -72;\nexport const ControlsXStuffOffset = -38;\n\nexport const ArrowXRightOffset = 30.75;\nexport const ArrowYBottomOffset = 26;\n\nexport const GlowRX = 426;\nexport const GlowRY = 58;\n\nexport const NameboxTextStyle = {\n\talign: 'center' as CanvasTextAlign,\n\tfont: '24px riffic',\n\toutline: {\n\t\tstyle: '#b59',\n\t\twidth: 6,\n\t},\n\tfill: {\n\t\tstyle: 'white',\n\t},\n};\n\nexport const ControlsTextStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '13px aller',\n\tfill: {\n\t\tstyle: '#522',\n\t},\n};\n\nexport const ControlsTextDisabledStyle = {\n\t...ControlsTextStyle,\n\tfill: {\n\t\tstyle: '#a66',\n\t},\n};\n\nexport const TextBoxStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px aller',\n\toutline: {\n\t\tstyle: '#523140',\n\t\twidth: 4,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxCorruptedStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px verily',\n\toutline: {\n\t\tstyle: '#000',\n\t\twidth: 20,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxX = ScreenWidth / 2 - TextBoxWidth / 2; // 232\nexport const TextBoxCorruptedX = ScreenWidth / 2 - TextBoxCorruptedWidth / 2;\nexport const TextBoxTextX = TextBoxX + TextBoxTextXOffset;\nexport const TextBoxTextY = TextBoxY + TextBoxTextYOffset;\n\nexport const NameboxY = TextBoxY - NameboxHeight;\nexport const NameboxX = TextBoxX + NameboxXOffset;\nexport const NameboxTextX = NameboxX + NameboxWidth / 2;\nexport const NameboxTextY = NameboxY + NameboxTextYOffset;\n\nexport const ControlsXHistory = TextBoxX + ControlsXHistoryOffset;\nexport const ControlsXSkip = TextBoxX + ControlsXSkipOffset;\nexport const ControlsXStuff = TextBoxX + ControlsXStuffOffset;\n","export class RenderAbortedException {}\n","import { RenderAbortedException } from './renderAbortedException';\nimport { Renderer } from './renderer';\nimport { ErrorAsset } from '@/models/error-asset';\n\nexport class RenderContext {\n\tprivate aborted: boolean = false;\n\n\tpublic constructor(\n\t\tprivate fsCtx: CanvasRenderingContext2D,\n\t\tpublic readonly hq: boolean,\n\t\tpublic readonly preview: boolean\n\t) {}\n\n\tpublic drawText(\n\t\tparams: { text: string; align?: CanvasTextAlign; font?: string } & IRPos &\n\t\t\tIOOutline &\n\t\t\tIOFill\n\t) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, x = 0, y = 0, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t\tthis.fsCtx.strokeText(text, x, y);\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t\tthis.fsCtx.fillText(text, x, y);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic measureText(\n\t\tparams: {\n\t\t\ttext: string;\n\t\t\talign?: CanvasTextAlign;\n\t\t\tfont?: string;\n\t\t} & IOOutline &\n\t\t\tIOFill\n\t): TextMetrics {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t}\n\t\tconst ret = this.fsCtx.measureText(text);\n\t\tthis.fsCtx.restore();\n\t\treturn ret;\n\t}\n\n\tpublic drawImage(\n\t\tparams: {\n\t\t\timage: HTMLImageElement | ErrorAsset | Renderer;\n\t\t\tflip?: boolean;\n\t\t} & IRPos &\n\t\t\tIOSize &\n\t\t\tIOShadow &\n\t\t\tIOOpacity\n\t): void {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tif (params.image instanceof ErrorAsset) return;\n\t\tconst { image, flip, x, y, w, h, opacity } = {\n\t\t\tflip: false,\n\t\t\tw: params.image.width,\n\t\t\th: params.image.height,\n\t\t\topacity: 100,\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.save();\n\n\t\tif (opacity < 100) {\n\t\t\tthis.fsCtx.globalAlpha = opacity / 100;\n\t\t}\n\n\t\tif (params.shadow) {\n\t\t\tconst shadow = params.shadow;\n\t\t\tif (shadow.color) {\n\t\t\t\tthis.fsCtx.shadowColor = shadow.color;\n\t\t\t}\n\t\t\tif (shadow.blur) {\n\t\t\t\tthis.fsCtx.shadowBlur = shadow.blur;\n\t\t\t}\n\t\t\tif (shadow.offsetX) {\n\t\t\t\tthis.fsCtx.shadowOffsetX = shadow.offsetX;\n\t\t\t}\n\t\t\tif (shadow.offsetY) {\n\t\t\t\tthis.fsCtx.shadowOffsetY = shadow.offsetY;\n\t\t\t}\n\t\t}\n\n\t\tthis.fsCtx.translate(x + w / 2, y + h / 2);\n\t\tthis.fsCtx.scale(flip ? -1 : 1, 1);\n\n\t\tif (image instanceof Renderer) {\n\t\t\timage.paintOnto(this.fsCtx, -w / 2, -h / 2, w, h);\n\t\t} else {\n\t\t\tthis.fsCtx.drawImage(image as HTMLImageElement, -w / 2, -h / 2, w, h);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawRect({\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\toutline,\n\t\tfill,\n\t\tcomposition,\n\t}: IRPos & IRSize & IOOutline & IOFill & IOComposition) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tthis.fsCtx.rect(x, y, w, h);\n\n\t\tif (composition) {\n\t\t\tthis.fsCtx.globalCompositeOperation = composition;\n\t\t}\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawPath({\n\t\toutline,\n\t\tfill,\n\t\tpath,\n\t}: { path: (ctx: CanvasPath) => void } & IOOutline & IOFill) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tpath(this.fsCtx);\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic patternFrom(\n\t\timage: HTMLImageElement | Renderer,\n\t\trepetition: 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat' = 'repeat'\n\t): CanvasPattern {\n\t\tif (image instanceof Renderer) {\n\t\t\timage = (image as any).previewCanvas;\n\t\t}\n\t\treturn this.fsCtx.createPattern(\n\t\t\t(image as any) as CanvasImageSource,\n\t\t\trepetition\n\t\t)!;\n\t}\n\n\tpublic customTransform(\n\t\ttransform: (transformContext: CanvasRenderingContext2D) => void,\n\t\trender: (rx: RenderContext) => void\n\t) {\n\t\tthis.fsCtx.save();\n\t\ttransform(this.fsCtx);\n\t\trender(this);\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic linearGradient(\n\t\tx0: number,\n\t\ty0: number,\n\t\tx1: number,\n\t\ty1: number\n\t): CanvasGradient {\n\t\treturn this.fsCtx.createLinearGradient(x0, y0, x1, y1);\n\t}\n\n\tpublic abort(): void {\n\t\tthis.aborted = true;\n\t}\n}\n\nconst optSize = { w: 0, h: 0 };\nconst optShadow = {\n\tblur: 0,\n\tcolor: 'none',\n\toffsetX: 0,\n\toffsetY: 0,\n};\n\nexport interface IShadow {\n\tblur?: number;\n\tcolor?: string;\n\toffsetX?: number;\n\toffsetY?: number;\n}\n\nexport interface IOutline {\n\tstyle: string;\n\twidth: number;\n}\n\nexport interface IFill {\n\tstyle: string | CanvasGradient | CanvasPattern;\n}\n\ninterface IOShadow {\n\tshadow?: IShadow;\n}\n\ninterface IOComposition {\n\tcomposition?: CanvasRenderingContext2D['globalCompositeOperation'];\n}\n\ninterface IRPos {\n\tx: number;\n\ty: number;\n}\n\ninterface IRSize {\n\tw: number;\n\th: number;\n}\n\ninterface IOSize {\n\tw?: number;\n\th?: number;\n}\n\ninterface IOOutline {\n\toutline?: IOutline;\n}\ninterface IOOpacity {\n\topacity?: number;\n}\n\ninterface IOFill {\n\tfill?: IFill;\n}\n","import { RenderContext } from './rendererContext';\nimport { RenderAbortedException } from './renderAbortedException';\n\nexport class Renderer {\n\tprivate previewCanvas: HTMLCanvasElement;\n\tprivate runningContext: RenderContext | null = null;\n\n\tpublic constructor(w: number = 1280, h: number = 720) {\n\t\tthis.previewCanvas = document.createElement('canvas');\n\t\tthis.previewCanvas.width = w;\n\t\tthis.previewCanvas.height = h;\n\t}\n\n\tpublic async render(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\thq: boolean = true\n\t): Promise<boolean> {\n\t\tif (this.runningContext) {\n\t\t\tthis.runningContext.abort();\n\t\t}\n\n\t\tconst ctx = this.previewCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tconst context = (this.runningContext = new RenderContext(ctx, hq, true));\n\t\ttry {\n\t\t\tawait renderCallback(this.runningContext);\n\t\t} catch (e) {\n\t\t\tif (e instanceof RenderAbortedException) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tif (context === this.runningContext) {\n\t\t\t\tthis.runningContext = null;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.previewCanvas.width;\n\t}\n\n\tpublic get height(): number {\n\t\treturn this.previewCanvas.height;\n\t}\n\n\tpublic paintOnto(\n\t\tc: CanvasRenderingContext2D,\n\t\tx: number,\n\t\ty: number,\n\t\tw?: number,\n\t\th?: number\n\t) {\n\t\tif (w && h) {\n\t\t\tc.drawImage(this.previewCanvas, x, y, w, h);\n\t\t} else {\n\t\t\tc.drawImage(this.previewCanvas, x, y);\n\t\t}\n\t}\n\n\tpublic async download(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\tfilename: string\n\t): Promise<string> {\n\t\tconst downloadCanvas = document.createElement('canvas');\n\t\tdownloadCanvas.width = this.previewCanvas.width;\n\t\tdownloadCanvas.height = this.previewCanvas.height;\n\n\t\tconst ctx = downloadCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tawait renderCallback(new RenderContext(ctx, true, false));\n\n\t\tlet url;\n\t\tif (undefined === window.navigator.msSaveOrOpenBlob) {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.setAttribute('download', filename);\n\t\t\turl = await this.createObjectURL(downloadCanvas);\n\t\t\ta.setAttribute('href', url);\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\tdocument.body.removeChild(a);\n\t\t} else {\n\t\t\turl = downloadCanvas.toDataURL();\n\t\t\tconst blob = this.dataURItoBlob(url);\n\n\t\t\tif (window.URL && window.URL.createObjectURL) {\n\t\t\t\turl = URL.createObjectURL(blob);\n\t\t\t}\n\n\t\t\t// IE-specific code\n\t\t\twindow.navigator.msSaveBlob(blob, filename);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tpublic createObjectURL(canvas: HTMLCanvasElement): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (canvas.toBlob && window.URL && window.URL.createObjectURL) {\n\t\t\t\tcanvas.toBlob(blob => {\n\t\t\t\t\tif (!blob) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(URL.createObjectURL(blob));\n\t\t\t\t}, 'image/png');\n\t\t\t} else if (window.URL && window.URL.createObjectURL) {\n\t\t\t\tconst url = canvas.toDataURL();\n\t\t\t\tconst blob = this.dataURItoBlob(url);\n\t\t\t\tresolve(URL.createObjectURL(blob));\n\t\t\t} else {\n\t\t\t\tresolve(canvas.toDataURL());\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getDataAt(x: number, y: number): Uint8ClampedArray {\n\t\tconst ctx = this.previewCanvas.getContext('2d');\n\n\t\treturn ctx!.getImageData(x, y, 1, 1).data;\n\t}\n\n\tprivate dataURItoBlob(dataURI: string) {\n\t\tconst binStr = atob(dataURI.split(',')[1]);\n\t\tconst len = binStr.length;\n\t\tconst arr = new Uint8Array(len);\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tarr[i] = binStr.charCodeAt(i);\n\t\t}\n\n\t\treturn new Blob([arr], { type: 'image/png' });\n\t}\n}\n","export function roundedRectangle(\n\tctx: CanvasPath,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number\n) {\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.arcTo(x + w, y + h, x, y + h, r);\n\tctx.arcTo(x, y + h, x, y, r);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n}\n","import { IColor } from './color';\nimport { RGBAColor } from './rgb';\n\nexport class HSLAColor implements IColor {\n\tpublic constructor(\n\t\tpublic readonly h: number,\n\t\tpublic readonly s: number,\n\t\tpublic readonly l: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a >= 1) {\n\t\t\treturn `hsl(${this.h}, ${this.s}, ${this.l})`;\n\t\t}\n\t\treturn `hsla(${this.h}, ${this.s}, ${this.l}, ${this.a})`;\n\t}\n\n\tpublic shift(deltas: HSLAColor): HSLAColor {\n\t\tlet { h, s, l, a } = this;\n\t\tif (h + deltas.h > 1 || h + deltas.h < 0) {\n\t\t\th -= deltas.h;\n\t\t} else {\n\t\t\th += deltas.h;\n\t\t}\n\t\tif (s + deltas.s > 1 || s + deltas.s < 0) {\n\t\t\ts -= deltas.s;\n\t\t} else {\n\t\t\ts += deltas.s;\n\t\t}\n\t\tif (l + deltas.l > 1 || l + deltas.l < 0) {\n\t\t\tl -= deltas.l;\n\t\t} else {\n\t\t\tl += deltas.l;\n\t\t}\n\t\tif (a + deltas.a > 1 || a + deltas.a < 0) {\n\t\t\ta -= deltas.a;\n\t\t} else {\n\t\t\ta += deltas.a;\n\t\t}\n\t\treturn new HSLAColor(h, s, l, a);\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\tconst { h, s, l, a } = this;\n\t\tlet r: number;\n\t\tlet g: number;\n\t\tlet b: number;\n\n\t\tif (s === 0) {\n\t\t\tr = g = b = l; // achromatic\n\t\t} else {\n\t\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\t\tconst p = 2 * l - q;\n\t\t\tr = this.hue2rgb(p, q, h + 1 / 3);\n\t\t\tg = this.hue2rgb(p, q, h);\n\t\t\tb = this.hue2rgb(p, q, h - 1 / 3);\n\t\t}\n\n\t\treturn new RGBAColor(\n\t\t\tMath.round(r * 255),\n\t\t\tMath.round(g * 255),\n\t\t\tMath.round(b * 255),\n\t\t\ta\n\t\t);\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\treturn this;\n\t}\n\n\tprivate hue2rgb(p: number, q: number, t: number) {\n\t\tif (t < 0) t += 1;\n\t\tif (t > 1) t -= 1;\n\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\n\t\tif (t < 1 / 2) return q;\n\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n\t\treturn p;\n\t}\n}\n","import { HSLAColor } from './hsl';\n\nexport class RGBAColor {\n\tpublic static validCss(str: string): boolean {\n\t\treturn this.validCssRgb(str) || this.validHex(str);\n\t}\n\n\tpublic static fromCss(str: string): RGBAColor {\n\t\tif (this.validCssRgb(str)) {\n\t\t\treturn this.fromCssRgb(str);\n\t\t}\n\t\tif (this.validHex(str)) {\n\t\t\treturn this.fromHex(str);\n\t\t}\n\t\tthrow new Error('Invalid RGB color format');\n\t}\n\n\tpublic static validCssRgb(str: string): boolean {\n\t\treturn this.rgbEx.test(str) || this.rgbaEx.test(str);\n\t}\n\n\tpublic static fromCssRgb(str: string): RGBAColor {\n\t\tif (!this.validCssRgb(str)) throw new Error('Invalid RGB color format');\n\t\tconst rgbHead = str.slice(0, -1);\n\t\tconst parentesisPos = rgbHead.indexOf('(');\n\t\tconst rbgTail = rgbHead.slice(parentesisPos);\n\t\tconst elements = rbgTail.split(',').map(x => parseFloat(x.trim()));\n\t\treturn new RGBAColor(\n\t\t\telements[0],\n\t\t\telements[1],\n\t\t\telements[2],\n\t\t\telements.length === 4 ? elements[3] : 1\n\t\t);\n\t}\n\n\tpublic static validHex(str: string): boolean {\n\t\treturn this.hexShortEx.test(str) || this.hexLongEx.test(str);\n\t}\n\n\tpublic static fromHex(str: string): RGBAColor {\n\t\tif (!this.validHex(str)) throw new Error('Invalid Hex color format');\n\t\tconst hexTail = str.slice(1);\n\t\tif (hexTail.length === 3) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 4) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\tparseInt(hexTail[3] + hexTail[3], 16) / 255\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 6) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 8) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\tparseInt(hexTail[6] + hexTail[7], 16) / 255\n\t\t\t);\n\t\t}\n\t\tthrow new Error('Invalid Hex color format length');\n\t}\n\n\tprivate static rgbEx = /^rbg\\((\\d*?)\\,(\\d*?)\\,(\\d*?)\\)$/i;\n\tprivate static rgbaEx = /^rbg\\((\\d{1,3})\\,(\\d{1,3})\\,(\\d{1,3})\\,([\\d\\.]+)\\)$/i;\n\tprivate static hexShortEx = /^\\#[0-9A-Z]{3,4}$/i;\n\tprivate static hexLongEx = /^\\#[0-9A-Z]{6,8}$/i;\n\n\tpublic constructor(\n\t\tpublic readonly r: number,\n\t\tpublic readonly g: number,\n\t\tpublic readonly b: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a > 1) {\n\t\t\treturn `rgb(${this.r},${this.g},${this.b})`;\n\t\t}\n\t\treturn `rgba(${this.r},${this.g},${this.b},${this.a})`;\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\treturn this;\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\tlet { r, g, b } = this;\n\t\tconst { a } = this;\n\t\t(r /= 255), (g /= 255), (b /= 255);\n\t\tconst max = Math.max(r, g, b);\n\t\tconst min = Math.min(r, g, b);\n\t\tlet h: number;\n\t\tlet s: number;\n\t\tconst l: number = (max + min) / 2;\n\n\t\tif (max === min) {\n\t\t\th = s = 0; // achromatic\n\t\t} else {\n\t\t\tconst d = max - min;\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\t\t\tswitch (max) {\n\t\t\t\tcase r:\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase g:\n\t\t\t\t\th = (b - r) / d + 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase b:\n\t\t\t\t\th = (r - g) / d + 4;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\th! /= 6;\n\t\t}\n\n\t\treturn new HSLAColor(h!, s, l, a);\n\t}\n}\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport { IRenderable } from './renderable';\nimport {\n\tNameboxTextStyle,\n\tControlsTextStyle,\n\tControlsTextDisabledStyle,\n\tTextBoxTextCorruptedYOffset,\n\tTextBoxTextCorruptedXOffset,\n\tTextBoxCorruptedStyle,\n\tTextBoxStyle,\n\tTextBoxCorruptedKerning,\n\tTextBoxKerning,\n\tTextBoxLineHeight,\n\tTextBoxWidth,\n\tNameboxHeight,\n\tTextBoxHeight,\n\tTextBoxCorruptedWidth,\n\tNameboxXOffset,\n\tNameboxWidth,\n\tNameboxTextYOffset,\n\tControlsXHistoryOffset,\n\tControlsXSkipOffset,\n\tControlsXStuffOffset,\n\tArrowXRightOffset,\n\tArrowYBottomOffset,\n\tTextBoxTextYOffset,\n\tTextBoxTextXOffset,\n\tControlsYBottomOffset,\n\tGlowRY,\n\tGlowRX,\n} from './textBoxConstants';\nimport { Renderer } from '@/renderer/renderer';\nimport { roundedRectangle } from '@/renderer/pathTools';\nimport { RGBAColor } from '@/util/colors/rgb';\nimport { HSLAColor } from '@/util/colors/hsl';\n\nexport class TextBox implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(1280, 720);\n\n\tpublic constructor(public obj: ITextBox) {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst w2 = TextBoxWidth / 2;\n\t\tconst x1 = this.obj.x - w2;\n\t\tconst x2 = x1 + TextBoxWidth;\n\t\tconst y1 = this.obj.y;\n\t\tconst y2 = y1 + NameboxHeight + TextBoxHeight;\n\t\treturn x1 <= hx && x2 >= hx && y1 <= hy && y2 >= hy;\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst w = this.obj.style === 'custom' ? this.obj.width : TextBoxWidth;\n\t\t\tconst h =\n\t\t\t\tthis.obj.style === 'custom'\n\t\t\t\t\t? this.obj.height + NameboxHeight\n\t\t\t\t\t: TextBoxHeight + NameboxHeight;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tconst y = this.obj.y;\n\n\t\t\tawait this.renderBackdrop(rx, x, y + NameboxHeight);\n\n\t\t\tconst name = this.obj.talking;\n\t\t\tif (name) {\n\t\t\t\trx.drawImage({\n\t\t\t\t\timage: await getAsset('namebox'),\n\t\t\t\t\tx: x + NameboxXOffset,\n\t\t\t\t\ty,\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\tx: x + NameboxXOffset + NameboxWidth / 2,\n\t\t\t\t\ty: y + NameboxTextYOffset,\n\t\t\t\t\ttext: name,\n\t\t\t\t\t...NameboxTextStyle,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.renderText(rx, x, y);\n\n\t\t\tconst bottom = y + h;\n\t\t\tconst controlsY = bottom - ControlsYBottomOffset;\n\t\t\tconst controlsCenter = x + w / 2;\n\n\t\t\tif (this.obj.controls) {\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'History',\n\t\t\t\t\tx: controlsCenter + ControlsXHistoryOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...ControlsTextStyle,\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Skip',\n\t\t\t\t\tx: controlsCenter + ControlsXSkipOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...(this.obj.skip ? ControlsTextStyle : ControlsTextDisabledStyle),\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Auto   Save   Load   Settings',\n\t\t\t\t\tx: controlsCenter + ControlsXStuffOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...ControlsTextStyle,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.obj.continue) {\n\t\t\t\trx.drawImage({\n\t\t\t\t\timage: await getAsset('next'),\n\t\t\t\t\tx: x + w - ArrowXRightOffset,\n\t\t\t\t\ty: bottom - ArrowYBottomOffset,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async renderBackdrop(\n\t\trx: RenderContext,\n\t\tx: number,\n\t\ty: number\n\t): Promise<void> {\n\t\tif (this.obj.style === 'custom') {\n\t\t\tconst hslColor = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\tconst dotPattern = new Renderer(47, 47);\n\t\t\tdotPattern.render(async (rx: RenderContext) => {\n\t\t\t\tconst delta = new HSLAColor(\n\t\t\t\t\t0.004269293924466178,\n\t\t\t\t\t-0.01869158878504662,\n\t\t\t\t\t-0.039215686274509665,\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t\tconst fill = {\n\t\t\t\t\tstyle: hslColor\n\t\t\t\t\t\t.shift(delta)\n\t\t\t\t\t\t.toRgb()\n\t\t\t\t\t\t.toCss(),\n\t\t\t\t};\n\n\t\t\t\trx.drawPath({\n\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\tctx.ellipse(0, 0, 9.5, 9.5, 0, 0, 2 * Math.PI);\n\t\t\t\t\t},\n\t\t\t\t\tfill,\n\t\t\t\t});\n\t\t\t\trx.drawPath({\n\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\tctx.ellipse(47, 0, 9.5, 9.5, 0, 0, 2 * Math.PI);\n\t\t\t\t\t},\n\t\t\t\t\tfill,\n\t\t\t\t});\n\t\t\t\trx.drawPath({\n\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\tctx.ellipse(0, 47, 9.5, 9.5, 0, 0, 2 * Math.PI);\n\t\t\t\t\t},\n\t\t\t\t\tfill,\n\t\t\t\t});\n\t\t\t\trx.drawPath({\n\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\tctx.ellipse(47, 47, 9.5, 9.5, 0, 0, 2 * Math.PI);\n\t\t\t\t\t},\n\t\t\t\t\tfill,\n\t\t\t\t});\n\t\t\t\trx.drawPath({\n\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\tctx.ellipse(23.5, 24.5, 9.5, 9.5, 0, 0, 2 * Math.PI);\n\t\t\t\t\t},\n\t\t\t\t\tfill,\n\t\t\t\t});\n\t\t\t}, true);\n\t\t\trx.customTransform(\n\t\t\t\tctx => {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tx + 1.5,\n\t\t\t\t\t\ty + 1.5,\n\t\t\t\t\t\tthis.obj.width - 3,\n\t\t\t\t\t\tthis.obj.height - 3,\n\t\t\t\t\t\t12\n\t\t\t\t\t);\n\t\t\t\t\tctx.clip();\n\t\t\t\t},\n\t\t\t\tsubRx => {\n\t\t\t\t\tconst h = this.obj.height;\n\t\t\t\t\tconst w = this.obj.width;\n\t\t\t\t\tconst gradient = subRx.linearGradient(x, y, x, y + h);\n\t\t\t\t\tgradient.addColorStop(0, this.obj.customColor + 'FF');\n\t\t\t\t\tgradient.addColorStop(1, this.obj.customColor + 'AA');\n\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tw,\n\t\t\t\t\t\th,\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: gradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toutline: {\n\t\t\t\t\t\t\tstyle: '#ffdfee',\n\t\t\t\t\t\t\twidth: 6,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tsubRx.customTransform(\n\t\t\t\t\t\tctx => {\n\t\t\t\t\t\t\tctx.translate(x, y);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsubSubRx => {\n\t\t\t\t\t\t\tconst pattern = subRx.patternFrom(dotPattern);\n\t\t\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\tw,\n\t\t\t\t\t\t\t\th,\n\t\t\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\t\t\tstyle: pattern,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomposition: 'source-atop',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tconsole.log('Glow:', y + h - GlowRY, y + h);\n\t\t\t\t\tconst glowGradient = subRx.linearGradient(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h - GlowRY,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h\n\t\t\t\t\t);\n\t\t\t\t\tglowGradient.addColorStop(0, '#FFFFFF50');\n\t\t\t\t\tglowGradient.addColorStop(0.5, '#FFFFFF10');\n\t\t\t\t\tglowGradient.addColorStop(1, '#FFFFFF00');\n\t\t\t\t\tsubRx.drawPath({\n\t\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\t\tctx.ellipse(x + w / 2, y + h, GlowRX, GlowRY, 0, 0, 2 * Math.PI);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: glowGradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst delta = new HSLAColor(\n\t\t\t\t0.0023347701149424305,\n\t\t\t\t0,\n\t\t\t\t0.10784313725490202,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst outlineColor = hslColor\n\t\t\t\t.shift(delta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t\trx.drawPath({\n\t\t\t\tpath: path => {\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tx + 1.5,\n\t\t\t\t\t\ty + 1.5,\n\t\t\t\t\t\tthis.obj.width - 3,\n\t\t\t\t\t\tthis.obj.height - 3,\n\t\t\t\t\t\t12\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\toutline: {\n\t\t\t\t\tstyle: outlineColor,\n\t\t\t\t\twidth: 3,\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.obj.style === 'corrupt') {\n\t\t\t\tx += (TextBoxWidth - TextBoxCorruptedWidth) / 2;\n\t\t\t}\n\t\t\tconst image = await getAsset(\n\t\t\t\tthis.obj.style === 'corrupt' ? 'textbox_monika' : 'textbox'\n\t\t\t);\n\t\t\trx.drawImage({ image, x, y });\n\t\t}\n\t}\n\n\tprivate renderText(rx: RenderContext, baseX: number, baseY: number): void {\n\t\tconst text: DialogLetter[][] = [];\n\n\t\tlet b = false;\n\n\t\tfor (const line of this.obj.text.split('\\n')) {\n\t\t\tlet cl;\n\t\t\ttext.push((cl = []));\n\t\t\tfor (const l of line) {\n\t\t\t\tif (l === '[') {\n\t\t\t\t\tb = true;\n\t\t\t\t} else if (l === ']') {\n\t\t\t\t\tb = false;\n\t\t\t\t} else {\n\t\t\t\t\tcl.push({ l, b });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst startX = baseX + TextBoxTextXOffset;\n\t\tlet y = baseY + NameboxHeight + TextBoxTextYOffset;\n\n\t\tif (text[0] && text[0][0] && text[0][0].b) {\n\t\t\ty += TextBoxTextCorruptedYOffset;\n\t\t}\n\n\t\tfor (const line of text) {\n\t\t\tlet x = startX;\n\n\t\t\tif (line[0] && line[0].b) {\n\t\t\t\tx += TextBoxTextCorruptedXOffset;\n\t\t\t}\n\t\t\tfor (const letter of line) {\n\t\t\t\tconst ct = letter.l;\n\t\t\t\tconst cb = letter.b;\n\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: ct,\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t\t...(cb ? TextBoxCorruptedStyle : TextBoxStyle),\n\t\t\t\t});\n\t\t\t\tx += rx.measureText({\n\t\t\t\t\ttext: ct,\n\t\t\t\t\t...(cb ? TextBoxCorruptedStyle : TextBoxStyle),\n\t\t\t\t}).width;\n\t\t\t\tx += cb ? TextBoxCorruptedKerning : TextBoxKerning;\n\t\t\t}\n\t\t\ty += TextBoxLineHeight;\n\t\t}\n\t}\n}\n\ninterface DialogLetter {\n\tl: string;\n\tb: boolean;\n}\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset, Pose, INsfwAbleImg } from '@/asset-manager';\nimport { Renderer } from '@/renderer/renderer';\nimport { IRenderable } from './renderable';\nimport { IDragable } from './dragable';\nimport {\n\tgetData,\n\tICharacter,\n\tgetPose,\n\tgetParts,\n\tgetHeads,\n\tCloseUpYOffset,\n} from '@/store/objectTypes/characters';\n\nexport class Character implements IRenderable, IDragable {\n\tprivate lq: boolean = true;\n\tprivate localRenderer = new Renderer(960, 960);\n\tprivate lastVersion = -1;\n\tprivate hitDetectionFallback = false;\n\n\tpublic get id(): string {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic constructor(public readonly obj: ICharacter) {}\n\n\tpublic async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst pose = getPose(this.obj) as Pose<any>;\n\t\t\tconst assets: string[] = [];\n\t\t\tconst partKeys = getParts(this.obj);\n\t\t\tconst data = getData(this.obj);\n\t\t\tconst currentHeads = getHeads(this.obj);\n\n\t\t\tconst poseFolder =\n\t\t\t\t(data.folder ? data.folder + '/' : '') +\n\t\t\t\t(pose.folder ? pose.folder + '/' : '');\n\n\t\t\tconst headFolder =\n\t\t\t\t(data.folder ? data.folder + '/' : '') +\n\t\t\t\t(currentHeads && currentHeads.folder ? currentHeads.folder + '/' : '');\n\n\t\t\tif ((pose as any).static) {\n\t\t\t\tassets.push(poseFolder + (pose as any).static);\n\t\t\t} else {\n\t\t\t\tfor (const key of partKeys) {\n\t\t\t\t\tif (key === 'head') continue;\n\t\t\t\t\tconst image: string | INsfwAbleImg = (pose as any)[key][\n\t\t\t\t\t\tthis.obj.posePositions[key]\n\t\t\t\t\t];\n\n\t\t\t\t\tassets.push(\n\t\t\t\t\t\tposeFolder +\n\t\t\t\t\t\t\t(typeof image === 'string' ? image : (image as INsfwAbleImg).img)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst head = currentHeads\n\t\t\t\t? headFolder + currentHeads.all[this.obj.posePositions.head]\n\t\t\t\t: null;\n\n\t\t\tconst [headAsset, ...bodyParts] = await Promise.all([\n\t\t\t\thead ? getAsset(head, rx.hq) : Promise.resolve(null),\n\t\t\t\t...assets.map(asset => getAsset(asset, rx.hq)),\n\t\t\t]);\n\n\t\t\tconst drawHead = () => {\n\t\t\t\tif (headAsset) {\n\t\t\t\t\tconst headAnchor = pose.headAnchor ? pose.headAnchor : [0, 0];\n\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\timage: headAsset,\n\t\t\t\t\t\tx: headAnchor[0],\n\t\t\t\t\t\ty:\n\t\t\t\t\t\t\t(this.obj.characterType === 'ddlc.monika' ? 1 : 0) +\n\t\t\t\t\t\t\theadAnchor[1],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (!pose.headInForeground) {\n\t\t\t\tdrawHead();\n\t\t\t}\n\n\t\t\tfor (const bodyPart of bodyParts) {\n\t\t\t\trx.drawImage({ image: bodyPart!, x: 0, y: 0 });\n\t\t\t}\n\n\t\t\tif (pose.headInForeground) {\n\t\t\t\tdrawHead();\n\t\t\t}\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t});\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (this.lastVersion !== this.obj.version || this.lq !== !rx.hq) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t}\n\n\t\tconst zoom = this.obj.close ? 2 : 1;\n\t\tconst size = this.obj.width * zoom;\n\t\tconst x = this.obj.x - size / 2;\n\t\tconst y = (this.obj.close ? CloseUpYOffset : 0) + this.obj.y;\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx,\n\t\t\ty,\n\t\t\tw: this.obj.width,\n\t\t\th: this.obj.height,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst zoom = this.obj.close ? 1.6 : 0.8;\n\t\tconst size = 960 * zoom;\n\t\tlet x = (hx - this.obj.x + size / 2) / zoom;\n\t\tconst y = (hy - this.obj.y) / zoom;\n\n\t\tif (this.obj.flip) {\n\t\t\tx = 960 - x;\n\t\t}\n\t\tif (!this.hitDetectionFallback) {\n\t\t\ttry {\n\t\t\t\tconst data = this.localRenderer.getDataAt(x, y);\n\t\t\t\treturn data[3] !== 0;\n\t\t\t} catch (e) {\n\t\t\t\t// On chrome for android, the hit test tends to fail because of cross-origin shenanigans, even though\n\t\t\t\t// we only ever load from one origin. ¯\\_(ツ)_/¯\n\t\t\t\t// So we have a fallback that doesn't read the contents of the canvas. This looses accuracy, but at\n\t\t\t\t// least works always.\n\t\t\t\tif (e instanceof DOMException && e.message.includes('cross-origin')) {\n\t\t\t\t\tthis.hitDetectionFallback = true;\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (y < 50 || y > 680) return false;\n\t\treturn Math.abs(x - 480) < 150;\n\t}\n}\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { IRenderable } from './renderable';\nimport { IDragable } from './dragable';\nimport { ErrorAsset } from './error-asset';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport eventBus, { InvalidateRenderEvent } from '@/eventbus/event-bus';\n\nconst BaseXPosition = 640;\n\nexport class Sprite implements IRenderable, IDragable {\n\tpublic ratio: number = 0;\n\tpublic lockedRatio: boolean = true;\n\tprivate asset: HTMLImageElement | null = null;\n\n\tpublic get id(): string {\n\t\treturn this.obj.id;\n\t}\n\tpublic get infront(): boolean {\n\t\treturn this.obj.onTop;\n\t}\n\n\tpublic constructor(public readonly obj: ISprite) {\n\t\tgetAsset(obj.assetName)\n\t\t\t.then(asset => {\n\t\t\t\tif (asset instanceof ErrorAsset) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.asset = asset;\n\t\t\t\teventBus.fire(new InvalidateRenderEvent());\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(`Failed to load asset: ${err}`);\n\t\t\t});\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (!this.asset) return;\n\t\tconst x = this.obj.x - this.obj.width / 2;\n\t\trx.drawImage({\n\t\t\timage: this.asset,\n\t\t\tx,\n\t\t\ty: this.obj.y,\n\t\t\tw: this.obj.width,\n\t\t\th: this.obj.height,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\tflip: this.obj.flip,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst hitX = hx - this.obj.x + this.obj.width / 2;\n\t\tconst hitY = hy - this.obj.y;\n\t\treturn (\n\t\t\thitX >= 0 &&\n\t\t\thitX <= this.obj.width &&\n\t\t\thitY >= 0 &&\n\t\t\thitY <= this.obj.height\n\t\t);\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\n\nimport ToolBox from './components/toolbox/toolbox.vue';\nimport MessageConsole from './components/message-console.vue';\nimport { TextBox } from './models/textbox';\nimport { Character } from './models/character';\nimport { Sprite } from './models/sprite';\nimport { IBackground, nsfwFilter } from './models/background';\nimport { VariantBackground } from './models/variant-background';\nimport { IRenderable } from './models/renderable';\nimport { ISprite, ICreateSpriteAction } from './store/objectTypes/sprite';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport {\n\tIObjectsState,\n\tIObject,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n} from '@/store/objects';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tICharacter,\n\tIShiftCharacterSlotAction,\n\tINsfwCheckAction,\n} from '@/store/objectTypes/characters';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\nimport { Renderer } from '@/renderer/renderer';\nimport { RenderContext } from '@/renderer/rendererContext';\nimport { backgrounds, getAsset, registerAsset } from '@/asset-manager';\nimport eventBus, { InvalidateRenderEvent } from '@/eventbus/event-bus';\n\n@Component({\n\tcomponents: {\n\t\tToolBox,\n\t\tMessageConsole,\n\t},\n})\nexport default class App extends Vue {\n\tpublic canvasWidth: number = 0;\n\tpublic canvasHeight: number = 0;\n\tpublic currentBackground: IBackground | null = null;\n\n\tprivate sdCtx: CanvasRenderingContext2D | undefined;\n\tprivate selected: IRenderable | null = null;\n\n\tprivate renderer: Renderer = new Renderer();\n\tprivate showUI: boolean = true;\n\tprivate loaded: boolean = false;\n\tprivate uiSize: number = 192;\n\tprivate lqRendering: boolean = true;\n\tprivate currentlyRendering: boolean = false;\n\n\tprivate panel: string = '';\n\n\tprivate queuedRender: number | null = null;\n\tprivate prevRender: string = '';\n\tprivate showingLast: boolean = false;\n\n\tprivate dropSpriteCount = 0;\n\tprivate dropPreventClick = false;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\t@State('nsfw', { namespace: 'ui' }) private readonly nsfw!: boolean;\n\n\tprivate get history(): IHistorySupport {\n\t\treturn this.$root as any;\n\t}\n\n\t@Watch('selected')\n\t@Watch('lqRendering')\n\t@Watch('currentBackground')\n\tpublic invalidateRender() {\n\t\tif (this.queuedRender) return;\n\t\tthis.queuedRender = requestAnimationFrame(() => this.render_());\n\t}\n\n\tpublic async render_(): Promise<void> {\n\t\tif (this.queuedRender) {\n\t\t\tcancelAnimationFrame(this.queuedRender);\n\t\t\tthis.queuedRender = null;\n\t\t}\n\n\t\tconst completed = await this.renderer.render(\n\t\t\tthis.renderCallback,\n\t\t\t!this.lqRendering\n\t\t);\n\t\tif (completed) {\n\t\t\tthis.display();\n\t\t}\n\t}\n\n\tprivate async renderCallback(rx: RenderContext): Promise<void> {\n\t\tthis.currentlyRendering = true;\n\t\ttry {\n\t\t\tif (!this.loaded) {\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Starting...',\n\t\t\t\t\tx: this.renderer.width / 2,\n\t\t\t\t\ty: this.renderer.height / 2,\n\t\t\t\t\talign: 'center',\n\t\t\t\t\toutline: {\n\t\t\t\t\t\twidth: 5,\n\t\t\t\t\t\tstyle: '#b59',\n\t\t\t\t\t},\n\t\t\t\t\tfont: '32px riffic',\n\t\t\t\t\tfill: {\n\t\t\t\t\t\tstyle: 'white',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (rx.preview) {\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\timage: await getAsset('backgrounds/transparent'),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this.currentBackground) {\n\t\t\t\t\tawait this.currentBackground.render(rx);\n\t\t\t\t}\n\n\t\t\t\tfor (const character of this.renderObjects) {\n\t\t\t\t\tawait character.render(this.selected === character, rx);\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.currentlyRendering = false;\n\t\t}\n\t}\n\n\tprivate created(): void {\n\t\t(window as any).cats = this;\n\n\t\t// Moving this to the \"mounted\"-handler crashes safari over version 12.\n\t\t// My best guess is because it runs in a microtask, which have been added in that Version.\n\t\tthis.updateArea();\n\t\twindow.addEventListener('resize', this.updateArea);\n\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t\twindow.addEventListener('keydown', this.onKeydown);\n\t\teventBus.subscribe(InvalidateRenderEvent, command => {\n\t\t\tthis.invalidateRender();\n\t\t});\n\t\tthis.$store.subscribe(this.invalidateRender);\n\t\tif (Object.keys(this.$store.state.objects.objects).length === 0) {\n\t\t\tthis.$store.dispatch('objects/createTextBox', {} as ICreateTextBoxAction);\n\t\t}\n\t}\n\n\tprivate destroyed(): void {\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t}\n\n\tprivate mounted(): void {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tthis.sdCtx = sd.getContext('2d') || undefined;\n\n\t\twindow.addEventListener('keypress', e => {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tthis.selected = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.currentBackground = backgrounds[0];\n\t\tthis.invalidateRender();\n\t\tPromise.all([\n\t\t\tgetAsset((this.currentBackground as VariantBackground).path, false),\n\t\t\tgetAsset('textbox'),\n\t\t\tgetAsset('namebox'),\n\t\t\tgetAsset('next'),\n\t\t\tgetAsset('backgrounds/transparent'),\n\t\t])\n\t\t\t.then(() => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.invalidateRender();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\talert('Error while loading. Sorry :/');\n\t\t\t});\n\t}\n\n\tprivate optimum(sw: number, sh: number): [number, number] {\n\t\tlet rh = sw / (16 / 9);\n\t\tlet rw = sh * (16 / 9);\n\n\t\tif (rh > sh) {\n\t\t\trh = sh;\n\t\t} else {\n\t\t\trw = sw;\n\t\t}\n\n\t\treturn [rw, rh];\n\t}\n\n\tprivate optimizeWithMenu(sw: number, sh: number): [number, number, boolean] {\n\t\tconst opth = this.optimum(sw, sh - this.uiSize);\n\t\tconst optv = this.optimum(sw - this.uiSize, sh);\n\n\t\tif (opth[0] * opth[1] > optv[0] * optv[1]) {\n\t\t\treturn [opth[0], opth[1], false];\n\t\t} else {\n\t\t\treturn [optv[0], optv[1], true];\n\t\t}\n\t}\n\n\tprivate updateArea(): void {\n\t\tconst [cw, ch, v] = this.optimizeWithMenu(\n\t\t\tdocument.documentElement.clientWidth,\n\t\t\tdocument.documentElement.clientHeight\n\t\t);\n\n\t\tthis.canvasWidth = cw;\n\t\tthis.canvasHeight = ch;\n\t\tthis.$store.commit('ui/setVertical', v);\n\t\tthis.$nextTick(() => {\n\t\t\tthis.display();\n\t\t});\n\t}\n\n\tprivate display(): void {\n\t\tif (!this.sdCtx) return;\n\t\tthis.showingLast = false;\n\t\tthis.renderer.paintOnto(this.sdCtx, 0, 0, 1280, 720);\n\t}\n\n\tprivate async download() {\n\t\tif (this.prevRender && window.URL && window.URL.revokeObjectURL) {\n\t\t\tURL.revokeObjectURL(this.prevRender);\n\t\t}\n\t\tthis.prevRender = await this.renderer.download(\n\t\t\tthis.renderCallback,\n\t\t\t'panel.png'\n\t\t);\n\t}\n\n\tprivate async showPreviousRender() {\n\t\tif (this.showingLast) {\n\t\t\tthis.display();\n\t\t\treturn;\n\t\t}\n\t\tthis.showingLast = true;\n\t\tconst img = new Image();\n\t\timg.onload = () => {\n\t\t\tthis.sdCtx!.drawImage(img, 0, 0, 1280, 720);\n\t\t};\n\t\timg.src = this.prevRender;\n\t}\n\n\tprivate toRendererCoordinate(x: number, y: number): [number, number] {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tconst rx = x - sd.offsetLeft;\n\t\tconst ry = y - sd.offsetTop;\n\t\tconst sx = (rx / sd.offsetWidth) * sd.width;\n\t\tconst sy = (ry / sd.offsetWidth) * sd.width;\n\t\treturn [sx, sy];\n\t}\n\n\tprivate onUiClick(e: MouseEvent): void {\n\t\tif (this.dropPreventClick) {\n\t\t\tthis.dropPreventClick = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.panel = '';\n\n\t\tconst [sx, sy] = this.toRendererCoordinate(e.clientX, e.clientY);\n\n\t\tconst characters = this.objectsAt(sx, sy);\n\n\t\tconst currentCharacterIdx = characters.indexOf(this.selected!);\n\t\tlet selectedObject: IRenderable | null;\n\n\t\tif (currentCharacterIdx === 0) {\n\t\t\tselectedObject = null;\n\t\t} else if (currentCharacterIdx !== -1) {\n\t\t\t// Select the next lower character\n\t\t\tselectedObject = characters[currentCharacterIdx - 1];\n\t\t} else {\n\t\t\tselectedObject = characters[characters.length - 1] || null;\n\t\t}\n\n\t\tif (!selectedObject) {\n\t\t\tthis.selected = null;\n\t\t} else {\n\t\t\tthis.selected = selectedObject;\n\t\t}\n\t}\n\n\tprivate objectsAt(x: number, y: number): IRenderable[] {\n\t\treturn this.renderObjects.filter(renderObject =>\n\t\t\trenderObject.hitTest(x, y)\n\t\t);\n\t}\n\n\tprivate draggedObject: IObject | null = null;\n\tprivate dragXOffset: number = 0;\n\tprivate dragYOffset: number = 0;\n\tprivate dragXOriginal: number = 0;\n\tprivate dragYOriginal: number = 0;\n\n\tprivate onDragStart(e: DragEvent) {\n\t\te.preventDefault();\n\t\tconst selected = this.selected;\n\t\tif (!selected) return;\n\t\tthis.draggedObject = selected.obj;\n\t\tconst [x, y] = this.toRendererCoordinate(e.clientX, e.clientY);\n\t\tthis.dragXOffset = x - this.draggedObject.x;\n\t\tthis.dragYOffset = y - this.draggedObject.y;\n\t\tthis.dragXOriginal = this.draggedObject.x;\n\t\tthis.dragYOriginal = this.draggedObject.y;\n\t}\n\n\tprivate onTouchStart(e: TouchEvent) {\n\t\tconst selected = this.selected;\n\t\tif (!selected) return;\n\t\tthis.draggedObject = selected.obj;\n\t\tconst [x, y] = this.toRendererCoordinate(\n\t\t\te.touches[0].clientX,\n\t\t\te.touches[0].clientY\n\t\t);\n\t\tthis.dragXOffset = x - this.draggedObject.x;\n\t\tthis.dragYOffset = y - this.draggedObject.y;\n\t\tthis.dragXOriginal = this.draggedObject.x;\n\t\tthis.dragYOriginal = this.draggedObject.y;\n\t}\n\n\tprivate onDragOver(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\te.dataTransfer!.dropEffect = 'copy';\n\t}\n\n\tprivate onSpriteDragMove(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\te.preventDefault();\n\n\t\t\t// Formatter quirk\n\t\t\t// tslint:disable:indent\n\t\t\tlet [x, y] =\n\t\t\t\te instanceof MouseEvent\n\t\t\t\t\t? this.toRendererCoordinate(e.clientX, e.clientY)\n\t\t\t\t\t: this.toRendererCoordinate(\n\t\t\t\t\t\t\te.touches[0].clientX,\n\t\t\t\t\t\t\te.touches[0].clientY\n\t\t\t\t\t  );\n\t\t\t// tslint:enable:indent\n\t\t\tx -= this.dragXOffset;\n\t\t\ty -= this.dragYOffset;\n\n\t\t\tconst deltaX = Math.abs(x - this.dragXOriginal);\n\t\t\tconst deltaY = Math.abs(y - this.dragYOriginal);\n\n\t\t\tif (deltaX + deltaY > 1) this.dropPreventClick = true;\n\n\t\t\tif (e.shiftKey) {\n\t\t\t\tif (deltaX > deltaY) {\n\t\t\t\t\ty = this.dragYOriginal;\n\t\t\t\t} else {\n\t\t\t\t\tx = this.dragXOriginal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.history.transaction(() => {\n\t\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\t\tid: this.draggedObject!.id,\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t} as ISetObjectPositionMutation);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async onDrop(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!e.dataTransfer) return;\n\n\t\tfor (const item of e.dataTransfer.items) {\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\n\t\t\t\tconst name = 'dropCustomAsset' + ++this.dropSpriteCount;\n\t\t\t\tconst url = registerAsset(name, item.getAsFile()!);\n\n\t\t\t\tthis.history.transaction(async () => {\n\t\t\t\t\tawait this.$store.dispatch('objects/createSprite', {\n\t\t\t\t\t\tassetName: name,\n\t\t\t\t\t} as ICreateSpriteAction);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSpriteDrop(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\tif ('TouchEvent' in window && e instanceof TouchEvent) {\n\t\t\t\tthis.dropPreventClick = false;\n\t\t\t}\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n\n\tprivate onMouseEnter(e: MouseEvent) {\n\t\tif (e.buttons !== 1) {\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n\n\tprivate onKeydown(e: KeyboardEvent) {\n\t\tconst target = this.selected;\n\t\tif (target && e.key === 'Delete') {\n\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\tid: target.obj.id,\n\t\t\t} as IRemoveObjectAction);\n\t\t\treturn;\n\t\t}\n\t\tif (e.key === 'z' && e.ctrlKey) {\n\t\t\tthis.$store.commit('history/undo');\n\t\t\treturn;\n\t\t} else if (e.key === 'y' && e.ctrlKey) {\n\t\t\tthis.$store.commit('history/redo');\n\t\t\treturn;\n\t\t}\n\n\t\tif (target) {\n\t\t\tif (target instanceof Character && !target.obj.freeMove) {\n\t\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\tid: target!.obj.id,\n\t\t\t\t\t\tdelta: -1,\n\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t}\n\t\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\tid: target!.obj.id,\n\t\t\t\t\t\tdelta: 1,\n\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet x = target ? target.obj.x : 0;\n\t\t\tlet y = target ? target.obj.y : 0;\n\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\tx -= e.shiftKey ? 1 : 20;\n\t\t\t} else if (target && e.key === 'ArrowRight') {\n\t\t\t\tx += e.shiftKey ? 1 : 20;\n\t\t\t} else if (target && e.key === 'ArrowUp') {\n\t\t\t\ty -= e.shiftKey ? 1 : 20;\n\t\t\t} else if (target && e.key === 'ArrowDown') {\n\t\t\t\ty += e.shiftKey ? 1 : 20;\n\t\t\t} else {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: target!.obj.id,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t}\n\t\tconsole.log(e);\n\t\treturn;\n\t}\n\n\tprivate renderObjectCache: { [id: string]: IRenderable } = {};\n\tprivate get renderObjects() {\n\t\tconst objectsState = this.$store.state.objects as IObjectsState;\n\t\tconst order = [...objectsState.order, ...objectsState.onTopOrder];\n\t\tconst objects = this.$store.state.objects\n\t\t\t.objects as IObjectsState['objects'];\n\t\tconst toUncache = Object.keys(this.renderObjectCache).filter(\n\t\t\tid => !order.includes(id)\n\t\t);\n\n\t\tfor (const id of toUncache) {\n\t\t\tif (this.selected && this.selected.id === id) {\n\t\t\t\tthis.selected = null;\n\t\t\t}\n\t\t\tthis.$delete(this.renderObjectCache, id);\n\t\t}\n\n\t\treturn order.map(id => {\n\t\t\tif (!this.renderObjectCache[id]) {\n\t\t\t\tconst obj = objects[id];\n\t\t\t\tswitch (obj.type) {\n\t\t\t\t\tcase 'sprite':\n\t\t\t\t\t\tthis.renderObjectCache[id] = new Sprite((obj as any) as ISprite);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'character':\n\t\t\t\t\t\tthis.renderObjectCache[id] = new Character(\n\t\t\t\t\t\t\t(obj as any) as ICharacter\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'textBox':\n\t\t\t\t\t\tthis.renderObjectCache[id] = new TextBox((obj as any) as ITextBox);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.renderObjectCache[id].obj = objects[id];\n\t\t\treturn this.renderObjectCache[id];\n\t\t});\n\t}\n\n\t@Watch('nsfw')\n\tprivate onNSFWChange(newNSFW: boolean): void {\n\t\tif (!this.currentBackground) return;\n\t\tif (newNSFW) return;\n\t\tif (this.currentBackground.nsfw) {\n\t\t\tthis.currentBackground = backgrounds[0];\n\t\t}\n\t\tnsfwFilter(this.currentBackground);\n\t\tfor (const character of this.renderObjects) {\n\t\t\tif (character instanceof Character) {\n\t\t\t\tthis.$store.dispatch('objects/nsfwCheck', {\n\t\t\t\t\tid: character.obj.id,\n\t\t\t\t} as INsfwCheckAction);\n\t\t\t}\n\t\t}\n\t\tthis.invalidateRender();\n\t}\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=41de1f68&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ICommand } from '@/eventbus/command';\nimport { getAsset } from '@/asset-manager';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetSpriteSizeMutation,\n\tISetSpriteRatioMutation,\n} from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\n\nexport interface ISprite extends IObject {\n\ttype: 'sprite';\n\tassetName: string;\n}\n\nexport const spriteMutations: MutationTree<IObjectsState> = {};\n\nlet lastSpriteId = 0;\n\nexport const spriteActions: ActionTree<IObjectsState, never> = {\n\tasync createSprite({ state, commit }, command: ICreateSpriteAction) {\n\t\tconst asset = await getAsset(command.assetName, false);\n\t\tif (!(asset instanceof HTMLImageElement)) return;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tassetName: command.assetName,\n\t\t\t\tflip: false,\n\t\t\t\theight: asset.height,\n\t\t\t\twidth: asset.width,\n\t\t\t\tid: 'sprite_' + ++lastSpriteId,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: asset.width / asset.height,\n\t\t\t\ttype: 'sprite',\n\t\t\t\tversion: 0,\n\t\t\t\tx: 640,\n\t\t\t\ty: 0,\n\t\t\t} as ISprite,\n\t\t} as ICreateObjectMutation);\n\t},\n};\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assetName: string;\n}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport {\n\tNameboxY,\n\tTextBoxWidth,\n\tTextBoxHeight,\n} from '@/models/textBoxConstants';\n\nexport interface ITextBox extends IObject {\n\ttype: 'textBox';\n\ttext: string;\n\ttalking: string | null;\n\tstyle: 'normal' | 'corrupt' | 'custom';\n\tcustomColor: string;\n\tcontrols: boolean;\n\tskip: boolean;\n\tcontinue: boolean;\n}\n\nexport const textBoxMutations: MutationTree<IObjectsState> = {\n\tsetText(state, command: ISetTextBoxTextMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.text = command.text;\n\t\t++obj.version;\n\t},\n\tsetTalking(state, command: ISetTextBoxTalkingMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.talking = command.talking;\n\t\t++obj.version;\n\t},\n\tsetStyle(state, command: ISetTextBoxStyleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.style = command.style;\n\t\t++obj.version;\n\t},\n\tsetControlsVisible(state, command: ISetTextBoxControlsVisibleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.controls = command.controls;\n\t\t++obj.version;\n\t},\n\tsetSkipable(state, command: ISetTextBoxControlsSkipMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.skip = command.skip;\n\t\t++obj.version;\n\t},\n\tsetContinueArrow(state, command: ISetTextBoxControlsContinueMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.continue = command.continue;\n\t\t++obj.version;\n\t},\n\tsetCustomColor(state, command: ISetTextBoxCustomColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customColor = command.color;\n\t\t++obj.version;\n\t},\n};\n\nlet lastTextBoxId = 0;\n\nexport const textBoxActions: ActionTree<IObjectsState, never> = {\n\tasync createTextBox({ state, commit }, command: ICreateTextBoxAction) {\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tflip: false,\n\t\t\t\tid: 'textBox_' + ++lastTextBoxId,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'textBox',\n\t\t\t\tversion: 0,\n\t\t\t\tx: 640,\n\t\t\t\ty: NameboxY,\n\t\t\t\twidth: TextBoxWidth,\n\t\t\t\theight: TextBoxHeight,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tcontinue: true,\n\t\t\t\tcontrols: true,\n\t\t\t\tskip: true,\n\t\t\t\tstyle: 'normal',\n\t\t\t\tcustomColor: '#ffa8d2',\n\t\t\t\ttalking: null,\n\t\t\t\ttext: '',\n\t\t\t} as ITextBox,\n\t\t} as ICreateObjectMutation);\n\t},\n\n\tsetStyle({ state, commit }, command: ISetTextBoxStyleAction) {\n\t\tcommit('setStyle', {\n\t\t\tid: command.id,\n\t\t\tstyle: command.style,\n\t\t} as ISetTextBoxStyleMutation);\n\t},\n};\n\nexport interface ISetTextBoxTextMutation extends ICommand {\n\treadonly text: string;\n}\n\nexport interface ISetTextBoxTalkingMutation extends ICommand {\n\treadonly talking: string;\n}\n\nexport interface ISetTextBoxStyleMutation extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n\nexport interface ISetTextBoxControlsVisibleMutation extends ICommand {\n\treadonly controls: boolean;\n}\n\nexport interface ISetTextBoxControlsSkipMutation extends ICommand {\n\treadonly skip: boolean;\n}\n\nexport interface ISetTextBoxControlsContinueMutation extends ICommand {\n\treadonly continue: boolean;\n}\n\nexport interface ISetTextBoxCustomColorMutation extends ICommand {\n\treadonly color: string;\n}\n\nexport interface ICreateTextBoxAction extends ICommand {}\n\nexport interface ISetTextBoxStyleAction extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n","import { Module } from 'vuex';\nimport { ICommand } from '@/eventbus/command';\nimport { spriteMutations, spriteActions } from './objectTypes/sprite';\nimport { characterActions, characterMutations } from './objectTypes/characters';\nimport { textBoxActions, textBoxMutations } from './objectTypes/textbox';\n\nexport interface IObjectsState {\n\tobjects: { [id: string]: IObject };\n\torder: string[];\n\tonTopOrder: string[];\n}\n\nexport interface IObject {\n\ttype: ObjectTypes;\n\tid: string;\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tpreserveRatio: boolean;\n\tratio: number;\n\topacity: number;\n\tversion: number;\n\tflip: boolean;\n\tonTop: boolean;\n}\n\nexport type ObjectTypes = 'sprite' | 'character' | 'textBox';\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tobjects: {},\n\t\torder: [],\n\t\tonTopOrder: [],\n\t},\n\tmutations: {\n\t\tcreate(state, command: ICreateObjectMutation) {\n\t\t\tstate.objects[command.object.id] = command.object;\n\t\t\tif (command.object.onTop) {\n\t\t\t\tstate.onTopOrder.push(command.object.id);\n\t\t\t} else {\n\t\t\t\tstate.order.push(command.object.id);\n\t\t\t}\n\t\t},\n\t\tremoveFromList(state, command: IRemoveFromListMutation) {\n\t\t\tconst collection = command.onTop ? state.onTopOrder : state.order;\n\t\t\tconst idx = collection.indexOf(command.id);\n\t\t\tcollection.splice(idx, 1);\n\t\t},\n\t\taddToList(state, command: IAddToListMutation) {\n\t\t\tconst collection = command.onTop ? state.onTopOrder : state.order;\n\t\t\tcollection.splice(command.position, 0, command.id);\n\t\t},\n\t\tsetOnTop(state, command: ISetOnTopMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.onTop = command.onTop;\n\t\t},\n\t\tsetPosition(state, command: ISetObjectPositionMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.x = command.x;\n\t\t\tobj.y = command.y;\n\t\t},\n\t\tsetFlip(state, command: ISetObjectFlipMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.flip = command.flip;\n\t\t},\n\t\tsetOpacity(state, command: ISetObjectOpacityMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.opacity = command.opacity;\n\t\t},\n\t\tsetSize(state, command: ISetSpriteSizeMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.width = command.width;\n\t\t\tobj.height = command.height;\n\t\t},\n\t\tsetRatio(state, command: ISetSpriteRatioMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.preserveRatio = command.preserveRatio;\n\t\t\tobj.ratio = command.ratio;\n\t\t},\n\t\tremoveObject(state, command: IRemoveObjectMutation) {\n\t\t\tdelete state.objects[command.id];\n\t\t},\n\t\t...spriteMutations,\n\t\t...characterMutations,\n\t\t...textBoxMutations,\n\t},\n\tactions: {\n\t\tremoveObject({ state, commit }, command: IRemoveObjectAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('removeObject', {\n\t\t\t\tid: command.id,\n\t\t\t} as IRemoveObjectMutation);\n\t\t},\n\t\tsetPosition({ state, commit, dispatch }, command: ISetPositionAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (obj.type === 'character') {\n\t\t\t\tdispatch('setCharacterPosition', command as ISetPositionAction);\n\t\t\t} else {\n\t\t\t\tcommit('setPosition', command as ISetObjectPositionMutation);\n\t\t\t}\n\t\t},\n\t\tsetOnTop({ state, commit }, command: IObjectSetOnTopAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (obj.onTop === command.onTop) return;\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: (command.onTop ? state.onTopOrder : state.order).length,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('setOnTop', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as ISetOnTopMutation);\n\t\t},\n\t\tshiftLayer({ state, commit }, command: IObjectShiftLayerAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst collection = obj.onTop ? state.onTopOrder : state.order;\n\t\t\tconst position = collection.indexOf(obj.id);\n\n\t\t\tlet newPosition = position + command.delta;\n\t\t\tif (newPosition < 0) {\n\t\t\t\tnewPosition = 0;\n\t\t\t}\n\t\t\tif (newPosition > collection.length) {\n\t\t\t\tnewPosition = collection.length;\n\t\t\t}\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: newPosition,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IAddToListMutation);\n\t\t},\n\t\tsetPreserveRatio({ commit, state }, command: ISetRatioAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst ratio = command.preserveRatio ? obj.width / obj.height : 0;\n\t\t\tcommit('setRatio', {\n\t\t\t\tid: command.id,\n\t\t\t\tpreserveRatio: command.preserveRatio,\n\t\t\t\tratio,\n\t\t\t} as ISetSpriteRatioMutation);\n\t\t},\n\t\tsetWidth({ commit, state }, command: ISetWidthAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst height = !obj.preserveRatio\n\t\t\t\t? obj.height\n\t\t\t\t: command.width / obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight,\n\t\t\t\twidth: command.width,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\tsetHeight({ commit, state }, command: ISetHeightAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst width = !obj.preserveRatio ? obj.width : command.height * obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight: command.height,\n\t\t\t\twidth,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\t...spriteActions,\n\t\t...characterActions,\n\t\t...textBoxActions,\n\t},\n} as Module<IObjectsState, never>;\n\nexport interface ICreateObjectMutation {\n\treadonly object: IObject;\n}\n\nexport interface IObjectMutation {\n\treadonly id: string;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetObjectPositionMutation extends IObjectMutation {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface ISetOnTopMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetObjectFlipMutation extends IObjectMutation {\n\treadonly flip: boolean;\n}\n\nexport interface ISetObjectOpacityMutation extends IObjectMutation {\n\treadonly opacity: number;\n}\n\nexport interface IRemoveFromListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface IAddToListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n\treadonly position: number;\n}\n\nexport interface IObjectShiftLayerAction extends ICommand {\n\treadonly delta: number;\n}\n\nexport interface IObjectSetOnTopAction extends ICommand {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface IRemoveObjectMutation extends ICommand {}\nexport interface IRemoveObjectAction extends ICommand {}\n\nexport interface ISetPositionAction extends ICommand {\n\treadonly x: number;\n\treadonly y: number;\n}\n","import { Module } from 'vuex';\n\nexport interface IUiState {\n\tvertical: boolean;\n\tnsfw: boolean;\n\tselection: string;\n}\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tvertical: false,\n\t\tnsfw: false,\n\t\tselection: '',\n\t},\n\tmutations: {\n\t\tsetVertical(state, vertical: boolean) {\n\t\t\tstate.vertical = vertical;\n\t\t},\n\t\tsetNsfw(state, nsfw: boolean) {\n\t\t\tstate.nsfw = nsfw;\n\t\t},\n\t},\n} as Module<IUiState, never>;\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport objects from './objects';\nimport ui from './ui';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store<never>({\n\tmodules: {\n\t\tobjects,\n\t\tui,\n\t},\n\tmutations: {},\n\tactions: {},\n});\n","import { IHistoryOptions } from '@/plugins/vuex-history';\n\nexport default {\n\tmutations: {},\n} as IHistoryOptions;\n","import { IHistoryOptions } from '@/plugins/vuex-history';\nimport SpriteHistoryOptions from './objectTypes/sprite_history_properties';\n\nexport default {\n\tmutations: {\n\t\t'objects/*': {\n\t\t\tcombinable: (oldMut, newMut) =>\n\t\t\t\toldMut.type === newMut.type && oldMut.payload.id === newMut.payload.id,\n\t\t},\n\t\t'objects/create': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t'objects/removeObject': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t...SpriteHistoryOptions.mutations,\n\t},\n} as IHistoryOptions;\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport History from './plugins/vuex-history';\r\nimport App from './App.vue';\r\nimport store from '@/store';\r\n// import './registerServiceWorker';\r\nimport ObjectsHistoryProperties from './store/objects_history_properties';\r\n\r\nVue.config.productionTip = false;\r\nVue.use(Vuex);\r\nVue.use(History, {\r\n\tmutations: {\r\n\t\t...ObjectsHistoryProperties.mutations,\r\n\t},\r\n});\r\n\r\nnew Vue({\r\n\tstore: store as any,\r\n\trender: h => h(App),\r\n}).$mount('#app');\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=5a206118&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=5a206118&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=462630bb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=462630bb&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=504dbf3e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=504dbf3e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=721fb59d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=721fb59d&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=a7bba164&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=a7bba164&lang=scss&scoped=true&\""],"sourceRoot":""}