{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/repo/List.vue?8fa9","webpack:///./src/components/toolbox/panels/add.vue?7702","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?490c","webpack:///./src/components/toolbox/subpanels/text/text.vue?53d5","webpack:///./src/components/toolbox/panels/textbox.vue?423c","webpack:///./src/components/repo/SearchBar.vue?c01a","webpack:///./src/components/toolbox/toolbox.vue?ff03","webpack:///./src/App.vue?f446","webpack:///./src/components/toolbox/panels/credits.vue?21bb","webpack:///./src/components/repo/PackDisplay.vue?60b0","webpack:///./src/components/toggle.vue?8dcd","webpack:///./src/components/toolbox/panels/character/partButton.vue?b02f","webpack:///./src/components/toolbox/panels/sprite.vue?6258","webpack:///./src/components/toolbox/panels/poem.vue?6778","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?6d52","webpack:///./src/components/toolbox/panels/character/parts.vue?04cf","webpack:///./src/components/toolbox/panels/content-pack.vue?2fd2","webpack:///./src/components/toolbox/panels/background/settings.vue?9308","webpack:///./src/components/toolbox/panels/backgrounds.vue?be15","webpack:///./src/components/toolbox/subpanels/color/color.vue?18e1","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?7c6a","webpack:///./src/components/toolbox/subpanels/color/slider.vue?e001","webpack:///./src/components/toolbox/drop-target.vue?e9cd","webpack:///./src/components/toolbox/panels/settings.vue?2ff0","webpack:///./src/components/toolbox/panels/panels.vue?8de8","webpack:///./src/components/toolbox/panels/background/button.vue?6167","webpack:///./src/components/repo/Dialog.vue?d349","webpack:///./src/plugins/vuex-history.js","webpack:///./src/App.vue?a4e1","webpack:///./src/components/toolbox/toolbox.vue?7a24","webpack:///./src/components/toolbox/panels/settings.vue?0081","webpack:///./src/components/toggle.vue?a527","webpack:///./src/components/toggle.vue?c831","webpack:///./src/components/toggle.vue?111d","webpack:///./src/components/toggle.vue","webpack:///./src/components/toolbox/panels/panelMixin.ts","webpack:///./src/components/toolbox/panels/settings.vue?c9e2","webpack:///./src/components/toolbox/panels/settings.vue?b55b","webpack:///./src/components/toolbox/panels/settings.vue","webpack:///./src/components/toolbox/panels/add.vue?9834","webpack:///./src/eventbus/event-bus.ts","webpack:///./src/models/error-asset.ts","webpack:///./src/asset-manager.ts","webpack:///./src/components/toolbox/drop-target.vue?02d2","webpack:///./src/components/toolbox/drop-target.vue?7454","webpack:///./src/components/toolbox/drop-target.vue?6822","webpack:///./src/components/toolbox/drop-target.vue","webpack:///./src/components/toolbox/panels/add.vue?d112","webpack:///./src/components/toolbox/panels/add.vue?6c2e","webpack:///./src/components/toolbox/panels/add.vue","webpack:///./src/components/toolbox/panels/character.vue?86c8","webpack:///./src/constants/base.ts","webpack:///./src/models/seekers.ts","webpack:///./src/store/objectTypes/characters.ts","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?64a6","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?8e58","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?de84","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?10f9","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?dcb7","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?a903","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?e814","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?e6e1","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?4d33","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?5162","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?c3eb","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?4121","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue","webpack:///./src/components/toolbox/panels/character/parts.vue?ef3d","webpack:///./src/components/toolbox/panels/character/partButton.vue?832a","webpack:///./src/components/toolbox/panels/character/partButton.vue?9154","webpack:///./src/components/toolbox/panels/character/partButton.vue?b061","webpack:///./src/components/toolbox/panels/character/partButton.vue","webpack:///./src/components/toolbox/panels/character/parts.vue?9c59","webpack:///./src/components/toolbox/panels/character/parts.vue?25dd","webpack:///./src/components/toolbox/panels/character/parts.vue","webpack:///./src/components/toolbox/panels/character.vue?081c","webpack:///./src/components/toolbox/panels/character.vue?283a","webpack:///./src/components/toolbox/panels/character.vue","webpack:///./src/components/toolbox/panels/sprite.vue?f34b","webpack:///./src/components/toolbox/panels/sprite.vue?dbdb","webpack:///./src/components/toolbox/panels/sprite.vue?bfdb","webpack:///./src/components/toolbox/panels/sprite.vue","webpack:///./src/components/toolbox/panels/textbox.vue?84ce","webpack:///./src/components/toolbox/subpanels/color/color.vue?fe4d","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?720b","webpack:///./src/util/colors/hsl.ts","webpack:///./src/util/colors/rgb.ts","webpack:///./src/components/toolbox/subpanels/color/slider.vue?71ff","webpack:///./src/components/toolbox/subpanels/color/slider.vue?cd13","webpack:///./src/components/toolbox/subpanels/color/slider.vue?f916","webpack:///./src/components/toolbox/subpanels/color/slider.vue","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?67c8","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?c067","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue","webpack:///./src/components/toolbox/subpanels/color/color.vue?0222","webpack:///./src/components/toolbox/subpanels/color/color.vue?827a","webpack:///./src/components/toolbox/subpanels/color/color.vue","webpack:///./src/components/toolbox/subpanels/text/text.vue?7585","webpack:///./src/renderer/textRenderer/string-walker.ts","webpack:///./src/renderer/textRenderer/tokenizer.ts","webpack:///./src/renderer/textRenderer/textCommands.ts","webpack:///./src/renderer/textRenderer/textRenderer.ts","webpack:///./src/constants/textBox.ts","webpack:///./src/components/toolbox/subpanels/text/text.vue?ba8f","webpack:///./src/components/toolbox/subpanels/text/text.vue?c42a","webpack:///./src/components/toolbox/subpanels/text/text.vue","webpack:///./src/components/toolbox/panels/textbox.vue?ca5f","webpack:///./src/components/toolbox/panels/textbox.vue?500e","webpack:///./src/components/toolbox/panels/textbox.vue","webpack:///./src/components/toolbox/panels/choice.vue?887a","webpack:///./src/components/toolbox/panels/choice.vue?16b2","webpack:///./src/components/toolbox/panels/choice.vue?d2f6","webpack:///./src/components/toolbox/panels/choice.vue","webpack:///./src/components/toolbox/panels/credits.vue?de1d","webpack:///./src/components/toolbox/panels/credits.vue?05b9","webpack:///./src/components/toolbox/panels/credits.vue?3709","webpack:///./src/components/toolbox/panels/credits.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?78b4","webpack:///./src/components/toolbox/panels/background/button.vue?9e8f","webpack:///./src/components/toolbox/panels/background/button.vue?92ee","webpack:///./src/components/toolbox/panels/background/button.vue?9649","webpack:///./src/components/toolbox/panels/background/button.vue","webpack:///./src/components/toolbox/panels/background/settings.vue?54e9","webpack:///./src/components/toolbox/panels/background/settings.vue?93fe","webpack:///./src/components/toolbox/panels/background/settings.vue?50a9","webpack:///./src/components/toolbox/panels/background/settings.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?9ca2","webpack:///./src/components/toolbox/panels/backgrounds.vue?18da","webpack:///./src/components/toolbox/panels/backgrounds.vue","webpack:///./src/components/toolbox/panels/content-pack.vue?2935","webpack:///./src/environments/browser.ts","webpack:///./src/environments/edge.ts","webpack:///./src/environments/electron.ts","webpack:///./src/environments/environment.ts","webpack:///./src/components/toolbox/panels/content-pack.vue?566c","webpack:///./src/store/panels.ts","webpack:///./src/components/toolbox/panels/content-pack.vue?7468","webpack:///./src/components/toolbox/panels/content-pack.vue","webpack:///./src/components/toolbox/panels/panels.vue?bb85","webpack:///./src/renderables/background.ts","webpack:///./src/renderables/sprite.ts","webpack:///./src/renderer/renderAbortedException.ts","webpack:///./src/renderer/rendererContext.ts","webpack:///./src/renderer/renderer.ts","webpack:///./src/renderables/character.ts","webpack:///./src/renderer/pathTools.ts","webpack:///./src/constants/textBoxCustom.ts","webpack:///./src/renderables/textbox.ts","webpack:///./src/constants/choices.ts","webpack:///./src/renderables/choices.ts","webpack:///./src/constants/notification.ts","webpack:///./src/renderables/notification.ts","webpack:///./src/constants/poem.ts","webpack:///./src/renderables/poem.ts","webpack:///./src/renderables/scene-renderer.ts","webpack:///./src/components/toolbox/panels/panels.vue?f669","webpack:///./src/components/toolbox/panels/panels.vue?8e69","webpack:///./src/components/toolbox/panels/panels.vue","webpack:///./src/components/toolbox/panels/notification.vue?0dfa","webpack:///./src/components/toolbox/panels/notification.vue?9d27","webpack:///./src/components/toolbox/panels/notification.vue?824d","webpack:///./src/components/toolbox/panels/notification.vue","webpack:///./src/components/toolbox/panels/poem.vue?7ce0","webpack:///./src/components/toolbox/panels/poem.vue?edd8","webpack:///./src/components/toolbox/panels/poem.vue?670f","webpack:///./src/components/toolbox/panels/poem.vue","webpack:///./src/components/toolbox/toolbox.vue?5a64","webpack:///./src/components/toolbox/toolbox.vue?983b","webpack:///./src/components/toolbox/toolbox.vue","webpack:///./src/components/message-console.vue?a3af","webpack:///./src/components/message-console.vue?092b","webpack:///./src/components/message-console.vue?1d97","webpack:///./src/components/message-console.vue","webpack:///./src/components/render.vue?a65f","webpack:///./src/components/render.vue?7cec","webpack:///./src/components/render.vue?4d80","webpack:///./src/components/render.vue","webpack:///./src/components/repo/Dialog.vue?d416","webpack:///./src/components/repo/layouts/SingleBox.vue?9308","webpack:///./src/components/repo/SearchBar.vue?e37a","webpack:///./src/components/repo/SearchBar.vue?ecbe","webpack:///./src/components/repo/SearchBar.vue?b392","webpack:///./src/components/repo/SearchBar.vue","webpack:///./src/components/repo/List.vue?4115","webpack:///./src/components/repo/List.vue?b662","webpack:///./src/components/repo/List.vue?4d8c","webpack:///./src/components/repo/List.vue","webpack:///./src/components/repo/PackDisplay.vue?6a96","webpack:///./src/components/toolbox/panels/character-pack-sanitizer.ts","webpack:///./src/components/repo/PackDisplay.vue?bc42","webpack:///./src/components/repo/PackDisplay.vue?07b5","webpack:///./src/components/repo/PackDisplay.vue","webpack:///./src/components/repo/layouts/SingleBox.vue?6887","webpack:///./src/components/repo/layouts/SingleBox.vue?82c2","webpack:///./src/components/repo/layouts/SingleBox.vue","webpack:///./src/components/repo/Dialog.vue?e334","webpack:///./src/components/repo/Dialog.vue?c894","webpack:///./src/components/repo/Dialog.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/store/objectTypes/sprite.ts","webpack:///./src/store/objectTypes/choices.ts","webpack:///./src/store/objectTypes/textbox.ts","webpack:///./src/store/objectTypes/notification.ts","webpack:///./src/store/objectTypes/poem.ts","webpack:///./src/store/objects.ts","webpack:///./src/store/ui.ts","webpack:///./src/store/content/merge.ts","webpack:///./src/store/content/index.ts","webpack:///./src/store/index.ts","webpack:///./src/store/objectTypes/sprite_history_properties.ts","webpack:///./src/store/objects_history_properties.ts","webpack:///./src/main.ts","webpack:///./src/components/toolbox/panels/notification.vue?9216","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?df0d","webpack:///./src/components/toolbox/panels/choice.vue?d8ca","webpack:///./src/components/repo/layouts/SingleBox.vue?c587","webpack:///./src/components/message-console.vue?2057","webpack:///./src/components/toolbox/panels/character.vue?6987"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","install","Vue","options","_installedPlugins","find","plugin","Store","Error","resetStateMutation","mutations","history","done","undone","newMutation","ignoreMutations","currentTransaction","transactionQueue","initialized","created","historyStuff","this","methods","initialize","store","$store","subscribe","mutation","exec","type","getMutationProperties","ignore","transaction","redo","commit","pop","replayTransaction","undo","replayAll","callback","Promise","resolve","reject","console","log","lastUndo","combinable","combination","combinator","vm","oldTransactions","forEach","replayMutation","payload","baseObj","Array","assign","mixin","computed","vuexHistory","mutationProperiesCache","parts","split","mutationProperties","oldMutation","currentWildcard","part","_vm","_h","$createElement","_c","_self","attrs","ref","canvasWidth","canvasHeight","on","drawLastDownload","$event","$refs","render","download","showDialog","dialogVisable","_e","staticRenderFns","class","vertical","active","panel","setPanel","staticClass","_v","$emit","hasPrevRender","model","$$v","lqRendering","expression","nsfw","_uid","domProps","onChange","_s","label","event","checkbox","checked","String","Boolean","default","components","component","firefoxDeltaFactor","updateVertical","$el","addEventListener","e","currentTarget","target","classList","contains","ev","deltaY","mozInputSource","scrollLeft","passive","add","remove","namespace","nsfwPacks","names","Set","keys","values","state","ui","content","contentPacks","map","pack","packId","filter","has","dispatch","packs","Toggle","undefined","isWebPSupported","showDropTarget","hideDropTarget","addCustomSpriteFile","group","_l","character","id","onChosen","toLowerCase","assetPath","sprite","style","background","assetSpriteBackground","addSpriteToScene","spriteUpload","click","onSpriteFileUpload","uploadFromURL","addTextBox","addPoem","addDialog","addChoice","addConsole","eventBus","fireCommand","command","subscribeCommand","handler","$on","fire","kind","eventType","unsubscribe","$off","path","error","message","info","webpSupportPromise","losslessCode","img","document","createElement","width","height","src","assetCache","customAssets","getAAsset","asset","hq","getAssetByUrl","lq","url","Image","crossOrigin","display","body","appendChild","baseUrl","getAsset","replace","registerAsset","file","URL","createObjectURL","registerAssetWithURL","visible","drop","_t","hide","stopPropagation","preventDefault","dataTransfer","items","item","match","getAsFile","uploadedSpritesPack","packCredits","dependencies","characters","fonts","sprites","poemStyles","poemBackgrounds","backgrounds","colors","customAssetCount","variants","variant","join","chibi","effectAllowed","from","spriteDt","show","uploadInput","files","prompt","lastSegment","addNewCustomSprite","assets","characterType","contentPack","processed","current","DropTarget","panelForParts","hasMultiplePoses","seekStyle","seekPose","seekPart","captialize","closeUp","flip","screenWidth","screenHeight","characterPositions","arraySeeker","array","pos","delta","val","CloseUpYOffset","BaseCharacterYPos","characterMutations","setPose","obj","objects","poseId","version","setCharStyleGroup","styleGroupId","setCharStyle","styleId","setPosePosition","posePositions","setClose","close","setFreeMove","freeMove","x","closestCharacterSlot","y","getData","getters","getDataG","rootGetters","getPose","styleGroups","styles","poses","getParts","pose","positionKeys","positions","positionKey","compatibleHeads","unshift","getHeads","headTypeId","headType","heads","sorted","idx","Math","abs","sort","a","b","lastSpriteId","characterActions","createCharacters","rootState","panelId","panels","currentPanel","onTop","opacity","preserveRatio","ratio","mutatePoseAndPositions","change","linearStyles","flatMap","styleGroup","styleGroupIdx","styleIdx","styleGroupJson","JSON","stringify","styleA","styleB","localeCompare","linearIdx","findIndex","nextIdx","seekHead","currentHeads","head","headKey","setPart","setCharacterPosition","shiftCharacterSlot","currentSlotNr","newSlotNr","fixContentPackRemovalFromCharacter","context","oldPack","oldCharData","char","poseAndPositionChange","buildPoseAndPositionData","oldStyleGroup","oldStyle","oldPose","newCharData","chr","newStyleGroupIdx","newStyleGroup","styleProperies","newStyleIdx","newStyle","newPoseIdx","newPose","newPosePositions","newPosition","oldPositionIdx","oldHeadGroup","newHeadGroupIdx","indexOf","oldHead","newHeadIdx","commitPoseAndPositionChanges","poseAndPosition","oldHeadCollection","newHeadCollectionNr","allowSize","allowStepMove","isFirstPos","directives","rawName","modifiers","$$selectedVal","selected","_value","_n","multiple","isLastPos","_m","composing","$forceUpdate","required","shiftLayer","Infinity","setInFront","newValue","onClick","partList","index","choose","styleComponent","button","choose_component","charData","spriteSize","lookups","loaded","all","images","image","size","floor","scaleX","scaleY","offset","lookup","HTMLImageElement","backgroundImage","backgroundPosition","backgroundSize","Number","stylePriorities","baseStyle","updateStyleData","renderCommands","concat","previewSize","previewOffset","selection","priority","subSelect","updatePose","parseInt","headTypeIdx","headIdx","prioIdx","stylePriority","styleComponents","buttons","collection","ret","currentPose","headKeyIdx","headImages","currentStyle","poseIdx","generatePosePreview","partIdx","partImage","PartButton","str","charAt","toUpperCase","substring","PositionAndSize","Layers","Opacity","Delete","Parts","colorSelect","colorName","color","textEditor","textEditorName","textEditorText","textBoxStyle","talkingDefaults","talkingOther","showControls","allowSkipping","showContinueArrow","autoQuoting","dialog","textbox","resetPosition","splitTextbox","customColor","staticStyle","customNameboxWidth","deriveCustomColors","customControlsColor","customNameboxColor","customNameboxStroke","title","updateHex","addSwatch","swatch","backgroundColor","label1","maxValue1","stops1","v1","label2","maxValue2","stops2","v2","label3","maxValue3","stops3","v3","stopsAlpha","h","deltas","HSLAColor","g","q","hue2rgb","round","toString","padStart","max","min","sqrt","pow","validCssRgb","validHex","fromCssRgb","fromHex","rgbEx","test","rgbaEx","rgbHead","parentesisPos","rbgTail","elements","parseFloat","trim","RGBAColor","hexShortEx","hexLongEx","hexTail","slider","enterSlide","moveSlide","exitSlide","gradientStops","pointerPath","maxValue","sliderLength","sliderOffset","slideActive","svg","MouseEvent","which","bounding","getBoundingClientRect","scale","clientX","touches","scaledX","lastRGBEmit","initValues","newColor","rgbColor","toRgb","toHex","hslColor","toHSL","gen","stops","relative","eightsStops","stop","toCss","validator","Slider","generatedPackId","hex","swatches","existingPack","newPack","SliderGroup","applyColor","selectedColor","onValueChanged","insertText","insertCommand","selectedFont","selectColor","aroundContextSize","tokenize","tokens","stringWalker","currentTokenState","tokenStateNormal","tokenStateEnd","contents","walker","tokenStateCommand","tokenStateNewLine","tokenText","nextState","textContent","escape","next","msg","around","closing","commandName","argument","argumentsState","Map","paramlessOp","isItalic","isBold","isUnderlined","isStrikethrough","fontName","strokeColor","strokeWidth","letterSpacing","relativeNumberOp","parameter","fontSize","alpha","op","num","isNaN","renderParts","getRenderParts","neededToLoad","font","doc","fontString","check","load","ctx","save","applyTextStyleToCanvas","strokeText","fillText","restore","State","lastChar","None","ExplictQuote","Star","measureWidth","ImplictQuote","lastPart","alignment","xStart","xEnd","yStart","lineWidth","currentLine","fixLine","lineHeights","lineHeight","line","lastItem","maxLineWidth","lastItemInLine","styleStack","tagStack","currentStyleHeight","measureHeight","currentTag","token","TextRenderer","textCommands","tmpContext","getContext","lastStyle","textStyle","measureText","heightCache","lineSpacing","text","innerHTML","fontFamily","div","position","top","left","offsetHeight","set","textAlign","lineJoin","strokeStyle","globalAlpha","fillStyle","TextBoxWidth","TextBoxCorruptedWidth","TextBoxHeight","TextBoxY","TextBoxTextXOffset","TextBoxTextYOffset","NameboxHeight","NameboxWidth","NameboxXOffset","NameboxTextYOffset","ControlsYBottomOffset","ControlsXHistoryOffset","ControlsXSkipOffset","ControlsXStuffOffset","ArrowXRightOffset","ArrowYBottomOffset","GlowRX","GlowRY","BaseTextStyle","NameboxTextStyle","ControlsTextStyle","align","fill","ControlsTextDisabledStyle","NameboxY","colorSelector","rememberedStart","rememberedEnd","textArea","el","selectionStart","selectionEnd","$nextTick","selStart","selEnd","focus","arg","selectedText","before","after","commandOpen","Color","talkingDefault","controls","skip","continue","TextEditor","button_text","btnIdx","currentIdx","select","removeChoice","choiceIdx","choices","dragEnter","dt","addImageFile","bgColor","setBackground","upload","onFileUpload","addByUrl","isActive","backgroundId","bgData","urls","flipped","seekVariant","scaling","currentBackgroundId","uploadedBackgroundsPack","addNewCustomBackground","BackgroundButton","BackgroundSettings","addNew","credits","activate","deactivate","uninstall","restart","allowLQ","downloadCanvas","filename","format","quality","setAttribute","removeChild","defaultValue","canvas","toBlob","blob","toDataURL","dataURItoBlob","dataURI","binStr","atob","len","arr","Uint8Array","charCodeAt","Blob","navigator","msSaveBlob","electron","promptCache","lastPrompt","ipcRenderer","filePath","filepath","send","arrayBuffer","buffer","chooseEnv","isElectron","msSaveOrOpenBlob","envX","toast","selectedPack","needRestart","environment","installedCharacterPacks","location","reload","installContentPack","queuedUninstall","installed","uninstallContentPack","activateContentPack","deactivateContentPack","startsWith","freshInstall","isPackInstallingSupported","ScalingModes","panel_button","updateCurrentPanel","addNewPanel","canDeletePanel","deletePanel","canMoveAhead","moveAhead","canMoveBehind","moveBehind","ppi","estimateExportSize","transparentId","lastPanelNum","previewManager","panelToUrl","urlToPanel","register","unregister","delete","revokeObjectURL","namespaced","panelOrder","setCurrentPanel","setPanelPreview","lastRender","createPanel","setPanelOrder","setCurrentBackground","setBackgroundColor","setBackgroundFlipped","setBackgroundVariant","setBackgroundScaling","actions","duplicatePanel","parse","sourcePanelId","targetPanelId","root","oldIdx","seekBackgroundVariant","newOrderIdx","orderIdx","fixContentPackRemoval","oldContent","oldBackground","newBackground","oldVariantJSON","newVariantIdx","move","newIdx","rx","w","Stretch","Cover","screenRatio","drawImage","hx","hy","x0","y0","x1","y1","updatedContent","drawRect","hitTest","getHitbox","lockedRatio","shadow","preview","blur","hitX","hitY","opacityFactor","fsCtx","aborted","params","outline","shadowColor","shadowBlur","offsetX","shadowOffsetX","offsetY","shadowOffsetY","translate","paintOnto","composition","beginPath","rect","globalCompositeOperation","stroke","repetition","previewCanvas","createPattern","transform","createLinearGradient","runningContext","renderCallback","abort","clearRect","saveToFile","getImageData","styleData","lastBase","localRenderer","lastVersion","hitDetectionFallback","drawAssetsUnloaded","renderCommand","posePosition","partAssets","drawAsset","loadAssets","loadedDraws","loadedDraw","updateLocalCanvas","scaledY","flippedX","getDataAt","DOMException","includes","zoom","unloaded","roundedRectangle","moveTo","arcTo","closePath","roundedTopRectangle","lineTo","nameboxTextOutlineDelta","nameboxBackgroundDelta","nameboxGradientMiddleStopPosition","nameboxGradientEndDelta","nameboxRounding","textboxRounding","textboxRoundingBuffer","controlColorDelta","controlDisableColorDelta","dotColorDelta","dotRadius","dotPatternSize","textboxOutlineColorDelta","lastX","lastY","lastH","lastW","w2","x2","y2","renderBackdrop","renderNamebox","renderText","bottom","controlsY","controlsCenter","drawText","controlsStyle","controlsDisableStyle","nameboxOutlineColor","customTransform","clip","subRx","gradient","linearGradient","baseBG","fromCss","nameboxBackgroundColor","targetColor","addColorStop","loadFonts","fixAlignment","dotPattern","dotRx","drawDot","dotX","dotY","drawPath","ellipse","PI","subSubRx","pattern","patternFrom","glowGradient","outlineColor","baseX","baseY","quote","base","controlColor","col","disColor","ChoiceButtonColor","ChoiceButtonBorderColor","ChoiceButtonWidth","ChoiceSpacing","ChoiceYOffset","ChoicePadding","ChoiceY","ChoiceTextStyle","choiceRenderers","h2","updateChoiceBounds","choiceRenderer","getHeight","choice","reduce","acc","renderer","choiceDistance","NotificationBackdropColor","NotificationPadding","NotificationSpacing","NotificationOkTextStyle","NotificationTextStyle","backdrop","textRenderer","buttonRenderer","textWidth","getWidth","textHeight","buttonWidth","buttonHeight","defaultPoemBackground","defaultPoemStyle","defaultX","defaultY","poemTopPadding","poemPadding","defaultPoemWidth","defaultPoemHeight","consoleBackgroundColor","consoleWidth","consoleHeight","defaultConsoleBackground","defaultConsoleStyle","BasePoemStyle","poemTextStyles","paper","padding","topPadding","renderObjectCache","lCurrentlyRendering","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getRenderObjects","renderObject","getBackgroundRenderer","objectsState","order","onTopOrder","toUncache","estimateFactor","thumbnailFactor","thumbnailQuality","qualityFactor","defaultQuality","qualityWarningThreshold","webpSupport","heifSupport","moveFocusToActivePanel","sceneRenderer","targetCanvas","distribution","getPanelDistibution","prefix","extension","renderObjects","imageIdx","sizes","readableSizes","toFixed","filePluralize","itPluralize","sizePluralize","oldQuality","mapper","panelIdx","imageI","sliceStart","sliceEnd","querySelector","scrollIntoView","ele","parent","parentElement","children","scroll","clientHeight","scrollTop","clientWidth","panelButtons","objectOrders","txtBox","objId","extractObjectText","subType","poemBackground","poemStyle","panelSelection","onPanelChange","newSelection","lastDownload","SettingsPanel","AddPanel","BackgroundsPanel","CreditsPanel","CharacterPanel","TextBoxPanel","ChoicePanel","SpritePanel","ContentPacksPanel","PanelsPanel","NotificationPanel","PoemPanel","shortHidingTime","longHidingTime","hideShowTimeouts","messages","showLoading","showLoadingTimeout","hideLoadingTimeout","onLoadingChange","loading","setTimeout","stack","clearTimeout","bitmapHeight","bitmapWidth","onUiClick","onTouchStart","onDragStart","onSpriteDragMove","onSpriteDrop","onDragOver","onDrop","onMouseEnter","currentlyRendering","queuedRender","showingLast","dropSpriteCount","dropPreventClick","draggedObject","dragXOffset","dragYOffset","dragXOriginal","dragYOriginal","imageUrl","sceneRender","oldUrl","requestAnimationFrame","render_","cancelAnimationFrame","unsafe","invalidateRender","mut","sd","sdCtx","renderLoadingScreen","loadingScreen","rctx","offsetLeft","ry","offsetTop","sx","offsetWidth","sy","selectedObject","toRendererCoordinate","clientY","objectsAt","currentObjectIdx","dropEffect","deltaX","shiftKey","sourcePack","TouchEvent","leave","keydownHandler","blured","focusListHandler","search","authors","packsArgmented","onSelect","searchBar","leavePackDisplay","disabled","onUpdate","dontCloseHelp","help","toggled","showHelp","debounce","debounceTimeout","lastSend","input","documentClickHandler","updateInternalValue","removeEventListener","doUpdate","innerText","header","sortBy","headerKeydownListener","desc","nativeOn","updateFocusedItem","focused","focusedItem","source","wordCache","list","headerId","tbody","element","containerHeight","scrollBottom","itemTop","itemBottom","by","filtered","filterList","sortFunc","oldSort","disclaimer","installable","uninstallable","authorId","authorName","authorsLinks","link","platform","icon","sanitize","description","allowedTags","allowedAttributes","schemaLimitedAttributes","allowedSchemas","enforceAttributes","rel","html","retDoc","childNodes","node","sanitizeElement","sanitizedNode","protocolMatcher","nodeType","Node","ELEMENT_NODE","tagName","attributes","allowedAttrs","attr","protocolMatch","removeAttribute","enforce","attrName","createTextNode","subNode","linkablePlatforms","toFocus","author","currentName","dddg2Path","dddg1Path","repoUrl","fetchJSON","fetch","req","json","moveFocus","repoPacks","installedPacks","repoLookup","installedLookup","installedRet","repoPack","inLocalRepo","searchWords","notInstalledPacks","SearchBar","List","PackDisplay","packDialog","setSearch","SingleBox","aspectRatio","arrowMoveStepSize","blendOver","uiSize","last","updateArea","onKeydown","sw","sh","rh","rw","opth","optimum","optv","optimizeWithMenu","documentElement","cw","ch","v","ctrlKey","ToolBox","MessageConsole","Render","RepoDialog","spriteMutations","spriteActions","createSprite","choiceMutations","setChoices","setChoiceColor","setChoiceDistance","lastChoiceId","choiceActions","createChoice","removeChoise","setChoiceText","splitTextboxSpacing","textBoxMutations","setText","setTalkingDefault","setTalkingOther","setStyle","setControlsVisible","setControlsColor","setDeriveCustomColors","setNameboxColor","setNameboxStroke","setNameboxWidth","setSkipable","setContinueArrow","setCustomColor","setAutoQuoting","setResetBounds","resetBounds","lastTextBoxId","textBoxActions","createTextBox","resetTextboxBounds","newWidth","notificationMutations","setNotificationColor","setNotificationText","setNotificationBackdrop","lastNotificationId","notificationActions","createNotification","poemMutations","setPoemBackground","setPoemFont","setPoemText","lastPoemId","poemActions","createPoem","createConsole","lastCopyId","removeFromList","addToList","setOnTop","setPosition","setFlip","setOpacity","setSize","setRatio","removeObject","setPreserveRatio","setWidth","setHeight","copyObjects","sourceOrders","oldObject","deleteAllOfPanel","setVertical","setNsfw","setLqRendering","setSelection","setLastDownload","mergeContentPacks","mergeBackgrounds","mergeCharacters","mergeArrayUnique","mergeIdArrays","xObj","yObj","mergeBackground","mergeCharacter","mergeHeadCollections","xStyleGroup","yStyleGroup","xClasses","yClasses","mergeStyleClasses","xStyle","yStyle","mergePose","classKey","headGroupKey","headGroup","getId","merge","definedIds","yId","existingIdx","existing","baseDir","baseTypes","setContentPacks","setCurrentContent","convertContentPack","convertedPack","removeContentPacks","packIds","newContentPacks","replaceContentPack","action","packIdx","loadContentPacks","response","ok","statusText","paths","href","convertV1","getCharacters","getBackgrounds","types","replacementMap","use","setUnsafe","removePacks","oldState","oldMut","newMut","config","productionTip","$mount"],"mappings":"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","file":"js/app.d56a7067.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=6f5388b3&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=6f5388b3&scoped=true&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=8c67c7f6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=8c67c7f6&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=style&index=0&id=672f504f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=style&index=0&id=672f504f&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=style&index=0&id=63d76104&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=style&index=0&id=63d76104&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=136a06b9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=136a06b9&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=186d1345&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=186d1345&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=style&index=0&id=5498262c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=style&index=0&id=5498262c&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=style&index=0&id=1eca283e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=style&index=0&id=1eca283e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=7ab0c17c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=7ab0c17c&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=style&index=0&id=3bbdf591&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=style&index=0&id=3bbdf591&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=style&index=0&id=1a61a7b8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=style&index=0&id=1a61a7b8&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=3a443774&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=3a443774&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=style&index=0&id=7798ab74&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=style&index=0&id=7798ab74&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&id=1a9b5de0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&id=1a9b5de0&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=style&index=0&id=2a32b954&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=style&index=0&id=2a32b954&lang=css&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=43f9fabe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=43f9fabe&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=style&index=0&id=e26030e8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=style&index=0&id=e26030e8&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=a36692ee&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=a36692ee&scoped=true&lang=scss&\"","export default {\r\n\t/**\r\n\t *\r\n\t * @param {Vue} Vue\r\n\t * @param {{}} options\r\n\t */\r\n\tinstall(Vue, options = {}) {\r\n\t\tif (!Vue._installedPlugins.find(plugin => plugin.Store)) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'VuexUndoRedo plugin must be installed after the Vuex plugin.'\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (!options.resetStateMutation) options.resetStateMutation = 'emptyState';\r\n\t\tif (!options.mutations) options.mutations = {};\r\n\r\n\t\tconst history = new Vue({\r\n\t\t\tdata() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdone: [],\r\n\t\t\t\t\tundone: [],\r\n\t\t\t\t\tnewMutation: true,\r\n\t\t\t\t\tignoreMutations: options.ignoreMutations || [],\r\n\t\t\t\t\tcurrentTransaction: null,\r\n\t\t\t\t\ttransactionQueue: [],\r\n\t\t\t\t\tinitialized: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tcreated() {\r\n\t\t\t\twindow.historyStuff = this;\r\n\t\t\t},\r\n\r\n\t\t\tmethods: {\r\n\t\t\t\tinitialize(store) {\r\n\t\t\t\t\tif (!this.$store) this.$store = store;\r\n\t\t\t\t\tif (!this.$store) return;\r\n\t\t\t\t\tif (this.initialized) return;\r\n\t\t\t\t\tthis.initialized = true;\r\n\t\t\t\t\tthis.$store.subscribe(mutation => {\r\n\t\t\t\t\t\tconst exec = () => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tmutation.type === options.resetStateMutation ||\r\n\t\t\t\t\t\t\t\tgetMutationProperties(mutation.type).ignore(mutation)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.currentTransaction.push(mutation);\r\n\t\t\t\t\t\t\tif (this.newMutation) {\r\n\t\t\t\t\t\t\t\tthis.undone = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (this.currentTransaction) {\r\n\t\t\t\t\t\t\texec();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// If a mutation triggers outside of any transaction, it gets it's own transaction\r\n\t\t\t\t\t\t\tthis.transaction(() => {\r\n\t\t\t\t\t\t\t\texec();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tredo() {\r\n\t\t\t\t\tif (this.undone.length <= 0) return;\r\n\t\t\t\t\tlet commit = this.undone.pop();\r\n\t\t\t\t\tthis.newMutation = false;\r\n\t\t\t\t\treplayTransaction(this, commit);\r\n\t\t\t\t\tthis.newMutation = true;\r\n\t\t\t\t},\r\n\t\t\t\tasync undo() {\r\n\t\t\t\t\tif (this.done.length <= 0) return;\r\n\t\t\t\t\tthis.undone.push(this.done.pop());\r\n\t\t\t\t\tthis.newMutation = false;\r\n\t\t\t\t\tawait replayAll(this);\r\n\t\t\t\t\tthis.newMutation = true;\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * @param {transactionCallback} callback\r\n\t\t\t\t */\r\n\t\t\t\ttransaction(callback) {\r\n\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tconst exec = async () => {\r\n\t\t\t\t\t\t\tthis.currentTransaction = [];\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tawait callback();\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tconsole.log('Error during transaction!: ', e);\r\n\t\t\t\t\t\t\t\t// reject(e);\r\n\t\t\t\t\t\t\t\t//this.currentTransaction = [];\r\n\t\t\t\t\t\t\t\t// The transaction that just failed is not in the undo history yet.\r\n\t\t\t\t\t\t\t\t// So replaying that is equivalent to undoing the transaction.\r\n\t\t\t\t\t\t\t\t//replayAll(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst lastUndo = this.done[this.done.length - 1];\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis.currentTransaction.length === 1 &&\r\n\t\t\t\t\t\t\t\tlastUndo &&\r\n\t\t\t\t\t\t\t\tlastUndo.length === 1\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tconst options = getMutationProperties(\r\n\t\t\t\t\t\t\t\t\tthis.currentTransaction[0].type\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\toptions.combinable(lastUndo[0], this.currentTransaction[0])\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tconst combination = options.combinator(\r\n\t\t\t\t\t\t\t\t\t\tlastUndo[0],\r\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction[0]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tthis.done.pop();\r\n\t\t\t\t\t\t\t\t\tif (combination) {\r\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [combination];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// Returning a non-truthy value in the combinator simply eliminates both transactions.\r\n\t\t\t\t\t\t\t\t\t\t// So if the user manually undoes an action, you can just pretend it never happened.\r\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.currentTransaction.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.done.push(this.currentTransaction);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.currentTransaction = null;\r\n\t\t\t\t\t\t\tif (this.transactionQueue.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.transactionQueue.pop()();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (this.currentTransaction) {\r\n\t\t\t\t\t\t\tthis.transactionQueue.push(exec);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\texec();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tVue.mixin({\r\n\t\t\tcomputed: {\r\n\t\t\t\tvuexHistory() {\r\n\t\t\t\t\treturn history;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\tcreated() {\r\n\t\t\t\thistory.initialize(this.$store);\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * @param {Vue} vm\r\n\t\t * @param {*} mutation\r\n\t\t */\r\n\t\tasync function replayAll(vm) {\r\n\t\t\tconst oldTransactions = vm.done.slice(0);\r\n\t\t\tvm.done = [];\r\n\t\t\tvm.$store.commit(options.resetStateMutation);\r\n\t\t\tfor (let i = 0; i < oldTransactions.length; ++i) {\r\n\t\t\t\tawait replayTransaction(vm, oldTransactions[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tasync function replayTransaction(vm, transaction) {\r\n\t\t\treturn await vm.transaction(() => {\r\n\t\t\t\ttransaction.forEach(mutation => {\r\n\t\t\t\t\treplayMutation(vm, mutation);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @param {Vue} vm\r\n\t\t * @param {*} mutation\r\n\t\t */\r\n\t\tfunction replayMutation(vm, mutation) {\r\n\t\t\tswitch (typeof mutation.payload) {\r\n\t\t\t\tcase 'object':\r\n\t\t\t\t\tlet baseObj = {};\r\n\t\t\t\t\tif (mutation.payload instanceof Array) {\r\n\t\t\t\t\t\tbaseObj = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvm.$store.commit(\r\n\t\t\t\t\t\t`${mutation.type}`,\r\n\t\t\t\t\t\tObject.assign(baseObj, mutation.payload)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvm.$store.commit(`${mutation.type}`, mutation.payload);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst mutationProperiesCache = {};\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {IHistoryOptions} options\r\n\t\t * @param {*} name\r\n\t\t */\r\n\t\tfunction getMutationProperties(name) {\r\n\t\t\tif (!mutationProperiesCache[name]) {\r\n\t\t\t\tconst parts = name.split('/');\r\n\t\t\t\tconst mutationProperties = {\r\n\t\t\t\t\tignore: mutation => false,\r\n\t\t\t\t\tcombinable: (oldMutation, newMutation) => false,\r\n\t\t\t\t\tcombinator: (oldMutation, newMutation) => newMutation,\r\n\t\t\t\t};\r\n\t\t\t\tlet currentWildcard = '';\r\n\t\t\t\tfor (const part of parts) {\r\n\t\t\t\t\tif (options.mutations[currentWildcard + '*']) {\r\n\t\t\t\t\t\tObject.assign(\r\n\t\t\t\t\t\t\tmutationProperties,\r\n\t\t\t\t\t\t\toptions.mutations[currentWildcard + '*']\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentWildcard += part + '/';\r\n\t\t\t\t}\r\n\t\t\t\tif (options.mutations[name]) {\r\n\t\t\t\t\tObject.assign(mutationProperties, options.mutations[name]);\r\n\t\t\t\t}\r\n\t\t\t\tmutationProperiesCache[name] = mutationProperties;\r\n\t\t\t}\r\n\t\t\treturn mutationProperiesCache[name];\r\n\t\t}\r\n\t},\r\n};\r\n\r\n/**\r\n * @callback transactionCallback\r\n * @async\r\n */\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"container\"}},[_c('render',{ref:\"render\",attrs:{\"canvasWidth\":_vm.canvasWidth,\"canvasHeight\":_vm.canvasHeight}})],1),_c('message-console'),_c('tool-box',{on:{\"show-prev-render\":_vm.drawLastDownload,\"download\":function($event){return _vm.$refs.render.download()},\"show-dialog\":_vm.showDialog}}),_c('keep-alive',[(_vm.dialogVisable)?_c('repo-dialog',{ref:\"dialog\",on:{\"leave\":function($event){_vm.dialogVisable = false}}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"panels\"}},[_c('div',{attrs:{\"id\":\"toolbar\"}},[_c('button',{class:{ active: _vm.panel === 'add' },attrs:{\"title\":\"Add new objects to the scene\"},on:{\"click\":function($event){return _vm.setPanel('add')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add_box\")])]),_c('button',{class:{ active: _vm.panel === 'backgrounds' },attrs:{\"title\":\"Change the current background\"},on:{\"click\":function($event){return _vm.setPanel('backgrounds')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"panorama\")])]),_c('button',{class:{ active: _vm.panel === 'panels' },attrs:{\"title\":\"Panels\"},on:{\"click\":function($event){return _vm.setPanel('panels')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"view_module\")])]),_c('button',{class:{ active: _vm.panel === 'settings' },attrs:{\"title\":\"Settings\"},on:{\"click\":function($event){return _vm.setPanel('settings')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"settings_applications\")])])]),(_vm.panel === 'settings')?_c('settings-panel'):(_vm.panel === 'packs')?_c('content-packs-panel'):(_vm.panel === 'backgrounds')?_c('backgrounds-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}):(_vm.panel === 'help_credits')?_c('credits-panel'):(_vm.panel === 'character')?_c('character-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}):(_vm.panel === 'sprite')?_c('sprite-panel'):(_vm.panel === 'textBox')?_c('text-box-panel'):(_vm.panel === 'choice')?_c('choice-panel'):(_vm.panel === 'panels')?_c('panels-panel'):(_vm.panel === 'notification')?_c('notification-panel'):(_vm.panel === 'poem')?_c('poem-panel'):_c('add-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}),_c('div',{attrs:{\"id\":\"toolbar-end\"}},[_c('button',{class:{ active: _vm.panel === 'help_credits' },attrs:{\"title\":\"Help & Credits\"},on:{\"click\":function($event){return _vm.setPanel('help_credits')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"help\")])]),_c('button',{class:{ active: _vm.panel === 'packs' },attrs:{\"title\":\"Content packs\"},on:{\"click\":function($event){return _vm.$emit('show-dialog')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")])]),_c('button',{attrs:{\"title\":\"Show last downloaded panel\",\"disabled\":!_vm.hasPrevRender},on:{\"click\":function($event){return _vm.$emit('show-prev-render')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"flip_to_back\")])]),_c('button',{attrs:{\"title\":\"Take a screenshot of the current scene\"},on:{\"click\":function($event){return _vm.$emit('download')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"photo_camera\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Settings\")]),_c('toggle',{attrs:{\"label\":\"Low quality preview?\",\"title\":\"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.\"},model:{value:(_vm.lqRendering),callback:function ($$v) {_vm.lqRendering=$$v},expression:\"lqRendering\"}}),_c('toggle',{attrs:{\"label\":\"NSFW Mode?\"},model:{value:(_vm.nsfw),callback:function ($$v) {_vm.nsfw=$$v},expression:\"nsfw\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"checkbox\",attrs:{\"id\":_vm._uid,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.value},on:{\"change\":_vm.onChange}}),_c('label',{staticClass:\"switch\",attrs:{\"for\":_vm._uid}}),_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class Toggle extends Vue {\r\n\t@Prop({ type: String }) private label!: string | undefined;\r\n\t@Prop({ type: Boolean, default: false }) private value!: boolean;\r\n\r\n\tprivate onChange(event: Event) {\r\n\t\tthis.$emit('input', !!(this.$refs.checkbox as HTMLInputElement).checked);\r\n\t}\r\n\r\n\tprivate get checkbox(): HTMLInputElement {\r\n\t\treturn this.$refs.checkbox as HTMLInputElement;\r\n\t}\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toggle.vue?vue&type=template&id=7bd0fd86&scoped=true&\"\nimport script from \"./toggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./toggle.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bd0fd86\",\n  null\n  \n)\n\nexport default component.exports","import { Component, Vue, Watch } from 'vue-property-decorator';\r\nimport { State } from 'vuex-class-decorator';\r\n\r\nconst firefoxDeltaFactor = 25;\r\n\r\n@Component({})\r\nexport class PanelMixin extends Vue {\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\tpublic mounted() {\r\n\t\tthis.updateVertical();\r\n\t\tthis.$el.addEventListener(\r\n\t\t\t'wheel',\r\n\t\t\te => {\r\n\t\t\t\tif (e.type !== 'wheel') return;\r\n\t\t\t\tif (!e.currentTarget) return;\r\n\t\t\t\tconst target = e.currentTarget as HTMLElement;\r\n\t\t\t\tif (target.classList.contains('vertical')) return;\r\n\r\n\t\t\t\tconst ev = e as WheelEvent;\r\n\t\t\t\tif (ev.deltaY === 0) return;\r\n\t\t\t\tif ((ev as any).mozInputSource) {\r\n\t\t\t\t\t// Firefox sends wierdly low delta values :/\r\n\t\t\t\t\ttarget.scrollLeft += ev.deltaY * firefoxDeltaFactor;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget.scrollLeft += ev.deltaY;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{ passive: true }\r\n\t\t);\r\n\t}\r\n\r\n\t@Watch('vertical')\r\n\tprivate updateVertical() {\r\n\t\tif (!this.$el) return;\r\n\t\tif (this.vertical) {\r\n\t\t\tthis.$el.classList.add('vertical');\r\n\t\t} else {\r\n\t\t\tthis.$el.classList.remove('vertical');\r\n\t\t}\r\n\t}\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch, Mixins } from 'vue-property-decorator';\nimport { TextBox } from '@/renderables/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { PanelMixin } from './panelMixin';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IRemovePacksAction, IRootState } from '@/store';\nimport { Store } from 'vuex';\n\nconst nsfwPacks = {\n\t'dddg.buildin.backgrounds.nsfw': `${process.env.BASE_URL}packs/buildin.base.backgrounds.nsfw.json`,\n\t'dddg.buildin.sayori.nsfw': `${process.env.BASE_URL}packs/buildin.base.sayori.nsfw.json`,\n\t'dddg.buildin.base.natsuki.nsfw': `${process.env.BASE_URL}packs/buildin.base.natsuki.nsfw.json`,\n\t'dddg.buildin.yuri.nsfw': `${process.env.BASE_URL}packs/buildin.base.yuri.nsfw.json`,\n};\n\nconst names = new Set(Object.keys(nsfwPacks));\nconst paths = Object.values(nsfwPacks);\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class SettingsPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get lqRendering(): boolean {\n\t\treturn this.$store.state.ui.lqRendering;\n\t}\n\tprivate set lqRendering(lqRendering: boolean) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.commit('ui/setLqRendering', lqRendering);\n\t\t});\n\t}\n\n\tprivate get nsfw(): boolean {\n\t\treturn !!this.$store.state.content.contentPacks\n\t\t\t.map(pack => pack.packId)\n\t\t\t.filter(packId => !!packId)\n\t\t\t.find(packId => names.has(packId!));\n\t}\n\n\tprivate set nsfw(value: boolean) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tif (value) {\n\t\t\t\tawait this.$store.dispatch('content/loadContentPacks', paths);\n\t\t\t} else {\n\t\t\t\tawait this.$store.dispatch('removePacks', {\n\t\t\t\t\tpacks: names,\n\t\t\t\t} as IRemovePacksAction);\n\t\t\t}\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=43f9fabe&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=ts&\"\nexport * from \"./settings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=43f9fabe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43f9fabe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isWebPSupported !== undefined)?_c('div',{staticClass:\"panel\",on:{\"dragenter\":_vm.showDropTarget,\"mouseleave\":_vm.hideDropTarget}},[_c('drop-target',{ref:\"spriteDt\",staticClass:\"drop-target\",on:{\"drop\":_vm.addCustomSpriteFile}},[_vm._v(\"Drop here to add as a new sprite\")]),_c('h1',[_vm._v(\"Add\")]),_c('div',{class:{ 'group-selector': true, vertical: _vm.vertical }},[_c('button',{class:{ active: _vm.group === 'characters' },on:{\"click\":function($event){_vm.group = 'characters'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"emoji_people\")]),_vm._v(\" Characters \")]),_c('button',{class:{ active: _vm.group === 'sprites' },on:{\"click\":function($event){_vm.group = 'sprites'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"change_history\")]),_vm._v(\" Sprites \")]),_c('button',{class:{ active: _vm.group === 'ui' },on:{\"click\":function($event){_vm.group = 'ui'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"view_quilt\")]),_vm._v(\" UI \")])]),_c('div',{class:{ 'item-grid': true, vertical: _vm.vertical }},[(_vm.group === 'characters')?[_vm._l((_vm.characters),function(character){return _c('div',{key:character.id,staticClass:\"character\",attrs:{\"title\":character.label},on:{\"click\":function($event){_vm.onChosen(character.id.toLowerCase())}}},[_c('img',{attrs:{\"src\":_vm.assetPath(character),\"alt\":character.label}})])}),_c('div',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Characters')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])]:_vm._e(),(_vm.group === 'sprites')?[_vm._l((_vm.sprites),function(sprite){return _c('div',{key:sprite.label,staticClass:\"sprite\",style:({ background: _vm.assetSpriteBackground(sprite) }),attrs:{\"title\":sprite.label},on:{\"click\":function($event){return _vm.addSpriteToScene(sprite)}}},[_vm._v(\" \"+_vm._s(sprite.label)+\" \")])}),_c('button',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$refs.spriteUpload.click()}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"publish\")]),_vm._v(\" Upload new sprite \"),_c('input',{ref:\"spriteUpload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onSpriteFileUpload}})]),_c('button',{on:{\"click\":_vm.uploadFromURL}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"insert_link\")]),_vm._v(\" New sprite from URL \")]),_c('button',{on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Sprites')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])]:_vm._e(),(_vm.group === 'ui')?[_c('button',{on:{\"click\":_vm.addTextBox}},[_vm._v(\"Textbox\")]),_c('button',{on:{\"click\":_vm.addPoem}},[_vm._v(\"Poem\")]),_c('button',{on:{\"click\":_vm.addDialog}},[_vm._v(\"Notification\")]),_c('button',{on:{\"click\":_vm.addChoice}},[_vm._v(\"Choice\")]),_c('button',{on:{\"click\":_vm.addConsole}},[_vm._v(\"Console\")])]:_vm._e()],2)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport { ICommand } from './command';\nimport { DeepReadonly } from '@/util/readonly';\n\nconst eventBus = new Vue();\n\nexport default {\n\tfireCommand(command: ICommand) {\n\t\teventBus.$emit('command', command);\n\t},\n\tsubscribeCommand(handler: (ev: ICommand) => void): void {\n\t\teventBus.$on('command', handler);\n\t},\n\n\tfire(event: IEvent) {\n\t\teventBus.$emit(event.kind, event);\n\t},\n\n\tsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$on(eventType.kind, handler);\n\t},\n\n\tunsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$off(eventType.kind, handler);\n\t},\n};\n\ninterface IEvent {\n\tkind: string;\n}\n\ninterface IEventClass<T> {\n\tkind: string;\n\tnew (...args: any[]): T;\n}\n\n// tslint:disable: max-classes-per-file\n\nexport class AssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'AssetFailureEvent';\n\tpublic readonly kind = 'AssetFailureEvent';\n\tpublic constructor(public path: string) {}\n}\n\nexport class CustomAssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'CustomAssetFailureEvent';\n\tpublic readonly kind = 'CustomAssetFailureEvent';\n\tpublic constructor(public error: ErrorEvent) {}\n}\n\nexport class InvalidateRenderEvent implements IEvent {\n\tpublic static readonly kind = 'InvalidateRenderEvent';\n\tpublic readonly kind = 'InvalidateRenderEvent';\n}\n\nexport class ShowMessageEvent implements IEvent {\n\tpublic static readonly kind = 'ShowMessageEvent';\n\tpublic readonly kind = 'ShowMessageEvent';\n\tpublic constructor(public message: string) {}\n}\n\nexport class VueErrorEvent implements IEvent {\n\tpublic static readonly kind = 'VueErrorEvent';\n\tpublic readonly kind = 'VueErrorEvent';\n\tpublic constructor(\n\t\tpublic readonly error: DeepReadonly<Error>,\n\t\tpublic readonly info: string\n\t) {}\n}\n","export class ErrorAsset {}\n","import EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n} from './eventbus/event-bus';\nimport { ErrorAsset } from './models/error-asset';\nimport { IAsset } from './store/content';\n\nlet webpSupportPromise: Promise<boolean>;\n\nexport function isWebPSupported(): Promise<boolean> {\n\tif (!webpSupportPromise) {\n\t\twebpSupportPromise = new Promise((resolve, reject) => {\n\t\t\tconst losslessCode =\n\t\t\t\t'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img.width === 2 && img.height === 1);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tresolve(false);\n\t\t\t});\n\t\t\timg.src = losslessCode;\n\t\t});\n\t}\n\treturn webpSupportPromise;\n}\n\nconst assetCache: {\n\t[url: string]: Promise<HTMLImageElement | ErrorAsset> | undefined;\n} = {};\nconst customAssets: { [id: string]: Promise<HTMLImageElement> } = {};\n\nexport async function getAAsset(\n\tasset: IAsset,\n\thq: boolean = true\n): Promise<HTMLImageElement | ErrorAsset> {\n\treturn getAssetByUrl(hq ? asset.hq : asset.lq);\n}\nexport async function getAssetByUrl(\n\turl: string\n): Promise<HTMLImageElement | ErrorAsset> {\n\tif (!assetCache[url]) {\n\t\tassetCache[url] = new Promise((resolve, reject) => {\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tEventBus.fire(new AssetFailureEvent(url));\n\t\t\t\tassetCache[url] = undefined;\n\t\t\t\tresolve(new ErrorAsset());\n\t\t\t});\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.src = url;\n\t\t\timg.style.display = 'none';\n\t\t\tdocument.body.appendChild(img);\n\t\t});\n\t}\n\n\treturn assetCache[url]!;\n}\nexport const baseUrl = process.env.BASE_URL === '' ? '.' : process.env.BASE_URL;\n\nexport async function getAsset(\n\tasset: string,\n\thq: boolean = true\n): Promise<HTMLImageElement | ErrorAsset> {\n\tif (customAssets[asset]) {\n\t\treturn customAssets[asset];\n\t}\n\n\tconst url = `${baseUrl}/assets/${asset}${hq ? '' : '.lq'}${\n\t\t(await isWebPSupported()) ? '.webp' : '.png'\n\t}`.replace(/\\/+/, '/');\n\treturn getAssetByUrl(url);\n}\n\nexport function registerAsset(asset: string, file: File): string {\n\tconst url = URL.createObjectURL(file);\n\tcustomAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t});\n\treturn url;\n}\n\nexport function registerAssetWithURL(\n\tasset: string,\n\turl: string\n): Promise<HTMLImageElement> {\n\treturn (customAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t}));\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{class:{ vertical: _vm.vertical },on:{\"dragleave\":function($event){_vm.visible = false},\"drop\":_vm.drop}},[_vm._t(\"default\")],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Mixins, Vue, Prop } from 'vue-property-decorator';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { State } from 'vuex-class-decorator';\r\n\r\n@Component({})\r\nexport default class Drop extends Vue {\r\n\tpublic $store!: Store<IRootState>;\r\n\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\tprivate visible = false;\r\n\r\n\tpublic show(): void {\r\n\t\tthis.visible = true;\r\n\t}\r\n\r\n\tpublic hide(): void {\r\n\t\tthis.visible = false;\r\n\t}\r\n\r\n\tprivate drop(e: DragEvent): void {\r\n\t\tthis.hide();\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tif (!e.dataTransfer) return;\r\n\r\n\t\tfor (const item of e.dataTransfer.items) {\r\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\r\n\t\t\t\tthis.$emit('drop', item.getAsFile());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./drop-target.vue?vue&type=template&id=2a32b954&scoped=true&\"\nimport script from \"./drop-target.vue?vue&type=script&lang=ts&\"\nexport * from \"./drop-target.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./drop-target.vue?vue&type=style&index=0&id=2a32b954&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a32b954\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tregisterAsset,\n\tregisterAssetWithURL,\n} from '@/asset-manager';\nimport { ICreateCharacterAction } from '@/store/objectTypes/characters';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\nimport {\n\tCharacter,\n\tContentPack,\n\tSprite,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { PanelMixin } from './panelMixin';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport DropTarget from '../drop-target.vue';\nimport { ICreateSpriteAction } from '@/store/objectTypes/sprite';\nimport { ICreateChoicesAction } from '../../../store/objectTypes/choices';\nimport { ICreateNotificationAction } from '../../../store/objectTypes/notification';\nimport { ICreatePoemAction } from '../../../store/objectTypes/poem';\n\nconst uploadedSpritesPack: ContentPack<string> = {\n\tpackId: 'dddg.buildin.uploadedSprites',\n\tpackCredits: [''],\n\tdependencies: [],\n\tcharacters: [],\n\tfonts: [],\n\tsprites: [],\n\tpoemStyles: [],\n\tpoemBackgrounds: [],\n\tbackgrounds: [],\n\tcolors: [],\n};\n\n@Component({\n\tcomponents: { DropTarget },\n})\nexport default class AddPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate customAssetCount = 0;\n\tprivate group: 'characters' | 'sprites' | 'ui' = 'characters';\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get characters(): Array<Character<IAsset>> {\n\t\treturn this.$store.state.content.current.characters;\n\t}\n\n\tprivate get sprites(): Array<Sprite<IAsset>> {\n\t\treturn this.$store.state.content.current.sprites;\n\t}\n\n\tprivate assetSpriteBackground(sprite: Sprite<IAsset>) {\n\t\treturn sprite.variants[0].map(variant => `url('${variant.lq}')`).join(',');\n\t}\n\n\tprivate assetPath(character: Character<IAsset>) {\n\t\treturn character.chibi ? character.chibi.lq : '';\n\t}\n\n\tprivate showDropTarget(e: DragEvent) {\n\t\tif (!e.dataTransfer) return;\n\t\te.dataTransfer.effectAllowed = 'none';\n\t\tif (\n\t\t\t!Array.from(e.dataTransfer.items).find(item =>\n\t\t\t\titem.type.match(/^image.*$/)\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\te.dataTransfer.effectAllowed = 'link';\n\t\tif (this.group === 'sprites') {\n\t\t\t(this.$refs.spriteDt as DropTarget).show();\n\t\t}\n\t}\n\n\tprivate hideDropTarget() {\n\t\tif (this.group === 'sprites') {\n\t\t\t(this.$refs.spriteDt as DropTarget).hide();\n\t\t}\n\t}\n\n\tprivate onSpriteFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.spriteUpload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\tthis.addCustomSpriteFile(file);\n\t\t}\n\t}\n\n\tprivate async uploadFromURL() {\n\t\tconst url = prompt('Enter the URL of the image');\n\t\tif (!url) return;\n\t\tconst lastSegment = url.split('/').slice(-1)[0];\n\t\tthis.addNewCustomSprite(lastSegment, url);\n\t}\n\n\tprivate async addSpriteToScene(sprite: Sprite<IAsset>) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.dispatch('objects/createSprite', {\n\t\t\t\tassets: sprite.variants[0],\n\t\t\t} as ICreateSpriteAction);\n\t\t});\n\t}\n\n\tprivate addTextBox() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createTextBox', {} as ICreateTextBoxAction);\n\t\t});\n\t}\n\n\tprivate addChoice() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createChoice', {} as ICreateChoicesAction);\n\t\t});\n\t}\n\n\tprivate addDialog() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'objects/createNotification',\n\t\t\t\t{} as ICreateNotificationAction\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate addPoem() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createPoem', {} as ICreatePoemAction);\n\t\t});\n\t}\n\n\tprivate addConsole() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createConsole', {} as ICreatePoemAction);\n\t\t});\n\t}\n\n\tprivate onChosen(id: string) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createCharacters', {\n\t\t\t\tcharacterType: id,\n\t\t\t} as ICreateCharacterAction);\n\t\t});\n\t}\n\n\tprivate addCustomSpriteFile(file: File) {\n\t\tconst url = URL.createObjectURL(file);\n\t\tthis.addNewCustomSprite(file.name, url);\n\t}\n\n\tprivate addNewCustomSprite(label: string, url: string) {\n\t\tuploadedSpritesPack.sprites.push({\n\t\t\tid: url,\n\t\t\tlabel,\n\t\t\tvariants: [[url]],\n\t\t});\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\n\t\t\t\tcontentPack: uploadedSpritesPack,\n\t\t\t\tprocessed: false,\n\t\t\t} as ReplaceContentPackAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=8c67c7f6&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=ts&\"\nexport * from \"./add.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=8c67c7f6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c67c7f6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(_vm._s(_vm.label))]),(_vm.panelForParts)?_c('parts',{attrs:{\"character\":_vm.character,\"part\":_vm.panelForParts},on:{\"leave\":function($event){_vm.panelForParts = null},\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}):[(_vm.hasMultiplePoses || _vm.parts.length > 0)?_c('fieldset',[_c('legend',[_vm._v(\"Pose:\")]),_c('table',[_c('tbody',[(_vm.hasMultipleStyles)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekStyle(-1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = 'style'}}},[_vm._v(\" Style \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekStyle(1)}}},[_vm._v(\">\")])])]):_vm._e(),(_vm.hasMultiplePoses)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPose(-1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = 'pose'}}},[_vm._v(\" Pose \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPose(1)}}},[_vm._v(\">\")])])]):_vm._e(),_vm._l((_vm.parts),function(part){return _c('tr',{key:part},[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, -1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = part}}},[_vm._v(\" \"+_vm._s(_vm.captialize(part))+\" \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, 1)}}},[_vm._v(\">\")])])])})],2)])]):_vm._e(),_c('position-and-size',{attrs:{\"obj\":_vm.character}}),_c('layers',{attrs:{\"obj\":_vm.character}}),_c('opacity',{attrs:{\"obj\":_vm.character}}),_c('toggle',{attrs:{\"label\":\"Close up?\"},model:{value:(_vm.closeUp),callback:function ($$v) {_vm.closeUp=$$v},expression:\"closeUp\"}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.character}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// tslint:disable: no-magic-numbers\r\nexport const screenWidth = 1280;\r\nexport const screenHeight = 720;\r\n\r\nexport const positions = [\r\n\t'4-1',\r\n\t'3-1',\r\n\t'2-1',\r\n\t'4-2',\r\n\t'center',\r\n\t'4-3',\r\n\t'2-2',\r\n\t'3-3',\r\n\t'4-4',\r\n];\r\n\r\nexport const characterPositions = [\r\n\t200,\r\n\t240,\r\n\t400,\r\n\t493,\r\n\t640,\r\n\t786,\r\n\t880,\r\n\t1040,\r\n\t1080,\r\n];\r\n","import { DeepReadonly } from '@/util/readonly';\n\nexport function arraySeeker(\n\tarray: DeepReadonly<any[]>,\n\tpos: number,\n\tdelta: number\n) {\n\tlet val = pos + delta;\n\tconst length = array.length;\n\n\tif (val < 0) {\n\t\tval += length;\n\t}\n\tif (val >= length) {\n\t\tval -= length;\n\t}\n\treturn val;\n}\n\nexport function nsfwArraySeeker(\n\tarray: Array<{ nsfw?: boolean }>,\n\tpos: number,\n\tdelta: number,\n\tnsfw: boolean\n) {\n\tlet val = pos;\n\tconst length = array.length;\n\tdo {\n\t\tval += delta;\n\t\tif (val < 0) {\n\t\t\tval += length;\n\t\t}\n\t\tif (val >= length) {\n\t\t\tval -= length;\n\t\t}\n\t} while (array[val].nsfw && !nsfw);\n\treturn val;\n}\n","import { ICommand } from '@/eventbus/command';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n} from '@/store/objects';\nimport { MutationTree, ActionTree, Store, Commit, ActionContext } from 'vuex';\nimport { characterPositions } from '@/constants/base';\nimport { arraySeeker } from '@/models/seekers';\nimport { IHistoryOptions } from '@/plugins/vuex-history';\nimport {\n\tCharacter,\n\tPose,\n\tHeadCollection,\n\tContentPack,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '../content';\nimport { IRootState } from '..';\nimport { DeepReadonly } from '@/util/readonly';\n\nexport interface ICharacter extends IObject {\n\ttype: 'character';\n\tcharacterType: string;\n\tfreeMove: boolean;\n\tclose: boolean;\n\tstyleGroupId: number;\n\tstyleId: number;\n\tposeId: number;\n\tposePositions: {\n\t\t[id: string]: number;\n\t};\n}\n\nexport const CloseUpYOffset = -74;\nexport const BaseCharacterYPos = -26;\n\nexport const characterMutations: MutationTree<IObjectsState> = {\n\tsetPose(state, command: ISetPoseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.poseId = command.poseId;\n\t\t++obj.version;\n\t},\n\tsetCharStyleGroup(state, { id, styleGroupId }: ISetCharStyleGroupMutation) {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tobj.styleGroupId = styleGroupId;\n\t\t++obj.version;\n\t},\n\tsetCharStyle(state, { id, styleId }: ISetCharStyleMutation) {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tobj.styleId = styleId;\n\t\t++obj.version;\n\t},\n\tsetPosePosition(state, command: ISetPosePositionMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.posePositions = {\n\t\t\t...obj.posePositions,\n\t\t\t...command.posePositions,\n\t\t};\n\t\t++obj.version;\n\t},\n\tsetClose(state, command: ISetCloseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.close = command.close;\n\t\t++obj.version;\n\t},\n\tsetFreeMove(state, command: ISetFreeMoveMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.freeMove = command.freeMove;\n\t\tif (!obj.freeMove) {\n\t\t\tobj.x = characterPositions[closestCharacterSlot(obj.x)];\n\t\t\tobj.y = BaseCharacterYPos;\n\t\t}\n\t},\n};\n\nexport function getData(\n\tstore: Store<DeepReadonly<IRootState>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<Character<IAsset>> {\n\tconst characters = store.getters['content/getCharacters'] as Map<\n\t\tCharacter<IAsset>['id'],\n\t\tCharacter<IAsset>\n\t>;\n\treturn characters.get(state.characterType)!;\n}\n\nexport function getDataG(\n\trootGetters: any,\n\tstate: Readonly<ICharacter>\n): Readonly<Character<IAsset>> {\n\tconst characters = rootGetters['content/getCharacters'] as Map<\n\t\tCharacter<IAsset>['id'],\n\t\tCharacter<IAsset>\n\t>;\n\treturn characters.get(state.characterType)!;\n}\n\nexport function getPose(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<Pose<IAsset>> {\n\treturn data.styleGroups[state.styleGroupId].styles[state.styleId].poses[\n\t\tstate.poseId\n\t];\n}\n\nexport function getParts(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<string[]> {\n\tconst pose = getPose(data, state);\n\tconst positionKeys = [\n\t\t...Object.keys(pose.positions).filter(\n\t\t\tpositionKey => pose.positions[positionKey].length > 1\n\t\t),\n\t];\n\tif (pose.compatibleHeads.length > 0) positionKeys.unshift('head');\n\treturn positionKeys;\n}\n\nexport function getHeads(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>,\n\theadTypeId: number = state.posePositions.headType || 0\n): DeepReadonly<HeadCollection<IAsset>> | null {\n\tconst compatibleHeads = getPose(data, state).compatibleHeads;\n\tif (!compatibleHeads || compatibleHeads.length === 0) {\n\t\treturn null;\n\t}\n\tconst heads = data.heads[compatibleHeads[headTypeId]];\n\treturn heads;\n}\n\nexport function closestCharacterSlot(pos: number): number {\n\tconst sorted = characterPositions\n\t\t.map((x, idx) => ({ pos: Math.abs(pos - x), idx }))\n\t\t.sort((a, b) => a.pos - b.pos);\n\treturn sorted[0].idx;\n}\n\nlet lastSpriteId = 0;\n\nexport const characterActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateCharacters({ rootState, commit }, command: ICreateCharacterAction) {\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tflip: false,\n\t\t\t\tid: 'characters_' + ++lastSpriteId,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'character',\n\t\t\t\tx: 640,\n\t\t\t\ty: BaseCharacterYPos,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: 1,\n\t\t\t\theight: 768,\n\t\t\t\twidth: 768,\n\t\t\t\tcharacterType: command.characterType,\n\t\t\t\tclose: false,\n\t\t\t\tfreeMove: false,\n\t\t\t\tversion: 0,\n\t\t\t\tposeId: 0,\n\t\t\t\tstyleId: 0,\n\t\t\t\tstyleGroupId: 0,\n\t\t\t\tposePositions: {},\n\t\t\t} as ICharacter,\n\t\t} as ICreateObjectMutation);\n\t},\n\n\tseekPart(\n\t\t{ state, commit, dispatch, rootGetters },\n\t\t{ delta, id, part }: ISeekPosePartAction\n\t) {\n\t\tif (part === 'head') {\n\t\t\tdispatch('seekHead', { id, delta } as ISeekHeadAction);\n\t\t\treturn;\n\t\t}\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst pose = getPose(getDataG(rootGetters, obj), obj);\n\t\tif (!pose.positions[part]) return;\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\t[part]: arraySeeker(\n\t\t\t\t\tpose.positions[part],\n\t\t\t\t\tobj.posePositions[part] || 0,\n\t\t\t\t\tdelta\n\t\t\t\t),\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tseekPose({ state, commit, rootGetters }, { id, delta }: ISeekPoseAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst poses = data.styleGroups[obj.styleGroupId].styles[obj.styleId].poses;\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tchange.poseId = arraySeeker(poses, change.poseId, delta);\n\t\t});\n\t},\n\n\tseekStyle({ state, commit, rootGetters }, { id, delta }: ISeekStyleAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst linearStyles = data.styleGroups\n\t\t\t.flatMap((styleGroup, styleGroupIdx) => {\n\t\t\t\treturn styleGroup.styles.map((style, styleIdx) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstyleGroupIdx,\n\t\t\t\t\t\tstyleIdx,\n\t\t\t\t\t\tstyleGroupJson: JSON.stringify(style.components),\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t})\n\t\t\t.sort((styleA, styleB) =>\n\t\t\t\tstyleA.styleGroupJson.localeCompare(styleB.styleGroupJson)\n\t\t\t);\n\t\tconst linearIdx = linearStyles.findIndex(\n\t\t\tstyle =>\n\t\t\t\tstyle.styleGroupIdx === obj.styleGroupId &&\n\t\t\t\tstyle.styleIdx === obj.styleId\n\t\t);\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tconst nextIdx = arraySeeker(linearStyles, linearIdx, delta);\n\t\t\tconst style = linearStyles[nextIdx];\n\t\t\tchange.styleGroupId = style.styleGroupIdx;\n\t\t\tchange.styleId = style.styleIdx;\n\t\t});\n\t},\n\n\tseekHead({ state, commit, rootGetters }, { id, delta }: ISeekHeadAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst pose = getPose(data, obj);\n\t\tlet currentHeads = getHeads(data, obj);\n\t\tif (!currentHeads) return;\n\t\tlet head = (obj.posePositions.head || 0) + delta;\n\t\tlet headType = obj.posePositions.headType || 0;\n\t\tif (head < 0 || head >= currentHeads.variants.length) {\n\t\t\theadType = arraySeeker(\n\t\t\t\tpose.compatibleHeads.map(headKey => data.heads[headKey]),\n\t\t\t\theadType,\n\t\t\t\tdelta\n\t\t\t);\n\t\t\tcurrentHeads = getHeads(data, obj, headType)!;\n\t\t\thead = delta === 1 ? 0 : currentHeads.variants.length - 1;\n\t\t}\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\thead,\n\t\t\t\theadType,\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tsetPart(\n\t\t{ state, commit, rootGetters },\n\t\t{ id, part, val }: ISetPartAction\n\t): void {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tif (part === 'pose') {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.poseId = val;\n\t\t\t});\n\t\t} else if (part === 'style') {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.styleId = val;\n\t\t\t});\n\t\t} else {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.posePositions[part] = val;\n\t\t\t});\n\t\t}\n\t},\n\n\tsetCharStyle(\n\t\t{ state, commit, rootGetters },\n\t\t{ id, styleGroupId, styleId }: ISetStyleAction\n\t) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tchange.styleGroupId = styleGroupId;\n\t\t\tchange.styleId = styleId;\n\t\t});\n\t},\n\n\tsetCharacterPosition(\n\t\t{ state, commit },\n\t\t{ id, x, y }: ISetPositionAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tif (obj.freeMove) {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t} else {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx: characterPositions[closestCharacterSlot(x)],\n\t\t\t\ty: BaseCharacterYPos + (obj.close ? CloseUpYOffset : 0),\n\t\t\t} as ISetObjectPositionMutation);\n\t\t}\n\t},\n\n\tshiftCharacterSlot(\n\t\t{ state, commit },\n\t\t{ id, delta }: IShiftCharacterSlotAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tconst currentSlotNr = closestCharacterSlot(obj.x);\n\t\tlet newSlotNr = currentSlotNr + delta;\n\t\tif (newSlotNr < 0) {\n\t\t\tnewSlotNr = 0;\n\t\t}\n\t\tif (newSlotNr >= characterPositions.length) {\n\t\t\tnewSlotNr = characterPositions.length - 1;\n\t\t}\n\t\tcommit('setPosition', {\n\t\t\tid,\n\t\t\tx: characterPositions[newSlotNr],\n\t\t\ty: obj.y,\n\t\t} as ISetObjectPositionMutation);\n\t},\n};\n\nexport async function fixContentPackRemovalFromCharacter(\n\tcontext: ActionContext<IObjectsState, IRootState>,\n\tid: string,\n\toldPack: ContentPack<IAsset>\n) {\n\tconst obj = context.state.objects[id] as ICharacter;\n\tconst oldCharData = oldPack.characters.find(\n\t\tchar => char.id === obj.characterType\n\t);\n\tif (!oldCharData) {\n\t\tconsole.error('Character data is missing. Dropping the character.');\n\t\tcontext.dispatch('removeObject', {\n\t\t\tid,\n\t\t} as IRemoveObjectAction);\n\t\treturn;\n\t}\n\tconst poseAndPositionChange = buildPoseAndPositionData(obj);\n\tconst oldStyleGroup = oldCharData.styleGroups[obj.styleGroupId];\n\tconst oldStyle = oldStyleGroup.styles[poseAndPositionChange.styleId];\n\tconst oldPose = oldStyle.poses[poseAndPositionChange.poseId];\n\n\tconst newCharData = context.rootState.content.current.characters.find(\n\t\tchr => chr.id === oldCharData.id\n\t);\n\tif (!newCharData) {\n\t\tconsole.error('Character data is missing. Dropping the character.');\n\t\tcontext.dispatch('removeObject', {\n\t\t\tid,\n\t\t} as IRemoveObjectAction);\n\t\treturn;\n\t}\n\tconst newStyleGroupIdx = newCharData.styleGroups.findIndex(\n\t\tstyleGroup => styleGroup.id === oldStyleGroup.id\n\t);\n\tposeAndPositionChange.styleGroupId =\n\t\tnewStyleGroupIdx === -1 ? 0 : newStyleGroupIdx;\n\n\tconst newStyleGroup =\n\t\tnewCharData.styleGroups[poseAndPositionChange.styleGroupId];\n\tconst styleProperies = JSON.stringify(oldStyle.components);\n\tconst newStyleIdx = newStyleGroup.styles.findIndex(\n\t\tstyle => JSON.stringify(style.components) === styleProperies\n\t);\n\tposeAndPositionChange.styleId = newStyleIdx === -1 ? 0 : newStyleIdx;\n\n\tconst newStyle = newStyleGroup.styles[poseAndPositionChange.styleId];\n\tconst newPoseIdx = newStyle.poses.findIndex(pose => pose.id === oldPose.id);\n\tposeAndPositionChange.poseId = newPoseIdx === -1 ? 0 : newPoseIdx;\n\n\t// Styles and poses have been restored. Proceding with pose parts\n\tconst newPose = newStyle.poses[poseAndPositionChange.poseId];\n\n\tconst newPosePositions: ICharacter['posePositions'] = {};\n\n\tfor (const key in newPose.positions) {\n\t\tif (!newPose.positions.hasOwnProperty(key)) continue;\n\t\tconst newPosition = newPose.positions[key];\n\n\t\tif (oldPose.positions[key]) {\n\t\t\tconst oldPositionIdx = poseAndPositionChange.posePositions[key];\n\t\t\tif (oldPositionIdx >= 0 && oldPositionIdx < newPosition.length) {\n\t\t\t\tnewPosePositions[key] = oldPositionIdx;\n\t\t\t} else {\n\t\t\t\tnewPosePositions[key] = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tnewPosePositions[key] = 0;\n\t\t}\n\t}\n\n\tconst oldHeadGroup = oldPose.compatibleHeads[obj.posePositions.headType];\n\tconst newHeadGroupIdx = newPose.compatibleHeads.indexOf(oldHeadGroup);\n\n\tif (newHeadGroupIdx === -1) {\n\t\tposeAndPositionChange.posePositions.headType = 0;\n\t\tposeAndPositionChange.posePositions.head = 0;\n\t} else {\n\t\tif (newHeadGroupIdx !== obj.posePositions.headType) {\n\t\t\tposeAndPositionChange.posePositions.headType = newHeadGroupIdx;\n\t\t}\n\t\tconst oldHead = JSON.stringify(\n\t\t\toldCharData.heads[oldHeadGroup].variants[obj.posePositions.head]\n\t\t);\n\t\tconst newHeadIdx = newCharData.heads[oldHeadGroup].variants.findIndex(\n\t\t\tvariant => JSON.stringify(variant) === oldHead\n\t\t);\n\t\tif (newHeadIdx === -1) {\n\t\t\tposeAndPositionChange.posePositions.head = 0;\n\t\t} else {\n\t\t\tposeAndPositionChange.posePositions.head = newHeadIdx;\n\t\t}\n\t}\n\n\tcommitPoseAndPositionChanges(context.commit, obj, poseAndPositionChange);\n}\n\nexport const propertyOptions: IHistoryOptions = {\n\tmutations: {\n\t\tsetPosePosition: {\n\t\t\tcombinable: (oldMut, newMut) => oldMut.payload.id === newMut.payload.id,\n\t\t\tcombinator: (oldMut, newMut) => ({\n\t\t\t\ttype: newMut.type,\n\t\t\t\tpayload: {\n\t\t\t\t\tid: newMut.payload.id,\n\t\t\t\t\tposePositions: {\n\t\t\t\t\t\t...oldMut.payload.posePositions,\n\t\t\t\t\t\t...newMut.payload.posePositions,\n\t\t\t\t\t},\n\t\t\t\t} as ISetPosePositionMutation,\n\t\t\t}),\n\t\t},\n\t},\n};\n\nfunction buildPoseAndPositionData(\n\tcharacter: Readonly<ICharacter>\n): PoseAndPositionChange {\n\treturn {\n\t\tstyleGroupId: character.styleGroupId,\n\t\tstyleId: character.styleId,\n\t\tposeId: character.poseId,\n\t\tposePositions: { ...character.posePositions },\n\t};\n}\n\nfunction commitPoseAndPositionChanges(\n\tcommit: Commit,\n\tcharacter: Readonly<ICharacter>,\n\tposeAndPosition: PoseAndPositionChange\n) {\n\tif (poseAndPosition.styleGroupId !== character.styleGroupId) {\n\t\tcommit('setCharStyleGroup', {\n\t\t\tid: character.id,\n\t\t\tstyleGroupId: poseAndPosition.styleGroupId,\n\t\t} as ISetCharStyleGroupMutation);\n\t}\n\tif (poseAndPosition.styleId !== character.styleId) {\n\t\tconsole.log(\n\t\t\t`Setting style of ${character.id} to ${poseAndPosition.styleId}`\n\t\t);\n\t\tcommit('setCharStyle', {\n\t\t\tid: character.id,\n\t\t\tstyleId: poseAndPosition.styleId,\n\t\t} as ISetCharStyleMutation);\n\t}\n\tif (poseAndPosition.poseId !== character.poseId) {\n\t\tcommit('setPose', {\n\t\t\tid: character.id,\n\t\t\tposeId: poseAndPosition.poseId,\n\t\t} as ISetPoseMutation);\n\t}\n\tif (\n\t\tJSON.stringify(poseAndPosition.posePositions) !==\n\t\tJSON.stringify(character.posePositions)\n\t) {\n\t\tcommit('setPosePosition', {\n\t\t\tid: character.id,\n\t\t\tposePositions: poseAndPosition.posePositions,\n\t\t} as ISetPosePositionMutation);\n\t}\n}\n\nfunction mutatePoseAndPositions(\n\tcommit: Commit,\n\tcharacter: Readonly<ICharacter>,\n\tdata: Character<IAsset>,\n\tcallback: (change: PoseAndPositionChange) => void\n) {\n\tconst poseAndPosition = buildPoseAndPositionData(character);\n\tcallback(poseAndPosition);\n\n\tif (!data.styleGroups[poseAndPosition.styleGroupId]) {\n\t\tposeAndPosition.styleGroupId = 0;\n\t}\n\tconst styleGroup = data.styleGroups[poseAndPosition.styleGroupId];\n\n\tif (!styleGroup.styles[poseAndPosition.styleId]) {\n\t\tposeAndPosition.styleId = 0;\n\t}\n\tconst style = styleGroup.styles[poseAndPosition.styleId];\n\n\t// ensure pose integrity\n\tif (!style.poses[poseAndPosition.poseId]) {\n\t\tposeAndPosition.poseId = 0;\n\t}\n\tconst pose = style.poses[poseAndPosition.poseId];\n\n\tfor (const positionKey in pose.positions) {\n\t\tif (!pose.positions[positionKey]) continue;\n\t\tif (\n\t\t\t!pose.positions[positionKey][poseAndPosition.posePositions[positionKey]]\n\t\t) {\n\t\t\tposeAndPosition.posePositions[positionKey] = 0;\n\t\t}\n\t}\n\n\t// restore head group\n\tconst oldPose =\n\t\tdata.styleGroups[character.styleGroupId].styles[character.styleId].poses[\n\t\t\tcharacter.poseId\n\t\t];\n\tconst oldHeadCollection =\n\t\toldPose.compatibleHeads[character.posePositions.headType || 0];\n\tconst newHeadCollectionNr = pose.compatibleHeads.indexOf(oldHeadCollection);\n\tif (newHeadCollectionNr >= 0) {\n\t\tposeAndPosition.posePositions.headType = newHeadCollectionNr;\n\t} else {\n\t\tposeAndPosition.posePositions.headType = 0;\n\t\tposeAndPosition.posePositions.head = 0;\n\t}\n\n\tcommitPoseAndPositionChanges(commit, character, poseAndPosition);\n}\n\ninterface PoseAndPositionChange {\n\tstyleGroupId: ICharacter['styleGroupId'];\n\tstyleId: ICharacter['styleId'];\n\tposeId: ICharacter['poseId'];\n\tposePositions: ICharacter['posePositions'];\n}\n\nexport interface ISetPoseMutation extends ICommand {\n\treadonly poseId: number;\n}\n\nexport interface ISetCharStyleGroupMutation extends ICommand {\n\treadonly styleGroupId: number;\n}\n\nexport interface ISetCharStyleMutation extends ICommand {\n\treadonly styleId: number;\n}\n\nexport interface ISetPosePositionMutation extends ICommand {\n\treadonly posePositions: {\n\t\t[id: string]: number;\n\t};\n}\n\nexport interface ISetFreeMoveMutation extends ICommand {\n\treadonly freeMove: boolean;\n}\n\nexport interface ISetCloseMutation extends ICommand {\n\treadonly close: boolean;\n}\n\nexport interface ICreateCharacterAction {\n\treadonly characterType: string;\n}\n\nexport interface ISeekPoseAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISeekStyleAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISeekHeadAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISetPartAction extends ICommand {\n\treadonly part: string;\n\treadonly val: number;\n}\n\nexport interface ISetStyleAction extends ICommand {\n\treadonly styleGroupId: number;\n\treadonly styleId: number;\n}\n\nexport interface INsfwCheckAction extends ICommand {}\n\nexport interface ISeekPosePartAction extends ICommand {\n\treadonly part: string;\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetSpriteWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetSpriteHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assetName: string;\n}\n\nexport interface IShiftCharacterSlotAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',[_c('legend',[_vm._v(\"Position\"+_vm._s(_vm.allowSize ? '/Size' : '')+\":\")]),_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[(_vm.allowStepMove)?_c('toggle',{attrs:{\"label\":\"Move freely?\"},model:{value:(_vm.freeMove),callback:function ($$v) {_vm.freeMove=$$v},expression:\"freeMove\"}}):_vm._e()],1)]),(_vm.allowStepMove && !_vm.freeMove)?_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('table',[_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{attrs:{\"disabled\":_vm.isFirstPos},on:{\"click\":function($event){--_vm.pos}}},[_vm._v(\"<\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.pos),expression:\"pos\",modifiers:{\"number\":true}}],attrs:{\"id\":\"current_talking\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.pos=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.positionNames),function(val,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(_vm._s(val))])}),0)]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{attrs:{\"disabled\":_vm.isLastPos},on:{\"click\":function($event){++_vm.pos}}},[_vm._v(\">\")])])])])])]):[_c('tr',[_vm._m(0),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.x),expression:\"x\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_x\",\"type\":\"number\"},domProps:{\"value\":(_vm.x)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.x=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_vm._m(1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.y),expression:\"y\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_y\",\"type\":\"number\"},domProps:{\"value\":(_vm.y)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.y=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])],(_vm.allowSize)?[_c('tr',[_vm._m(2),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.width),expression:\"width\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_w\",\"min\":\"0\",\"type\":\"number\"},domProps:{\"value\":(_vm.width)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.width=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_vm._m(3),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.height),expression:\"height\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_h\",\"min\":\"0\",\"type\":\"number\"},domProps:{\"value\":(_vm.height)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.height=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('toggle',{attrs:{\"label\":\"Lock ratio?\"},model:{value:(_vm.preserveRatio),callback:function ($$v) {_vm.preserveRatio=$$v},expression:\"preserveRatio\"}})],1)])]:_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_x\"}},[_vm._v(\"X:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_y\"}},[_vm._v(\"Y:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_w\"}},[_vm._v(\"Width:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_h\"}},[_vm._v(\"Height:\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { positions, characterPositions } from '@/constants/base';\nimport {\n\tclosestCharacterSlot,\n\tISetFreeMoveMutation,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { State } from 'vuex-class-decorator';\nimport {\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n\tIObject,\n\tISetHeightAction,\n\tISetWidthAction,\n\tISetRatioAction,\n} from '@/store/objects';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { ITextBox } from '@/store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class PositionAndSize extends Vue {\n\t@Prop({ required: true })\n\tprivate readonly obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get allowSize() {\n\t\tconst obj = this.obj;\n\t\tif (\n\t\t\tthis.obj.type === 'textBox' &&\n\t\t\t(this.obj as ITextBox).style !== 'custom'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.obj.type === 'character' && !(this.obj as ICharacter).freeMove) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate get allowStepMove() {\n\t\treturn 'freeMove' in this.obj;\n\t}\n\n\tprivate get freeMove() {\n\t\treturn (this.obj as ICharacter).freeMove;\n\t}\n\n\tprivate set freeMove(val: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFreeMove', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tfreeMove: val,\n\t\t\t} as ISetFreeMoveMutation);\n\t\t});\n\t}\n\n\tprivate get positionNames(): string[] {\n\t\treturn positions;\n\t}\n\n\tprivate get pos(): number {\n\t\treturn closestCharacterSlot(this.obj.x);\n\t}\n\n\tprivate set pos(value: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: characterPositions[value],\n\t\t\t\ty: this.obj.y,\n\t\t\t} as ISetPositionAction);\n\t\t});\n\t}\n\n\tprivate get isFirstPos(): boolean {\n\t\treturn this.pos === 0;\n\t}\n\n\tprivate get isLastPos(): boolean {\n\t\treturn this.pos === positions.length - 1;\n\t}\n\n\tprivate get x(): number {\n\t\treturn this.obj.x;\n\t}\n\n\tprivate set x(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: val,\n\t\t\t\ty: this.y,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get y(): number {\n\t\treturn this.obj.y;\n\t}\n\n\tprivate set y(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: this.x,\n\t\t\t\ty: val,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get height(): number {\n\t\treturn (this.obj as ISprite).height;\n\t}\n\n\tprivate set height(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setHeight', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\theight: val,\n\t\t\t} as ISetHeightAction);\n\t\t});\n\t}\n\n\tprivate get width(): number {\n\t\treturn (this.obj as ISprite).width;\n\t}\n\n\tprivate set width(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setWidth', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\twidth: val,\n\t\t\t} as ISetWidthAction);\n\t\t});\n\t}\n\n\tprivate get preserveRatio(): boolean {\n\t\treturn (this.obj as ISprite).preserveRatio;\n\t}\n\n\tprivate set preserveRatio(val: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPreserveRatio', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tpreserveRatio: val,\n\t\t\t} as ISetRatioAction);\n\t\t});\n\t}\n}\n\nexport interface MoveObject {\n\tobject: IRenderable;\n\tmove: 'Forward' | 'Backward' | 'Back' | 'Front' | 'Delete';\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./positionAndSize.vue?vue&type=template&id=734fec1a&scoped=true&\"\nimport script from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nexport * from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"734fec1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',{attrs:{\"id\":\"layerfs\"}},[_c('legend',[_vm._v(\"Layer:\")]),_c('table',[_c('tbody',[_c('tr',[_c('td',[_c('button',{attrs:{\"title\":\"Move to back\"},on:{\"click\":function($event){return _vm.shiftLayer(-Infinity)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"vertical_align_bottom\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move backwards\"},on:{\"click\":function($event){return _vm.shiftLayer(-1)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_downward\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move forwards\"},on:{\"click\":function($event){return _vm.shiftLayer(1)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_upward\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move to front\"},on:{\"click\":function($event){return _vm.shiftLayer(Infinity)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"vertical_align_top\")])])])])])]),_c('toggle',{attrs:{\"value\":_vm.obj.onTop,\"label\":\"In front?\"},on:{\"input\":_vm.setInFront}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tIObjectShiftLayerAction,\n\tIObject,\n} from '@/store/objects';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class Layers extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate shiftLayer(delta: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/shiftLayer', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tdelta,\n\t\t\t} as IObjectShiftLayerAction);\n\t\t});\n\t}\n\n\tprivate setInFront(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setOnTop', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tonTop: newValue,\n\t\t\t} as IObjectSetOnTopAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./layers.vue?vue&type=template&id=34f3a848&scoped=true&\"\nimport script from \"./layers.vue?vue&type=script&lang=ts&\"\nexport * from \"./layers.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34f3a848\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_vm._m(0),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.opacity),expression:\"opacity\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"max\":\"100\",\"min\":\"0\",\"id\":\"characterOpacity\"},domProps:{\"value\":(_vm.opacity)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.opacity=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"characterOpacity\"}},[_vm._v(\"Opacity:\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, ISetObjectOpacityMutation } from '@/store/objects';\n\n@Component({})\nexport default class Opacity extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get opacity() {\n\t\treturn this.obj.opacity;\n\t}\n\n\tprivate set opacity(opacity: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setOpacity', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\topacity,\n\t\t\t} as ISetObjectOpacityMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./opacity.vue?vue&type=template&id=28c7d1e4&scoped=true&\"\nimport script from \"./opacity.vue?vue&type=script&lang=ts&\"\nexport * from \"./opacity.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28c7d1e4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{on:{\"click\":_vm.onClick}},[_vm._v(\"Delete\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, IRemoveObjectAction } from '@/store/objects';\n\n@Component({})\nexport default class Delete extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate onClick() {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\tid: this.obj.id,\n\t\t\t} as IRemoveObjectAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./delete.vue?vue&type=template&id=5b33f32e&\"\nimport script from \"./delete.vue?vue&type=script&lang=ts&\"\nexport * from \"./delete.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ partList: true, vertical: _vm.vertical }},[_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"Back\")]),_vm._l((_vm.parts),function(part,index){return _c('part-button',{key:index,attrs:{\"value\":index,\"part\":part},on:{\"click\":function($event){_vm.choose(index);\n\t\t\t_vm.$emit('leave');}}})}),_vm._l((_vm.styleComponents),function(styleComponent){return _c('fieldset',{key:styleComponent.name},[_c('legend',[_vm._v(_vm._s(styleComponent.label))]),_vm._l((styleComponent.buttons),function(button,id){return _c('part-button',{key:id,attrs:{\"size\":130,\"value\":id,\"part\":button},on:{\"click\":function($event){return _vm.choose_component(styleComponent.name, id)}}})})],2)}),(_vm.part === 'head')?_c('button',{on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Expressions character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")]):(_vm.part === 'style')?_c('button',{on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Styles character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")]):_c('button',{on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Poses character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ part: true, active: false /*background === value*/ },style:(_vm.style),on:{\"click\":function($event){return _vm.$emit('click')}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\nimport { getAAsset, getAsset } from '@/asset-manager';\r\nimport environment from '@/environments/environment';\r\nimport { ErrorAsset } from '@/models/error-asset';\r\nimport { IAsset } from '@/store/content';\r\nimport { DeepReadonly } from '../../../../util/readonly';\r\n\r\nexport interface IPartButtonImage {\r\n\timages: IPartImage[];\r\n\tsize: DeepReadonly<[number, number]>;\r\n\toffset: DeepReadonly<[number, number]>;\r\n}\r\n\r\nexport interface IPartImage {\r\n\tasset: IAsset | string;\r\n\toffset: DeepReadonly<[number, number]>;\r\n}\r\n\r\nconst spriteSize = 960;\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class PartButton extends Vue {\r\n\t@Prop({ required: true }) private readonly part!: IPartButtonImage;\r\n\t@Prop({ required: true }) private readonly value!: number;\r\n\t@Prop({ default: 150, type: Number })\r\n\tprivate readonly size!: number;\r\n\r\n\tprivate lookups: Array<HTMLImageElement | ErrorAsset | null> = [];\r\n\tprivate loaded = false;\r\n\r\n\tprivate async created() {\r\n\t\tthis.lookups = await Promise.all(\r\n\t\t\tthis.part.images.map((image) => {\r\n\t\t\t\tif (typeof image.asset === 'string') {\r\n\t\t\t\t\treturn getAsset(image.asset, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn getAAsset(image.asset, false);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tprivate get scaleX(): number {\r\n\t\treturn this.size / this.part.size[0];\r\n\t}\r\n\r\n\tprivate get scaleY(): number {\r\n\t\treturn this.size / this.part.size[1];\r\n\t}\r\n\r\n\tprivate get backgroundSize(): string {\r\n\t\treturn `${Math.floor(spriteSize * this.scaleX)}px ${Math.floor(\r\n\t\t\tspriteSize * this.scaleY\r\n\t\t)}px`;\r\n\t}\r\n\r\n\tprivate get backgroundPosition(): string {\r\n\t\treturn (\r\n\t\t\t`${Math.floor(this.part.offset[0] * -this.scaleX)}px ` +\r\n\t\t\t`${Math.floor(this.part.offset[1] * -this.scaleY)}px`\r\n\t\t);\r\n\t}\r\n\r\n\tprivate get style(): { [id: string]: string } {\r\n\t\tconst images = (this.lookups.filter(\r\n\t\t\t(lookup) => lookup instanceof HTMLImageElement\r\n\t\t) as HTMLImageElement[]).map(\r\n\t\t\t(lookup) => `url('${lookup.src.replace(\"'\", \"\\\\'\")}')`\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tbackgroundImage: images.join(','),\r\n\t\t\theight: this.size + 'px',\r\n\t\t\twidth: this.size + 'px',\r\n\t\t\tbackgroundPosition: this.backgroundPosition,\r\n\t\t\tbackgroundSize: this.backgroundSize,\r\n\t\t};\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./partButton.vue?vue&type=template&id=1eca283e&scoped=true&\"\nimport script from \"./partButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./partButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./partButton.vue?vue&type=style&index=0&id=1eca283e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eca283e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport {\r\n\tisWebPSupported,\r\n\tregisterAsset,\r\n\tregisterAssetWithURL,\r\n} from '@/asset-manager';\r\nimport environment from '@/environments/environment';\r\nimport PartButton, { IPartButtonImage, IPartImage } from './partButton.vue';\r\nimport {\r\n\tStyleComponent,\r\n\tPose,\r\n\tCharacter,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { IAsset } from '@/store/content';\r\nimport {\r\n\tgetPose,\r\n\tgetDataG,\r\n\tISeekPoseAction,\r\n\tISetPosePositionMutation,\r\n\tISetPartAction,\r\n\tgetData,\r\n\tICharacter,\r\n\tISetStyleAction,\r\n} from '@/store/objectTypes/characters';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { DeepReadonly } from '../../../../util/readonly';\r\n\r\ninterface IPartStyleGroup {\r\n\tlabel: string;\r\n\tname: string;\r\n\tbuttons: { [id: string]: IPartButtonImage };\r\n}\r\n\r\n@Component({\r\n\tcomponents: {\r\n\t\tPartButton,\r\n\t},\r\n})\r\nexport default class PartsPanel extends Vue {\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\t@Prop({ required: true }) private character!: ICharacter;\r\n\t@Prop({ required: true, type: String }) private readonly part!:\r\n\t\t| string\r\n\t\t| 'pose'\r\n\t\t| 'style';\r\n\r\n\tprivate isWebPSupported: boolean | null = null;\r\n\r\n\tprivate vuexHistory!: IHistorySupport;\r\n\t/**\r\n\t * [styleComponentKey, styleComponentValue]\r\n\t */\r\n\tprivate stylePriorities: [string, string][] = [];\r\n\r\n\tprivate get charData(): DeepReadonly<Character<IAsset>> {\r\n\t\treturn getData(this.$store, this.character);\r\n\t}\r\n\r\n\t@Watch('character')\r\n\tprivate updateStyleData(): void {\r\n\t\tconst baseStyle = this.charData.styleGroups[this.character.styleGroupId]\r\n\t\t\t.styles[this.character.styleId];\r\n\t\tthis.stylePriorities = Object.keys(baseStyle.components).map(key => [\r\n\t\t\tkey,\r\n\t\t\tbaseStyle.components[key],\r\n\t\t]);\r\n\t}\r\n\r\n\tprivate async created() {\r\n\t\tthis.updateStyleData();\r\n\t\tthis.isWebPSupported = await isWebPSupported();\r\n\t}\r\n\r\n\tprivate get styleComponents(): DeepReadonly<IPartStyleGroup[]> {\r\n\t\tif (this.part !== 'style') return [];\r\n\t\tconst styleComponents = this.charData.styleGroups[\r\n\t\t\tthis.character.styleGroupId\r\n\t\t];\r\n\t\treturn styleComponents.styleComponents.map(component => {\r\n\t\t\tconst buttons: IPartStyleGroup['buttons'] = {};\r\n\t\t\tfor (const key in component.variants) {\r\n\t\t\t\tif (!component.variants.hasOwnProperty(key)) continue;\r\n\t\t\t\tconst variant = component.variants[key];\r\n\t\t\t\tbuttons[key] = {\r\n\t\t\t\t\tsize: styleComponents.styles[0].poses[0].size,\r\n\t\t\t\t\toffset: [0, 0],\r\n\t\t\t\t\timages: [{ offset: [0, 0], asset: variant }],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn { label: component.label, name: component.id, buttons };\r\n\t\t});\r\n\t}\r\n\r\n\tprivate get parts(): { [id: number]: DeepReadonly<IPartButtonImage> } {\r\n\t\tconst ret: { [id: string]: DeepReadonly<IPartButtonImage> } = {};\r\n\t\tlet collection: DeepReadonly<IAsset[][]>;\r\n\t\tlet offset: DeepReadonly<IPartButtonImage['offset']>;\r\n\t\tlet size: DeepReadonly<IPartButtonImage['size']>;\r\n\t\tconst data = this.charData;\r\n\t\tconst currentPose = getPose(data, this.character);\r\n\t\tswitch (this.part) {\r\n\t\t\tcase 'head':\r\n\t\t\t\tfor (\r\n\t\t\t\t\tlet headKeyIdx = 0;\r\n\t\t\t\t\theadKeyIdx < currentPose.compatibleHeads.length;\r\n\t\t\t\t\t++headKeyIdx\r\n\t\t\t\t) {\r\n\t\t\t\t\tconst headKey = currentPose.compatibleHeads[headKeyIdx];\r\n\t\t\t\t\tconst heads = data.heads[headKey];\r\n\t\t\t\t\tfor (let headIdx = 0; headIdx < heads.variants.length; ++headIdx) {\r\n\t\t\t\t\t\tconst headImages = heads.variants[headIdx];\r\n\t\t\t\t\t\tret[`${headKeyIdx}_${headIdx}`] = {\r\n\t\t\t\t\t\t\tsize: heads.previewSize,\r\n\t\t\t\t\t\t\toffset: heads.previewOffset,\r\n\t\t\t\t\t\t\timages: headImages.map(\r\n\t\t\t\t\t\t\t\t(image): IPartImage => ({ asset: image, offset: [0, 0] })\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t\tcase 'pose':\r\n\t\t\t\tconst currentStyle =\r\n\t\t\t\t\tdata.styleGroups[this.character.styleGroupId].styles[\r\n\t\t\t\t\t\tthis.character.styleId\r\n\t\t\t\t\t];\r\n\t\t\t\tfor (let poseIdx = 0; poseIdx < currentStyle.poses.length; ++poseIdx) {\r\n\t\t\t\t\tconst pose = currentStyle.poses[poseIdx];\r\n\t\t\t\t\tret[poseIdx] = this.generatePosePreview(pose);\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t\tcase 'style':\r\n\t\t\t\tfor (const styleGroup of data.styleGroups) {\r\n\t\t\t\t\tret[styleGroup.id] = this.generatePosePreview(\r\n\t\t\t\t\t\tstyleGroup.styles[0].poses[0]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tcollection = currentPose.positions[this.part];\r\n\t\t\t\tsize = currentPose.previewSize;\r\n\t\t\t\toffset = currentPose.previewOffset;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor (let partIdx = 0; partIdx < collection.length; ++partIdx) {\r\n\t\t\tconst part = collection[partIdx];\r\n\t\t\tret[partIdx] = {\r\n\t\t\t\timages: part.map((partImage: IAsset) => ({\r\n\t\t\t\t\toffset: [0, 0],\r\n\t\t\t\t\tasset: partImage,\r\n\t\t\t\t})),\r\n\t\t\t\tsize,\r\n\t\t\t\toffset,\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tprivate generatePosePreview(\r\n\t\tpose: DeepReadonly<Pose<IAsset>>\r\n\t): DeepReadonly<IPartButtonImage> {\r\n\t\tconst data = this.charData;\r\n\t\tconst heads = data.heads[pose.compatibleHeads[0]];\r\n\t\tconst head = heads ? heads.variants[0] : null;\r\n\t\tlet images: IAsset[] = [];\r\n\r\n\t\tfor (const command of pose.renderCommands) {\r\n\t\t\tswitch (command.type) {\r\n\t\t\t\tcase 'pose-part':\r\n\t\t\t\t\tconst part = pose.positions[command.part];\r\n\t\t\t\t\tif (!part || part.length === 0) break;\r\n\t\t\t\t\timages = images.concat(part[0] as IAsset[]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'head':\r\n\t\t\t\t\tif (head) images = images.concat(head);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'image':\r\n\t\t\t\t\timages = images.concat(command.images);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\timages: images.map(image => ({ asset: image, offset: [0, 0] })),\r\n\t\t\tsize: pose.previewSize,\r\n\t\t\toffset: pose.previewOffset,\r\n\t\t};\r\n\t}\r\n\r\n\tprivate updatePose(styleGroupId?: number) {\r\n\t\tif (styleGroupId === undefined) styleGroupId = this.character.styleGroupId;\r\n\r\n\t\tconst data = this.charData;\r\n\t\tconst styleGroups = data.styleGroups[styleGroupId];\r\n\t\tlet selection = styleGroups.styles;\r\n\t\tfor (const priority of this.stylePriorities) {\r\n\t\t\tconst subSelect = selection.filter(style => {\r\n\t\t\t\treturn style.components[priority[0]] === priority[1];\r\n\t\t\t});\r\n\t\t\tif (subSelect.length > 0) selection = subSelect;\r\n\t\t}\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('objects/setCharStyle', {\r\n\t\t\t\tid: this.character.id,\r\n\t\t\t\tstyleGroupId,\r\n\t\t\t\tstyleId: styleGroups.styles.indexOf(selection[0]),\r\n\t\t\t} as ISetStyleAction);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate choose(index: string) {\r\n\t\tif (this.part === 'style') {\r\n\t\t\tthis.updatePose(\r\n\t\t\t\tthis.charData.styleGroups.findIndex(group => group.id === index)\r\n\t\t\t);\r\n\t\t} else if (this.part === 'head') {\r\n\t\t\tconst [headTypeIdx, headIdx] = index\r\n\t\t\t\t.split('_', 2)\r\n\t\t\t\t.map(part => parseInt(part, 10));\r\n\t\t\tthis.$store.commit('objects/setPosePosition', {\r\n\t\t\t\tid: this.character.id,\r\n\t\t\t\tposePositions: {\r\n\t\t\t\t\theadType: headTypeIdx,\r\n\t\t\t\t\thead: headIdx,\r\n\t\t\t\t},\r\n\t\t\t} as ISetPosePositionMutation);\r\n\t\t} else {\r\n\t\t\tthis.setPart(this.part, parseInt(index, 10));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate choose_component(component: string, id: string) {\r\n\t\tconst prioIdx = this.stylePriorities.findIndex(\r\n\t\t\tstylePriority => stylePriority[0] === component\r\n\t\t);\r\n\t\tthis.stylePriorities.splice(prioIdx, 1);\r\n\t\tthis.stylePriorities.unshift([component, id]);\r\n\t\tthis.updatePose();\r\n\t}\r\n\r\n\tprivate setPart(part: ISetPartAction['part'], index: number): void {\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('objects/setPart', {\r\n\t\t\t\tid: this.character.id,\r\n\t\t\t\tpart,\r\n\t\t\t\tval: index,\r\n\t\t\t} as ISetPartAction);\r\n\t\t});\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./parts.vue?vue&type=template&id=3bbdf591&scoped=true&\"\nimport script from \"./parts.vue?vue&type=script&lang=ts&\"\nexport * from \"./parts.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./parts.vue?vue&type=style&index=0&id=3bbdf591&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bbdf591\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tgetData,\n\tgetParts,\n\tISeekPoseAction,\n\tISetCloseMutation,\n\tISeekPosePartAction,\n\tICharacter,\n\tISeekStyleAction,\n} from '@/store/objectTypes/characters';\nimport { ISetObjectFlipMutation } from '@/store/objects';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport Parts from './character/parts.vue';\nimport { Character } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '@/store/content';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { DeepReadonly } from '../../../util/readonly';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tParts,\n\t},\n})\nexport default class CharacterPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\n\n\tprivate get selection(): string {\n\t\treturn this.$store.state.ui.selection!;\n\t}\n\n\tprivate get character(): DeepReadonly<ICharacter> {\n\t\tconst obj = this.$store.state.objects.objects[this.selection];\n\t\tif (obj.type !== 'character') return undefined!;\n\t\treturn obj as ICharacter;\n\t}\n\n\tprivate panelForParts: string | null = null;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get charData(): DeepReadonly<Character<IAsset>> {\n\t\treturn getData(this.$store, this.character);\n\t}\n\n\tprivate get label(): string {\n\t\treturn this.charData.label || '';\n\t}\n\n\tprivate get parts(): DeepReadonly<string[]> {\n\t\treturn getParts(this.charData, this.character);\n\t}\n\n\tprivate get hasMultipleStyles(): boolean {\n\t\treturn (\n\t\t\tthis.charData.styleGroups[this.character.styleGroupId].styles.length >\n\t\t\t\t1 || this.charData.styleGroups.length > 1\n\t\t);\n\t}\n\n\tprivate get hasMultiplePoses(): boolean {\n\t\tconst styleGroup = this.charData.styleGroups[this.character.styleGroupId];\n\t\tconst style = styleGroup.styles[this.character.styleId];\n\t\treturn style.poses.length > 1;\n\t}\n\n\tprivate seekPose(delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t} as ISeekPoseAction);\n\t\t});\n\t}\n\n\tprivate seekStyle(delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekStyle', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t} as ISeekStyleAction);\n\t\t});\n\t}\n\n\tprivate seekPart(part: string, delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPart', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t\tpart,\n\t\t\t} as ISeekPosePartAction);\n\t\t});\n\t}\n\n\tprivate captialize(str: string) {\n\t\treturn str.charAt(0).toUpperCase() + str.substring(1);\n\t}\n\n\tprivate get flip() {\n\t\treturn this.character.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get closeUp() {\n\t\treturn this.character.close;\n\t}\n\n\tprivate set closeUp(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setClose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tclose: newValue,\n\t\t\t} as ISetCloseMutation);\n\t\t});\n\t}\n\n\t@Watch('selection')\n\tprivate reset() {\n\t\tthis.panelForParts = null;\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./character.vue?vue&type=template&id=5c81f8c8&scoped=true&\"\nimport script from \"./character.vue?vue&type=script&lang=ts&\"\nexport * from \"./character.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./character.vue?vue&type=style&index=0&id=5c81f8c8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c81f8c8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Custom Sprite\")]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t},\n})\nexport default class SpritePanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get sprite(): ISprite {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'sprite') return undefined!;\n\t\treturn obj as ISprite;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sprite.vue?vue&type=template&id=0b7511a2&scoped=true&\"\nimport script from \"./sprite.vue?vue&type=script&lang=ts&\"\nexport * from \"./sprite.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b7511a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Textbox\")]),(_vm.colorSelect !== '')?_c('color',{attrs:{\"title\":_vm.colorName},on:{\"leave\":function($event){_vm.colorSelect = ''}},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}}):(_vm.textEditor !== '')?_c('text-editor',{attrs:{\"title\":_vm.textEditorName},on:{\"leave\":function($event){_vm.textEditor = ''}},model:{value:(_vm.textEditorText),callback:function ($$v) {_vm.textEditorText=$$v},expression:\"textEditorText\"}}):[_c('table',{staticClass:\"upper-combos\"},[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"text_style\"}},[_vm._v(\"Style:\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textBoxStyle),expression:\"textBoxStyle\"}],attrs:{\"id\":\"text_style\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.textBoxStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"normal\"}},[_vm._v(\"Normal\")]),_c('option',{attrs:{\"value\":\"corrupt\"}},[_vm._v(\"Corrupt\")]),_c('option',{attrs:{\"value\":\"custom\"}},[_vm._v(\"Custom\")]),_c('option',{attrs:{\"value\":\"none\"}},[_vm._v(\"None\")])])])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"current_talking\"}},[_vm._v(\"Person talking:\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talkingDefaults),expression:\"talkingDefaults\"}],attrs:{\"id\":\"current_talking\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.talkingDefaults=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"No-one\"}},[_vm._v(\"No-one\")]),_c('option',{attrs:{\"value\":\"Sayori\"}},[_vm._v(\"Sayori\")]),_c('option',{attrs:{\"value\":\"Yuri\"}},[_vm._v(\"Yuri\")]),_c('option',{attrs:{\"value\":\"Natsuki\"}},[_vm._v(\"Natsuki\")]),_c('option',{attrs:{\"value\":\"Monika\"}},[_vm._v(\"Monika\")]),_c('option',{attrs:{\"value\":\"FeMC\"}},[_vm._v(\"FeMC\")]),_c('option',{attrs:{\"value\":\"MC\"}},[_vm._v(\"MC\")]),_c('option',{attrs:{\"value\":\"Chad\"}},[_vm._v(\"Chad\")]),_c('option',{attrs:{\"value\":\"Amy\"}},[_vm._v(\"Amy\")]),_c('option',{attrs:{\"value\":\"Other\"}},[_vm._v(\"Other\")])])])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_name\"}},[_vm._v(\"Other name:\")])]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talkingOther),expression:\"talkingOther\"}],attrs:{\"id\":\"custom_name\"},domProps:{\"value\":(_vm.talkingOther)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.talkingOther=$event.target.value}}}),_c('button',{on:{\"click\":function($event){_vm.textEditor = 'name'}}},[_vm._v(\"...\")])])])]),_c('toggle',{attrs:{\"label\":\"Controls visible?\"},model:{value:(_vm.showControls),callback:function ($$v) {_vm.showControls=$$v},expression:\"showControls\"}}),_c('toggle',{attrs:{\"label\":\"Able to skip?\"},model:{value:(_vm.allowSkipping),callback:function ($$v) {_vm.allowSkipping=$$v},expression:\"allowSkipping\"}}),_c('toggle',{attrs:{\"label\":\"Continue arrow?\"},model:{value:(_vm.showContinueArrow),callback:function ($$v) {_vm.showContinueArrow=$$v},expression:\"showContinueArrow\"}}),_c('toggle',{attrs:{\"label\":\"Auto quoting?\"},model:{value:(_vm.autoQuoting),callback:function ($$v) {_vm.autoQuoting=$$v},expression:\"autoQuoting\"}}),_c('div',{attrs:{\"id\":\"dialog_text_wrapper\"}},[_c('label',{attrs:{\"for\":\"dialog_text\"}},[_vm._v(\"Dialog:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dialog),expression:\"dialog\"}],attrs:{\"id\":\"dialog_text\"},domProps:{\"value\":(_vm.dialog)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.dialog=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = 'body'}}},[_vm._v(\"Formatting\")])]),_c('position-and-size',{attrs:{\"obj\":_vm.textbox}}),_c('button',{on:{\"click\":_vm.resetPosition}},[_vm._v(\"Reset position\")]),_c('button',{on:{\"click\":_vm.splitTextbox}},[_vm._v(\"Split textbox\")]),_c('layers',{attrs:{\"obj\":_vm.textbox}}),_c('opacity',{attrs:{\"obj\":_vm.textbox}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),(_vm.textBoxStyle === 'custom')?_c('fieldset',[_c('legend',[_vm._v(\"Customization:\")]),_c('table',[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"textbox_color\"}},[_vm._v(\"Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({background: _vm.textbox.customColor}),attrs:{\"id\":\"textbox_color\"},on:{\"click\":function($event){_vm.colorSelect = 'base'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_width\"}},[_vm._v(\"Namebox width:\")])]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.customNameboxWidth),expression:\"customNameboxWidth\",modifiers:{\"number\":true}}],staticStyle:{\"width\":\"48px\"},attrs:{\"id\":\"custom_namebox_width\",\"type\":\"number\"},domProps:{\"value\":(_vm.customNameboxWidth)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.customNameboxWidth=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('toggle',{attrs:{\"id\":\"derive_custom_colors\",\"label\":\"Derive other colors\"},model:{value:(_vm.deriveCustomColors),callback:function ($$v) {_vm.deriveCustomColors=$$v},expression:\"deriveCustomColors\"}})],1)]),(!_vm.deriveCustomColors)?[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_controls_color\"}},[_vm._v(\"Controls Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({background: _vm.textbox.customControlsColor}),attrs:{\"id\":\"custom_controls_color\"},on:{\"click\":function($event){_vm.colorSelect = 'controls'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_color\"}},[_vm._v(\"Namebox Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({background: _vm.textbox.customNameboxColor}),attrs:{\"id\":\"custom_namebox_color\"},on:{\"click\":function($event){_vm.colorSelect = 'namebox'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_stroke\"}},[_vm._v(\"Namebox text stroke:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({background: _vm.textbox.customNameboxStroke}),attrs:{\"id\":\"custom_namebox_stroke\"},on:{\"click\":function($event){_vm.colorSelect = 'nameboxStroke'}}})])])]:_vm._e()],2)]):_vm._e(),_c('delete',{attrs:{\"obj\":_vm.textbox}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ color: true, vertical: _vm.vertical }},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"OK\")]),_c('table',[_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){_vm.mode = 'hsla'}}},[_vm._v(\"HSLA\")])]),_c('td',[_c('button',{on:{\"click\":function($event){_vm.mode = 'rgba'}}},[_vm._v(\"RGBA\")])])])]),_c('div',{staticClass:\"column\"},[_c('slider-group',{attrs:{\"mode\":_vm.mode,\"relative\":true},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}}),_c('div',{staticClass:\"hex-selector\"},[_c('label',{staticClass:\"hex-label\",attrs:{\"for\":(\"hex_\" + _vm._uid)}},[_vm._v(\"Hex\")]),_c('input',{attrs:{\"id\":(\"hex_\" + _vm._uid)},domProps:{\"value\":_vm.color},on:{\"input\":_vm.updateHex}})]),_c('button',{on:{\"click\":_vm.addSwatch}},[_vm._v(\"Add as swatch\")])],1),_c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"color-swatches\"}},_vm._l((_vm.swatches),function(swatch){return _c('button',{key:swatch.color,staticClass:\"swatch\",style:({ backgroundColor: swatch.color }),attrs:{\"title\":swatch.label},on:{\"click\":function($event){_vm.color = swatch.color;\n\t\t\t\t_vm.$emit('leave');}}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('slider',{attrs:{\"label\":_vm.label1,\"max-value\":_vm.maxValue1,\"gradient-stops\":_vm.stops1},model:{value:(_vm.v1),callback:function ($$v) {_vm.v1=$$v},expression:\"v1\"}}),_c('slider',{attrs:{\"label\":_vm.label2,\"max-value\":_vm.maxValue2,\"gradient-stops\":_vm.stops2},model:{value:(_vm.v2),callback:function ($$v) {_vm.v2=$$v},expression:\"v2\"}}),_c('slider',{attrs:{\"label\":_vm.label3,\"max-value\":_vm.maxValue3,\"gradient-stops\":_vm.stops3},model:{value:(_vm.v3),callback:function ($$v) {_vm.v3=$$v},expression:\"v3\"}}),_c('slider',{attrs:{\"label\":\"Alpha\",\"max-value\":255,\"gradient-stops\":_vm.stopsAlpha},model:{value:(_vm.a),callback:function ($$v) {_vm.a=$$v},expression:\"a\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IColor } from './color';\nimport { RGBAColor } from './rgb';\n\n// tslint:disable: no-magic-numbers\nexport class HSLAColor implements IColor {\n\tpublic constructor(\n\t\tpublic readonly h: number,\n\t\tpublic readonly s: number,\n\t\tpublic readonly l: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a >= 1) {\n\t\t\treturn `hsl(${this.h}, ${this.s}, ${this.l})`;\n\t\t}\n\t\treturn `hsla(${this.h}, ${this.s}, ${this.l}, ${this.a})`;\n\t}\n\n\tpublic shift(deltas: HSLAColor): HSLAColor {\n\t\tlet { h, s, l, a } = this;\n\t\th += deltas.h;\n\t\tif (h >= 1) {\n\t\t\th -= 1;\n\t\t} else if (h < 0) {\n\t\t\th += 1;\n\t\t}\n\t\tif (s + deltas.s > 1) {\n\t\t\ts -= deltas.s;\n\t\t} else {\n\t\t\ts += deltas.s;\n\t\t\tif (s < 0) {\n\t\t\t\ts = 0;\n\t\t\t}\n\t\t}\n\t\tif (l + deltas.l > 1 || l + deltas.l < 0) {\n\t\t\tl -= deltas.l;\n\t\t} else {\n\t\t\tl += deltas.l;\n\t\t}\n\t\tif (a + deltas.a > 1 || a + deltas.a < 0) {\n\t\t\ta -= deltas.a;\n\t\t} else {\n\t\t\ta += deltas.a;\n\t\t}\n\t\treturn new HSLAColor(h, s, l, a);\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\tconst { h, s, l, a } = this;\n\t\tlet r: number;\n\t\tlet g: number;\n\t\tlet b: number;\n\n\t\tif (s === 0) {\n\t\t\tr = g = b = l; // achromatic\n\t\t} else {\n\t\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\t\tconst p = 2 * l - q;\n\t\t\tr = this.hue2rgb(p, q, h + 1 / 3);\n\t\t\tg = this.hue2rgb(p, q, h);\n\t\t\tb = this.hue2rgb(p, q, h - 1 / 3);\n\t\t}\n\n\t\treturn new RGBAColor(\n\t\t\tMath.round(r * 255),\n\t\t\tMath.round(g * 255),\n\t\t\tMath.round(b * 255),\n\t\t\ta\n\t\t);\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\treturn this;\n\t}\n\n\tprivate hue2rgb(p: number, q: number, t: number) {\n\t\tif (t < 0) t += 1;\n\t\tif (t > 1) t -= 1;\n\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\n\t\tif (t < 1 / 2) return q;\n\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n\t\treturn p;\n\t}\n}\n","import { HSLAColor } from './hsl';\n\n// tslint:disable: no-magic-numbers\nexport class RGBAColor {\n\tpublic static validCss(str: string): boolean {\n\t\treturn this.validCssRgb(str) || this.validHex(str);\n\t}\n\n\tpublic static fromCss(str: string): RGBAColor {\n\t\tif (this.validCssRgb(str)) {\n\t\t\treturn this.fromCssRgb(str);\n\t\t}\n\t\tif (this.validHex(str)) {\n\t\t\treturn this.fromHex(str);\n\t\t}\n\t\tthrow new Error('Invalid RGB color format');\n\t}\n\n\tpublic static validCssRgb(str: string): boolean {\n\t\treturn this.rgbEx.test(str) || this.rgbaEx.test(str);\n\t}\n\n\tpublic static fromCssRgb(str: string): RGBAColor {\n\t\tif (!this.validCssRgb(str)) throw new Error('Invalid RGB color format');\n\t\tconst rgbHead = str.slice(0, -1);\n\t\tconst parentesisPos = rgbHead.indexOf('(');\n\t\tconst rbgTail = rgbHead.slice(parentesisPos + 1);\n\t\tconst elements = rbgTail.split(',').map(x => parseFloat(x.trim()));\n\t\treturn new RGBAColor(\n\t\t\telements[0],\n\t\t\telements[1],\n\t\t\telements[2],\n\t\t\telements.length === 4 ? elements[3] : 1\n\t\t);\n\t}\n\n\tpublic static validHex(str: string): boolean {\n\t\treturn this.hexShortEx.test(str) || this.hexLongEx.test(str);\n\t}\n\n\tpublic static fromHex(str: string): RGBAColor {\n\t\tif (!this.validHex(str)) throw new Error('Invalid Hex color format');\n\t\tconst hexTail = str.slice(1);\n\t\tif (hexTail.length === 3) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 4) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\tparseInt(hexTail[3] + hexTail[3], 16) / 255\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 6) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 8) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\tparseInt(hexTail[6] + hexTail[7], 16) / 255\n\t\t\t);\n\t\t}\n\t\tthrow new Error('Invalid Hex color format length');\n\t}\n\n\tprivate static rgbEx = /^rgb\\((\\d*?)\\,(\\d*?)\\,(\\d*?)\\)$/i;\n\tprivate static rgbaEx = /^rgba\\((\\d{1,3})\\,(\\d{1,3})\\,(\\d{1,3})\\,([\\d\\.]+)\\)$/i;\n\tprivate static hexShortEx = /^\\#[0-9A-Z]{3,4}$/i;\n\tprivate static hexLongEx = /^\\#[0-9A-Z]{6,8}$/i;\n\n\tpublic constructor(\n\t\tpublic readonly r: number,\n\t\tpublic readonly g: number,\n\t\tpublic readonly b: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a > 1) {\n\t\t\treturn `rgb(${this.r},${this.g},${this.b})`;\n\t\t}\n\t\treturn `rgba(${this.r},${this.g},${this.b},${this.a})`;\n\t}\n\n\tpublic toHex(): string {\n\t\treturn `#${Math.round(this.r)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.g)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.b)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.a * 255)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}`;\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\treturn this;\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\tlet { r, g, b } = this;\n\t\tconst { a } = this;\n\t\t(r /= 255), (g /= 255), (b /= 255);\n\t\tconst max = Math.max(r, g, b);\n\t\tconst min = Math.min(r, g, b);\n\t\tlet h: number;\n\t\tlet s: number;\n\t\tconst l: number = (max + min) / 2;\n\n\t\tif (max === min) {\n\t\t\th = s = 0; // achromatic\n\t\t} else {\n\t\t\tconst d = max - min;\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\t\t\tswitch (max) {\n\t\t\t\tcase r:\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase g:\n\t\t\t\t\th = (b - r) / d + 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase b:\n\t\t\t\t\th = (r - g) / d + 4;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\th! /= 6;\n\t\t}\n\n\t\treturn new HSLAColor(h!, s, l, a);\n\t}\n\n\tpublic get luminance(): number {\n\t\treturn Math.sqrt(\n\t\t\tMath.pow(0.299 * (this.r / 255), 2) +\n\t\t\t\tMath.pow(0.587 * (this.g / 255), 2) +\n\t\t\t\tMath.pow(0.114 * (this.b / 255), 2)\n\t\t);\n\t}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ slider: true, vertical: _vm.vertical },on:{\"keydown\":function($event){$event.stopPropagation();}}},[_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))]),_c('div',[_c('svg',{ref:\"svg\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 271 24\"},on:{\"mousedown\":_vm.enterSlide,\"touchstart\":_vm.enterSlide,\"mousemove\":_vm.moveSlide,\"touchmove\":_vm.moveSlide,\"mouseup\":_vm.exitSlide,\"touchend\":_vm.exitSlide}},[_c('defs',[_c('linearGradient',{attrs:{\"id\":(\"gradient\" + _vm._uid),\"x1\":\"0%\",\"y1\":\"0%\",\"x2\":\"100%\",\"y2\":\"0%\"}},_vm._l((_vm.gradientStops),function(color,idx){return _c('stop',{key:idx,style:('stop-color:' + color),attrs:{\"offset\":idx / (_vm.gradientStops.length - 1) * 100 + '%'}})}),1)],1),_c('g',{attrs:{\"stroke\":\"#ffbde1\"}},[_c('path',{attrs:{\"d\":\"M7 0H262V24H7z\",\"stroke-width\":\"2\",\"paint-order\":\"fill stroke markers\",\"fill\":(\"url(#gradient\" + _vm._uid + \")\")}}),_c('path',{attrs:{\"d\":_vm.pointerPath,\"stroke-width\":\"2\",\"fill\":\"#000000\"}})])])]),_c('input',{staticClass:\"sliderInput\",attrs:{\"id\":_vm._uid,\"min\":\"0\",\"max\":_vm.maxValue,\"type\":\"number\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.$emit('input', parseFloat($event.target.value))}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { RGBAColor } from '../../../../util/colors/rgb';\r\nimport { IColor } from '../../../../util/colors/color';\r\nimport { HSLAColor } from '../../../../util/colors/hsl';\r\n\r\nconst sliderLength = 255;\r\nconst sliderOffset = 8;\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class Slider extends Vue {\r\n\t@Prop({ type: String }) private label!: string | undefined;\r\n\t@Prop({}) private gradientStops!: string[];\r\n\t@Prop({ type: Number }) private value!: number;\r\n\t@Prop({ type: Number }) private maxValue!: number;\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\tprivate slideActive = false;\r\n\r\n\tprivate get pointerPath(): string {\r\n\t\tconst val = (this.value / this.maxValue) * sliderLength;\r\n\t\t// tslint:disable-next-line: no-magic-numbers\r\n\t\treturn `M${val} 0L${val + 14} 0L${val + 7} 12Z`;\r\n\t}\r\n\r\n\tprivate enterSlide(event: MouseEvent | TouchEvent) {\r\n\t\tthis.slideActive = true;\r\n\t\tthis.moveSlide(event);\r\n\t}\r\n\r\n\tprivate moveSlide(event: MouseEvent | TouchEvent) {\r\n\t\tif (!this.slideActive) return;\r\n\t\tconst svg = this.$refs.svg as HTMLElement;\r\n\t\tif (!svg.contains(event.target as Node) && event.target !== svg) return;\r\n\t\tif (event instanceof MouseEvent && event.which !== 1) {\r\n\t\t\tthis.slideActive = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst bounding = svg.getBoundingClientRect();\r\n\t\tconst scale = bounding.width / (sliderOffset + sliderLength + sliderOffset);\r\n\t\tconst x =\r\n\t\t\t(event instanceof MouseEvent ? event.clientX : event.touches[0].clientX) -\r\n\t\t\tbounding.x;\r\n\t\tconst scaledX = x / scale;\r\n\t\tevent.preventDefault();\r\n\t\tconst value =\r\n\t\t\t(Math.max(Math.min(scaledX - sliderOffset, sliderLength), 0) /\r\n\t\t\t\tsliderLength) *\r\n\t\t\tthis.maxValue;\r\n\t\tthis.$emit('input', value);\r\n\t}\r\n\r\n\tprivate exitSlide() {\r\n\t\tthis.slideActive = false;\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./slider.vue?vue&type=template&id=1a9b5de0&scoped=true&\"\nimport script from \"./slider.vue?vue&type=script&lang=ts&\"\nexport * from \"./slider.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./slider.vue?vue&type=style&index=0&id=1a9b5de0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a9b5de0\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { IColor } from '@/util/colors/color';\r\nimport { RGBAColor } from '@/util/colors/rgb';\r\nimport { HSLAColor } from '@/util/colors/hsl';\r\nimport Slider from './slider.vue';\r\n\r\n// tslint:disable: no-magic-numbers\r\n\r\n@Component({\r\n\tcomponents: { Slider },\r\n})\r\nexport default class SliderGroup extends Vue {\r\n\t@Prop({ type: String, validator: val => val.match(/^#[0-9a-f]{6,8}$/i) })\r\n\tprivate value!: string;\r\n\t@Prop({}) private mode!: 'hsla' | 'rgba';\r\n\t@Prop({ type: Boolean }) private relative!: boolean;\r\n\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\tprivate lastRGBEmit: string | null = null;\r\n\tprivate v1: number = 0;\r\n\tprivate v2: number = 0;\r\n\tprivate v3: number = 0;\r\n\tprivate a: number = 0;\r\n\r\n\tprivate created() {\r\n\t\tthis.initValues();\r\n\t}\r\n\r\n\t@Watch('value')\r\n\tprivate valueChanged() {\r\n\t\tif (this.value === this.lastRGBEmit) return;\r\n\t\tthis.initValues();\r\n\t}\r\n\r\n\t@Watch('v1')\r\n\t@Watch('v2')\r\n\t@Watch('v3')\r\n\t@Watch('a')\r\n\tprivate updateValue() {\r\n\t\tlet newColor: IColor;\r\n\t\tif (this.mode === 'rgba') {\r\n\t\t\tnewColor = new RGBAColor(this.v1, this.v2, this.v3, this.a / 255);\r\n\t\t} else {\r\n\t\t\tnewColor = new HSLAColor(\r\n\t\t\t\tthis.v1 / 360,\r\n\t\t\t\tthis.v2 / 100,\r\n\t\t\t\tthis.v3 / 100,\r\n\t\t\t\tthis.a / 255\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst rgbColor = newColor.toRgb().toHex();\r\n\t\tif (this.lastRGBEmit === rgbColor) return;\r\n\t\tif (rgbColor.length !== 9) {\r\n\t\t\tthrow new Error(`Invalid color code: ${rgbColor}`);\r\n\t\t}\r\n\t\tthis.lastRGBEmit = rgbColor;\r\n\t\tconsole.log('setting rgb', rgbColor);\r\n\t\tthis.$emit('input', rgbColor);\r\n\t}\r\n\r\n\t@Watch('mode')\r\n\tprivate initValues() {\r\n\t\tconst color = RGBAColor.fromHex(this.value);\r\n\t\tthis.lastRGBEmit = color.toHex();\r\n\t\tthis.a = color.a * 255;\r\n\t\tif (this.mode === 'hsla') {\r\n\t\t\tconst hslColor = color.toHSL();\r\n\t\t\tthis.v1 = hslColor.h * 360;\r\n\t\t\tthis.v2 = hslColor.s * 100;\r\n\t\t\tthis.v3 = hslColor.l * 100;\r\n\t\t} else {\r\n\t\t\tthis.v1 = color.r;\r\n\t\t\tthis.v2 = color.g;\r\n\t\t\tthis.v3 = color.b;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate get maxValue1(): number {\r\n\t\tif (this.mode === 'rgba') return 255;\r\n\t\treturn 360;\r\n\t}\r\n\r\n\tprivate get label1(): string {\r\n\t\tif (this.mode === 'rgba') return 'Red';\r\n\t\treturn 'Hue';\r\n\t}\r\n\r\n\tprivate get stops1(): string[] {\r\n\t\tconst color = RGBAColor.fromHex(this.value);\r\n\t\tlet stops: IColor[] = [];\r\n\t\tif (this.mode === 'rgba') {\r\n\t\t\tconst g = this.relative ? this.v2 : 0;\r\n\t\t\tconst b = this.relative ? this.v3 : 0;\r\n\t\t\tstops = [new RGBAColor(0, g, b, 1), new RGBAColor(255, g, b, 1)];\r\n\t\t} else {\r\n\t\t\tconst s = this.relative ? this.v2 / 100 : 1;\r\n\t\t\tconst l = this.relative ? this.v3 / 100 : 0.5;\r\n\t\t\tstops = this.eightsStops(i => new HSLAColor(i, s, l, 1));\r\n\t\t}\r\n\t\treturn stops.map(stop => stop.toRgb().toCss());\r\n\t}\r\n\r\n\tprivate get maxValue2(): number {\r\n\t\tif (this.mode === 'rgba') return 255;\r\n\t\treturn 100;\r\n\t}\r\n\r\n\tprivate get label2(): string {\r\n\t\tif (this.mode === 'rgba') return 'Green';\r\n\t\treturn 'Saturation';\r\n\t}\r\n\r\n\tprivate get stops2(): string[] {\r\n\t\tconst color = RGBAColor.fromHex(this.value);\r\n\t\tlet stops: IColor[] = [];\r\n\t\tif (this.mode === 'rgba') {\r\n\t\t\tconst r = this.relative ? this.v1 : 0;\r\n\t\t\tconst b = this.relative ? this.v3 : 0;\r\n\t\t\tstops = [new RGBAColor(r, 0, b, 1), new RGBAColor(r, 255, b, 1)];\r\n\t\t} else {\r\n\t\t\tconst h = this.relative ? this.v1 / 360 : 0;\r\n\t\t\tconst l = this.relative ? this.v3 / 100 : 0.5;\r\n\t\t\tstops = this.eightsStops(i => new HSLAColor(h, i, l, 1));\r\n\t\t}\r\n\t\treturn stops.map(stop => stop.toRgb().toCss());\r\n\t}\r\n\r\n\tprivate get maxValue3(): number {\r\n\t\tif (this.mode === 'rgba') return 255;\r\n\t\treturn 100;\r\n\t}\r\n\r\n\tprivate get label3(): string {\r\n\t\tif (this.mode === 'rgba') return 'Blue';\r\n\t\treturn 'Luminosity';\r\n\t}\r\n\r\n\tprivate get stops3(): string[] {\r\n\t\tconst color = RGBAColor.fromHex(this.value);\r\n\t\tlet stops: IColor[] = [];\r\n\t\tif (this.mode === 'rgba') {\r\n\t\t\tconst r = this.relative ? this.v1 : 0;\r\n\t\t\tconst g = this.relative ? this.v2 : 0;\r\n\t\t\tstops = [new RGBAColor(r, g, 0, 1), new RGBAColor(r, g, 255, 1)];\r\n\t\t} else {\r\n\t\t\tconst h = this.relative ? this.v1 / 360 : 0;\r\n\t\t\tconst s = this.relative ? this.v2 / 100 : 0.5;\r\n\t\t\tstops = this.eightsStops(i => new HSLAColor(h, s, i, 1));\r\n\t\t}\r\n\t\treturn stops.map(stop => stop.toRgb().toCss());\r\n\t}\r\n\r\n\tprivate get stopsAlpha(): string[] {\r\n\t\tconst color = RGBAColor.fromHex(this.value);\r\n\t\treturn [\r\n\t\t\tnew RGBAColor(color.r, color.g, color.b, 0).toCss(),\r\n\t\t\tnew RGBAColor(color.r, color.g, color.b, 1).toCss(),\r\n\t\t];\r\n\t}\r\n\r\n\tprivate eightsStops(gen: (i: number) => IColor): IColor[] {\r\n\t\tconst stops: IColor[] = [];\r\n\t\tfor (let i = 0; i <= 8; ++i) {\r\n\t\t\tstops.push(gen(i / 8));\r\n\t\t}\r\n\t\treturn stops;\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sliderGroup.vue?vue&type=template&id=672f504f&scoped=true&\"\nimport script from \"./sliderGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./sliderGroup.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sliderGroup.vue?vue&type=style&index=0&id=672f504f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"672f504f\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport {\r\n\tisWebPSupported,\r\n\tregisterAsset,\r\n\tregisterAssetWithURL,\r\n} from '@/asset-manager';\r\nimport environment from '@/environments/environment';\r\nimport {\r\n\tStyleComponent,\r\n\tPose,\r\n\tCharacter,\r\n\tColor,\r\n\tContentPack,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\r\nimport {\r\n\tgetPose,\r\n\tgetDataG,\r\n\tISeekPoseAction,\r\n\tISetPosePositionMutation,\r\n\tISetPartAction,\r\n\tgetData,\r\n\tICharacter,\r\n} from '@/store/objectTypes/characters';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport { State } from 'vuex-class-decorator';\r\nimport SliderGroup from './sliderGroup.vue';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { RGBAColor } from '@/util/colors/rgb';\r\n\r\nconst generatedPackId = 'dddg.generated.colors';\r\n\r\n@Component({\r\n\tcomponents: {\r\n\t\tSliderGroup,\r\n\t},\r\n})\r\nexport default class PartsPanel extends Vue {\r\n\tpublic $store!: Store<IRootState>;\r\n\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\t@Prop({ required: true, type: String }) private readonly value!: string;\r\n\t@Prop({ type: String, default: '' }) private readonly title!: string;\r\n\r\n\tprivate vuexHistory!: IHistorySupport;\r\n\r\n\tprivate mode: string = 'hsla';\r\n\tprivate relative: boolean = true;\r\n\r\n\tprivate get swatches(): Color[] {\r\n\t\treturn this.$store.state.content.current.colors;\r\n\t}\r\n\r\n\tprivate get color(): string {\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tprivate set color(newColor: string) {\r\n\t\tthis.$emit('input', newColor);\r\n\t}\r\n\r\n\tprivate updateHex(event: Event) {\r\n\t\tconst hex = (event.target as HTMLInputElement).value;\r\n\t\t// tslint:disable-next-line: no-magic-numbers\r\n\t\tif (RGBAColor.validHex(hex) && (hex.length === 7 || hex.length === 9)) {\r\n\t\t\tconsole.log('setting updateHex', hex);\r\n\t\t\tthis.$emit('input', hex);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addSwatch() {\r\n\t\tif (this.swatches.find(swatch => swatch.color === this.color)) return;\r\n\r\n\t\tconst existingPack = this.$store.state.content.contentPacks.find(\r\n\t\t\tpack => pack.packId === 'generatedPackId'\r\n\t\t) || {\r\n\t\t\tpackId: generatedPackId,\r\n\t\t\tpackCredits: [''],\r\n\t\t\tdependencies: [],\r\n\t\t\tcharacters: [],\r\n\t\t\tfonts: [],\r\n\t\t\tbackgrounds: [],\r\n\t\t\tsprites: [],\r\n\t\t\tpoemStyles: [],\r\n\t\t\tpoemBackgrounds: [],\r\n\t\t\tcolors: [],\r\n\t\t};\r\n\r\n\t\tconst newPack: ContentPack<IAsset> = {\r\n\t\t\t...existingPack,\r\n\t\t\tcolors: [\r\n\t\t\t\t...existingPack.colors,\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: this.color,\r\n\t\t\t\t\tcolor: this.color,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\r\n\t\t\t\tcontentPack: newPack,\r\n\t\t\t\tprocessed: true,\r\n\t\t\t} as ReplaceContentPackAction);\r\n\t\t});\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./color.vue?vue&type=template&id=7798ab74&scoped=true&\"\nimport script from \"./color.vue?vue&type=script&lang=ts&\"\nexport * from \"./color.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./color.vue?vue&type=style&index=0&id=7798ab74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7798ab74\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.colorSelector)?_c('color',{on:{\"leave\":_vm.applyColor},model:{value:(_vm.selectedColor),callback:function ($$v) {_vm.selectedColor=$$v},expression:\"selectedColor\"}}):_c('div',{class:{ 'text-subpanel': true, vertical: _vm.vertical }},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"column ok-col\"},[_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"OK\")])]),_c('div',{staticClass:\"column\"},[_c('textarea',{ref:\"textArea\",domProps:{\"value\":_vm.value},on:{\"input\":_vm.onValueChanged,\"keydown\":function($event){$event.stopPropagation();},\"keypress\":function($event){$event.stopPropagation();}}})]),(_vm.error)?_c('div',{staticClass:\"column error-col\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\\\\\')}}},[_vm._v(\"Insert \\\\\")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\{')}}},[_vm._v(\"Insert {\")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\}')}}},[_vm._v(\"Insert }\")])]),_c('p',{staticClass:\"hint-col\"},[_vm._v(\"Apply style to selected text:\")]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",staticStyle:{\"font-weight\":\"bold\"},on:{\"click\":function($event){return _vm.insertCommand('b')}}},[_vm._v(\" Bold \")]),_c('button',{staticClass:\"style-button\",staticStyle:{\"font-style\":\"italic\"},on:{\"click\":function($event){return _vm.insertCommand('i')}}},[_vm._v(\" Italics \")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertCommand('plain')}}},[_vm._v(\" Plain \")]),_c('button',{staticClass:\"style-button edited-style\",on:{\"click\":function($event){return _vm.insertCommand('edited')}}},[_vm._v(\" Edited \")]),_c('button',{staticClass:\"style-button\",staticStyle:{\"letter-spacing\":\"5px\"},on:{\"click\":function($event){return _vm.insertCommand('k', 2)}}},[_vm._v(\" Kerning \")])]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertCommand('alpha', 0.5)}}},[_vm._v(\" Alpha \")])]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",staticStyle:{\"font-size\":\"20px\"},on:{\"click\":function($event){return _vm.insertCommand('size', 12)}}},[_vm._v(\" Font size \")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedFont),expression:\"selectedFont\"}],staticClass:\"style-button\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedFont=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Font\")]),_c('option',{staticStyle:{\"font-family\":\"aller\"},attrs:{\"value\":\"aller\"}},[_vm._v(\"Aller (Textbox)\")]),_c('option',{staticStyle:{\"font-family\":\"riffic\"},attrs:{\"value\":\"riffic\"}},[_vm._v(\"Riffic (Bold text)\")]),_c('option',{staticStyle:{\"font-family\":\"hashtag\"},attrs:{\"value\":\"hashtag\"}},[_vm._v(\"Hashtag (Sayori)\")]),_c('option',{staticStyle:{\"font-family\":\"ammy_handwriting\"},attrs:{\"value\":\"ammy_handwriting\"}},[_vm._v(\"Ammy's Handwriting (Natsuki)\")]),_c('option',{staticStyle:{\"font-family\":\"journal\"},attrs:{\"value\":\"journal\"}},[_vm._v(\"Journal (Monika)\")]),_c('option',{staticStyle:{\"font-family\":\"jp_hand_slanted\"},attrs:{\"value\":\"jp_hand_slanted\"}},[_vm._v(\"JP Hand Slanted (Yuri)\")]),_c('option',{staticStyle:{\"font-family\":\"damagrafik_script\"},attrs:{\"value\":\"damagrafik_script\"}},[_vm._v(\"Damagrafik (Yuri, Act 2)\")]),_c('option',{staticStyle:{\"font-family\":\"as_i_lay_dying\"},attrs:{\"value\":\"as_i_lay_dying\"}},[_vm._v(\"As I Lay Dying (Yuri, Act Unused)\")]),_c('option',{staticStyle:{\"font-family\":\"halogen\"},attrs:{\"value\":\"halogen\"}},[_vm._v(\"Halogen (MC)\")])]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.selectColor('text')}}},[_vm._v(\" Text color \")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.selectColor('outline')}}},[_vm._v(\" Outline color \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const aroundContextSize = 5;\r\n\r\nexport class StringWalker {\r\n\tprivate i: number = 0;\r\n\tpublic constructor(private readonly str: string) {}\r\n\r\n\tpublic get pos(): number {\r\n\t\treturn this.i;\r\n\t}\r\n\r\n\tpublic current(): string {\r\n\t\treturn this.str[this.i];\r\n\t}\r\n\r\n\tpublic get around(): string {\r\n\t\treturn this.str.slice(\r\n\t\t\tMath.max(0, this.i - aroundContextSize),\r\n\t\t\tthis.i + aroundContextSize\r\n\t\t);\r\n\t}\r\n\r\n\tpublic get ahead(): string {\r\n\t\treturn this.str[this.i + 1];\r\n\t}\r\n\r\n\tpublic get behind(): string {\r\n\t\treturn this.str[this.i + 1];\r\n\t}\r\n\r\n\tpublic next(): string {\r\n\t\t++this.i;\r\n\t\treturn this.current();\r\n\t}\r\n}\r\n","import { StringWalker } from './string-walker';\r\n\r\ninterface ITextToken {\r\n\tcontent: string;\r\n\tpos: number;\r\n\ttype: 'text';\r\n}\r\nexport interface ICommandToken {\r\n\tcommandName: string;\r\n\targument: string;\r\n\tpos: number;\r\n\ttype: 'command';\r\n}\r\ninterface ICommandCloseToken {\r\n\tcommandName: string;\r\n\tpos: number;\r\n\ttype: 'commandClose';\r\n}\r\ninterface INewlineToken {\r\n\ttype: 'newline';\r\n\tpos: number;\r\n}\r\n\r\nexport type Token =\r\n\t| ITextToken\r\n\t| ICommandToken\r\n\t| ICommandCloseToken\r\n\t| INewlineToken;\r\n\r\nexport function tokenize(str: string): Token[] {\r\n\tconst tokens: Token[] = [];\r\n\tconst stringWalker = new StringWalker(str);\r\n\tlet currentTokenState: TokenizerState = tokenStateNormal;\r\n\twhile (currentTokenState !== tokenStateEnd) {\r\n\t\tcurrentTokenState = currentTokenState(tokens, stringWalker);\r\n\t}\r\n\treturn tokens;\r\n}\r\n\r\ntype TokenizerState = (\r\n\tcontents: Token[],\r\n\twalker: StringWalker\r\n) => TokenizerState;\r\n\r\nfunction tokenStateNormal(\r\n\tcontents: Token[],\r\n\twalker: StringWalker\r\n): TokenizerState {\r\n\tif (walker.current() === undefined) return tokenStateEnd;\r\n\tif (walker.current() === '{') return tokenStateCommand;\r\n\tif (walker.current() === '\\n') return tokenStateNewLine;\r\n\treturn tokenText;\r\n}\r\n\r\nfunction tokenStateEnd(): TokenizerState {\r\n\treturn tokenStateEnd;\r\n}\r\n\r\nfunction tokenText(contents: Token[], walker: StringWalker): TokenizerState {\r\n\tconst { pos } = walker;\r\n\tlet textContent = '';\r\n\tlet escape = false;\r\n\tlet nextState: TokenizerState;\r\n\twhile (true) {\r\n\t\tif (walker.current() === undefined) {\r\n\t\t\tnextState = tokenStateEnd;\r\n\t\t\tbreak;\r\n\t\t} else if (escape) {\r\n\t\t\ttextContent += walker.current();\r\n\t\t\tescape = false;\r\n\t\t} else if (walker.current() === '\\\\') {\r\n\t\t\tescape = true;\r\n\t\t} else if (walker.current() === '{' || walker.current() === '\\n') {\r\n\t\t\tnextState = tokenStateNormal;\r\n\t\t\tbreak;\r\n\t\t} else {\r\n\t\t\ttextContent += walker.current();\r\n\t\t}\r\n\t\twalker.next();\r\n\t}\r\n\tcontents.push({\r\n\t\ttype: 'text',\r\n\t\tpos,\r\n\t\tcontent: textContent,\r\n\t});\r\n\treturn nextState;\r\n}\r\n\r\nfunction error(walker: StringWalker, msg: string): never {\r\n\tthrow new Error(\r\n\t\t`Error at position ${walker.pos}: (around: ${walker.around}) ${msg}`\r\n\t);\r\n}\r\n\r\nfunction tokenStateCommand(\r\n\tcontents: Token[],\r\n\twalker: StringWalker\r\n): TokenizerState {\r\n\tconst { pos } = walker;\r\n\tif (walker.current() !== '{') {\r\n\t\tthrow new Error('Parser error: Command does not start with {');\r\n\t}\r\n\tconst closing = walker.next() === '/';\r\n\tif (closing) {\r\n\t\twalker.next();\r\n\t}\r\n\tlet commandName = '';\r\n\tlet argument = '';\r\n\tlet argumentsState = false;\r\n\r\n\twhile (true) {\r\n\t\tif (walker.current() === undefined) {\r\n\t\t\terror(walker, 'Unexpected end of text inside a command');\r\n\t\t}\r\n\t\tif (walker.current() === '}') {\r\n\t\t\tbreak;\r\n\t\t} else if (!argumentsState) {\r\n\t\t\tif (walker.current().match(/[a-z]/i)) {\r\n\t\t\t\tcommandName += walker.current();\r\n\t\t\t} else if (walker.current() === '=') {\r\n\t\t\t\tif (closing) {\r\n\t\t\t\t\terror(walker, 'Closing commands may not contain arguments');\r\n\t\t\t\t}\r\n\t\t\t\targumentsState = true;\r\n\t\t\t} else {\r\n\t\t\t\terror(walker, 'Unexpected character in command name.');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\targument += walker.current();\r\n\t\t}\r\n\t\twalker.next();\r\n\t}\r\n\twalker.next();\r\n\tif (closing) {\r\n\t\tcontents.push({\r\n\t\t\ttype: 'commandClose',\r\n\t\t\tcommandName,\r\n\t\t\tpos,\r\n\t\t});\r\n\t} else {\r\n\t\tcontents.push({\r\n\t\t\ttype: 'command',\r\n\t\t\tpos,\r\n\t\t\targument,\r\n\t\t\tcommandName,\r\n\t\t});\r\n\t}\r\n\treturn tokenStateNormal;\r\n}\r\n\r\nfunction tokenStateNewLine(\r\n\tcontents: Token[],\r\n\twalker: StringWalker\r\n): TokenizerState {\r\n\tcontents.push({ type: 'newline', pos: walker.pos });\r\n\twalker.next();\r\n\treturn tokenStateNormal;\r\n}\r\n","import { ITextStyle } from './textRenderer';\r\n\r\ntype Command = (style: ITextStyle, parameter?: string) => ITextStyle;\r\n\r\nexport default new Map<string, Command>([\r\n\tparamlessOp('i', style => ({ ...style, isItalic: true })),\r\n\tparamlessOp('b', style => ({ ...style, isBold: true })),\r\n\tparamlessOp('u', style => ({ ...style, isUnderlined: true })),\r\n\tparamlessOp('s', style => ({\r\n\t\t...style,\r\n\t\tisStrikethrough: true,\r\n\t})),\r\n\tparamlessOp('plain', style => ({\r\n\t\t...style,\r\n\t\tisStrikethrough: false,\r\n\t\tisUnderlined: false,\r\n\t\tisBold: false,\r\n\t\tisItalic: false,\r\n\t})),\r\n\tparamlessOp('edited', style => ({\r\n\t\t...style,\r\n\t\tfontName: 'verily',\r\n\t\tstrokeColor: '#000000',\r\n\t\tstrokeWidth: 20,\r\n\t\tletterSpacing: 8,\r\n\t})),\r\n\trelativeNumberOp('k', (style, relative, parameter) => ({\r\n\t\t...style,\r\n\t\tletterSpacing: relative ? style.letterSpacing + parameter : parameter,\r\n\t})),\r\n\trelativeNumberOp('size', (style, relative, parameter) => ({\r\n\t\t...style,\r\n\t\tfontSize: relative ? style.fontSize + parameter : parameter,\r\n\t})),\r\n\trelativeNumberOp('alpha', (style, relative, parameter) => ({\r\n\t\t...style,\r\n\t\talpha: relative ? style.alpha + parameter : parameter,\r\n\t})),\r\n\t[\r\n\t\t'font',\r\n\t\t(style, parameter?) => {\r\n\t\t\treturn { ...style, fontName: parameter! };\r\n\t\t},\r\n\t],\r\n\t[\r\n\t\t'color',\r\n\t\t(style, parameter?) => {\r\n\t\t\treturn { ...style, color: parameter! };\r\n\t\t},\r\n\t],\r\n\t[\r\n\t\t'outlinecolor',\r\n\t\t(style, parameter?) => {\r\n\t\t\treturn { ...style, strokeColor: parameter! };\r\n\t\t},\r\n\t],\r\n]);\r\n\r\nfunction paramlessOp(\r\n\tname: string,\r\n\top: (style: ITextStyle) => ITextStyle\r\n): [string, Command] {\r\n\treturn [\r\n\t\tname,\r\n\t\t(style: ITextStyle, parameter?: string) => {\r\n\t\t\tif (parameter) {\r\n\t\t\t\tthrow new Error(`Operator '${name}' does not take any arguments.`);\r\n\t\t\t}\r\n\t\t\treturn op(style);\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction numberOp(\r\n\tname: string,\r\n\top: (style: ITextStyle, param: number) => ITextStyle\r\n): [string, Command] {\r\n\treturn [\r\n\t\tname,\r\n\t\t(style: ITextStyle, parameter?: string) => {\r\n\t\t\tif (!parameter) throw new Error(`Operator '${name}' needs an argument.`);\r\n\t\t\tconst num = Number(parameter);\r\n\t\t\tif (isNaN(num)) {\r\n\t\t\t\tthrow new Error(`Operator '${name}' needs a numeric argument.`);\r\n\t\t\t}\r\n\t\t\treturn op(style, num);\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction relativeNumberOp(\r\n\tname: string,\r\n\top: (style: ITextStyle, relative: boolean, param: number) => ITextStyle\r\n): [string, Command] {\r\n\treturn [\r\n\t\tname,\r\n\t\t(style: ITextStyle, parameter?: string) => {\r\n\t\t\tif (!parameter) throw new Error(`Operator '${name}' needs an argument.`);\r\n\t\t\tconst relative = parameter[0] === '+' || parameter[0] === '-';\r\n\t\t\tconst num = Number(parameter);\r\n\t\t\tif (isNaN(num)) {\r\n\t\t\t\tthrow new Error(`Operator '${name}' needs a numeric argument.`);\r\n\t\t\t}\r\n\t\t\treturn op(style, relative, num);\r\n\t\t},\r\n\t];\r\n}\r\n","import { tokenize, Token, ICommandToken } from './tokenizer';\r\n\r\nimport textCommands from './textCommands';\r\n\r\nexport interface ITextStyle {\r\n\tfontName: string;\r\n\tfontSize: number;\r\n\tisBold: boolean;\r\n\tisUnderlined: boolean;\r\n\tisStrikethrough: boolean;\r\n\tisItalic: boolean;\r\n\tcolor: string;\r\n\tstrokeWidth: number;\r\n\tstrokeColor: string;\r\n\tletterSpacing: number;\r\n\tlineSpacing: number;\r\n\talpha: number;\r\n}\r\n\r\ninterface ITextRenderItem {\r\n\tx: number;\r\n\ty: number;\r\n\theight: number;\r\n\twidth: number;\r\n}\r\n\r\ninterface IDrawCharacterItem extends ITextRenderItem {\r\n\ttype: 'character';\r\n\tcharacter: string;\r\n\tstyle: ITextStyle;\r\n}\r\n\r\ninterface INewlineItem extends ITextRenderItem {\r\n\ttype: 'newline';\r\n}\r\n\r\ntype RenderItem = IDrawCharacterItem | INewlineItem;\r\n\r\n// const widthCache = new Map<ITextStyle, Map<string, number>>();\r\n// const heightCache = new Map<ITextStyle, number>();\r\n\r\nexport class TextRenderer {\r\n\tpublic static textCommands = textCommands;\r\n\tprivate renderParts: RenderItem[];\r\n\r\n\tpublic constructor(\r\n\t\tprivate readonly str: string,\r\n\t\tprivate readonly baseStyle: ITextStyle\r\n\t) {\r\n\t\tconst tokens = tokenize(str);\r\n\t\tthis.renderParts = this.getRenderParts(tokens, baseStyle);\r\n\t}\r\n\r\n\tpublic async loadFonts() {\r\n\t\tif (!('fonts' in document)) return;\r\n\t\tconst fonts = new Set<string>();\r\n\t\tlet currentStyle: ITextStyle | null = null;\r\n\t\tfor (const part of this.renderParts) {\r\n\t\t\tif (!('style' in part)) continue;\r\n\t\t\tif (part.style !== currentStyle) {\r\n\t\t\t\tcurrentStyle = part.style;\r\n\t\t\t\tif (currentStyle.fontName) {\r\n\t\t\t\t\tfonts.add(currentStyle.fontName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet neededToLoad = false;\r\n\t\tfor (const font of fonts) {\r\n\t\t\tconst doc = document as any;\r\n\t\t\tconst fontString = `8px ${font}`;\r\n\t\t\tif (!doc.fonts.check(fontString)) {\r\n\t\t\t\tneededToLoad = true;\r\n\t\t\t\tawait doc.fonts.load(fontString);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (neededToLoad) {\r\n\t\t\tconst tokens = tokenize(this.str);\r\n\t\t\tthis.renderParts = this.getRenderParts(tokens, this.baseStyle);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic render(ctx: CanvasRenderingContext2D): void {\r\n\t\tctx.save();\r\n\t\tlet currentStyle: ITextStyle | null = null;\r\n\t\tfor (const part of this.renderParts) {\r\n\t\t\tif (part.type === 'newline') continue;\r\n\t\t\tif (part.style !== currentStyle) {\r\n\t\t\t\tcurrentStyle = part.style;\r\n\t\t\t\tapplyTextStyleToCanvas(currentStyle, ctx);\r\n\t\t\t}\r\n\t\t\tif (currentStyle.strokeWidth > 0 && currentStyle.strokeColor > '') {\r\n\t\t\t\tctx.strokeText(part.character, part.x, part.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const part of this.renderParts) {\r\n\t\t\tif (part.type === 'newline') continue;\r\n\t\t\tif (part.style !== currentStyle) {\r\n\t\t\t\tcurrentStyle = part.style;\r\n\t\t\t\tapplyTextStyleToCanvas(currentStyle, ctx);\r\n\t\t\t}\r\n\t\t\tctx.fillText(part.character, part.x, part.y);\r\n\t\t}\r\n\t\tctx.restore();\r\n\t}\r\n\r\n\tpublic quote() {\r\n\t\tenum State {\r\n\t\t\tNone,\r\n\t\t\tExplictQuote,\r\n\t\t\tImplictQuote,\r\n\t\t\tStar,\r\n\t\t}\r\n\r\n\t\tlet lastChar = -1;\r\n\t\tlet state = State.None;\r\n\r\n\t\tfor (let i = 0; i < this.renderParts.length; ++i) {\r\n\t\t\tconst part = this.renderParts[i];\r\n\t\t\tif (part.type !== 'character') continue;\r\n\t\t\tswitch (state) {\r\n\t\t\t\tcase State.None:\r\n\t\t\t\t\tif (part.character.match(/\\s/)) continue;\r\n\t\t\t\t\tif (part.character === '\"') {\r\n\t\t\t\t\t\tstate = State.ExplictQuote;\r\n\t\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\t} else if (part.character === '*') {\r\n\t\t\t\t\t\tstate = State.Star;\r\n\t\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.renderParts.splice(i, 0, {\r\n\t\t\t\t\t\t\ttype: 'character',\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\tstyle: part.style,\r\n\t\t\t\t\t\t\tcharacter: '\"',\r\n\t\t\t\t\t\t\theight: part.height,\r\n\t\t\t\t\t\t\twidth: measureWidth(part.style, '\"'),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\t\tstate = State.ImplictQuote;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase State.ExplictQuote:\r\n\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\tif (part.character === '\"') {\r\n\t\t\t\t\t\tstate = State.None;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase State.ImplictQuote:\r\n\t\t\t\t\tif (part.character.match(/\\s/)) continue;\r\n\t\t\t\t\tif (part.character === '*') {\r\n\t\t\t\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\r\n\t\t\t\t\t\t\ttype: 'character',\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\tstyle: part.style,\r\n\t\t\t\t\t\t\tcharacter: '\"',\r\n\t\t\t\t\t\t\theight: part.height,\r\n\t\t\t\t\t\t\twidth: measureWidth(part.style, '\"'),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tstate = State.Star;\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase State.Star:\r\n\t\t\t\t\tif (part.character === '*') {\r\n\t\t\t\t\t\tstate = State.None;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastChar = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst lastPart = this.renderParts[lastChar] as IDrawCharacterItem;\r\n\t\tif (lastPart && state === State.Star) {\r\n\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\r\n\t\t\t\ttype: 'character',\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\tstyle: lastPart.style,\r\n\t\t\t\tcharacter: '*',\r\n\t\t\t\theight: lastPart.height,\r\n\t\t\t\twidth: measureWidth(lastPart.style, '\"'),\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (\r\n\t\t\tlastPart &&\r\n\t\t\t(state === State.ExplictQuote || state === State.ImplictQuote)\r\n\t\t) {\r\n\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\r\n\t\t\t\ttype: 'character',\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\tstyle: lastPart.style,\r\n\t\t\t\tcharacter: '\"',\r\n\t\t\t\theight: lastPart.height,\r\n\t\t\t\twidth: measureWidth(lastPart.style, '\"'),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic fixAlignment(\r\n\t\talignment: 'left' | 'center' | 'right',\r\n\t\txStart: number,\r\n\t\txEnd: number,\r\n\t\tyStart: number\r\n\t) {\r\n\t\tlet lineWidth = 0;\r\n\t\tlet currentLine: RenderItem[] = [];\r\n\r\n\t\tfunction fixLine() {\r\n\t\t\tlet x = xStart;\r\n\t\t\tif (alignment === 'center') {\r\n\t\t\t\tx = xStart + (xEnd - xStart) / 2 - lineWidth / 2;\r\n\t\t\t} else if (alignment === 'right') {\r\n\t\t\t\tx = xEnd - lineWidth;\r\n\t\t\t}\r\n\t\t\tfor (const item of currentLine) {\r\n\t\t\t\titem.x = x;\r\n\t\t\t\tx += item.width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet y = yStart;\r\n\t\tconst lineHeights = [];\r\n\t\tlet lineHeight = 0;\r\n\r\n\t\tfor (const item of this.renderParts) {\r\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\r\n\r\n\t\t\tif (item.type === 'newline') {\r\n\t\t\t\tlineHeights.push(lineHeight);\r\n\t\t\t\tlineHeight = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlineHeights.push(lineHeight);\r\n\r\n\t\tlet line = 0;\r\n\r\n\t\tfor (const item of this.renderParts) {\r\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\r\n\t\t\titem.y = y;\r\n\t\t\tcurrentLine.push(item);\r\n\t\t\tlineWidth += item.width;\r\n\r\n\t\t\tif (item.type === 'newline') {\r\n\t\t\t\tfixLine();\r\n\t\t\t\ty += lineHeights[++line] || 0;\r\n\t\t\t\tlineWidth = 0;\r\n\t\t\t\tlineHeight = 0;\r\n\t\t\t\tcurrentLine = [];\r\n\t\t\t} else if (item.type === 'character') {\r\n\t\t\t\tconst lastItem = currentLine[currentLine.length - 1];\r\n\t\t\t\tif (lastItem.type === 'character') {\r\n\t\t\t\t\tlineWidth += lastItem.style.letterSpacing;\r\n\t\t\t\t\tlastItem.width += lastItem.style.letterSpacing;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfixLine();\r\n\t}\r\n\r\n\tpublic getHeight() {\r\n\t\tlet lineHeight = 0;\r\n\t\tlet height = 0;\r\n\r\n\t\tfor (const item of this.renderParts) {\r\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\r\n\r\n\t\t\tif (item.type === 'newline') {\r\n\t\t\t\theight += lineHeight;\r\n\t\t\t\tlineHeight = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\theight += lineHeight;\r\n\r\n\t\treturn height;\r\n\t}\r\n\r\n\tpublic getWidth() {\r\n\t\tlet lineWidth = 0;\r\n\t\tlet maxLineWidth = 0;\r\n\t\tlet lastItemInLine: RenderItem | null = null;\r\n\r\n\t\tfor (const item of this.renderParts) {\r\n\t\t\tlineWidth += item.width;\r\n\r\n\t\t\tif (item.type === 'newline') {\r\n\t\t\t\tmaxLineWidth = Math.max(maxLineWidth, lineWidth);\r\n\t\t\t\tlineWidth = 0;\r\n\t\t\t\tlastItemInLine = null;\r\n\t\t\t} else if (item.type === 'character') {\r\n\t\t\t\tif (lastItemInLine && lastItemInLine.type === 'character') {\r\n\t\t\t\t\tlineWidth += lastItemInLine.style.letterSpacing;\r\n\t\t\t\t}\r\n\t\t\t\tlastItemInLine = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\tmaxLineWidth = Math.max(maxLineWidth, lineWidth);\r\n\t\treturn maxLineWidth;\r\n\t}\r\n\r\n\tprivate getRenderParts(tokens: Token[], baseStyle: ITextStyle): RenderItem[] {\r\n\t\tconst renderParts: RenderItem[] = [];\r\n\t\tconst styleStack: ITextStyle[] = [];\r\n\t\tconst tagStack: Array<ICommandToken | null> = [];\r\n\t\tlet currentStyleHeight: number = measureHeight(baseStyle);\r\n\t\tlet currentStyle = baseStyle;\r\n\t\tlet currentTag: ICommandToken | null = null;\r\n\t\tfor (const token of tokens) {\r\n\t\t\tswitch (token.type) {\r\n\t\t\t\tcase 'command':\r\n\t\t\t\t\tif (TextRenderer.textCommands.has(token.commandName)) {\r\n\t\t\t\t\t\tstyleStack.push(currentStyle);\r\n\t\t\t\t\t\ttagStack.push(currentTag);\r\n\t\t\t\t\t\tcurrentStyle = TextRenderer.textCommands.get(token.commandName)!(\r\n\t\t\t\t\t\t\tcurrentStyle,\r\n\t\t\t\t\t\t\ttoken.argument\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tcurrentStyleHeight = measureHeight(currentStyle);\r\n\t\t\t\t\t\tcurrentTag = token;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\t`There is no text command called '${token.commandName}' at position ${token.pos}.`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'commandClose':\r\n\t\t\t\t\tif (!currentTag) {\r\n\t\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\t`Unmatched closing command at position ${token.pos}. Closed '${token.commandName}', but no commands are currently open.`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (token.commandName !== currentTag.commandName) {\r\n\t\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\t`Unmatched closing command at position ${token.pos}. Closed '${token.commandName}', expected to close '${currentTag}' first. (Opened at position ${currentTag.pos})`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentTag = tagStack.pop()!;\r\n\t\t\t\t\tcurrentStyle = styleStack.pop()!;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'newline':\r\n\t\t\t\t\trenderParts.push({\r\n\t\t\t\t\t\theight: currentStyleHeight,\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\ttype: 'newline',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'text':\r\n\t\t\t\t\tfor (const character of token.content) {\r\n\t\t\t\t\t\trenderParts.push({\r\n\t\t\t\t\t\t\ttype: 'character',\r\n\t\t\t\t\t\t\tcharacter,\r\n\t\t\t\t\t\t\theight: currentStyleHeight,\r\n\t\t\t\t\t\t\twidth: measureWidth(currentStyle, character),\r\n\t\t\t\t\t\t\tstyle: currentStyle,\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn renderParts;\r\n\t}\r\n}\r\n\r\nconst tmpContext = document.createElement('canvas').getContext('2d')!;\r\nlet lastStyle: ITextStyle | null = null;\r\n\r\nfunction measureWidth(textStyle: ITextStyle, character: string): number {\r\n\tif (textStyle !== lastStyle) {\r\n\t\tapplyTextStyleToCanvas(textStyle, tmpContext);\r\n\t\tlastStyle = textStyle;\r\n\t}\r\n\treturn tmpContext.measureText(character).width;\r\n}\r\n\r\nconst heightCache = new Map<string, number>();\r\n\r\nfunction measureHeight(textStyle: ITextStyle): number {\r\n\tconst font = textStyle.fontSize + ' ' + textStyle.fontName;\r\n\tif (heightCache.has(font)) {\r\n\t\treturn heightCache.get(font)! * textStyle.lineSpacing;\r\n\t}\r\n\r\n\tconst text = document.createElement('span');\r\n\ttext.innerHTML = 'Hg';\r\n\ttext.style.fontFamily = textStyle.fontName;\r\n\ttext.style.fontSize = `${textStyle.fontSize}px`;\r\n\ttext.style.lineHeight = '1';\r\n\r\n\tconst div = document.createElement('div');\r\n\tdiv.style.opacity = '0';\r\n\tdiv.style.fontFamily = textStyle.fontName;\r\n\tdiv.style.fontSize = `${textStyle.fontSize}px`;\r\n\tdiv.style.lineHeight = '1';\r\n\tdiv.style.position = 'absolute';\r\n\tdiv.style.top = '0';\r\n\tdiv.style.left = '0';\r\n\tdiv.appendChild(text);\r\n\r\n\tdocument.body.appendChild(div);\r\n\r\n\ttry {\r\n\t\tconst height = div.offsetHeight;\r\n\t\theightCache.set(font, height);\r\n\t\treturn height * textStyle.lineSpacing;\r\n\t} finally {\r\n\t\tdiv.remove();\r\n\t}\r\n}\r\n\r\nfunction applyTextStyleToCanvas(\r\n\tstyle: ITextStyle,\r\n\tctx: CanvasRenderingContext2D\r\n) {\r\n\tctx.textAlign = 'left';\r\n\tctx.font =\r\n\t\t(style.isItalic ? 'italic ' : '') +\r\n\t\t(style.isBold ? 'bold ' : '') +\r\n\t\tstyle.fontSize +\r\n\t\t'px ' +\r\n\t\tstyle.fontName;\r\n\tctx.lineJoin = 'round';\r\n\r\n\tif (style.strokeWidth > 0 && style.strokeColor > '') {\r\n\t\tctx.strokeStyle = style.strokeColor;\r\n\t\tctx.lineWidth = style.strokeWidth;\r\n\t} else {\r\n\t\tctx.strokeStyle = '';\r\n\t\tctx.lineWidth = 0;\r\n\t}\r\n\r\n\tctx.globalAlpha = style.alpha || 0;\r\n\tctx.fillStyle = style.color;\r\n}\r\n","import { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth } from '@/constants/base';\n\n// tslint:disable: no-magic-numbers\nexport const TextBoxWidth = 816;\nexport const TextBoxCorruptedWidth = 900;\nexport const TextBoxHeight = 146;\nexport const TextBoxY = 568;\nexport const TextBoxKerning = 0;\nexport const TextBoxLineHeight = 29;\nexport const TextBoxCorruptedKerning = 8;\nexport const TextBoxTextXOffset = 38;\nexport const TextBoxTextYOffset = 50;\n\nexport const TextBoxTextCorruptedXOffset = 9;\nexport const TextBoxTextCorruptedYOffset = 9;\n\nexport const NameboxHeight = 39;\nexport const NameboxWidth = 168;\nexport const NameboxXOffset = 34;\nexport const NameboxTextYOffset = 29;\n\nexport const ControlsYBottomOffset = 12;\nexport const ControlsXHistoryOffset = -126;\nexport const ControlsXSkipOffset = -72;\nexport const ControlsXStuffOffset = -38;\n\nexport const ArrowXRightOffset = 30.75;\nexport const ArrowYBottomOffset = 26;\n\nexport const GlowRX = 426;\nexport const GlowRY = 58;\n\nexport const BaseTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n\nexport const NameboxTextStyle: ITextStyle = {\n\t...BaseTextStyle,\n\tfontName: 'riffic',\n\tfontSize: 24,\n\tstrokeColor: '#bb5599',\n\tstrokeWidth: 6,\n\tcolor: 'white',\n\tletterSpacing: 1,\n};\n\nexport const ControlsTextStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '13px aller',\n\tfill: {\n\t\tstyle: '#522',\n\t},\n};\n\nexport const ControlsTextDisabledStyle = {\n\t...ControlsTextStyle,\n\tfill: {\n\t\tstyle: '#a66',\n\t},\n};\n\nexport const TextBoxStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px aller',\n\toutline: {\n\t\tstyle: '#523140',\n\t\twidth: 4,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxCorruptedStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px verily',\n\toutline: {\n\t\tstyle: '#000',\n\t\twidth: 20,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxX = screenWidth / 2 - TextBoxWidth / 2; // 232\nexport const TextBoxCorruptedX = screenWidth / 2 - TextBoxCorruptedWidth / 2;\nexport const TextBoxTextX = TextBoxX + TextBoxTextXOffset;\nexport const TextBoxTextY = TextBoxY + TextBoxTextYOffset;\n\nexport const NameboxY = TextBoxY - NameboxHeight;\nexport const NameboxX = TextBoxX + NameboxXOffset;\nexport const NameboxTextX = NameboxX + NameboxWidth / 2;\nexport const NameboxTextY = NameboxY + NameboxTextYOffset;\n\nexport const ControlsXHistory = TextBoxX + ControlsXHistoryOffset;\nexport const ControlsXSkip = TextBoxX + ControlsXSkipOffset;\nexport const ControlsXStuff = TextBoxX + ControlsXStuffOffset;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport environment from '@/environments/environment';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { RGBAColor } from '@/util/colors/rgb';\r\nimport Color from '../color/color.vue';\r\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\r\nimport { NameboxTextStyle } from '@/constants/textBox';\r\n\r\n@Component({\r\n\tcomponents: { Color },\r\n})\r\nexport default class TextPanel extends Vue {\r\n\tpublic $store!: Store<IRootState>;\r\n\r\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\r\n\r\n\t@Prop({ required: true, type: String }) private readonly value!: string;\r\n\t@Prop({ type: String, default: '' }) private readonly title!: string;\r\n\r\n\tprivate colorSelector: '' | 'text' | 'outline' = '';\r\n\tprivate selectedFont: string = '';\r\n\tprivate selectedColor: string = '#000000';\r\n\tprivate rememberedStart: number = 0;\r\n\tprivate rememberedEnd: number = 0;\r\n\tprivate error: string = '';\r\n\r\n\t@Watch('selectedFont')\r\n\tprivate onSelectedFontChange() {\r\n\t\tif (this.selectedFont === '') return;\r\n\t\tconsole.log(this.selectedFont);\r\n\t\tthis.insertCommand('font', this.selectedFont);\r\n\t\tthis.selectedFont = '';\r\n\t}\r\n\r\n\tprivate onValueChanged() {\r\n\t\tconst val = (this.$refs.textArea as HTMLTextAreaElement).value;\r\n\t\ttry {\r\n\t\t\t// tslint:disable-next-line: no-unused-expression\r\n\t\t\tnew TextRenderer(val, NameboxTextStyle);\r\n\t\t\tthis.error = '';\r\n\t\t} catch (e) {\r\n\t\t\tthis.error = (e as Error).message;\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t\tthis.$emit('input', val);\r\n\t}\r\n\r\n\tprivate selectColor(colorSelector: '' | 'text' | 'outline') {\r\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\r\n\t\tthis.colorSelector = colorSelector;\r\n\t\tthis.rememberedStart = el.selectionStart;\r\n\t\tthis.rememberedEnd = el.selectionEnd;\r\n\t}\r\n\r\n\tprivate applyColor() {\r\n\t\tconst color = this.selectedColor;\r\n\t\tconst colorSelector = this.colorSelector;\r\n\t\tconst apply = () => {\r\n\t\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\r\n\t\t\tif (!el) {\r\n\t\t\t\tthis.$nextTick(apply);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tel.selectionStart = this.rememberedStart;\r\n\t\t\tel.selectionEnd = this.rememberedEnd;\r\n\t\t\tthis.insertCommand(\r\n\t\t\t\tcolorSelector === 'text' ? 'color' : 'outlinecolor',\r\n\t\t\t\tcolor\r\n\t\t\t);\r\n\t\t};\r\n\t\tthis.$nextTick(apply);\r\n\t\tthis.selectedColor = '#000000';\r\n\t\tthis.colorSelector = '';\r\n\t}\r\n\r\n\tprivate insertText(text: string) {\r\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\r\n\t\tconst val = el.value;\r\n\t\tconst selStart = el.selectionStart;\r\n\t\tconst selEnd = el.selectionEnd;\r\n\t\tel.value = val.slice(0, selStart) + text + val.slice(selEnd);\r\n\t\tel.selectionStart = el.selectionEnd = selStart + text.length;\r\n\t\tel.focus();\r\n\t\tthis.onValueChanged();\r\n\t}\r\n\r\n\tprivate insertCommand(command: string, arg?: any) {\r\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\r\n\t\tconst val = el.value;\r\n\t\tconst selStart = el.selectionStart;\r\n\t\tconst selEnd = el.selectionEnd;\r\n\t\tconst selectedText = val.slice(selStart, selEnd);\r\n\t\tconst before = val.slice(0, selStart);\r\n\t\tconst after = val.slice(selEnd);\r\n\t\tlet commandOpen = command;\r\n\t\tif (arg) {\r\n\t\t\tcommandOpen += '=' + arg;\r\n\t\t}\r\n\t\tel.value = `${before}{${commandOpen}}${selectedText}{/${command}}${after}`;\r\n\t\tel.selectionStart = selStart + commandOpen.length + 2;\r\n\t\tel.selectionEnd = el.selectionStart + selectedText.length;\r\n\t\tel.focus();\r\n\t\tthis.onValueChanged();\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./text.vue?vue&type=template&id=63d76104&scoped=true&\"\nimport script from \"./text.vue?vue&type=script&lang=ts&\"\nexport * from \"./text.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./text.vue?vue&type=style&index=0&id=63d76104&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63d76104\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch, Mixins } from 'vue-property-decorator';\nimport {\n\tITextBox,\n\tISetTextBoxControlsVisibleMutation,\n\tISetTextBoxControlsSkipMutation,\n\tISetTextBoxControlsContinueMutation,\n\tISetTextBoxTextMutation,\n\tISetTextBoxStyleAction,\n\tISetTextBoxCustomColorMutation,\n\tISetTextBoxTalkingDefaultMutation,\n\tISetTextBoxTalkingOtherMutation,\n\tISetTextBoxCustomControlsColorMutation,\n\tISetTextBoxNameboxColorMutation,\n\tISetTextBoxNameboxWidthMutation,\n\tISetTextBoxNameboxStrokeMutation,\n\tISetTextBoxDeriveCustomColorMutation,\n\tISplitTextbox,\n\tISetTextBoxAutoQuotingMutation,\n\tIResetTextboxBounds,\n} from '@/store/objectTypes/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { ISetObjectFlipMutation } from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport Color from '../subpanels/color/color.vue';\nimport TextEditor from '../subpanels/text/text.vue';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tColor,\n\t\tTextEditor,\n\t},\n})\nexport default class TextPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate readonly textEditor: '' | 'name' | 'body' = '';\n\n\tprivate readonly colorSelect:\n\t\t| ''\n\t\t| 'base'\n\t\t| 'controls'\n\t\t| 'namebox'\n\t\t| 'nameboxStroke' = '';\n\n\tprivate get textbox(): ITextBox {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'textBox') return undefined!;\n\t\treturn obj as ITextBox;\n\t}\n\n\tprivate get textEditorName(): string {\n\t\tif (this.textEditor === 'name') return 'Name';\n\t\tif (this.textEditor === 'body') return 'Dialog';\n\t\treturn '';\n\t}\n\n\tprivate get textEditorText(): string {\n\t\tif (this.textEditor === 'name') return this.textbox.talkingOther;\n\t\tif (this.textEditor === 'body') return this.dialog;\n\t\treturn '';\n\t}\n\n\tprivate set textEditorText(value: string) {\n\t\tif (this.textEditor === 'name') this.talkingOther = value;\n\t\telse if (this.textEditor === 'body') this.dialog = value;\n\t}\n\n\tprivate splitTextbox(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/splitTextbox', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t} as ISplitTextbox);\n\t\t});\n\t}\n\n\tprivate resetPosition(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/resetTextboxBounds', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t} as IResetTextboxBounds);\n\t\t});\n\t}\n\n\tprivate get talkingDefaults(): ISetTextBoxTalkingDefaultMutation['talkingDefault'] {\n\t\treturn this.textbox.talkingDefault;\n\t}\n\n\tprivate set talkingDefaults(\n\t\ttalkingDefault: ISetTextBoxTalkingDefaultMutation['talkingDefault']\n\t) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setTalkingDefault', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttalkingDefault,\n\t\t\t} as ISetTextBoxTalkingDefaultMutation);\n\t\t});\n\t}\n\n\tprivate get talkingOther(): string {\n\t\treturn this.textbox.talkingOther;\n\t}\n\n\tprivate set talkingOther(talkingOther: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setTalkingOther', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttalkingOther,\n\t\t\t} as ISetTextBoxTalkingOtherMutation);\n\t\t});\n\t}\n\n\tprivate get showControls(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set showControls(controls: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setControlsVisible', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontrols,\n\t\t\t} as ISetTextBoxControlsVisibleMutation);\n\t\t});\n\t}\n\n\tprivate get allowSkipping(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set allowSkipping(skip: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setSkipable', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tskip,\n\t\t\t} as ISetTextBoxControlsSkipMutation);\n\t\t});\n\t}\n\n\tprivate get autoQuoting(): boolean {\n\t\treturn this.textbox.autoQuoting;\n\t}\n\n\tprivate set autoQuoting(autoQuoting: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoQuoting', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tautoQuoting,\n\t\t\t} as ISetTextBoxAutoQuotingMutation);\n\t\t});\n\t}\n\n\tprivate get showContinueArrow(): boolean {\n\t\treturn this.textbox.continue;\n\t}\n\n\tprivate set showContinueArrow(value: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setContinueArrow', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontinue: value,\n\t\t\t} as ISetTextBoxControlsContinueMutation);\n\t\t});\n\t}\n\n\tprivate get dialog(): string {\n\t\treturn this.textbox.text;\n\t}\n\n\tprivate set dialog(text: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setText', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttext,\n\t\t\t} as ISetTextBoxTextMutation);\n\t\t});\n\t}\n\n\tprivate get flip(): boolean {\n\t\treturn this.textbox.flip;\n\t}\n\n\tprivate set flip(flip: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tflip,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get textBoxStyle(): ITextBox['style'] {\n\t\treturn this.textbox.style;\n\t}\n\n\tprivate set textBoxStyle(style: ITextBox['style']) {\n\t\tthis.$store.dispatch('objects/setStyle', {\n\t\t\tid: this.textbox.id,\n\t\t\tstyle,\n\t\t} as ISetTextBoxStyleAction);\n\t}\n\n\tprivate get deriveCustomColors(): boolean {\n\t\treturn this.textbox.deriveCustomColors;\n\t}\n\n\tprivate set deriveCustomColors(deriveCustomColors: boolean) {\n\t\tthis.$store.commit('objects/setDeriveCustomColors', {\n\t\t\tid: this.textbox.id,\n\t\t\tderiveCustomColors,\n\t\t} as ISetTextBoxDeriveCustomColorMutation);\n\t}\n\n\tprivate get customControlsColor(): string {\n\t\treturn this.textbox.customControlsColor;\n\t}\n\n\tprivate get customNameboxWidth(): number {\n\t\treturn this.textbox.customNameboxWidth;\n\t}\n\n\tprivate set customNameboxWidth(customNameboxWidth: number) {\n\t\tthis.$store.commit('objects/setNameboxWidth', {\n\t\t\tid: this.textbox.id,\n\t\t\tcustomNameboxWidth,\n\t\t} as ISetTextBoxNameboxWidthMutation);\n\t}\n\n\tprivate get colorName(): string {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn '';\n\t\t\tcase 'base':\n\t\t\t\treturn 'Base color';\n\t\t\tcase 'controls':\n\t\t\t\treturn 'Controls color';\n\t\t\tcase 'namebox':\n\t\t\t\treturn 'Namebox color';\n\t\t\tcase 'nameboxStroke':\n\t\t\t\treturn 'Namebox text stroke';\n\t\t}\n\t}\n\n\tprivate get color(): string {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn '#000000';\n\t\t\tcase 'base':\n\t\t\t\treturn this.textbox.customColor;\n\t\t\tcase 'controls':\n\t\t\t\treturn this.textbox.customControlsColor;\n\t\t\tcase 'namebox':\n\t\t\t\treturn this.textbox.customNameboxColor;\n\t\t\tcase 'nameboxStroke':\n\t\t\t\treturn this.textbox.customNameboxStroke;\n\t\t}\n\t}\n\n\tprivate set color(color: string) {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn;\n\t\t\tcase 'base':\n\t\t\t\tthis.$store.commit('objects/setCustomColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcolor,\n\t\t\t\t} as ISetTextBoxCustomColorMutation);\n\t\t\tcase 'controls':\n\t\t\t\tthis.$store.commit('objects/setControlsColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomControlsColor: color,\n\t\t\t\t} as ISetTextBoxCustomControlsColorMutation);\n\t\t\tcase 'namebox':\n\t\t\t\tthis.$store.commit('objects/setNameboxColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomNameboxColor: color,\n\t\t\t\t} as ISetTextBoxNameboxColorMutation);\n\t\t\tcase 'nameboxStroke':\n\t\t\t\tthis.$store.commit('objects/setNameboxStroke', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomNameboxStroke: color,\n\t\t\t\t} as ISetTextBoxNameboxStrokeMutation);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./textbox.vue?vue&type=template&id=136a06b9&scoped=true&\"\nimport script from \"./textbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./textbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./textbox.vue?vue&type=style&index=0&id=136a06b9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"136a06b9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Choice\")]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Button Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.button_text),callback:function ($$v) {_vm.button_text=$$v},expression:\"button_text\"}}):[_c('fieldset',{staticClass:\"buttons\"},[_c('legend',[_vm._v(\"Buttons:\")]),_c('div',{staticClass:\"list\"},_vm._l((_vm.buttons),function(button,btnIdx){return _c('div',{key:btnIdx,class:{ active: btnIdx === _vm.currentIdx },on:{\"click\":function($event){return _vm.select(btnIdx)}}},[_vm._v(_vm._s((button.text.trim() === '') ? '[Empty]' : button.text))])}),0)]),_c('fieldset',{staticClass:\"current_button\"},[_c('legend',[_vm._v(\"Current button:\")]),_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('label',{attrs:{\"for\":\"choice-button-input\"}},[_vm._v(\"Text\")])])]),_c('tr',[_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.button_text),expression:\"button_text\"}],attrs:{\"id\":\"choice-button-input\"},domProps:{\"value\":(_vm.button_text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.button_text=$event.target.value}}})]),_c('td',[_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"...\")])])])])]),_c('button',{on:{\"click\":_vm.addChoice}},[_vm._v(\"Add\")]),_c('button',{on:{\"click\":_vm.removeChoice}},[_vm._v(\"Remove\")]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport {\n\tIChoices,\n\tIRemoveChoiceAction,\n} from '../../../store/objectTypes/choices';\nimport {\n\tIChoice,\n\tIAddChoiceAction,\n\tISetChoiceTextAction,\n} from '../../../store/objectTypes/choices';\nimport { DeepReadonly } from '../../../util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class ChoicePanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate currentIdx: number = 0;\n\tprivate textEditor: boolean = false;\n\n\tprivate get sprite(): IChoices {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'choice') return undefined!;\n\t\treturn obj as IChoices;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get button_text() {\n\t\treturn this.sprite.choices[this.currentIdx].text;\n\t}\n\n\tprivate set button_text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setChoiceText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tchoiceIdx: this.currentIdx,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetChoiceTextAction);\n\t\t});\n\t}\n\n\tprivate select(idx: number): void {\n\t\tthis.currentIdx = idx;\n\t}\n\n\tprivate get buttons(): DeepReadonly<IChoice[]> {\n\t\treturn this.sprite.choices;\n\t}\n\n\tprivate addChoice(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/addChoice', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: '',\n\t\t\t} as IAddChoiceAction);\n\t\t});\n\t}\n\n\tprivate removeChoice(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/removeChoise', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tchoiceIdx: this.currentIdx,\n\t\t\t} as IRemoveChoiceAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./choice.vue?vue&type=template&id=251f5837&scoped=true&\"\nimport script from \"./choice.vue?vue&type=script&lang=ts&\"\nexport * from \"./choice.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./choice.vue?vue&type=style&index=0&id=251f5837&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"251f5837\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Help and Credits\")]),_c('a',{staticClass:\"btn\",attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/edave64/Doki-Doki-Dialog-Generator/blob/v1/docs/index.md\"}},[_vm._v(\"Help\")]),_c('a',{staticClass:\"btn\",attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/edave64/Doki-Doki-Dialog-Generator/\"}},[_vm._v(\"Fork me on GitHub\")]),_c('p',[_vm._v(\" All assets used are IP of Team Salvato and created by them, unless noted otherwise. \")]),_c('p',[_vm._v(\" Doki Doki Dialog Generator developed by EDave64 \"),_c('br'),_vm._v(\"Based on gemdude46's DDLC Shitpost generator \")]),_c('p',[_vm._v(\" Unused House Background by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.deviantart.com/fatelogic/art/VN-Background-Practice-295671161\"}},[_vm._v(\"Fatelogic\")])]),_c('p',[_vm._v(\" Aller Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.daltonmaag.com/library/aller\"}},[_vm._v(\"Dalton Maag Ltd\")])]),_c('p',[_vm._v(\" Riffic Bold Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.fontspring.com/fonts/inky-type/riffic\"}},[_vm._v(\"InkyType\")])]),_c('p',[_vm._v(\" Verily Serif Mono Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/verily-serif-mono.font\"}},[_vm._v(\"Stephen G. Hartke\")])]),_c('p',[_vm._v(\" F25 Bank Printer Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/f25-bank-printer.font\"}},[_vm._v(\"F25 Digital Typeface Design\")])]),_c('p',[_vm._v(\" Journal Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/journal.font\"}},[_vm._v(\"Fontourist\")])]),_c('p',[_vm._v(\" Hashtag Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/hashtag.font\"}},[_vm._v(\" TitanVex\")])]),_c('p',[_vm._v(\" JP Hand Slanted Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/jp-hand-slanted.font\"}},[_vm._v(\"Jonathan Paterson\")])]),_c('p',[_vm._v(\" As I Lay Dying Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/as-i-lay-dying.font\"}},[_vm._v(\"Moises Esqueda\")])]),_c('p',[_vm._v(\" Damagrafik Script Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/damagrafik-script.font\"}},[_vm._v(\"Davide Terenzi\")])]),_c('p',[_vm._v(\" Ammy's Handwriting Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/ammys-handwriting.font\"}},[_vm._v(\"Ammy K.\")])]),_c('p',[_vm._v(\" Halogen Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/halogen.font\"}},[_vm._v(\"JLH Fonts\")])]),_c('p',[_vm._v(\" MC Classic Sprite by Childish-N \"),_c('br'),_vm._v(\"MC Classic Chibi by GyleToTheRescue \")]),_c('p',[_vm._v(\" MC Sprite by Childish-N \"),_c('br'),_vm._v(\"MC Casual Sprite by SlightlySimple \"),_c('br'),_vm._v(\"MC Chibi by SlightlySimple \")]),_c('p',[_vm._v(\" MC Chad Sprite by Cylent-Nite \"),_c('br'),_vm._v(\"MC Chad Poses and expressions by SlightlySimple \"),_c('br'),_vm._v(\"MC Chad Poses and chibi by Meddy-sin \")]),_c('p',[_vm._v(\" FeMC Sprite by Meddy-sin \"),_c('br'),_vm._v(\"FeMC Casual Sprite by SlightlySimple \")]),_c('p',[_vm._v(\"Classic Amy Sprite by Meddy-sin\")]),_c('p',[_vm._v(\"Amy Sprite by Meddy-sin and SlightlySimple\")]),_c('p',[_vm._v(\"Special thanks to SlightlySimple for testing and technical help\")]),_c('p',[_vm._v(\"Atlas421 for suggestions and testing\")]),_c('p',[_vm._v(\"T-Rex Harris for suggestions and testing\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { PanelMixin } from './panelMixin';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Mixins(PanelMixin) {}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./credits.vue?vue&type=template&id=186d1345&scoped=true&\"\nimport script from \"./credits.vue?vue&type=script&lang=ts&\"\nexport * from \"./credits.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./credits.vue?vue&type=style&index=0&id=186d1345&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"186d1345\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\",on:{\"dragenter\":_vm.dragEnter,\"mouseleave\":function($event){return _vm.$refs.dt.hide()}}},[_c('drop-target',{ref:\"dt\",staticClass:\"drop-target\",on:{\"drop\":_vm.addImageFile}},[_vm._v(\"Drop here to add as a new background\")]),_c('h1',[_vm._v(\"Background\")]),(_vm.colorSelect)?_c('color',{on:{\"leave\":function($event){_vm.colorSelect = false}},model:{value:(_vm.bgColor),callback:function ($$v) {_vm.bgColor=$$v},expression:\"bgColor\"}}):[_c('background-settings',{on:{\"change-color\":function($event){_vm.colorSelect = true}}}),_vm._l((_vm.backgrounds),function(background){return _c('background-button',{key:background,attrs:{\"backgroundId\":background},on:{\"input\":function($event){return _vm.setBackground(background)}}})}),_c('div',{staticClass:\"btn upload-background\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\" Upload \"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})]),_c('button',{staticClass:\"upload-background\",on:{\"click\":_vm.addByUrl}},[_vm._v(\"Add by URL\")]),_c('button',{staticClass:\"upload-background\",attrs:{\"title\":\"Not yet implemented\"},on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Backgrounds')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ background: true, active: _vm.isActive },style:(_vm.style),attrs:{\"title\":_vm.title},on:{\"click\":function($event){return _vm.$emit('input', _vm.backgroundId)}}},[_vm._v(_vm._s(_vm.title))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { color } from '@/renderables/background';\nimport { isWebPSupported, getAAsset } from '@/asset-manager';\nimport { Background } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset, BackgroundLookup } from '@/store/content';\nimport { ErrorAsset } from '@/models/error-asset';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IPanel } from '@/store/panels';\n\n@Component({\n\tcomponents: {},\n})\nexport default class BackgroundButton extends Vue {\n\tpublic $store!: Store<IRootState>;\n\t@Prop({ required: true }) private readonly backgroundId!: string;\n\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate assets: Array<HTMLImageElement | ErrorAsset> = [];\n\n\tprivate get background(): Readonly<IPanel['background']> {\n\t\tconst currentPanel = this.$store.state.panels.currentPanel;\n\t\treturn this.$store.state.panels.panels[currentPanel].background;\n\t}\n\n\tprivate get bgData(): Background<IAsset> | null {\n\t\tconst backgrounds: BackgroundLookup = this.$store.getters[\n\t\t\t'content/getBackgrounds'\n\t\t];\n\t\treturn backgrounds.get(this.backgroundId) || null;\n\t}\n\n\tprivate get isActive(): boolean {\n\t\treturn this.backgroundId === this.background.current;\n\t}\n\n\tprivate async created() {\n\t\tif (this.bgData) {\n\t\t\tthis.assets = await Promise.all(\n\t\t\t\tthis.bgData.variants[0].map(asset => getAAsset(asset, false))\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate get title(): string {\n\t\tswitch (this.backgroundId) {\n\t\t\tcase 'buildin.static-color':\n\t\t\t\treturn 'Static color';\n\t\t\tcase 'buildin.transparent':\n\t\t\t\treturn 'Transparent';\n\t\t}\n\t\treturn this.bgData!.label || '';\n\t}\n\n\tprivate get style(): { [id: string]: string } {\n\t\tswitch (this.backgroundId) {\n\t\t\tcase 'buildin.static-color':\n\t\t\t\treturn {\n\t\t\t\t\t'background-color': this.background.color,\n\t\t\t\t};\n\t\t\tcase 'buildin.transparent':\n\t\t\t\treturn {};\n\t\t}\n\t\tconst variant = this.bgData!.variants[0];\n\t\tconst urls = (this.assets.filter(\n\t\t\timg => img instanceof HTMLImageElement\n\t\t) as HTMLImageElement[])\n\t\t\t.map(img => `url('${img.src}')`)\n\t\t\t.join(',');\n\t\treturn {\n\t\t\tbackgroundImage: urls,\n\t\t};\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./button.vue?vue&type=template&id=2551c94f&scoped=true&\"\nimport script from \"./button.vue?vue&type=script&lang=ts&\"\nexport * from \"./button.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2551c94f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),(_vm.isColor)?[_c('label',{attrs:{\"for\":\"bg_color\"}},[_vm._v(\"Color:\")]),_c('button',{staticClass:\"color-button\",style:({background: _vm.color}),attrs:{\"id\":\"bg_color\"},on:{\"click\":function($event){return _vm.$emit('change-color')}}})]:_vm._e(),(_vm.isVariant)?_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"3\"}},[_c('toggle',{attrs:{\"label\":\"Flipped?\"},model:{value:(_vm.flipped),callback:function ($$v) {_vm.flipped=$$v},expression:\"flipped\"}})],1)]),(_vm.hasVariants)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekVariant(-1)}}},[_vm._v(\"<\")])]),_c('td',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Variant\")]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekVariant(1)}}},[_vm._v(\">\")])])]):_vm._e(),_c('tr',[_c('td',{attrs:{\"colspan\":\"3\"}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.scaling),expression:\"scaling\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.scaling=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"None\")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Stretch\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"Cover\")])])])])]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { Background } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IAsset } from '@/store/content';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tISetColorMutation,\n\tISetFlipMutation,\n\tISeekVariantAction,\n\tScalingModes,\n\tISetScalingMutation,\n\tIPanel,\n} from '@/store/panels';\n\n@Component({\n\tcomponents: { Toggle },\n})\nexport default class BackgroundSettings extends Vue {\n\tpublic $store!: Store<IRootState>;\n\tprivate get currentBackgroundId(): string {\n\t\treturn this.background.current;\n\t}\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get background(): Readonly<IPanel['background']> {\n\t\tconst currentPanel = this.$store.state.panels.currentPanel;\n\t\treturn this.$store.state.panels.panels[currentPanel].background;\n\t}\n\n\tprivate get bgData(): Background<IAsset> | null {\n\t\treturn (\n\t\t\tthis.$store.state.content.current.backgrounds.find(\n\t\t\t\tbackground => background.id === this.currentBackgroundId\n\t\t\t) || null\n\t\t);\n\t}\n\n\tprivate get isColor(): boolean {\n\t\treturn this.currentBackgroundId === 'buildin.static-color';\n\t}\n\n\tprivate get color(): string {\n\t\treturn this.background.color;\n\t}\n\n\tprivate set color(color: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundColor', {\n\t\t\t\tcolor,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetColorMutation);\n\t\t});\n\t}\n\n\tprivate get flipped(): boolean {\n\t\treturn this.background.flipped;\n\t}\n\n\tprivate set flipped(flipped: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundFlipped', {\n\t\t\t\tflipped,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetFlipMutation);\n\t\t});\n\t}\n\n\tprivate get scaling(): string {\n\t\treturn this.background.scaling.toString();\n\t}\n\n\tprivate set scaling(scaling: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundScaling', {\n\t\t\t\tscaling: parseInt(scaling, 10),\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetScalingMutation);\n\t\t});\n\t}\n\n\tprivate get isVariant() {\n\t\treturn !!this.bgData;\n\t}\n\n\tprivate get hasVariants() {\n\t\treturn this.bgData ? this.bgData.variants.length > 1 : false;\n\t}\n\n\tprivate seekVariant(delta: 1 | -1) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('panels/seekBackgroundVariant', {\n\t\t\t\tdelta,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISeekVariantAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=645ce448&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=ts&\"\nexport * from \"./settings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"645ce448\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\r\nimport { registerAsset, getAsset } from '@/asset-manager';\r\nimport BackgroundButton from './background/button.vue';\r\nimport BackgroundSettings from './background/settings.vue';\r\nimport DropTarget from '../drop-target.vue';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\r\nimport {\r\n\tBackground,\r\n\tContentPack,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { ISetCurrentMutation, ISetColorMutation } from '@/store/panels';\r\nimport { PanelMixin } from './panelMixin';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport Color from '../subpanels/color/color.vue';\r\n\r\nconst uploadedBackgroundsPack: ContentPack<string> = {\r\n\tpackId: 'dddg.buildin.uploadedBackgrounds',\r\n\tdependencies: [],\r\n\tpackCredits: [],\r\n\tcharacters: [],\r\n\tfonts: [],\r\n\tsprites: [],\r\n\tpoemStyles: [],\r\n\tpoemBackgrounds: [],\r\n\tbackgrounds: [],\r\n\tcolors: [],\r\n};\r\n\r\n@Component({\r\n\tcomponents: {\r\n\t\tBackgroundButton,\r\n\t\tBackgroundSettings,\r\n\t\tDropTarget,\r\n\t\tColor,\r\n\t},\r\n})\r\nexport default class BackgroundsPanel extends Mixins(PanelMixin) {\r\n\tpublic $store!: Store<IRootState>;\r\n\r\n\tprivate colorSelect: boolean = false;\r\n\r\n\tprivate vuexHistory!: IHistorySupport;\r\n\r\n\tprivate get backgrounds(): Array<Background<IAsset>['id']> {\r\n\t\treturn [\r\n\t\t\t...this.$store.state.content.current.backgrounds.map(\r\n\t\t\t\tbackground => background.id\r\n\t\t\t),\r\n\t\t\t'buildin.static-color',\r\n\t\t\t'buildin.transparent',\r\n\t\t];\r\n\t}\r\n\r\n\tprivate setBackground(id: Background<IAsset>['id']) {\r\n\t\tthis.$store.commit('panels/setCurrentBackground', {\r\n\t\t\tcurrent: id,\r\n\t\t\tpanelId: this.$store.state.panels.currentPanel,\r\n\t\t} as ISetCurrentMutation);\r\n\t}\r\n\r\n\tprivate get bgColor(): string {\r\n\t\treturn this.$store.state.panels.panels[\r\n\t\t\tthis.$store.state.panels.currentPanel\r\n\t\t].background.color;\r\n\t}\r\n\r\n\tprivate set bgColor(color: string) {\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.commit('panels/setBackgroundColor', {\r\n\t\t\t\tcolor,\r\n\t\t\t} as ISetColorMutation);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate onFileUpload(e: Event) {\r\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\r\n\t\tif (!uploadInput.files) return;\r\n\t\tfor (const file of uploadInput.files) {\r\n\t\t\tthis.addImageFile(file);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addImageFile(file: File) {\r\n\t\tconst url = URL.createObjectURL(file);\r\n\t\tthis.addNewCustomBackground(file.name, file.name, url);\r\n\t}\r\n\r\n\tprivate addByUrl() {\r\n\t\tconst url = prompt('Enter the URL of the image');\r\n\t\tif (!url) return;\r\n\t\tconst lastSegment = url.split('/').slice(-1)[0];\r\n\t\tthis.addNewCustomBackground(lastSegment, lastSegment, url);\r\n\t}\r\n\r\n\tprivate addNewCustomBackground(\r\n\t\tid: Background<IAsset>['id'],\r\n\t\tlabel: string,\r\n\t\turl: string\r\n\t) {\r\n\t\tuploadedBackgroundsPack.backgrounds.push({\r\n\t\t\tid,\r\n\t\t\tlabel,\r\n\t\t\tvariants: [[url]],\r\n\t\t});\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\r\n\t\t\t\tcontentPack: uploadedBackgroundsPack,\r\n\t\t\t} as ReplaceContentPackAction);\r\n\t\t\tthis.setBackground(id);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate dragEnter(e: DragEvent) {\r\n\t\tif (!e.dataTransfer) return;\r\n\t\te.dataTransfer.effectAllowed = 'none';\r\n\t\tif (\r\n\t\t\t!Array.from(e.dataTransfer.items).find(item =>\r\n\t\t\t\titem.type.match(/^image.*$/)\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.dataTransfer.effectAllowed = 'link';\r\n\t\t(this.$refs.dt as DropTarget).show();\r\n\t}\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./backgrounds.vue?vue&type=template&id=3a443774&scoped=true&\"\nimport script from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nexport * from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./backgrounds.vue?vue&type=style&index=0&id=3a443774&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a443774\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Content Packs\")]),_c('button',{on:{\"click\":_vm.addNew}},[_vm._v(\"Add new Pack\")]),_c('fieldset',[_c('legend',[_vm._v(\"Installed Packs:\")]),_c('div',{staticClass:\"list\"},_vm._l((_vm.packs),function(pack){return _c('div',{key:pack.name,class:{ active: pack.name === _vm.name },on:{\"click\":function($event){return _vm.select(pack.name)}}},[_vm._v(\" \"+_vm._s(pack.name)+\" \")])}),0)]),_c('label',{attrs:{\"for\":\"pack_name\"}},[_vm._v(\"Name:\")]),_c('input',{attrs:{\"id\":\"pack_name\",\"readonly\":\"\"},domProps:{\"value\":_vm.name}}),_c('label',{attrs:{\"for\":\"pack_credits\"}},[_vm._v(\"Credits:\")]),_c('div',{attrs:{\"id\":\"pack_credits\"},domProps:{\"innerHTML\":_vm._s(_vm.credits)}}),(_vm.activatable)?_c('button',{on:{\"click\":_vm.activate}},[_vm._v(\"Activate\")]):_vm._e(),(_vm.deactivatable)?_c('button',{on:{\"click\":_vm.deactivate}},[_vm._v(\"Deactivate\")]):_vm._e(),(_vm.installable)?_c('button',{on:{\"click\":_vm.install}},[_vm._v(\"Install\")]):_vm._e(),(_vm.uninstallable)?_c('button',{on:{\"click\":_vm.uninstall}},[_vm._v(\"Uninstall\")]):_vm._e(),(_vm.needRestart)?_c('div',[_vm._v(\" The tool need restart for changes to take effect. \"),_c('button',{on:{\"click\":_vm.restart}},[_vm._v(\"Restart Now\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IEnvironment, IPack } from './environment';\r\nimport { Background } from '@/renderables/background';\r\n\r\nexport class Browser implements IEnvironment {\r\n\tpublic readonly allowLQ = true;\r\n\r\n\tpublic async saveToFile(\r\n\t\tdownloadCanvas: HTMLCanvasElement,\r\n\t\tfilename: string,\r\n\t\tformat: string = 'image/png',\r\n\t\tquality: number = 1\r\n\t): Promise<string> {\r\n\t\tconst a = document.createElement('a');\r\n\t\ta.setAttribute('download', filename);\r\n\t\tconst url = await this.createObjectURL(downloadCanvas, format, quality);\r\n\t\ta.setAttribute('href', url);\r\n\t\tdocument.body.appendChild(a);\r\n\t\ta.click();\r\n\t\tdocument.body.removeChild(a);\r\n\t\treturn url;\r\n\t}\r\n\r\n\tpublic get installedCharacterPacks(): Readonly<Array<Readonly<IPack>>> {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tpublic get isBackgroundInstallingSupported(): boolean {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic get isPackInstallingSupported(): boolean {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic installBackground(background: Background): boolean {\r\n\t\tthrow new Error('This environment does not support installing backgrounds');\r\n\t}\r\n\r\n\tpublic installContentPack(url: string): boolean {\r\n\t\tthrow new Error(\r\n\t\t\t'This environment does not support installing content packs'\r\n\t\t);\r\n\t}\r\n\r\n\tpublic uninstallBackground(background: Background): boolean {\r\n\t\tthrow new Error(\r\n\t\t\t'This environment does not support uninstalling backgrounds'\r\n\t\t);\r\n\t}\r\n\r\n\tpublic uninstallContentPack(url: string): boolean {\r\n\t\tthrow new Error(\r\n\t\t\t'This environment does not support uninstalling content packs'\r\n\t\t);\r\n\t}\r\n\tpublic activateContentPack(url: string): boolean {\r\n\t\tthrow new Error(\r\n\t\t\t'This environment does not support installing content packs'\r\n\t\t);\r\n\t}\r\n\r\n\tpublic deactivateContentPack(url: string): boolean {\r\n\t\tthrow new Error(\r\n\t\t\t'This environment does not support uninstalling content packs'\r\n\t\t);\r\n\t}\r\n\r\n\tpublic prompt(\r\n\t\tmessage: string,\r\n\t\tdefaultValue?: string\r\n\t): Promise<string | null> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tresolve(prompt(message, defaultValue));\r\n\t\t});\r\n\t}\r\n\r\n\tpublic onPanelChange(handler: (panel: string) => void): void {\r\n\t\treturn;\r\n\t}\r\n\r\n\tprotected createObjectURL(\r\n\t\tcanvas: HTMLCanvasElement,\r\n\t\tformat: string,\r\n\t\tquality: number\r\n\t): Promise<string> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (canvas.toBlob && window.URL && window.URL.createObjectURL) {\r\n\t\t\t\tcanvas.toBlob(\r\n\t\t\t\t\tblob => {\r\n\t\t\t\t\t\tif (!blob) {\r\n\t\t\t\t\t\t\treject();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(URL.createObjectURL(blob));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tformat,\r\n\t\t\t\t\tquality\r\n\t\t\t\t);\r\n\t\t\t} else if (window.URL && window.URL.createObjectURL) {\r\n\t\t\t\tconst url = canvas.toDataURL();\r\n\t\t\t\tconst blob = this.dataURItoBlob(url, format);\r\n\t\t\t\tresolve(URL.createObjectURL(blob));\r\n\t\t\t} else {\r\n\t\t\t\tresolve(canvas.toDataURL());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected dataURItoBlob(dataURI: string, type: string) {\r\n\t\tconst binStr = atob(dataURI.split(',')[1]);\r\n\t\tconst len = binStr.length;\r\n\t\tconst arr = new Uint8Array(len);\r\n\r\n\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\tarr[i] = binStr.charCodeAt(i);\r\n\t\t}\r\n\r\n\t\treturn new Blob([arr], { type });\r\n\t}\r\n}\r\n","import { Browser } from './browser';\r\n\r\nexport class Edge extends Browser {\r\n\tpublic async saveToFile(\r\n\t\tdownloadCanvas: HTMLCanvasElement,\r\n\t\tfilename: string,\r\n\t\tformat: string = 'image/png',\r\n\t\tquality: number = 1\r\n\t): Promise<string> {\r\n\t\tlet url = downloadCanvas.toDataURL(format, quality);\r\n\t\tconst blob = this.dataURItoBlob(url, format);\r\n\r\n\t\tif (window.URL && window.URL.createObjectURL) {\r\n\t\t\turl = URL.createObjectURL(blob);\r\n\t\t}\r\n\r\n\t\t// IE-specific code\r\n\t\twindow.navigator.msSaveBlob(blob, filename);\r\n\t\treturn url;\r\n\t}\r\n}\r\n","import { IEnvironment, IPack } from './environment';\r\nimport { registerAssetWithURL, getAsset } from '@/asset-manager';\r\nimport { Background } from '@/renderables/background';\r\nimport eventBus from '@/eventbus/event-bus';\r\n\r\nconst packs: IPack[] = [];\r\n\r\nexport class Electron implements IEnvironment {\r\n\tpublic readonly allowLQ = false;\r\n\tprivate electron = (window as any) as IElectronWindow;\r\n\tprivate promptCache: {\r\n\t\t[promptId: number]: (resolved: string | null) => void;\r\n\t} = {};\r\n\tprivate lastPrompt: number = 0;\r\n\r\n\tconstructor() {\r\n\t\tthis.electron.ipcRenderer.on(\r\n\t\t\t'add-persistent-character',\r\n\t\t\tasync (e, filePath: string, active: boolean = true) => {\r\n\t\t\t\t/*\r\n\t\t\t\tconst json = await loadCharacterPack(filePath, active);\r\n\t\t\t\tif (!json) return;\r\n\t\t\t\tpacks.push({\r\n\t\t\t\t\turl: filePath,\r\n\t\t\t\t\tqueuedUninstall: false,\r\n\t\t\t\t\tid: json.packId,\r\n\t\t\t\t\tcredits: json.packCredits,\r\n\t\t\t\t\tactive,\r\n\t\t\t\t});\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.electron.ipcRenderer.on(\r\n\t\t\t'add-persistent-background',\r\n\t\t\tasync (e, filepath: string) => {\r\n\t\t\t\tconst name = 'persistentBg-' + filepath;\r\n\t\t\t\tconst parts = filepath.split('/');\r\n\t\t\t\tregisterAssetWithURL(name, filepath);\r\n\t\t\t\tconsole.log(filepath);\r\n\t\t\t\t/*\r\n\t\t\t\tbackgrounds.push(\r\n\t\t\t\t\tnew Background(name, parts[parts.length - 1], true, '', true)\r\n\t\t\t\t);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.electron.ipcRenderer.on('push-message', async (e, message: string) => {\r\n\t\t\t/*\r\n\t\t\teventBus.fire(new ShowMessageEvent(message));\r\n\t\t\t*/\r\n\t\t});\r\n\t\tthis.electron.ipcRenderer.on(\r\n\t\t\t'prompt-answered',\r\n\t\t\t(e, id: number, value: string | null) => {\r\n\t\t\t\tthis.promptCache[id](value);\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.electron.ipcRenderer.send('find-customs');\r\n\t}\r\n\r\n\tpublic saveToFile(\r\n\t\tdownloadCanvas: HTMLCanvasElement,\r\n\t\tfilename: string,\r\n\t\tformat: string = 'image/png',\r\n\t\tquality: number = 1\r\n\t): Promise<string> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tdownloadCanvas.toBlob(\r\n\t\t\t\tasync blob => {\r\n\t\t\t\t\tif (!blob) {\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst buffer = await (blob as any).arrayBuffer();\r\n\t\t\t\t\tthis.electron.ipcRenderer.send(\r\n\t\t\t\t\t\t'save-file',\r\n\t\t\t\t\t\tfilename,\r\n\t\t\t\t\t\tnew Uint8Array(buffer)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tresolve(URL.createObjectURL(blob));\r\n\t\t\t\t},\r\n\t\t\t\tformat,\r\n\t\t\t\tquality\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic get installedCharacterPacks(): Readonly<Array<Readonly<IPack>>> {\r\n\t\treturn packs;\r\n\t}\r\n\r\n\tpublic get isBackgroundInstallingSupported(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic get isPackInstallingSupported(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic async installBackground(background: Background): Promise<void> {\r\n\t\t/*\r\n\t\tconst asset = await getAsset(background.path, true);\r\n\t\tif (!(asset instanceof HTMLImageElement)) return;\r\n\t\tconst img = await fetch(asset.src);\r\n\t\tconst array = new Uint8Array(await img.arrayBuffer());\r\n\t\tthis.electron.ipcRenderer.send('install-background', array);\r\n\t\t*/\r\n\t}\r\n\r\n\tpublic async uninstallBackground(background: Background): Promise<void> {\r\n\t\t/*\r\n\t\tconst asset = await getAsset(background.path, true);\r\n\t\tif (!(asset instanceof HTMLImageElement)) return;\r\n\t\tif (!asset.src.startsWith('blob:')) {\r\n\t\t\tconst img = await fetch(asset.src);\r\n\t\t\tconst blob = await img.blob();\r\n\t\t\tconst newUrl = URL.createObjectURL(blob);\r\n\t\t\tregisterAssetWithURL(background.path, newUrl);\r\n\t\t}\r\n\t\tthis.electron.ipcRenderer.send('uninstall-background', background.name);\r\n\t\tbackground.installed = false;\r\n\t\t*/\r\n\t}\r\n\r\n\tpublic installContentPack(url: string): void {\r\n\t\tconsole.log('installContentPack', url);\r\n\t\tthis.electron.ipcRenderer.send('install-content-pack', url);\r\n\t}\r\n\r\n\tpublic uninstallContentPack(url: string): void {\r\n\t\tconsole.log('uninstallContentPack', url);\r\n\t\tthis.electron.ipcRenderer.send('uninstall-content-pack', url);\r\n\t}\r\n\r\n\tpublic activateContentPack(url: string): void {\r\n\t\tconsole.log('activateContentPack', url);\r\n\t\tthis.electron.ipcRenderer.send('activate-content-pack', url);\r\n\t}\r\n\r\n\tpublic deactivateContentPack(url: string): void {\r\n\t\tconsole.log('deactivateContentPack', url);\r\n\t\tthis.electron.ipcRenderer.send('deactivate-content-pack', url);\r\n\t}\r\n\r\n\tpublic prompt(\r\n\t\tmessage: string,\r\n\t\tdefaultValue?: string\r\n\t): Promise<string | null> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.promptCache[++this.lastPrompt] = resolve;\r\n\t\t\tthis.electron.ipcRenderer.send(\r\n\t\t\t\t'show-prompt',\r\n\t\t\t\tthis.lastPrompt,\r\n\t\t\t\tmessage,\r\n\t\t\t\tdefaultValue\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic onPanelChange(handler: (panel: string) => void): void {\r\n\t\tthis.electron.ipcRenderer.on('open-panel', (e, panel: string) => {\r\n\t\t\thandler(panel);\r\n\t\t});\r\n\t}\r\n}\r\n\r\ninterface IElectronWindow {\r\n\tisElectron: boolean;\r\n\tipcRenderer: IpcRenderer;\r\n}\r\n\r\ninterface IpcRenderer {\r\n\ton(\r\n\t\tchannel: string,\r\n\t\tlistener: (event: IpcRendererEvent, ...args: any[]) => void\r\n\t): void;\r\n\tsend(channel: string, ...args: any[]): void;\r\n}\r\n\r\ninterface IpcRendererEvent extends Event {\r\n\tsender: IpcRenderer;\r\n\tsenderId: number;\r\n}\r\n","import { Edge } from './edge';\r\nimport { Browser } from './browser';\r\nimport { Electron } from './electron';\r\nimport { Background } from '@/renderables/background';\r\n\r\nexport interface IPack {\r\n\turl: string;\r\n\tid: string;\r\n\tcredits: string;\r\n\tqueuedUninstall: boolean;\r\n\tactive: boolean;\r\n}\r\n\r\nexport interface IEnvironment {\r\n\treadonly allowLQ: boolean;\r\n\treadonly isBackgroundInstallingSupported: boolean;\r\n\treadonly isPackInstallingSupported: boolean;\r\n\treadonly installedCharacterPacks: Readonly<Array<Readonly<IPack>>>;\r\n\tsaveToFile(\r\n\t\tcanvas: HTMLCanvasElement,\r\n\t\tfilename: string,\r\n\t\tformat?: string,\r\n\t\tquality?: number\r\n\t): Promise<string>;\r\n\tinstallBackground(background: Background): void;\r\n\tuninstallBackground(background: Background): void;\r\n\tactivateContentPack(url: string): void;\r\n\tdeactivateContentPack(url: string): void;\r\n\tinstallContentPack(url: string): void;\r\n\tuninstallContentPack(url: string): void;\r\n\tprompt(message: string, defaultValue?: string): Promise<string | null>;\r\n\tonPanelChange(handler: (panel: string) => void): void;\r\n}\r\n\r\nfunction chooseEnv(): IEnvironment {\r\n\tif ((window as any).isElectron) {\r\n\t\treturn new Electron();\r\n\t}\r\n\tif (window.navigator.msSaveOrOpenBlob !== undefined) {\r\n\t\treturn new Edge();\r\n\t}\r\n\treturn new Browser();\r\n}\r\n\r\nconst envX = chooseEnv();\r\n\r\n(window as any).toast = envX;\r\nexport default envX;\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\r\nimport { PanelMixin } from './panelMixin';\r\nimport environment from '@/environments/environment';\r\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { sanitize } from './character-pack-sanitizer';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\n\r\ninterface IPack {\r\n\tname: string;\r\n\tcredits: [string | [string, string]];\r\n\tinstalled: boolean;\r\n\tqueuedUninstall: boolean;\r\n\tactive: boolean;\r\n\tfreshInstall: boolean;\r\n\turl: string;\r\n}\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class CharacterPackPanel extends Mixins(PanelMixin) {\r\n\tpublic $store!: Store<IRootState>;\r\n\tprivate selectedPack: IPack | null = null;\r\n\tprivate needRestart = false;\r\n\r\n\tprivate created() {\r\n\t\tconst packs = environment.installedCharacterPacks;\r\n\t\tconsole.log('packs:', packs);\r\n\t}\r\n\r\n\tprivate get packs(): IPack[] {\r\n\t\tconst packs = this.$store.state.content.contentPacks;\r\n\t\treturn packs\r\n\t\t\t.filter(pack => pack.packId && !pack.packId.startsWith('dddg.buildin.'))\r\n\t\t\t.map(\r\n\t\t\t\tpack =>\r\n\t\t\t\t\t({\r\n\t\t\t\t\t\tname: pack.packId,\r\n\t\t\t\t\t\tcredits: pack.packCredits,\r\n\t\t\t\t\t\tinstalled: true,\r\n\t\t\t\t\t\tactive: true,\r\n\t\t\t\t\t\tqueuedUninstall: false,\r\n\t\t\t\t\t\tfreshInstall: false,\r\n\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t} as IPack)\r\n\t\t\t);\r\n\t}\r\n\r\n\tprivate select(name: string) {\r\n\t\tthis.selectedPack = this.packs.find(pack => pack.name === name) || null;\r\n\t}\r\n\r\n\tprivate async addNew() {\r\n\t\tconst url = await environment.prompt(\r\n\t\t\t'Enter the URL of the character pack:'\r\n\t\t);\r\n\t\tif (!url) return;\r\n\t\tawait this.$store.dispatch('content/loadContentPacks', url);\r\n\t}\r\n\r\n\tprivate restart() {\r\n\t\tlocation.reload(true);\r\n\t}\r\n\r\n\tprivate get name(): string {\r\n\t\tif (!this.selectedPack) return '';\r\n\t\treturn this.selectedPack.name;\r\n\t}\r\n\tprivate get credits(): [string | [string, string]] {\r\n\t\tif (!this.selectedPack) return [''];\r\n\t\treturn this.selectedPack.credits;\r\n\t}\r\n\tprivate get activatable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.selectedPack) return false;\r\n\t\tif (!this.selectedPack.installed) return false;\r\n\t\tif (this.selectedPack.queuedUninstall) return false;\r\n\t\tif (this.selectedPack.freshInstall) return false;\r\n\t\treturn !this.selectedPack.active;\r\n\t}\r\n\tprivate get deactivatable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.selectedPack) return false;\r\n\t\tif (!this.selectedPack.installed) return false;\r\n\t\tif (this.selectedPack.queuedUninstall) return false;\r\n\t\tif (this.selectedPack.freshInstall) return false;\r\n\t\treturn this.selectedPack.active;\r\n\t}\r\n\tprivate get installable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.selectedPack) return false;\r\n\t\treturn this.selectedPack.queuedUninstall || !this.selectedPack.installed;\r\n\t}\r\n\tprivate get uninstallable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.selectedPack) return false;\r\n\t\tif (this.selectedPack.freshInstall) return false;\r\n\t\treturn !(this.selectedPack.queuedUninstall || !this.selectedPack.installed);\r\n\t}\r\n\r\n\tprivate install(): void {\r\n\t\tif (!this.selectedPack) return;\r\n\t\tenvironment.installContentPack(this.selectedPack.url);\r\n\t\tif (this.selectedPack.queuedUninstall) {\r\n\t\t\tthis.selectedPack.queuedUninstall = false;\r\n\t\t} else {\r\n\t\t\tthis.selectedPack.installed = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate uninstall(): void {\r\n\t\tif (!this.selectedPack) return;\r\n\t\tenvironment.uninstallContentPack(this.selectedPack.url);\r\n\t\tthis.selectedPack.queuedUninstall = true;\r\n\t\tthis.needRestart = true;\r\n\t}\r\n\r\n\tprivate activate(): void {\r\n\t\tif (!this.selectedPack) return;\r\n\t\tenvironment.activateContentPack(this.selectedPack.url);\r\n\t\tthis.selectedPack.active = true;\r\n\t\tthis.needRestart = true;\r\n\t}\r\n\r\n\tprivate deactivate(): void {\r\n\t\tif (!this.selectedPack) return;\r\n\t\tenvironment.deactivateContentPack(this.selectedPack.url);\r\n\t\tthis.selectedPack.active = false;\r\n\t\tthis.needRestart = true;\r\n\t}\r\n}\r\n","import { Module } from 'vuex';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset, BackgroundLookup } from './content';\nimport { IRootState } from '.';\nimport { arraySeeker } from '@/models/seekers';\nimport { ICopyObjectsAction, IDeleteAllOfPanel } from './objects';\nimport Vue from 'vue';\n\nexport enum ScalingModes {\n\tNone = 0,\n\tStretch = 1,\n\tCover = 2,\n}\n\nexport interface IPanel {\n\tid: string;\n\tbackground: {\n\t\tcurrent: string;\n\t\tcolor: string;\n\t\tflipped: boolean;\n\t\tvariant: number;\n\t\tscaling: ScalingModes;\n\t};\n\tlastRender: string;\n}\n\nexport interface IPanels {\n\tpanels: { [id: string]: IPanel };\n\tpanelOrder: string[];\n\tcurrentPanel: string;\n}\n\nexport const transparentId = 'buildin.transparent';\nexport const staticColorId = 'buildin.static-color';\n\nlet lastPanelNum = 0;\n\nconst previewManager = {\n\tpanelToUrl: new Map<string, string>(),\n\turlToPanel: new Map<string, string[]>(),\n\tregister(panelId: string, url: string) {\n\t\tif (this.panelToUrl.has(panelId)) {\n\t\t\tif (this.panelToUrl.get(panelId) === url) return;\n\t\t\tthis.unregister(panelId, this.panelToUrl.get(panelId)!);\n\t\t}\n\t\tthis.panelToUrl.set(panelId, url);\n\t\tif (this.urlToPanel.has(url)) {\n\t\t\tthis.urlToPanel.get(url)!.push(panelId);\n\t\t} else {\n\t\t\tthis.urlToPanel.set(url, [panelId]);\n\t\t}\n\t},\n\tunregister(panelId: string, url: string) {\n\t\tif (this.urlToPanel.has(url)) {\n\t\t\tconst panels = this.urlToPanel.get(url)!;\n\t\t\tpanels.splice(panels.indexOf(panelId), 1);\n\t\t\tif (panels.length === 0) {\n\t\t\t\tthis.urlToPanel.delete(url);\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t}\n\t\t}\n\t\tthis.panelToUrl.delete(panelId);\n\t},\n};\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tpanels: {},\n\t\tpanelOrder: [],\n\t\tcurrentPanel: null!,\n\t},\n\tmutations: {\n\t\tsetCurrentPanel(state, { panelId }: ISetCurrentPanelMutation) {\n\t\t\tstate.currentPanel = panelId;\n\t\t},\n\t\tsetPanelPreview(state, { panelId, url }: ISetPanelPreviewMutation) {\n\t\t\tstate.panels[panelId].lastRender = url;\n\t\t\tpreviewManager.register(panelId, url);\n\t\t},\n\t\tcreatePanel(state, { panel }: ICreatePanel) {\n\t\t\tVue.set(state.panels, panel.id, panel);\n\t\t},\n\t\tsetPanelOrder(state, { panelOrder }: ISetPanelOrder) {\n\t\t\tstate.panelOrder = [...panelOrder];\n\t\t},\n\t\tsetCurrentBackground(state, { current, panelId }: ISetCurrentMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.current = current;\n\t\t\tpanel.background.variant = 0;\n\t\t},\n\t\tsetBackgroundColor(state, { color, panelId }: ISetColorMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.color = color;\n\t\t},\n\t\tsetBackgroundFlipped(state, { flipped, panelId }: ISetFlipMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.flipped = flipped;\n\t\t},\n\t\tsetBackgroundVariant(state, { variant, panelId }: ISetVariantMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.variant = variant;\n\t\t},\n\t\tsetBackgroundScaling(state, { scaling, panelId }: ISetScalingMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.scaling = scaling;\n\t\t},\n\t\tdeletePanel(state, { panelId }: IDeletePanelMutation) {\n\t\t\tpreviewManager.unregister(\n\t\t\t\tpanelId,\n\t\t\t\tpreviewManager.panelToUrl.get(panelId)!\n\t\t\t);\n\t\t\tdelete state.panels[panelId];\n\t\t},\n\t},\n\tactions: {\n\t\tcreatePanel({ state, commit }) {\n\t\t\tconst id = 'panel' + ++lastPanelNum;\n\t\t\tcommit('createPanel', {\n\t\t\t\tpanel: {\n\t\t\t\t\tid,\n\t\t\t\t\tbackground: {\n\t\t\t\t\t\tcolor: '#000000',\n\t\t\t\t\t\tcurrent: transparentId,\n\t\t\t\t\t\tflipped: false,\n\t\t\t\t\t\tscaling: ScalingModes.None,\n\t\t\t\t\t\tvariant: 0,\n\t\t\t\t\t},\n\t\t\t\t\tlastRender: '',\n\t\t\t\t},\n\t\t\t} as ICreatePanel);\n\t\t\tif (!state.panelOrder) {\n\t\t\t\tcommit('setPanelOrder', {\n\t\t\t\t\tpanelOrder: [id],\n\t\t\t\t} as ISetPanelOrder);\n\t\t\t} else {\n\t\t\t\tcommit('setPanelOrder', {\n\t\t\t\t\tpanelOrder: [...state.panelOrder, id],\n\t\t\t\t} as ISetPanelOrder);\n\t\t\t}\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: id,\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t},\n\t\tduplicatePanel(\n\t\t\t{ state, commit, dispatch },\n\t\t\t{ panelId }: IDuplicatePanelAction\n\t\t) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tconst id = 'panel' + ++lastPanelNum;\n\t\t\tpreviewManager.register(id, panel.lastRender);\n\t\t\tcommit('createPanel', {\n\t\t\t\tpanel: {\n\t\t\t\t\tid,\n\t\t\t\t\tbackground: JSON.parse(JSON.stringify(panel.background)),\n\t\t\t\t\tlastRender: panel.lastRender,\n\t\t\t\t},\n\t\t\t} as ICreatePanel);\n\t\t\tdispatch(\n\t\t\t\t'objects/copyObjects',\n\t\t\t\t{\n\t\t\t\t\tsourcePanelId: panelId,\n\t\t\t\t\ttargetPanelId: id,\n\t\t\t\t} as ICopyObjectsAction,\n\t\t\t\t{ root: true }\n\t\t\t);\n\t\t\tconst oldIdx = state.panelOrder.indexOf(panelId);\n\t\t\tcommit('setPanelOrder', {\n\t\t\t\tpanelOrder: [\n\t\t\t\t\t...state.panelOrder.slice(0, oldIdx + 1),\n\t\t\t\t\tid,\n\t\t\t\t\t...state.panelOrder.slice(oldIdx + 1),\n\t\t\t\t],\n\t\t\t} as ISetPanelOrder);\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: id,\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t},\n\t\tseekBackgroundVariant(\n\t\t\t{ state, rootGetters, commit },\n\t\t\t{ delta }: ISeekVariantAction\n\t\t) {\n\t\t\tconst panel = state.panels[state.currentPanel];\n\t\t\tconst backgrounds = rootGetters[\n\t\t\t\t'content/getBackgrounds'\n\t\t\t] as BackgroundLookup;\n\t\t\tconst background = backgrounds.get(panel.background.current);\n\t\t\tif (!background) return;\n\t\t\tcommit('setBackgroundVariant', {\n\t\t\t\tpanelId: state.currentPanel,\n\t\t\t\tvariant: arraySeeker(\n\t\t\t\t\tbackground.variants,\n\t\t\t\t\tpanel.background.variant,\n\t\t\t\t\tdelta\n\t\t\t\t),\n\t\t\t} as ISetVariantMutation);\n\t\t},\n\t\tdelete({ state, dispatch, commit }, { panelId }: IDeletePanelAction) {\n\t\t\tif (state.panelOrder.length <= 1) return;\n\t\t\tconst orderIdx = state.panelOrder.indexOf(panelId);\n\t\t\tlet newOrderIdx;\n\t\t\tif (orderIdx === state.panelOrder.length - 1) {\n\t\t\t\tnewOrderIdx = orderIdx - 1;\n\t\t\t} else {\n\t\t\t\tnewOrderIdx = orderIdx + 1;\n\t\t\t}\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: state.panelOrder[newOrderIdx],\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t\tcommit('setPanelOrder', {\n\t\t\t\tpanelOrder: [\n\t\t\t\t\t...state.panelOrder.slice(0, orderIdx),\n\t\t\t\t\t...state.panelOrder.slice(orderIdx + 1),\n\t\t\t\t],\n\t\t\t} as ISetPanelOrder);\n\t\t\tdispatch(\n\t\t\t\t'objects/deleteAllOfPanel',\n\t\t\t\t{\n\t\t\t\t\tpanelId,\n\t\t\t\t} as IDeleteAllOfPanel,\n\t\t\t\t{ root: true }\n\t\t\t);\n\t\t\tcommit('deletePanel', {\n\t\t\t\tpanelId,\n\t\t\t} as IDeletePanelMutation);\n\t\t},\n\t\tasync fixContentPackRemoval(\n\t\t\t{ state, rootGetters, commit, rootState },\n\t\t\toldContent: ContentPack<IAsset>\n\t\t) {\n\t\t\tfor (const panel of Object.values(state.panels)) {\n\t\t\t\tconst oldBackground = oldContent.backgrounds.find(\n\t\t\t\t\tx => x.id === panel.background.current\n\t\t\t\t);\n\t\t\t\t// Probably build in?\n\t\t\t\tif (!oldBackground) return;\n\n\t\t\t\tconst newBackground = (rootGetters[\n\t\t\t\t\t'content/getBackgrounds'\n\t\t\t\t] as BackgroundLookup).get(panel.background.current);\n\n\t\t\t\tif (!newBackground) {\n\t\t\t\t\tif (rootState.content.current.backgrounds[0]) {\n\t\t\t\t\t\tcommit('setCurrentBackground', {\n\t\t\t\t\t\t\tcurrent: rootState.content.current.backgrounds[0].id,\n\t\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t\t} as ISetCurrentMutation);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcommit('setCurrentBackground', {\n\t\t\t\t\t\t\tcurrent: 'buildin.transparent',\n\t\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t\t} as ISetCurrentMutation);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst oldVariantJSON = JSON.stringify(\n\t\t\t\t\toldBackground.variants[panel.background.variant]\n\t\t\t\t);\n\t\t\t\tconst newVariantIdx = newBackground.variants.findIndex(\n\t\t\t\t\tvariant => JSON.stringify(variant) === oldVariantJSON\n\t\t\t\t);\n\t\t\t\tif (newVariantIdx !== panel.background.variant) {\n\t\t\t\t\tcommit('setBackgroundVariant', {\n\t\t\t\t\t\tvariant: newVariantIdx === -1 ? 0 : newVariantIdx,\n\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t} as ISetVariantMutation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmove({ state, commit }, { panelId, delta }: IMovePanelAction) {\n\t\t\tconst collection = [...state.panelOrder];\n\t\t\tconst oldIdx = collection.indexOf(panelId);\n\t\t\tcollection.splice(oldIdx, 1);\n\t\t\tconst newIdx = Math.max(oldIdx + delta, 0);\n\t\t\tcollection.splice(newIdx, 0, panelId);\n\t\t\tcommit('setPanelOrder', { panelOrder: collection } as ISetPanelOrder);\n\t\t},\n\t},\n} as Module<IPanels, IRootState>;\n\nexport interface ISetCurrentPanelMutation {\n\treadonly panelId: string;\n}\n\nexport interface IDeletePanelMutation {\n\treadonly panelId: string;\n}\n\nexport interface ISetPanelPreviewMutation {\n\treadonly panelId: string;\n\treadonly url: string;\n}\n\nexport interface IDuplicatePanelAction {\n\treadonly panelId: string;\n}\n\nexport interface IDeletePanelAction {\n\treadonly panelId: string;\n}\n\nexport interface ICreatePanel {\n\treadonly panel: IPanel;\n}\n\nexport interface ISetPanelOrder {\n\treadonly panelOrder: string[];\n}\n\nexport interface ISetCurrentMutation {\n\treadonly panelId: string;\n\treadonly current: string;\n}\n\nexport interface ISetColorMutation {\n\treadonly panelId: string;\n\treadonly color: string;\n}\n\nexport interface ISetFlipMutation {\n\treadonly panelId: string;\n\treadonly flipped: boolean;\n}\n\nexport interface ISetVariantMutation {\n\treadonly panelId: string;\n\treadonly variant: number;\n}\n\nexport interface ISetScalingMutation {\n\treadonly panelId: string;\n\treadonly scaling: ScalingModes;\n}\n\nexport interface ISeekVariantAction {\n\treadonly delta: 1 | -1;\n}\n\nexport interface IMovePanelAction {\n\treadonly panelId: string;\n\treadonly delta: number;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./content-pack.vue?vue&type=template&id=1a61a7b8&scoped=true&\"\nimport script from \"./content-pack.vue?vue&type=script&lang=ts&\"\nexport * from \"./content-pack.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./content-pack.vue?vue&type=style&index=0&id=1a61a7b8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a61a7b8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Panels\")]),_c('fieldset',{staticClass:\"existing_panels_fieldset\"},[_c('legend',[_vm._v(\"Existing Panels\")]),_c('div',{staticClass:\"existing_panels\"},_vm._l((_vm.panelButtons),function(panel,idx){return _c('div',{key:panel.id,class:{ panel_button: true, active: panel.id === _vm.currentPanel },style:((\"background-image: url('\" + (panel.image) + \"')\")),on:{\"click\":function($event){return _vm.updateCurrentPanel(panel.id)}}},[_c('div',{staticClass:\"panel_text\"},[_c('p',[_vm._v(_vm._s(panel.text))])]),_c('div',{staticClass:\"panel_nr\"},[_vm._v(_vm._s(idx + 1))])])}),0)]),_c('div',{staticClass:\"column\"},[_c('button',{on:{\"click\":_vm.addNewPanel}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add_to_queue\")]),_vm._v(\" Add new \")]),_c('button',{attrs:{\"disabled\":!_vm.canDeletePanel},on:{\"click\":_vm.deletePanel}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove_from_queue\")]),_vm._v(\" Delete panel \")]),_c('button',{attrs:{\"disabled\":!_vm.canMoveAhead},on:{\"click\":_vm.moveAhead}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_upward\")]),_vm._v(\" Move ahead \")]),_c('button',{attrs:{\"disabled\":!_vm.canMoveBehind},on:{\"click\":_vm.moveBehind}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_downward\")]),_vm._v(\" Move behind \")])]),_c('fieldset',[_c('legend',[_vm._v(\"Export\")]),_c('table',[_c('tr',[_vm._m(0),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.format),expression:\"format\"}],attrs:{\"id\":\"export_format\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.format=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"image/png\"}},[_vm._v(\"PNG (lossless)\")]),(_vm.webpSupport)?_c('option',{attrs:{\"value\":\"image/webp\"}},[_vm._v(\"WebP (lossy)\")]):_vm._e(),(_vm.heifSupport)?_c('option',{attrs:{\"value\":\"image/heif\"}},[_vm._v(\"HEIF (lossy)\")]):_vm._e(),_c('option',{attrs:{\"value\":\"image/jpeg\"}},[_vm._v(\"JPEG (lossy)\")])])])]),(_vm.isLossy)?_c('tr',[_vm._m(1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.quality),expression:\"quality\",modifiers:{\"number\":true}}],attrs:{\"id\":\"export_quality\",\"type\":\"number\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.quality)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.quality=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]):_vm._e(),_c('tr',[_vm._m(2),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.ppi),expression:\"ppi\",modifiers:{\"number\":true}}],attrs:{\"id\":\"export_ppi\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.ppi)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.ppi=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('button',{on:{\"click\":_vm.download}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"photo_camera\")]),_vm._v(\" Download \")])])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('button',{on:{\"click\":_vm.estimateExportSize}},[_vm._v(\"Estimate filesizes\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_format\"}},[_vm._v(\"Format\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_quality\"}},[_vm._v(\"Quality:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_ppi\"}},[_vm._v(\" Panels per image: \"),_c('br'),_vm._v(\"(0 for one single image) \")])])}]\n\nexport { render, staticRenderFns }","import { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAAsset } from '@/asset-manager';\r\nimport { screenWidth, screenHeight } from '@/constants/base';\r\nimport { IAsset } from '@/store/content';\r\nimport { ScalingModes } from '@/store/panels';\r\nimport { DeepReadonly } from '@/util/readonly';\r\nimport { IRenderable, IHitbox } from './renderable';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\n\r\nexport class Background implements IRenderable {\r\n\tpublic constructor(\r\n\t\tpublic readonly id: string,\r\n\t\tpublic readonly assets: DeepReadonly<IAsset[]>,\r\n\t\tpublic readonly flip: boolean,\r\n\t\tpublic readonly scale: ScalingModes\r\n\t) {}\r\n\r\n\tpublic updatedContent(): void {}\r\n\r\n\tpublic async render(selected: boolean, rx: RenderContext): Promise<void> {\r\n\t\tconst images = await Promise.all(\r\n\t\t\tthis.assets.map((asset) => getAAsset(asset, rx.hq))\r\n\t\t);\r\n\t\tfor (const image of images) {\r\n\t\t\tif (!(image instanceof HTMLImageElement)) return;\r\n\t\t\tlet x = 0;\r\n\t\t\tlet y = 0;\r\n\t\t\tlet w = image.width;\r\n\t\t\tlet h = image.height;\r\n\r\n\t\t\tswitch (this.scale) {\r\n\t\t\t\tcase ScalingModes.None:\r\n\t\t\t\t\tx = screenWidth / 2 - w / 2;\r\n\t\t\t\t\ty = screenHeight / 2 - h / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScalingModes.Stretch:\r\n\t\t\t\t\tw = screenWidth;\r\n\t\t\t\t\th = screenHeight;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScalingModes.Cover:\r\n\t\t\t\t\tconst ratio = w / h;\r\n\t\t\t\t\tconst screenRatio = screenWidth / screenHeight;\r\n\r\n\t\t\t\t\tif (ratio > screenRatio) {\r\n\t\t\t\t\t\th = screenHeight;\r\n\t\t\t\t\t\tw = h * ratio;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tw = screenWidth;\r\n\t\t\t\t\t\th = w / ratio;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx = screenWidth / 2 - w / 2;\r\n\t\t\t\t\ty = screenHeight / 2 - h / 2;\r\n\t\t\t}\r\n\r\n\t\t\trx.drawImage({\r\n\t\t\t\timage,\r\n\t\t\t\tx,\r\n\t\t\t\ty,\r\n\t\t\t\tw,\r\n\t\t\t\th,\r\n\t\t\t\tflip: this.flip,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tpublic hitTest(hx: number, hy: number): boolean {\r\n\t\treturn true;\r\n\t}\r\n\tpublic getHitbox(): IHitbox {\r\n\t\treturn {\r\n\t\t\tx0: 0,\r\n\t\t\ty0: 0,\r\n\t\t\tx1: screenWidth,\r\n\t\t\ty1: screenHeight,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport const color = {\r\n\tid: 'buildin.static-color',\r\n\tname: 'Static color',\r\n\tcolor: '#000000',\r\n\r\n\tupdatedContent(): void {},\r\n\r\n\tasync render(selected: boolean, rx: RenderContext): Promise<void> {\r\n\t\trx.drawRect({\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tw: screenWidth,\r\n\t\t\th: screenHeight,\r\n\t\t\tfill: { style: this.color },\r\n\t\t});\r\n\t},\r\n\r\n\thitTest() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetHitbox() {\r\n\t\treturn {\r\n\t\t\tx0: 0,\r\n\t\t\ty0: 0,\r\n\t\t\tx1: screenWidth,\r\n\t\t\ty1: screenHeight,\r\n\t\t};\r\n\t},\r\n};\r\n\r\nexport const transparent = {\r\n\tid: 'buildin.static-color',\r\n\tname: 'Transparent',\r\n\t// tslint:disable-next-line: no-empty\r\n\tasync render(selected: boolean, rx: RenderContext) {},\r\n\r\n\thitTest() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetHitbox() {\r\n\t\treturn {\r\n\t\t\tx0: 0,\r\n\t\t\ty0: 0,\r\n\t\t\tx1: screenWidth,\r\n\t\t\ty1: screenHeight,\r\n\t\t};\r\n\t},\r\n};\r\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAAsset } from '@/asset-manager';\nimport { IRenderable, IHitbox } from './renderable';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { DeepReadonly } from '@/util/readonly';\n\nconst BaseXPosition = 640;\n\nexport class Sprite implements IRenderable {\n\tpublic ratio: number = 0;\n\tpublic lockedRatio: boolean = true;\n\tprivate asset: HTMLImageElement | null = null;\n\n\tpublic get id(): string {\n\t\treturn this.obj.id;\n\t}\n\tpublic get infront(): boolean {\n\t\treturn this.obj.onTop;\n\t}\n\n\tpublic constructor(public readonly obj: DeepReadonly<ISprite>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tconst assets = await Promise.all(\n\t\t\tthis.obj.assets.map((asset) => getAAsset(asset))\n\t\t);\n\t\tconst x = this.obj.x - this.obj.width / 2;\n\t\tfor (const asset of assets) {\n\t\t\trx.drawImage({\n\t\t\t\timage: asset,\n\t\t\t\tx,\n\t\t\t\ty: this.obj.y,\n\t\t\t\tw: this.obj.width,\n\t\t\t\th: this.obj.height,\n\t\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\t\tflip: this.obj.flip,\n\t\t\t\topacity: this.obj.opacity,\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst hitX = hx - this.obj.x + this.obj.width / 2;\n\t\tconst hitY = hy - this.obj.y;\n\t\treturn (\n\t\t\thitX >= 0 &&\n\t\t\thitX <= this.obj.width &&\n\t\t\thitY >= 0 &&\n\t\t\thitY <= this.obj.height\n\t\t);\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: this.obj.x - this.obj.width / 2,\n\t\t\tx1: this.obj.x + this.obj.width / 2,\n\t\t\ty0: this.obj.y,\n\t\t\ty1: this.obj.y + this.obj.height,\n\t\t};\n\t}\n}\n","export class RenderAbortedException {}\n","import { RenderAbortedException } from './renderAbortedException';\nimport { Renderer } from './renderer';\nimport { ErrorAsset } from '@/models/error-asset';\n\nconst opacityFactor = 100;\n\nexport class RenderContext {\n\tprivate aborted: boolean = false;\n\n\tpublic constructor(\n\t\tpublic fsCtx: CanvasRenderingContext2D,\n\t\tpublic readonly hq: boolean,\n\t\tpublic readonly preview: boolean\n\t) {}\n\n\tpublic drawText(\n\t\tparams: { text: string; align?: CanvasTextAlign; font?: string } & IRPos &\n\t\t\tIOOutline &\n\t\t\tIOFill\n\t) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, x = 0, y = 0, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t\tthis.fsCtx.strokeText(text, x, y);\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t\tthis.fsCtx.fillText(text, x, y);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic measureText(\n\t\tparams: {\n\t\t\ttext: string;\n\t\t\talign?: CanvasTextAlign;\n\t\t\tfont?: string;\n\t\t} & IOOutline &\n\t\t\tIOFill\n\t): TextMetrics {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t}\n\t\tconst ret = this.fsCtx.measureText(text);\n\t\tthis.fsCtx.restore();\n\t\treturn ret;\n\t}\n\n\tpublic drawImage(\n\t\tparams: {\n\t\t\timage: HTMLImageElement | ErrorAsset | Renderer;\n\t\t\tflip?: boolean;\n\t\t} & IRPos &\n\t\t\tIOSize &\n\t\t\tIOShadow &\n\t\t\tIOOpacity\n\t): void {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tif (params.image instanceof ErrorAsset) return;\n\t\tconst { image, flip, x, y, w, h, opacity } = {\n\t\t\tflip: false,\n\t\t\tw: params.image.width,\n\t\t\th: params.image.height,\n\t\t\topacity: 100,\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.save();\n\n\t\tif (opacity < opacityFactor) {\n\t\t\tthis.fsCtx.globalAlpha = opacity / opacityFactor;\n\t\t}\n\n\t\tif (params.shadow) {\n\t\t\tconst shadow = params.shadow;\n\t\t\tif (shadow.color) {\n\t\t\t\tthis.fsCtx.shadowColor = shadow.color;\n\t\t\t}\n\t\t\tif (shadow.blur) {\n\t\t\t\tthis.fsCtx.shadowBlur = shadow.blur;\n\t\t\t}\n\t\t\tif (shadow.offsetX) {\n\t\t\t\tthis.fsCtx.shadowOffsetX = shadow.offsetX;\n\t\t\t}\n\t\t\tif (shadow.offsetY) {\n\t\t\t\tthis.fsCtx.shadowOffsetY = shadow.offsetY;\n\t\t\t}\n\t\t}\n\n\t\tthis.fsCtx.translate(x + w / 2, y + h / 2);\n\t\tthis.fsCtx.scale(flip ? -1 : 1, 1);\n\n\t\tif (image instanceof Renderer) {\n\t\t\timage.paintOnto(this.fsCtx, -w / 2, -h / 2, w, h);\n\t\t} else {\n\t\t\tthis.fsCtx.drawImage(image as HTMLImageElement, -w / 2, -h / 2, w, h);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawRect({\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\toutline,\n\t\tfill,\n\t\tcomposition,\n\t}: IRPos & IRSize & IOOutline & IOFill & IOComposition) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tthis.fsCtx.rect(x, y, w, h);\n\n\t\tif (composition) {\n\t\t\tthis.fsCtx.globalCompositeOperation = composition;\n\t\t}\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawPath({\n\t\toutline,\n\t\tfill,\n\t\tpath,\n\t}: { path: (ctx: CanvasPath) => void } & IOOutline & IOFill) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tpath(this.fsCtx);\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic patternFrom(\n\t\timage: HTMLImageElement | Renderer,\n\t\trepetition: 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat' = 'repeat'\n\t): CanvasPattern {\n\t\tif (image instanceof Renderer) {\n\t\t\timage = (image as any).previewCanvas;\n\t\t}\n\t\treturn this.fsCtx.createPattern(\n\t\t\t(image as any) as CanvasImageSource,\n\t\t\trepetition\n\t\t)!;\n\t}\n\n\tpublic customTransform(\n\t\ttransform: (transformContext: CanvasRenderingContext2D) => void,\n\t\trender: (rx: RenderContext) => void\n\t) {\n\t\tthis.fsCtx.save();\n\t\ttransform(this.fsCtx);\n\t\trender(this);\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic linearGradient(\n\t\tx0: number,\n\t\ty0: number,\n\t\tx1: number,\n\t\ty1: number\n\t): CanvasGradient {\n\t\treturn this.fsCtx.createLinearGradient(x0, y0, x1, y1);\n\t}\n\n\tpublic abort(): void {\n\t\tthis.aborted = true;\n\t}\n}\n\nconst optSize = { w: 0, h: 0 };\nconst optShadow = {\n\tblur: 0,\n\tcolor: 'none',\n\toffsetX: 0,\n\toffsetY: 0,\n};\n\nexport interface IShadow {\n\tblur?: number;\n\tcolor?: string;\n\toffsetX?: number;\n\toffsetY?: number;\n}\n\nexport interface IOutline {\n\tstyle: string;\n\twidth: number;\n}\n\nexport interface IFill {\n\tstyle: string | CanvasGradient | CanvasPattern;\n}\n\ninterface IOShadow {\n\tshadow?: IShadow;\n}\n\ninterface IOComposition {\n\tcomposition?: CanvasRenderingContext2D['globalCompositeOperation'];\n}\n\ninterface IRPos {\n\tx: number;\n\ty: number;\n}\n\ninterface IRSize {\n\tw: number;\n\th: number;\n}\n\ninterface IOSize {\n\tw?: number;\n\th?: number;\n}\n\ninterface IOOutline {\n\toutline?: IOutline;\n}\ninterface IOOpacity {\n\topacity?: number;\n}\n\ninterface IOFill {\n\tfill?: IFill;\n}\n","import { RenderContext } from './rendererContext';\nimport { RenderAbortedException } from './renderAbortedException';\nimport environment from '@/environments/environment';\nimport { screenWidth, screenHeight } from '@/constants/base';\n\nexport class Renderer {\n\tprivate previewCanvas: HTMLCanvasElement;\n\tprivate runningContext: RenderContext | null = null;\n\n\tpublic constructor(w: number = screenWidth, h: number = screenHeight) {\n\t\tthis.previewCanvas = document.createElement('canvas');\n\t\tthis.previewCanvas.width = w;\n\t\tthis.previewCanvas.height = h;\n\t}\n\n\tpublic async render(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\thq: boolean = true\n\t): Promise<boolean> {\n\t\tif (this.runningContext) {\n\t\t\tthis.runningContext.abort();\n\t\t}\n\n\t\tconst ctx = this.previewCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tconst context = (this.runningContext = new RenderContext(ctx, hq, true));\n\t\ttry {\n\t\t\tawait renderCallback(this.runningContext);\n\t\t} catch (e) {\n\t\t\tif (e instanceof RenderAbortedException) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tif (context === this.runningContext) {\n\t\t\t\tthis.runningContext = null;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.previewCanvas.width;\n\t}\n\n\tpublic get height(): number {\n\t\treturn this.previewCanvas.height;\n\t}\n\n\tpublic paintOnto(\n\t\tc: CanvasRenderingContext2D,\n\t\tx: number,\n\t\ty: number,\n\t\tw?: number,\n\t\th?: number\n\t) {\n\t\tif (w && h) {\n\t\t\tc.drawImage(this.previewCanvas, x, y, w, h);\n\t\t} else {\n\t\t\tc.drawImage(this.previewCanvas, x, y);\n\t\t}\n\t}\n\n\tpublic async download(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\tfilename: string\n\t): Promise<string> {\n\t\tconst downloadCanvas = document.createElement('canvas');\n\t\tdownloadCanvas.width = this.previewCanvas.width;\n\t\tdownloadCanvas.height = this.previewCanvas.height;\n\n\t\tconst ctx = downloadCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tawait renderCallback(new RenderContext(ctx, true, false));\n\n\t\treturn environment.saveToFile(downloadCanvas, filename);\n\t}\n\n\tpublic getDataAt(x: number, y: number): Uint8ClampedArray {\n\t\tconst ctx = this.previewCanvas.getContext('2d');\n\n\t\treturn ctx!.getImageData(x, y, 1, 1).data;\n\t}\n}\n","import { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAsset, getAAsset } from '@/asset-manager';\r\nimport { Renderer } from '@/renderer/renderer';\r\nimport { IRenderable, IHitbox } from './renderable';\r\nimport {\r\n\tICharacter,\r\n\tgetPose,\r\n\tgetHeads,\r\n\tCloseUpYOffset,\r\n\tgetDataG,\r\n\tgetData,\r\n} from '@/store/objectTypes/characters';\r\nimport {\r\n\tPose,\r\n\tCharacter as CharacterModel,\r\n\tContentPack,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { IAsset } from '@/store/content';\r\nimport { ErrorAsset } from '../models/error-asset';\r\nimport { DeepReadonly } from '@/util/readonly';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\n\r\nexport class Character implements IRenderable {\r\n\tpublic styleData = {\r\n\t\tlastBase: '',\r\n\t\tcomponents: {} as { [component: string]: string },\r\n\t};\r\n\tprivate lq: boolean = true;\r\n\tprivate localRenderer: Renderer | null = null;\r\n\tprivate lastVersion = -1;\r\n\tprivate hitDetectionFallback = false;\r\n\r\n\tpublic get id(): string {\r\n\t\treturn this.obj.id;\r\n\t}\r\n\r\n\tpublic constructor(\r\n\t\tpublic readonly obj: ICharacter,\r\n\t\tprivate data: DeepReadonly<CharacterModel<IAsset>>\r\n\t) {}\r\n\r\n\tpublic updatedContent(store: Store<DeepReadonly<IRootState>>): void {\r\n\t\tthis.data = getData(store, this.obj);\r\n\t}\r\n\r\n\tpublic async updateLocalCanvas() {\r\n\t\tconst pose = getPose(this.data, this.obj) as Pose<IAsset>;\r\n\t\tthis.localRenderer = new Renderer(pose.size[0], pose.size[1]);\r\n\t\tawait this.localRenderer.render(async (rx) => {\r\n\t\t\tconst currentHeads = getHeads(this.data, this.obj);\r\n\r\n\t\t\tconst drawAssetsUnloaded: IDrawAssetsUnloaded[] = [];\r\n\r\n\t\t\tfor (const renderCommand of pose.renderCommands) {\r\n\t\t\t\tswitch (renderCommand.type) {\r\n\t\t\t\t\tcase 'head':\r\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\r\n\t\t\t\t\t\t\toffset: renderCommand.offset,\r\n\t\t\t\t\t\t\tassets: currentHeads\r\n\t\t\t\t\t\t\t\t? currentHeads.variants[this.obj.posePositions.head || 0]\r\n\t\t\t\t\t\t\t\t: [],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\r\n\t\t\t\t\t\t\toffset: renderCommand.offset,\r\n\t\t\t\t\t\t\tassets: renderCommand.images,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pose-part':\r\n\t\t\t\t\t\tconst posePosition = pose.positions[renderCommand.part];\r\n\t\t\t\t\t\tif (!posePosition || posePosition.length === 0) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst partAssets =\r\n\t\t\t\t\t\t\tposePosition[this.obj.posePositions[renderCommand.part] || 0];\r\n\t\t\t\t\t\tif (!partAssets) break;\r\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\r\n\t\t\t\t\t\t\toffset: renderCommand.offset,\r\n\t\t\t\t\t\t\tassets: partAssets,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(renderCommand, JSON.stringify(drawAssetsUnloaded));\r\n\t\t\t}\r\n\r\n\t\t\tconst loadedDraws = await Promise.all(\r\n\t\t\t\tdrawAssetsUnloaded.map((drawAsset) => loadAssets(drawAsset, rx.hq))\r\n\t\t\t);\r\n\r\n\t\t\tfor (const loadedDraw of loadedDraws) {\r\n\t\t\t\tfor (const asset of loadedDraw.assets) {\r\n\t\t\t\t\trx.drawImage({\r\n\t\t\t\t\t\timage: asset,\r\n\t\t\t\t\t\tx: loadedDraw.offset[0],\r\n\t\t\t\t\t\ty: loadedDraw.offset[1],\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastVersion = this.obj.version;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic get width() {\r\n\t\tconst zoom = this.obj.close ? 2 : 1;\r\n\t\treturn this.obj.width * zoom;\r\n\t}\r\n\r\n\tpublic get height() {\r\n\t\tconst zoom = this.obj.close ? 2 : 1;\r\n\t\treturn this.obj.height * zoom;\r\n\t}\r\n\r\n\tpublic get x() {\r\n\t\treturn this.obj.x;\r\n\t}\r\n\r\n\tpublic get y() {\r\n\t\treturn (this.obj.close ? CloseUpYOffset : 0) + this.obj.y;\r\n\t}\r\n\r\n\tpublic async render(selected: boolean, rx: RenderContext) {\r\n\t\tif (\r\n\t\t\tthis.localRenderer === null ||\r\n\t\t\tthis.lastVersion !== this.obj.version ||\r\n\t\t\tthis.lq !== !rx.hq\r\n\t\t) {\r\n\t\t\tawait this.updateLocalCanvas();\r\n\t\t}\r\n\r\n\t\tconst w = this.width;\r\n\t\tconst h = this.height;\r\n\t\tconst x = this.x - w / 2;\r\n\t\tconst y = this.y;\r\n\r\n\t\trx.drawImage({\r\n\t\t\timage: this.localRenderer!,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tw,\r\n\t\t\th,\r\n\t\t\tflip: this.obj.flip,\r\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\r\n\t\t\topacity: this.obj.opacity,\r\n\t\t});\r\n\t}\r\n\r\n\tpublic hitTest(hx: number, hy: number): boolean {\r\n\t\tif (!this.localRenderer) return false;\r\n\r\n\t\tconst scaledX = hx - (this.x - this.width / 2);\r\n\t\tconst scaledY = hy - this.y;\r\n\r\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\r\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\r\n\r\n\t\tif (!this.hitDetectionFallback) {\r\n\t\t\ttry {\r\n\t\t\t\tconst flippedX = this.obj.flip ? this.width - scaledX : scaledX;\r\n\t\t\t\tconst scaleX = this.localRenderer.width / this.width;\r\n\t\t\t\tconst scaleY = this.localRenderer.height / this.height;\r\n\t\t\t\tconst data = this.localRenderer.getDataAt(\r\n\t\t\t\t\tMath.round(flippedX * scaleX),\r\n\t\t\t\t\tMath.round(scaledY * scaleY)\r\n\t\t\t\t);\r\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\r\n\t\t\t\treturn data[3] !== 0;\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// On chrome for android, the hit test tends to fail because of cross-origin shenanigans, even though\r\n\t\t\t\t// we only ever load from one origin. ¯\\_(ツ)_/¯\r\n\t\t\t\t// So we have a fallback that doesn't read the contents of the canvas. This looses accuracy, but at\r\n\t\t\t\t// least works always.\r\n\t\t\t\tif (e instanceof DOMException && e.message.includes('cross-origin')) {\r\n\t\t\t\t\tthis.hitDetectionFallback = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic getHitbox(): IHitbox {\r\n\t\treturn {\r\n\t\t\tx0: this.x - this.width / 2,\r\n\t\t\tx1: this.x + this.width / 2,\r\n\t\t\ty0: this.y,\r\n\t\t\ty1: this.y + this.height,\r\n\t\t};\r\n\t}\r\n}\r\n\r\ninterface IDrawAssetsUnloaded {\r\n\toffset: DeepReadonly<[number, number]>;\r\n\tassets: DeepReadonly<IAsset[]>;\r\n}\r\n\r\ninterface IDrawAssets {\r\n\toffset: DeepReadonly<[number, number]>;\r\n\tassets: DeepReadonly<Array<HTMLImageElement | ErrorAsset>>;\r\n}\r\n\r\nasync function loadAssets(\r\n\tunloaded: IDrawAssetsUnloaded,\r\n\thq: boolean\r\n): Promise<IDrawAssets> {\r\n\treturn {\r\n\t\toffset: unloaded.offset,\r\n\t\tassets: await Promise.all(\r\n\t\t\tunloaded.assets.map((asset) => getAAsset(asset, hq))\r\n\t\t),\r\n\t};\r\n}\r\n","export function roundedRectangle(\n\tctx: CanvasPath,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number\n) {\n\tif (w < 0) w = 0;\n\tif (h < 0) h = 0;\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.arcTo(x + w, y + h, x, y + h, r);\n\tctx.arcTo(x, y + h, x, y, r);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n}\n\nexport function roundedTopRectangle(\n\tctx: CanvasPath,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number\n) {\n\tif (w < 0) w = 0;\n\tif (h < 0) h = 0;\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.lineTo(x + w, y + h);\n\tctx.lineTo(x, y + h);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n}\n","import { HSLAColor } from '@/util/colors/hsl';\n\n// tslint:disable: no-magic-numbers\nexport const nameboxTextOutlineDelta = new HSLAColor(\n\t-0.03065134099616873,\n\t-0.5714285714285714,\n\t-0.29607843137254896,\n\t0\n);\n\nexport const nameboxBackgroundDelta = new HSLAColor(\n\t0.002028397565922768,\n\t0,\n\t0.13725490196078438,\n\t0\n);\n\nexport const nameboxGradientMiddleStopPosition = 0.82;\n\nexport const nameboxGradientEndDelta = new HSLAColor(\n\t-0.004901960784313708,\n\t-0.8599999999999999,\n\t-0.16274509803921566,\n\t0\n);\n\nexport const nameboxRounding = 12;\nexport const nameboxRoundingBuffer = 1.5;\n\nexport const textboxRounding = 12;\nexport const textboxRoundingBuffer = 1.5;\n\nexport const nameColorThreshold = 0.6;\n\nexport const controlColorDelta = new HSLAColor(\n\t0.08045977011494243,\n\t-0.5714285714285714,\n\t-0.5960784313725489,\n\t0\n);\n\nexport const controlDisableColorDelta = new HSLAColor(\n\t0,\n\t-0.14285714285714296,\n\t0.3,\n\t0\n);\n\nexport const dotColorDelta = new HSLAColor(\n\t0.004269293924466178,\n\t-0.01869158878504662,\n\t-0.039215686274509665,\n\t0\n);\n\nexport const dotRadius = 9.5;\nexport const dotPatternSize = 47;\n\nexport const textboxOutlineColorDelta = new HSLAColor(\n\t0.0023347701149424305,\n\t0,\n\t0.10784313725490202,\n\t0\n);\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport { IRenderable, IHitbox } from './renderable';\nimport {\n\tNameboxTextStyle,\n\tControlsTextStyle,\n\tControlsTextDisabledStyle,\n\tTextBoxWidth,\n\tNameboxHeight,\n\tTextBoxHeight,\n\tTextBoxCorruptedWidth,\n\tNameboxXOffset,\n\tNameboxWidth,\n\tNameboxTextYOffset,\n\tControlsXHistoryOffset,\n\tControlsXSkipOffset,\n\tControlsXStuffOffset,\n\tArrowXRightOffset,\n\tArrowYBottomOffset,\n\tTextBoxTextYOffset,\n\tTextBoxTextXOffset,\n\tControlsYBottomOffset,\n\tGlowRY,\n\tGlowRX,\n} from '@/constants/textBox';\nimport { Renderer } from '@/renderer/renderer';\nimport { roundedRectangle, roundedTopRectangle } from '@/renderer/pathTools';\nimport { RGBAColor } from '@/util/colors/rgb';\nimport { TextRenderer, ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport {\n\tnameboxTextOutlineDelta,\n\tnameboxBackgroundDelta,\n\tnameboxGradientEndDelta,\n\tnameboxGradientMiddleStopPosition,\n\tcontrolColorDelta,\n\tcontrolDisableColorDelta,\n\tnameboxRounding,\n\tdotColorDelta,\n\tdotRadius,\n\tdotPatternSize,\n\tnameColorThreshold,\n\ttextboxRoundingBuffer,\n\ttextboxRounding,\n\ttextboxOutlineColorDelta,\n} from '@/constants/textBoxCustom';\n\nexport class TextBox implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\n\tpublic constructor(public obj: ITextBox) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.obj.style === 'custom' ? this.obj.width : TextBoxWidth;\n\t}\n\n\tpublic get height(): number {\n\t\treturn (\n\t\t\t(this.obj.style === 'custom' ? this.obj.height : TextBoxHeight) +\n\t\t\tNameboxHeight\n\t\t);\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst w = this.width;\n\t\tconst h = this.height;\n\n\t\tconst w2 = w / 2;\n\t\tconst x1 = this.obj.x - w2;\n\t\tconst x2 = x1 + w;\n\t\tconst y1 = this.obj.y;\n\t\tconst y2 = y1 + h;\n\t\treturn x1 <= hx && x2 >= hx && y1 <= hy && y2 >= hy;\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic get controlColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(controlColorDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customControlsColor;\n\t}\n\n\tpublic get controlsStyle() {\n\t\tif (this.obj.style !== 'custom') return ControlsTextStyle;\n\t\treturn {\n\t\t\t...ControlsTextStyle,\n\t\t\tfill: {\n\t\t\t\tstyle: this.controlColor,\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic get controlsDisableStyle() {\n\t\tif (this.obj.style !== 'custom') return ControlsTextDisabledStyle;\n\n\t\tconst col = RGBAColor.fromCss(this.controlColor).toHSL();\n\t\tconst disColor = col\n\t\t\t.shift(controlDisableColorDelta)\n\t\t\t.toRgb()\n\t\t\t.toCss();\n\n\t\treturn {\n\t\t\t...ControlsTextStyle,\n\n\t\t\tfill: {\n\t\t\t\tstyle: disColor,\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tconst y = this.obj.y;\n\n\t\t\tawait this.renderBackdrop(rx, x, y + NameboxHeight);\n\n\t\t\tif (this.obj.talkingDefault !== 'No-one') {\n\t\t\t\tconst name =\n\t\t\t\t\tthis.obj.talkingDefault === 'Other'\n\t\t\t\t\t\t? this.obj.talkingOther\n\t\t\t\t\t\t: this.obj.talkingDefault;\n\t\t\t\tawait this.renderNamebox(rx, x + NameboxXOffset, y, name);\n\t\t\t}\n\n\t\t\tawait this.renderText(rx, x, y);\n\n\t\t\tconst bottom = y + h;\n\t\t\tconst controlsY = bottom - ControlsYBottomOffset;\n\t\t\tconst controlsCenter = x + w / 2;\n\n\t\t\tif (this.obj.controls) {\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'History',\n\t\t\t\t\tx: controlsCenter + ControlsXHistoryOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...this.controlsStyle,\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Skip',\n\t\t\t\t\tx: controlsCenter + ControlsXSkipOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...(this.obj.skip ? this.controlsStyle : this.controlsDisableStyle),\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Auto   Save   Load   Settings',\n\t\t\t\t\tx: controlsCenter + ControlsXStuffOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...this.controlsStyle,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.obj.continue) {\n\t\t\t\trx.drawImage({\n\t\t\t\t\timage: await getAsset('next'),\n\t\t\t\t\tx: x + w - ArrowXRightOffset,\n\t\t\t\t\ty: bottom - ArrowYBottomOffset,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: this.obj.x - this.obj.width / 2,\n\t\t\tx1: this.obj.x + this.obj.width / 2,\n\t\t\ty0: this.obj.y,\n\t\t\ty1: this.obj.y + this.obj.height,\n\t\t};\n\t}\n\n\tprivate get nameboxOutlineColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(nameboxTextOutlineDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customNameboxStroke;\n\t}\n\n\tprivate get nameboxBackgroundColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(nameboxBackgroundDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customNameboxColor;\n\t}\n\n\tprivate async renderNamebox(\n\t\trx: RenderContext,\n\t\tx: number,\n\t\ty: number,\n\t\tname: string\n\t): Promise<void> {\n\t\tlet w: number;\n\t\tconst h = NameboxHeight;\n\t\tlet style: ITextStyle = NameboxTextStyle;\n\t\tif (this.obj.style === 'custom') {\n\t\t\tstyle = {\n\t\t\t\t...style,\n\t\t\t\tstrokeColor: this.nameboxOutlineColor,\n\t\t\t\tstrokeWidth: 6,\n\t\t\t\tcolor: '#FFFFFF',\n\t\t\t};\n\t\t\tw = this.obj.customNameboxWidth;\n\t\t\trx.customTransform(\n\t\t\t\tctx => {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\troundedTopRectangle(ctx, x, y, w, h, nameboxRounding);\n\t\t\t\t\tctx.clip();\n\t\t\t\t},\n\t\t\t\tsubRx => {\n\t\t\t\t\tconst gradient = subRx.linearGradient(x, y, x, y + NameboxHeight);\n\t\t\t\t\tconst baseBG = RGBAColor.fromCss(this.nameboxBackgroundColor);\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\tconst color = new RGBAColor(baseBG.r, baseBG.g, baseBG.b, 0.95);\n\t\t\t\t\tconst targetColor = color\n\t\t\t\t\t\t.toHSL()\n\t\t\t\t\t\t.shift(nameboxGradientEndDelta)\n\t\t\t\t\t\t.toRgb();\n\t\t\t\t\tgradient.addColorStop(0, color.toCss());\n\t\t\t\t\tgradient.addColorStop(\n\t\t\t\t\t\tnameboxGradientMiddleStopPosition,\n\t\t\t\t\t\tcolor.toCss()\n\t\t\t\t\t);\n\t\t\t\t\tgradient.addColorStop(1, targetColor.toCss());\n\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tw: this.obj.width,\n\t\t\t\t\t\th,\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: gradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (this.obj.style !== 'none') {\n\t\t\tw = NameboxWidth;\n\t\t\trx.drawImage({\n\t\t\t\timage: await getAsset('namebox'),\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t});\n\t\t} else {\n\t\t\tw = NameboxWidth;\n\t\t}\n\n\t\tconst render = new TextRenderer(name, style);\n\t\tawait render.loadFonts();\n\n\t\trender.fixAlignment('center', x, x + w, y + NameboxTextYOffset);\n\n\t\trender.render(rx.fsCtx);\n\t}\n\n\tprivate async renderBackdrop(\n\t\trx: RenderContext,\n\t\tx: number,\n\t\ty: number\n\t): Promise<void> {\n\t\tif (this.obj.style === 'custom') {\n\t\t\tconst hslColor = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\tconst dotPattern = new Renderer(dotPatternSize, dotPatternSize);\n\t\t\tdotPattern.render(async (dotRx: RenderContext) => {\n\t\t\t\tconst fill = {\n\t\t\t\t\tstyle: hslColor\n\t\t\t\t\t\t.shift(dotColorDelta)\n\t\t\t\t\t\t.toRgb()\n\t\t\t\t\t\t.toCss(),\n\t\t\t\t};\n\n\t\t\t\tfunction drawDot(dotX: number, dotY: number) {\n\t\t\t\t\tdotRx.drawPath({\n\t\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\t\tctx.ellipse(dotX, dotY, dotRadius, dotRadius, 0, 0, 2 * Math.PI);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfill,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdrawDot(0, 0);\n\t\t\t\tdrawDot(dotPatternSize, 0);\n\t\t\t\tdrawDot(0, dotPatternSize);\n\t\t\t\tdrawDot(dotPatternSize, dotPatternSize);\n\t\t\t\tdrawDot(dotPatternSize / 2, dotPatternSize / 2);\n\t\t\t}, true);\n\t\t\trx.customTransform(\n\t\t\t\tctx => {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tx + textboxRoundingBuffer,\n\t\t\t\t\t\ty + textboxRoundingBuffer,\n\t\t\t\t\t\tthis.obj.width - textboxRoundingBuffer * 2,\n\t\t\t\t\t\tthis.obj.height - textboxRoundingBuffer * 2,\n\t\t\t\t\t\ttextboxRounding\n\t\t\t\t\t);\n\t\t\t\t\tctx.clip();\n\t\t\t\t},\n\t\t\t\tsubRx => {\n\t\t\t\t\tconst h = this.obj.height;\n\t\t\t\t\tconst w = this.obj.width;\n\t\t\t\t\tconst gradient = subRx.linearGradient(x, y, x, y + h);\n\t\t\t\t\tconst color = RGBAColor.fromHex(this.obj.customColor);\n\t\t\t\t\tgradient.addColorStop(0, color.toCss());\n\t\t\t\t\tgradient.addColorStop(\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t`rgba(${color.r},${color.g},${color.b},0.6667)`\n\t\t\t\t\t);\n\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tw,\n\t\t\t\t\t\th,\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: gradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toutline: {\n\t\t\t\t\t\t\tstyle: '#ffdfee',\n\t\t\t\t\t\t\twidth: 6,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tsubRx.customTransform(\n\t\t\t\t\t\tctx => {\n\t\t\t\t\t\t\tctx.translate(x, y);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsubSubRx => {\n\t\t\t\t\t\t\tconst pattern = subRx.patternFrom(dotPattern);\n\t\t\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\tw,\n\t\t\t\t\t\t\t\th,\n\t\t\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\t\t\tstyle: pattern,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomposition: 'source-atop',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tconst glowGradient = subRx.linearGradient(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h - GlowRY,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h\n\t\t\t\t\t);\n\t\t\t\t\tglowGradient.addColorStop(0, 'rgba(255,255,255,0.3137)');\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\tglowGradient.addColorStop(0.5, 'rgba(255,255,255,0.0627)');\n\t\t\t\t\tglowGradient.addColorStop(1, 'rgba(255,255,255,0)');\n\t\t\t\t\tsubRx.drawPath({\n\t\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\t\tctx.ellipse(x + w / 2, y + h, GlowRX, GlowRY, 0, 0, 2 * Math.PI);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: glowGradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst outlineColor = hslColor\n\t\t\t\t.shift(textboxOutlineColorDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t\trx.drawPath({\n\t\t\t\tpath: path => {\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tx + textboxRoundingBuffer,\n\t\t\t\t\t\ty + textboxRoundingBuffer,\n\t\t\t\t\t\tthis.obj.width - textboxRoundingBuffer * 2,\n\t\t\t\t\t\tthis.obj.height - textboxRoundingBuffer * 2,\n\t\t\t\t\t\ttextboxRounding\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\toutline: {\n\t\t\t\t\tstyle: outlineColor,\n\t\t\t\t\twidth: 3,\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (this.obj.style !== 'none') {\n\t\t\tif (this.obj.style === 'corrupt') {\n\t\t\t\tx += (TextBoxWidth - TextBoxCorruptedWidth) / 2;\n\t\t\t}\n\t\t\tconst image = await getAsset(\n\t\t\t\tthis.obj.style === 'corrupt' ? 'textbox_monika' : 'textbox'\n\t\t\t);\n\t\t\trx.drawImage({ image, x, y });\n\t\t}\n\t}\n\n\tprivate async renderText(\n\t\trx: RenderContext,\n\t\tbaseX: number,\n\t\tbaseY: number\n\t): Promise<void> {\n\t\tconst render = new TextRenderer(this.obj.text, {\n\t\t\talpha: 1,\n\t\t\tcolor: '#ffffff',\n\t\t\tfontName: 'aller',\n\t\t\tfontSize: 24,\n\t\t\tisBold: false,\n\t\t\tisItalic: false,\n\t\t\tisStrikethrough: false,\n\t\t\tisUnderlined: false,\n\t\t\tletterSpacing: 0,\n\t\t\tstrokeColor: '#523140',\n\t\t\tstrokeWidth: 4,\n\t\t\tlineSpacing: 1.2,\n\t\t});\n\t\tif (this.obj.autoQuoting && this.obj.talkingDefault !== 'No-one') {\n\t\t\trender.quote();\n\t\t}\n\t\tawait render.loadFonts();\n\n\t\trender.fixAlignment(\n\t\t\t'left',\n\t\t\tbaseX + TextBoxTextXOffset,\n\t\t\t0,\n\t\t\tbaseY + NameboxHeight + TextBoxTextYOffset\n\t\t);\n\n\t\trender.render(rx.fsCtx);\n\t}\n}\n","import { HSLAColor } from '@/util/colors/hsl';\nimport { screenHeight } from './base';\nimport { ITextStyle } from '@/renderer/textRenderer/textRenderer';\n\n// tslint:disable: no-magic-numbers\nexport const nameboxTextOutlineDelta = new HSLAColor(\n\t-0.03065134099616873,\n\t-0.5714285714285714,\n\t-0.29607843137254896,\n\t0\n);\n\nexport const ChoiceButtonColor = '#ffe6f4';\nexport const ChoiceButtonBorderColor = '#ffbde1';\nexport const ChoiceButtonWidth = 420;\nexport const ChoiceSpacing = 22;\nexport const ChoiceX = 640;\nexport const ChoiceYOffset = 270;\nexport const ChoicePadding = 7;\n\nexport const ChoiceY = (screenHeight - ChoiceYOffset) / 2;\n\nexport const ChoiceTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IChoices } from '@/store/objectTypes/choices';\nimport {\n\tChoiceTextStyle,\n\tChoiceButtonBorderColor,\n\tChoiceButtonColor,\n\tChoicePadding,\n\tChoiceSpacing,\n} from '@/constants/choices';\nimport { DeepReadonly } from '@/util/readonly';\n\nexport class Choice implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate choiceRenderers: TextRenderer[] = [];\n\n\tpublic constructor(public obj: DeepReadonly<IChoices>) {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.obj.width;\n\t}\n\n\tpublic updatedContent(): void {}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async (rx) => {\n\t\t\tawait this.updateChoiceBounds();\n\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tlet y = this.obj.y - h / 2;\n\n\t\t\tfor (const choiceRenderer of this.choiceRenderers) {\n\t\t\t\tawait choiceRenderer.loadFonts();\n\t\t\t\tconst height = choiceRenderer.getHeight();\n\t\t\t\trx.drawRect({\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t\tw,\n\t\t\t\t\th: height + ChoicePadding * 2,\n\t\t\t\t\toutline: {\n\t\t\t\t\t\tstyle: ChoiceButtonBorderColor,\n\t\t\t\t\t\twidth: 3,\n\t\t\t\t\t},\n\t\t\t\t\tfill: {\n\t\t\t\t\t\tstyle: ChoiceButtonColor,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tchoiceRenderer.fixAlignment(\n\t\t\t\t\t'center',\n\t\t\t\t\tx,\n\t\t\t\t\tx + w,\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\ty + ChoiceSpacing * 1.25\n\t\t\t\t);\n\t\t\t\tchoiceRenderer.render(rx.fsCtx);\n\t\t\t\ty += height + ChoicePadding * 2 + ChoiceSpacing;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async updateChoiceBounds() {\n\t\tthis.choiceRenderers = this.obj.choices.map(\n\t\t\t(choice) => new TextRenderer(choice.text || ' ', ChoiceTextStyle)\n\t\t);\n\n\t\tthis.height =\n\t\t\tthis.choiceRenderers.reduce(\n\t\t\t\t(acc, renderer) => acc + renderer.getHeight() + ChoicePadding * 2,\n\t\t\t\t0\n\t\t\t) +\n\t\t\tthis.obj.choiceDistance * (this.obj.choices.length - 1);\n\t}\n}\n","import { HSLAColor } from '@/util/colors/hsl';\nimport { screenHeight } from './base';\nimport { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { BaseTextStyle } from './textBox';\n\n// tslint:disable: no-magic-numbers\nexport const NotificationBackgroundColor = '#ffe6f4';\nexport const NotificationBorderColor = '#ffbde1';\nexport const NotificationBackdropColor = 'rgba(255,255,255,0.6)';\n// export const NotificationMaxWidth = 744;\nexport const NotificationPadding = 40;\nexport const NotificationSpacing = 30;\n\nexport const NotificationOkTextStyle: ITextStyle = {\n\t...BaseTextStyle,\n\tfontName: 'riffic',\n\tfontSize: 24,\n\tstrokeColor: '#bb5599',\n\tstrokeWidth: 8,\n\tletterSpacing: 1,\n\tcolor: 'white',\n};\n\nexport const NotificationTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1.2,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport {\n\tChoiceButtonBorderColor,\n\tChoiceButtonColor,\n\tChoiceSpacing,\n} from '@/constants/choices';\nimport { DeepReadonly } from '@/util/readonly';\nimport { INotification } from '@/store/objectTypes/notification';\nimport {\n\tNotificationTextStyle,\n\tNotificationPadding,\n\tNotificationSpacing,\n\tNotificationOkTextStyle,\n\tNotificationBackdropColor,\n} from '@/constants/notification';\n\nexport class Notification implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate width = 0;\n\n\tpublic constructor(public obj: DeepReadonly<INotification>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\tif (this.obj.backdrop) {\n\t\t\trx.drawRect({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tw: screenWidth,\n\t\t\t\th: screenHeight,\n\t\t\t\tfill: {\n\t\t\t\t\tstyle: NotificationBackdropColor,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async (rx) => {\n\t\t\tconst textRenderer = new TextRenderer(\n\t\t\t\tthis.obj.text,\n\t\t\t\tNotificationTextStyle\n\t\t\t);\n\t\t\tconst buttonRenderer = new TextRenderer('OK', NotificationOkTextStyle);\n\t\t\tawait textRenderer.loadFonts();\n\t\t\tawait buttonRenderer.loadFonts();\n\n\t\t\tconst textWidth = textRenderer.getWidth();\n\t\t\tconst textHeight = textRenderer.getHeight();\n\t\t\tconst buttonWidth = buttonRenderer.getWidth();\n\t\t\tconst buttonHeight = buttonRenderer.getHeight();\n\n\t\t\tthis.width = Math.max(textWidth, buttonWidth) + NotificationPadding * 2;\n\t\t\tthis.height =\n\t\t\t\ttextHeight +\n\t\t\t\tNotificationPadding * 2 +\n\t\t\t\tNotificationSpacing +\n\t\t\t\tbuttonHeight;\n\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tconst y = this.obj.y - h / 2;\n\n\t\t\trx.drawRect({\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tw,\n\t\t\t\th,\n\t\t\t\toutline: {\n\t\t\t\t\tstyle: ChoiceButtonBorderColor,\n\t\t\t\t\twidth: 3,\n\t\t\t\t},\n\t\t\t\tfill: {\n\t\t\t\t\tstyle: ChoiceButtonColor,\n\t\t\t\t},\n\t\t\t});\n\t\t\ttextRenderer.fixAlignment(\n\t\t\t\t'center',\n\t\t\t\tx,\n\t\t\t\tx + w,\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\ty + NotificationPadding * 1.5\n\t\t\t);\n\t\t\ttextRenderer.render(rx.fsCtx);\n\t\t\tbuttonRenderer.fixAlignment(\n\t\t\t\t'center',\n\t\t\t\tx,\n\t\t\t\tx + w,\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\ty + h - NotificationPadding\n\t\t\t);\n\t\t\tbuttonRenderer.render(rx.fsCtx);\n\t\t});\n\t}\n}\n","import { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\n\n// tslint:disable: no-magic-numbers\nexport const poemBackgrounds = [\n\t{ name: 'Normal paper', file: 'poem.jpg' },\n\t{ name: 'Lightly soiled paper', file: 'poem_y1.jpg' },\n\t{ name: 'Heavily soiled paper', file: 'poem_y2.jpg' },\n\t{ name: 'Console', file: 'internal:console' },\n\t{ name: 'Transparent', file: 'internal:transparent' },\n];\nexport const defaultPoemBackground = 0;\nexport const defaultPoemStyle = 0;\nexport const defaultX = screenWidth / 2;\nexport const defaultY = screenHeight / 2;\nexport const poemTopPadding = 33;\nexport const poemBottomPadding = 100;\nexport const poemPadding = 30;\nexport const defaultPoemWidth = 800;\nexport const defaultPoemHeight = 720;\n\n//#region Console style\nexport const consoleBackgroundColor = 'rgba(51,51,51,0.75)';\nexport const consoleWidth = 480;\nexport const consoleHeight = 180;\nexport const defaultConsoleBackground = 3;\nexport const defaultConsoleStyle = 7;\n//#endregion Console style\n\nconst BasePoemStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1.2,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n\tfontName: 'aller',\n\tfontSize: 12,\n};\n\nexport interface IPoemTextStyle extends ITextStyle {\n\tname: string;\n}\n\nexport const poemTextStyles: IPoemTextStyle[] = [\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Sayori',\n\t\tfontName: 'hashtag',\n\t\tfontSize: 34,\n\t\tlineSpacing: 1.05,\n\t\tletterSpacing: 0,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Natsuki',\n\t\tfontName: 'ammy_handwriting',\n\t\tfontSize: 28,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Monika',\n\t\tfontName: 'journal',\n\t\tfontSize: 34,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri',\n\t\tfontName: 'jp_hand_slanted',\n\t\tlineSpacing: 1.5,\n\t\tfontSize: 32,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri Act 2',\n\t\tfontName: 'damagrafik_script',\n\t\tfontSize: 18,\n\t\tletterSpacing: -8,\n\t\t// justify: true,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri Unused',\n\t\tfontName: 'as_i_lay_dying',\n\t\tfontSize: 40,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'MC',\n\t\tfontName: 'halogen',\n\t\tfontSize: 30,\n\t\tlineSpacing: 1.53,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Console',\n\t\tfontName: 'f25_bank_printer',\n\t\tfontSize: 18,\n\t\tcolor: 'white',\n\t\tlineSpacing: 1.1,\n\t},\n];\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IPoem } from '@/store/objectTypes/poem';\nimport { DeepReadonly } from '@/util/readonly';\nimport {\n\tpoemBackgrounds,\n\tpoemTextStyles,\n\tpoemTopPadding,\n\tpoemPadding,\n\tconsoleBackgroundColor,\n} from '@/constants/poem';\nimport { getAsset, getAssetByUrl } from '@/asset-manager';\n\nexport class Poem implements IRenderable {\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate width = 0;\n\tprivate choiceRenderers: TextRenderer[] = [];\n\n\tpublic constructor(public obj: DeepReadonly<IPoem>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async (rx) => {\n\t\t\tconst paper = poemBackgrounds[this.obj.background];\n\t\t\tlet y = this.obj.y;\n\t\t\tlet x = this.obj.x + 10;\n\t\t\tlet padding = poemPadding;\n\t\t\tlet topPadding = poemTopPadding;\n\n\t\t\tif (paper.file === 'internal:console') {\n\t\t\t\tconst h = (this.height = this.obj.height);\n\t\t\t\tconst w = (this.width = this.obj.width);\n\n\t\t\t\trx.drawRect({\n\t\t\t\t\tx: this.obj.x - w / 2,\n\t\t\t\t\ty: this.obj.y - h / 2,\n\t\t\t\t\th,\n\t\t\t\t\tw,\n\t\t\t\t\tfill: { style: consoleBackgroundColor },\n\t\t\t\t});\n\t\t\t\tpadding = -2;\n\t\t\t\ttopPadding = 26;\n\t\t\t} else if (paper.file === 'internal:transparent') {\n\t\t\t\tthis.height = this.obj.height;\n\t\t\t\tthis.width = this.obj.width;\n\t\t\t} else {\n\t\t\t\tconst asset = await getAssetByUrl(\n\t\t\t\t\t`assets/poemBackgrounds/${paper.file}`\n\t\t\t\t);\n\t\t\t\tif (asset instanceof HTMLImageElement) {\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\timage: asset,\n\t\t\t\t\t\tx: this.obj.x - asset.width / 2,\n\t\t\t\t\t\ty: this.obj.y - asset.height / 2,\n\t\t\t\t\t});\n\t\t\t\t\tthis.height = asset.height;\n\t\t\t\t\tthis.width = asset.width;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty -= this.height / 2;\n\t\t\tx -= this.width / 2;\n\n\t\t\tconst style = poemTextStyles[this.obj.font];\n\t\t\tconst render = new TextRenderer(this.obj.text, style);\n\t\t\tawait render.loadFonts();\n\n\t\t\trender.fixAlignment(\n\t\t\t\t'left',\n\t\t\t\tx + padding,\n\t\t\t\tx + padding,\n\t\t\t\ty + topPadding + padding\n\t\t\t);\n\n\t\t\trender.render(rx.fsCtx);\n\t\t});\n\t}\n}\n","import { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { IRenderable } from './renderable';\r\nimport { color, Background } from './background';\r\nimport { IPanel } from '@/store/panels';\r\nimport { DeepReadonly } from '@/util/readonly';\r\nimport { ISprite } from '@/store/objectTypes/sprite';\r\nimport { Sprite } from './sprite';\r\nimport { Character } from './character';\r\nimport { ICharacter, getData } from '@/store/objectTypes/characters';\r\nimport { ITextBox } from '@/store/objectTypes/textbox';\r\nimport { TextBox } from './textbox';\r\nimport { Choice } from './choices';\r\nimport { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAsset } from '@/asset-manager';\r\nimport { Renderer } from '@/renderer/renderer';\r\nimport leftPad from 'left-pad';\r\nimport { BackgroundLookup } from '@/store/content';\r\nimport { IChoices } from '@/store/objectTypes/choices';\r\nimport { INotification } from '@/store/objectTypes/notification';\r\nimport { Notification } from '@/renderables/notification';\r\nimport { Poem } from './poem';\r\nimport { IPoem } from '@/store/objectTypes/poem';\r\n\r\nexport class SceneRenderer {\r\n\tprivate renderObjectCache = new Map<string, IRenderable>();\r\n\tprivate state: DeepReadonly<IRootState>;\r\n\tprivate lCurrentlyRendering = false;\r\n\tprivate renderer: Renderer;\r\n\r\n\tpublic constructor(\r\n\t\tprivate store: Store<DeepReadonly<IRootState>>,\r\n\t\tprivate panelId: string,\r\n\t\treadonly canvasWidth: number,\r\n\t\treadonly canvasHeight: number\r\n\t) {\r\n\t\tthis.state = store.state;\r\n\t\tthis.renderer = new Renderer(canvasWidth, canvasHeight);\r\n\t}\r\n\r\n\tpublic render(hq: boolean): Promise<boolean> {\r\n\t\tif (!this.panel) return Promise.resolve(false);\r\n\t\treturn this.renderer.render(this.renderCallback.bind(this), hq);\r\n\t}\r\n\r\n\tpublic download(): Promise<string> {\r\n\t\tconst date = new Date();\r\n\t\tconst filename = `panel-${[\r\n\t\t\tdate.getFullYear(),\r\n\t\t\tleftPad(date.getMonth() + 1, 2, '0'),\r\n\t\t\tleftPad(date.getDate(), 2, '0'),\r\n\t\t\tleftPad(date.getHours(), 2, '0'),\r\n\t\t\tleftPad(date.getMinutes(), 2, '0'),\r\n\t\t\tleftPad(date.getSeconds(), 2, '0'),\r\n\t\t].join('-')}.png`;\r\n\t\treturn this.renderer.download(this.renderCallback.bind(this), filename);\r\n\t}\r\n\r\n\tpublic get currentlyRendering() {\r\n\t\treturn this.lCurrentlyRendering;\r\n\t}\r\n\r\n\tpublic paintOnto(\r\n\t\tc: CanvasRenderingContext2D,\r\n\t\tx: number,\r\n\t\ty: number,\r\n\t\tw?: number,\r\n\t\th?: number\r\n\t) {\r\n\t\tthis.renderer.paintOnto(c, x, y, w, h);\r\n\t}\r\n\r\n\tpublic objectsAt(x: number, y: number): string[] {\r\n\t\treturn this.getRenderObjects()\r\n\t\t\t.filter((renderObject) => renderObject.hitTest(x, y))\r\n\t\t\t.map((renderObject) => renderObject.id);\r\n\t}\r\n\r\n\tprivate async renderCallback(rx: RenderContext): Promise<void> {\r\n\t\tthis.lCurrentlyRendering = true;\r\n\t\ttry {\r\n\t\t\tif (rx.preview) {\r\n\t\t\t\trx.drawImage({\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\timage: await getAsset('backgrounds/transparent'),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tawait this.getBackgroundRenderer()?.render(false, rx);\r\n\r\n\t\t\tconst selection = this.state.ui.selection;\r\n\t\t\tfor (const object of this.getRenderObjects()) {\r\n\t\t\t\tobject.updatedContent(this.store);\r\n\t\t\t\tawait object.render(selection === object.id, rx);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tthis.lCurrentlyRendering = false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getRenderObjects() {\r\n\t\tconst objectsState = this.state.objects.panels[this.panelId];\r\n\t\tconst order = objectsState\r\n\t\t\t? [...objectsState.order, ...objectsState.onTopOrder]\r\n\t\t\t: [];\r\n\t\tconst objects = this.state.objects.objects;\r\n\t\tconst toUncache = Object.keys(this.renderObjectCache).filter(\r\n\t\t\t(id) => !order.includes(id)\r\n\t\t);\r\n\r\n\t\tfor (const id of toUncache) {\r\n\t\t\tthis.renderObjectCache.delete(id);\r\n\t\t}\r\n\r\n\t\treturn order.map((id) => {\r\n\t\t\tlet renderObject = this.renderObjectCache.get(id);\r\n\t\t\tif (!renderObject) {\r\n\t\t\t\tconst obj = objects[id];\r\n\t\t\t\tswitch (obj.type) {\r\n\t\t\t\t\tcase 'sprite':\r\n\t\t\t\t\t\trenderObject = new Sprite(obj as DeepReadonly<ISprite>);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'character':\r\n\t\t\t\t\t\tconst char = obj as DeepReadonly<ICharacter>;\r\n\t\t\t\t\t\trenderObject = new Character(char, getData(this.store, char));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'textBox':\r\n\t\t\t\t\t\trenderObject = new TextBox(obj as DeepReadonly<ITextBox>);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'choice':\r\n\t\t\t\t\t\trenderObject = new Choice(obj as DeepReadonly<IChoices>);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'notification':\r\n\t\t\t\t\t\trenderObject = new Notification(obj as DeepReadonly<INotification>);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'poem':\r\n\t\t\t\t\t\trenderObject = new Poem(obj as DeepReadonly<IPoem>);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderObjectCache.set(id, renderObject);\r\n\t\t\t}\r\n\t\t\treturn renderObject;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate get panel(): DeepReadonly<IPanel> {\r\n\t\treturn this.state.panels.panels[this.panelId];\r\n\t}\r\n\r\n\tprivate getBackgroundRenderer(): IRenderable | null {\r\n\t\tconst panel = this.panel;\r\n\t\tswitch (panel.background.current) {\r\n\t\t\tcase 'buildin.static-color':\r\n\t\t\t\tcolor.color = panel.background.color;\r\n\t\t\t\treturn color;\r\n\t\t\tdefault:\r\n\t\t\t\tconst lookup = this.store.getters[\r\n\t\t\t\t\t'content/getBackgrounds'\r\n\t\t\t\t] as BackgroundLookup;\r\n\t\t\t\tconst current = lookup.get(panel.background.current);\r\n\t\t\t\tif (!current) return null;\r\n\t\t\t\tconst variant = current.variants[panel.background.variant];\r\n\t\t\t\tif (!variant) return null;\r\n\t\t\t\treturn new Background(\r\n\t\t\t\t\tpanel.background.current,\r\n\t\t\t\t\tvariant,\r\n\t\t\t\t\tpanel.background.flipped,\r\n\t\t\t\t\tpanel.background.scaling\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Mixins, Watch } from 'vue-property-decorator';\r\nimport { Store } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { PanelMixin } from './panelMixin';\r\nimport panels, {\r\n\tIPanel,\r\n\tIDuplicatePanelAction,\r\n\tISetCurrentPanelMutation,\r\n\tIDeletePanelAction,\r\n\tISetPanelPreviewMutation,\r\n\tIMovePanelAction,\r\n} from '@/store/panels';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { getAAsset, isWebPSupported } from '@/asset-manager';\r\nimport { ITextBox } from '@/store/objectTypes/textbox';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport { SceneRenderer } from '@/renderables/scene-renderer';\r\nimport { DeepReadonly } from '@/util/readonly';\r\nimport environment from '@/environments/environment';\r\nimport leftPad from 'left-pad';\r\nimport eventBus, { ShowMessageEvent } from '../../../eventbus/event-bus';\r\nimport { screenWidth, screenHeight } from '@/constants/base';\r\nimport { IObject } from '../../../store/objects';\r\nimport { INotification } from '../../../store/objectTypes/notification';\r\nimport { IPoemTextStyle } from '../../../constants/poem';\r\nimport { IPoem } from '../../../store/objectTypes/poem';\r\nimport { IChoice, IChoices } from '../../../store/objectTypes/choices';\r\n\r\ninterface IPanelButton {\r\n\tid: string;\r\n\timage: string;\r\n\ttext: string;\r\n}\r\n\r\n// tslint:disable: no-magic-numbers\r\nconst estimateFactor = 1.5;\r\nconst thumbnailFactor = 1 / 4;\r\nconst thumbnailQuality = 0.5;\r\nconst qualityFactor = 100;\r\n\r\nconst defaultQuality = 90;\r\n\r\nconst qualityWarningThreshold = 70;\r\n// tslint:enable: no-magic-numbers\r\n\r\n@Component({})\r\nexport default class PanelsPanel extends Mixins(PanelMixin) {\r\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\r\n\tprivate vuexHistory!: IHistorySupport;\r\n\r\n\t@State('currentPanel', { namespace: 'panels' })\r\n\tprivate currentPanel!: string;\r\n\r\n\tprivate webpSupport = false;\r\n\tprivate heifSupport = false;\r\n\tprivate ppi = 0;\r\n\tprivate format = 'image/png';\r\n\tprivate quality = defaultQuality;\r\n\r\n\tpublic async created() {\r\n\t\tthis.webpSupport = await isWebPSupported();\r\n\t}\r\n\r\n\tpublic async mounted() {\r\n\t\tthis.moveFocusToActivePanel();\r\n\r\n\t\tconst sceneRenderer = new SceneRenderer(\r\n\t\t\tthis.$store,\r\n\t\t\tthis.currentPanel,\r\n\t\t\tscreenWidth,\r\n\t\t\tscreenHeight\r\n\t\t);\r\n\r\n\t\tawait sceneRenderer.render(false);\r\n\r\n\t\tconst targetCanvas = document.createElement('canvas');\r\n\t\ttargetCanvas.width = screenWidth * thumbnailFactor;\r\n\t\ttargetCanvas.height = screenHeight * thumbnailFactor;\r\n\r\n\t\tsceneRenderer.paintOnto(\r\n\t\t\ttargetCanvas.getContext('2d')!,\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\ttargetCanvas.width,\r\n\t\t\ttargetCanvas.height\r\n\t\t);\r\n\t\ttargetCanvas.toBlob(\r\n\t\t\t(blob) => {\r\n\t\t\t\tif (!blob) return;\r\n\t\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\t\t\tthis.$store.commit('panels/setPanelPreview', {\r\n\t\t\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t} as ISetPanelPreviewMutation);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t(await isWebPSupported()) ? 'image/webp' : 'image/jpeg',\r\n\t\t\tthumbnailQuality\r\n\t\t);\r\n\t}\r\n\r\n\tprivate get isLossy(): boolean {\r\n\t\treturn this.format !== 'image/png';\r\n\t}\r\n\r\n\tprivate async download() {\r\n\t\tconst distribution = this.getPanelDistibution();\r\n\t\tconst date = new Date();\r\n\t\tconst prefix = `cd-${[\r\n\t\t\tdate.getFullYear(),\r\n\t\t\tleftPad(date.getMonth() + 1, 2, '0'),\r\n\t\t\tleftPad(date.getDate(), 2, '0'),\r\n\t\t\tleftPad(date.getHours(), 2, '0'),\r\n\t\t\tleftPad(date.getMinutes(), 2, '0'),\r\n\t\t\tleftPad(date.getSeconds(), 2, '0'),\r\n\t\t].join('-')}`;\r\n\t\tconst extension = this.format.split('/')[1];\r\n\t\tconst format = this.format;\r\n\t\tconst quality = this.quality;\r\n\t\tawait this.renderObjects(\r\n\t\t\tdistribution,\r\n\t\t\ttrue,\r\n\t\t\tasync (imageIdx: number, canvas: HTMLCanvasElement) => {\r\n\t\t\t\tenvironment.saveToFile(\r\n\t\t\t\t\tcanvas,\r\n\t\t\t\t\t`${prefix}_${imageIdx}.${extension}`,\r\n\t\t\t\t\tformat,\r\n\t\t\t\t\tquality / qualityFactor\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tprivate async estimateExportSize() {\r\n\t\tconst distribution = this.getPanelDistibution();\r\n\t\tconst format = this.format || 'image/png';\r\n\t\tconst quality = this.quality || defaultQuality;\r\n\t\tconst sizes = await this.renderObjects(\r\n\t\t\tdistribution,\r\n\t\t\tfalse,\r\n\t\t\tasync (imageIdx: number, canvas: HTMLCanvasElement) => {\r\n\t\t\t\treturn new Promise<number>((resolve, reject) => {\r\n\t\t\t\t\tcanvas.toBlob(\r\n\t\t\t\t\t\t(blob) => {\r\n\t\t\t\t\t\t\tif (!blob) {\r\n\t\t\t\t\t\t\t\treject(`Image ${imageIdx + 1} could not be rendered.`);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve(blob.size);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tformat,\r\n\t\t\t\t\t\tquality / qualityFactor\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t\tconst readableSizes = sizes.map(\r\n\t\t\t(size) => ((size * estimateFactor) / 1024 / 1024).toFixed(2) + 'MiB'\r\n\t\t);\r\n\t\tconst filePluralize = readableSizes.length > 1 ? 'files' : 'file';\r\n\t\tconst itPluralize = readableSizes.length > 1 ? 'These' : 'It';\r\n\t\tconst sizePluralize = readableSizes.length > 1 ? 'sizes' : 'size';\r\n\t\teventBus.fire(\r\n\t\t\tnew ShowMessageEvent(\r\n\t\t\t\t`This would export ${\r\n\t\t\t\t\treadableSizes.length\r\n\t\t\t\t} ${filePluralize}. ${itPluralize} would have the following (aproximate) ${sizePluralize}: ${readableSizes.join(\r\n\t\t\t\t\t','\r\n\t\t\t\t)}`\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\t@Watch('quality')\r\n\tprivate warnImageQuality(quality: number, oldQuality: number) {\r\n\t\tif (quality === qualityFactor) {\r\n\t\t\teventBus.fire(\r\n\t\t\t\tnew ShowMessageEvent(\r\n\t\t\t\t\t'Note: 100% quality on a lossy format is still not lossless! Select PNG if you want lossless compression.'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (\r\n\t\t\toldQuality > qualityWarningThreshold &&\r\n\t\t\tquality <= qualityWarningThreshold\r\n\t\t) {\r\n\t\t\teventBus.fire(\r\n\t\t\t\tnew ShowMessageEvent(\r\n\t\t\t\t\t'Note: A quality level below 70% might be very noticable and impair legibility of text.'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async renderObjects<T>(\r\n\t\tdistribution: DeepReadonly<string[][]>,\r\n\t\thq: boolean,\r\n\t\tmapper: (imageIdx: number, canvas: HTMLCanvasElement) => Promise<T>\r\n\t): Promise<T[]> {\r\n\t\treturn await Promise.all(\r\n\t\t\tdistribution.map(async (image, imageIdx) => {\r\n\t\t\t\tconst targetCanvas = document.createElement('canvas');\r\n\t\t\t\ttargetCanvas.width = screenWidth;\r\n\t\t\t\ttargetCanvas.height = screenHeight * image.length;\r\n\t\t\t\tconst context = targetCanvas.getContext('2d')!;\r\n\r\n\t\t\t\tawait Promise.all(\r\n\t\t\t\t\timage.map(async (panelId, panelIdx) => {\r\n\t\t\t\t\t\tconst sceneRenderer = new SceneRenderer(\r\n\t\t\t\t\t\t\tthis.$store,\r\n\t\t\t\t\t\t\timage[panelIdx],\r\n\t\t\t\t\t\t\tscreenWidth,\r\n\t\t\t\t\t\t\tscreenHeight\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tawait sceneRenderer.render(hq);\r\n\r\n\t\t\t\t\t\tsceneRenderer.paintOnto(\r\n\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tscreenHeight * panelIdx,\r\n\t\t\t\t\t\t\tscreenWidth,\r\n\t\t\t\t\t\t\tscreenHeight\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn await mapper(imageIdx, targetCanvas);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tprivate get canDeletePanel(): boolean {\r\n\t\treturn this.panelButtons.length > 1;\r\n\t}\r\n\r\n\tprivate getPanelDistibution(): DeepReadonly<string[][]> {\r\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\r\n\t\tif (this.ppi === 0) return [panelOrder];\r\n\t\tconst images: string[][] = [];\r\n\t\tfor (let imageI = 0; imageI < panelOrder.length / this.ppi; ++imageI) {\r\n\t\t\tconst sliceStart = imageI * this.ppi;\r\n\t\t\tconst sliceEnd = sliceStart + this.ppi;\r\n\t\t\timages.push([...panelOrder.slice(sliceStart, sliceEnd)]);\r\n\t\t}\r\n\t\treturn images;\r\n\t}\r\n\r\n\tprivate moveFocusToActivePanel() {\r\n\t\tconst active = this.$el.querySelector('.panel_button.active');\r\n\t\tif (active) {\r\n\t\t\tthis.scrollIntoView(active);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate scrollIntoView(ele: Element) {\r\n\t\tconst parent = ele.parentElement!;\r\n\t\tconst idx = Array.from(parent.children).indexOf(ele);\r\n\t\tif (this.$store.state.ui.vertical) {\r\n\t\t\tconst scroll =\r\n\t\t\t\tidx * ele.clientHeight - parent.clientHeight / 2 + ele.clientHeight / 2;\r\n\t\t\tparent.scrollTop = scroll;\r\n\t\t\tparent.scrollLeft = 0;\r\n\t\t} else {\r\n\t\t\tconst scroll =\r\n\t\t\t\tidx * ele.clientWidth - parent.clientWidth / 2 + ele.clientWidth / 2;\r\n\t\t\tparent.scrollLeft = scroll;\r\n\t\t\tparent.scrollTop = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate get panelButtons(): IPanelButton[] {\r\n\t\tconst panelButtons: IPanelButton[] = [];\r\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\r\n\t\treturn panelOrder.map((id) => {\r\n\t\t\tconst panel = this.$store.state.panels.panels[id];\r\n\t\t\tconst objectOrders = this.$store.state.objects.panels[id];\r\n\t\t\tconst txtBox = objectOrders\r\n\t\t\t\t? ([] as string[])\r\n\t\t\t\t\t\t.concat(objectOrders.order, objectOrders.onTopOrder)\r\n\t\t\t\t\t\t.map((objId) => this.$store.state.objects.objects[objId])\r\n\t\t\t\t\t\t.map(this.extractObjectText)\r\n\t\t\t\t: [];\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\timage: panel.lastRender,\r\n\t\t\t\ttext: txtBox.reduce(\r\n\t\t\t\t\t(acc, current) => (acc.length > current.length ? acc : current),\r\n\t\t\t\t\t''\r\n\t\t\t\t),\r\n\t\t\t} as IPanelButton;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate extractObjectText(obj: IObject) {\r\n\t\tswitch (obj.type) {\r\n\t\t\tcase 'textBox':\r\n\t\t\t\treturn (obj as ITextBox).text;\r\n\t\t\tcase 'notification':\r\n\t\t\t\treturn (obj as INotification).text;\r\n\t\t\tcase 'poem':\r\n\t\t\t\treturn (obj as IPoem).text;\r\n\t\t\tcase 'choice':\r\n\t\t\t\treturn (obj as IChoices).choices\r\n\t\t\t\t\t.map((choice) => `[${choice.text}]`)\r\n\t\t\t\t\t.join('\\n');\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tprivate async addNewPanel() {\r\n\t\tawait this.vuexHistory.transaction(async () => {\r\n\t\t\tthis.$store.dispatch('panels/duplicatePanel', {\r\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\r\n\t\t\t} as IDuplicatePanelAction);\r\n\t\t});\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.moveFocusToActivePanel();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate updateCurrentPanel(panelId: string) {\r\n\t\tthis.vuexHistory.transaction(async () => {\r\n\t\t\tthis.$store.commit('panels/setCurrentPanel', {\r\n\t\t\t\tpanelId,\r\n\t\t\t} as ISetCurrentPanelMutation);\r\n\t\t});\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.moveFocusToActivePanel();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate deletePanel() {\r\n\t\tthis.vuexHistory.transaction(async () => {\r\n\t\t\tthis.$store.dispatch('panels/delete', {\r\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\r\n\t\t\t} as IDeletePanelAction);\r\n\t\t});\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.moveFocusToActivePanel();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate moveAhead() {\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('panels/move', {\r\n\t\t\t\tpanelId: this.currentPanel,\r\n\t\t\t\tdelta: -1,\r\n\t\t\t} as IMovePanelAction);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate get canMoveAhead(): boolean {\r\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\r\n\t\tconst idx = panelOrder.indexOf(this.currentPanel);\r\n\t\treturn idx > 0;\r\n\t}\r\n\r\n\tprivate moveBehind() {\r\n\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\tthis.$store.dispatch('panels/move', {\r\n\t\t\t\tpanelId: this.currentPanel,\r\n\t\t\t\tdelta: 1,\r\n\t\t\t} as IMovePanelAction);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate get canMoveBehind(): boolean {\r\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\r\n\t\tconst idx = panelOrder.indexOf(this.currentPanel);\r\n\t\treturn idx < panelOrder.length - 1;\r\n\t}\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./panels.vue?vue&type=template&id=e26030e8&scoped=true&\"\nimport script from \"./panels.vue?vue&type=script&lang=ts&\"\nexport * from \"./panels.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./panels.vue?vue&type=style&index=0&id=e26030e8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e26030e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Notification\")]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Notification Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):[_c('div',{attrs:{\"id\":\"notification_text\"}},[_c('label',{attrs:{\"for\":\"notification_text\"}},[_vm._v(\"Text:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"id\":\"notification_text\"},domProps:{\"value\":(_vm.text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"Formatting\")])]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('toggle',{attrs:{\"label\":\"Show backdrop?\"},model:{value:(_vm.renderBackdrop),callback:function ($$v) {_vm.renderBackdrop=$$v},expression:\"renderBackdrop\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport {\n\tIChoices,\n\tIRemoveChoiceAction,\n} from '../../../store/objectTypes/choices';\nimport {\n\tIChoice,\n\tIAddChoiceAction,\n\tISetChoiceTextAction,\n} from '../../../store/objectTypes/choices';\nimport { DeepReadonly } from '../../../util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\nimport {\n\tINotification,\n\tISetNotificationTextMutation,\n\tISetNotificationBackdropMutation,\n} from '../../../store/objectTypes/notification';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class NotificationPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate textEditor: boolean = false;\n\n\tprivate get sprite(): INotification {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'notification') return undefined!;\n\t\treturn obj as INotification;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get text() {\n\t\treturn this.sprite.text;\n\t}\n\n\tprivate set text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setNotificationText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetNotificationTextMutation);\n\t\t});\n\t}\n\n\tprivate get renderBackdrop() {\n\t\treturn this.sprite.backdrop;\n\t}\n\n\tprivate set renderBackdrop(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setNotificationBackdrop', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tbackdrop: newValue,\n\t\t\t} as ISetNotificationBackdropMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./notification.vue?vue&type=template&id=a8740b80&scoped=true&\"\nimport script from \"./notification.vue?vue&type=script&lang=ts&\"\nexport * from \"./notification.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./notification.vue?vue&type=style&index=0&id=a8740b80&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a8740b80\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(_vm._s(_vm.sprite.subType === 'poem' ? 'Poem' : 'Console'))]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Poem Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):[_c('div',{attrs:{\"id\":\"notification_text\"}},[_c('label',{attrs:{\"for\":\"notification_text\"}},[_vm._v(\"Text:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"id\":\"notification_text\"},domProps:{\"value\":(_vm.text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"Formatting\")])]),(_vm.sprite.subType === 'poem')?[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.poemBackground),expression:\"poemBackground\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.poemBackground=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.backgrounds),function(background,idx){return _c('option',{key:idx,domProps:{\"value\":idx}},[_vm._v(_vm._s(background.name))])}),0),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.poemStyle),expression:\"poemStyle\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.poemStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.poemTextStyles),function(style,idx){return _c('option',{key:idx,domProps:{\"value\":idx}},[_vm._v(_vm._s(style.name))])}),0)]:_vm._e(),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { DeepReadonly } from '@/util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\nimport {\n\tIPoem,\n\tISetBackgroundMutation,\n\tISetFontMutation,\n\tISetTextMutation,\n} from '@/store/objectTypes/poem';\nimport {\n\tpoemBackgrounds,\n\tpoemTextStyles,\n\tIPoemTextStyle,\n} from '../../../constants/poem';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class PoemPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate textEditor: boolean = false;\n\n\tprivate get backgrounds(): Array<{ name: string; file: string }> {\n\t\treturn poemBackgrounds;\n\t}\n\n\tprivate get poemTextStyles(): IPoemTextStyle[] {\n\t\treturn poemTextStyles;\n\t}\n\n\tprivate get sprite(): IPoem {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'poem') return undefined!;\n\t\treturn obj as IPoem;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get text() {\n\t\treturn this.sprite.text;\n\t}\n\n\tprivate set text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetTextMutation);\n\t\t});\n\t}\n\n\tprivate get poemStyle() {\n\t\treturn this.sprite.font;\n\t}\n\n\tprivate set poemStyle(newValue: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemFont', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tfont: newValue,\n\t\t\t} as ISetFontMutation);\n\t\t});\n\t}\n\n\tprivate get poemBackground() {\n\t\treturn this.sprite.background;\n\t}\n\n\tprivate set poemBackground(newValue: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemBackground', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tbackground: newValue,\n\t\t\t} as ISetBackgroundMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./poem.vue?vue&type=template&id=7ab0c17c&scoped=true&\"\nimport script from \"./poem.vue?vue&type=script&lang=ts&\"\nexport * from \"./poem.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./poem.vue?vue&type=style&index=0&id=7ab0c17c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ab0c17c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\n\nimport SettingsPanel from './panels/settings.vue';\nimport AddPanel from './panels/add.vue';\nimport CharacterPanel from './panels/character.vue';\nimport SpritePanel from './panels/sprite.vue';\nimport TextBoxPanel from './panels/textbox.vue';\nimport ChoicePanel from './panels/choice.vue';\nimport CreditsPanel from './panels/credits.vue';\nimport BackgroundsPanel from './panels/backgrounds.vue';\nimport ContentPacksPanel from './panels/content-pack.vue';\nimport PanelsPanel from './panels/panels.vue';\nimport NotificationPanel from './panels/notification.vue';\nimport PoemPanel from './panels/poem.vue';\nimport { IObject } from '@/store/objects';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport environment from '@/environments/environment';\n\ntype PanelNames =\n\t| 'add'\n\t| 'backgrounds'\n\t| 'help_credits'\n\t| 'selection'\n\t| 'packs'\n\t| 'settings'\n\t| 'panels'\n\t| 'notification'\n\t| 'poem';\n\n@Component({\n\tcomponents: {\n\t\tSettingsPanel,\n\t\tAddPanel,\n\t\tBackgroundsPanel,\n\t\tCreditsPanel,\n\t\tCharacterPanel,\n\t\tTextBoxPanel,\n\t\tChoicePanel,\n\t\tSpritePanel,\n\t\tContentPacksPanel,\n\t\tPanelsPanel,\n\t\tNotificationPanel,\n\t\tPoemPanel,\n\t},\n})\nexport default class ToolBox extends Vue {\n\tpublic $store!: Store<IRootState>;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate create() {\n\t\tenvironment.onPanelChange((panel: string) => {\n\t\t\tthis.panelSelection = panel as PanelNames;\n\t\t});\n\t}\n\n\tprivate get selection(): string | null {\n\t\treturn this.$store.state.ui.selection;\n\t}\n\n\tprivate panelSelection: PanelNames = 'add';\n\n\tprivate get panel() {\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tif (this.selection === null) {\n\t\t\t\tthis.panelSelection = 'add';\n\t\t\t} else {\n\t\t\t\tconst obj = this.$store.state.objects.objects[this.selection];\n\t\t\t\treturn obj.type;\n\t\t\t}\n\t\t}\n\t\treturn this.panelSelection;\n\t}\n\n\tprivate get hasPrevRender(): boolean {\n\t\treturn this.$store.state.ui.lastDownload !== null;\n\t}\n\n\tprivate setPanel(name: PanelNames) {\n\t\tif (name === this.panelSelection) name = 'add';\n\t\tthis.panelSelection = name;\n\t\tif (this.selection) {\n\t\t\tif (this.$store.state.ui.selection === null) return;\n\t\t\tthis.$store.commit('ui/setSelection', null);\n\t\t}\n\t}\n\n\t@Watch('selection')\n\tprivate onSelectionChange(newSelection: IObject | null) {\n\t\tif (newSelection) {\n\t\t\tthis.panelSelection = 'selection';\n\t\t\treturn;\n\t\t}\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tthis.panelSelection = 'add';\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toolbox.vue?vue&type=template&id=66a3ca36&\"\nimport script from \"./toolbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./toolbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toolbox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"messageConsole\"}},[(_vm.showLoading)?_c('p',[_vm._v(\"Loading...\")]):_vm._e(),_vm._l((_vm.messages),function(message,i){return _c('p',{key:message + '_' + i},[_vm._v(_vm._s(message))])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n\tShowMessageEvent,\n\tVueErrorEvent,\n} from '@/eventbus/event-bus';\n\nconst shortHidingTime = 5000;\nconst longHidingTime = 20000;\n\nconst hideShowTimeouts = 100;\n\n@Component({\n\tcomponents: {},\n})\nexport default class MessageConsole extends Vue {\n\t@Prop({ default: false, type: Boolean }) private readonly loading!: boolean;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\tprivate messages: string[] = [];\n\tprivate showLoading: boolean = false;\n\tprivate showLoadingTimeout: number = 0;\n\tprivate hideLoadingTimeout: number = 0;\n\n\tprivate created() {\n\t\tthis.onLoadingChange(this.loading);\n\t\tEventBus.subscribe(AssetFailureEvent, ev => {\n\t\t\tthis.messages.push(`Failed to load asset '${ev.path}'`);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, shortHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(CustomAssetFailureEvent, ev => {\n\t\t\tthis.messages.push(\n\t\t\t\t'Failed to load custom asset. Try to download it manually and then upload it.'\n\t\t\t);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(ShowMessageEvent, ev => {\n\t\t\tthis.messages.push(ev.message);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(VueErrorEvent, ev => {\n\t\t\tthis.messages.push(ev.error.name);\n\t\t\tthis.messages.push(JSON.stringify(ev.error.stack));\n\t\t\tthis.messages.push(ev.info);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t\tthis.messages.shift();\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\t}\n\n\t@Watch('loading')\n\tprivate onLoadingChange(newValue: boolean) {\n\t\tif (newValue) {\n\t\t\tif (this.hideLoadingTimeout) {\n\t\t\t\tclearTimeout(this.hideLoadingTimeout);\n\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (!this.showLoading && !this.showLoadingTimeout) {\n\t\t\t\tthis.showLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t\t}, hideShowTimeouts);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.showLoadingTimeout) {\n\t\t\t\tclearTimeout(this.showLoadingTimeout);\n\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (this.showLoading && !this.hideLoadingTimeout) {\n\t\t\t\tthis.hideLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t\t}, hideShowTimeouts);\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./message-console.vue?vue&type=template&id=449eca3e&scoped=true&\"\nimport script from \"./message-console.vue?vue&type=script&lang=ts&\"\nexport * from \"./message-console.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"449eca3e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"sd\",style:({ width: _vm.canvasWidth + 'px', height: _vm.canvasHeight + 'px' }),attrs:{\"id\":\"scaled_display\",\"height\":_vm.bitmapHeight,\"width\":_vm.bitmapWidth,\"draggable\":\"\"},on:{\"click\":_vm.onUiClick,\"touchstart\":_vm.onTouchStart,\"dragstart\":_vm.onDragStart,\"touchmove\":_vm.onSpriteDragMove,\"mousemove\":_vm.onSpriteDragMove,\"touchend\":_vm.onSpriteDrop,\"mouseup\":_vm.onSpriteDrop,\"dragover\":_vm.onDragOver,\"drop\":_vm.onDrop,\"mouseenter\":_vm.onMouseEnter}},[_vm._v(\"HTML5 is required to use the Doki Doki Dialog Generator.\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// App.vue has currently so many responsiblities that it's best to break it into chunks\r\n// tslint:disable:member-ordering\r\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator';\r\nimport { State } from 'vuex-class-decorator';\r\nimport { Store, MutationPayload } from 'vuex';\r\nimport { IRootState } from '@/store';\r\nimport { Renderer } from '@/renderer/renderer';\r\nimport { IRenderable } from '@/renderables/renderable';\r\nimport { color, Background } from '@/renderables/background';\r\nimport { IHistorySupport } from '@/plugins/vuex-history';\r\nimport { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAsset, registerAsset } from '@/asset-manager';\r\nimport eventBus, { InvalidateRenderEvent } from '@/eventbus/event-bus';\r\nimport { ICreateTextBoxAction, ITextBox } from '@/store/objectTypes/textbox';\r\nimport {\r\n\tIObject,\r\n\tISetObjectPositionMutation,\r\n\tIRemoveObjectAction,\r\n\tIObjectsState,\r\n} from '@/store/objects';\r\nimport { ICreateSpriteAction, ISprite } from '@/store/objectTypes/sprite';\r\nimport { Character } from '@/renderables/character';\r\nimport {\r\n\tIShiftCharacterSlotAction,\r\n\tICharacter,\r\n} from '@/store/objectTypes/characters';\r\nimport { Sprite } from '@/renderables/sprite';\r\nimport { TextBox } from '@/renderables/textbox';\r\nimport { ISetCurrentMutation, IPanel } from '@/store/panels';\r\nimport content from '@/store/content';\r\nimport { SceneRenderer } from '../renderables/scene-renderer';\r\nimport { DeepReadonly } from '../util/readonly';\r\nimport { screenHeight, screenWidth } from '@/constants/base';\r\n\r\n@Component({})\r\nexport default class Render extends Vue {\r\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\r\n\r\n\tprivate sdCtx: CanvasRenderingContext2D | undefined;\r\n\r\n\tprivate get selection(): string | null {\r\n\t\treturn this.$store.state.ui.selection;\r\n\t}\r\n\r\n\tprivate currentlyRendering: boolean = false;\r\n\r\n\tprivate queuedRender: number | null = null;\r\n\tprivate showingLast: boolean = false;\r\n\r\n\tprivate dropSpriteCount = 0;\r\n\tprivate dropPreventClick = false;\r\n\r\n\t@Prop({ type: Number, default: 0 }) private readonly canvasWidth!: number;\r\n\t@Prop({ type: Number, default: 0 }) private readonly canvasHeight!: number;\r\n\r\n\t@State('lqRendering', { namespace: 'ui' })\r\n\tprivate readonly lqRendering!: boolean;\r\n\r\n\tprivate vuexHistory!: IHistorySupport;\r\n\r\n\tprivate get sceneRender() {\r\n\t\treturn new SceneRenderer(\r\n\t\t\tthis.$store,\r\n\t\t\tthis.$store.state.panels.currentPanel,\r\n\t\t\tthis.bitmapWidth,\r\n\t\t\tthis.bitmapHeight\r\n\t\t);\r\n\t}\r\n\r\n\tprivate get bitmapHeight(): number {\r\n\t\treturn screenHeight;\r\n\t}\r\n\tprivate get bitmapWidth(): number {\r\n\t\treturn screenWidth;\r\n\t}\r\n\r\n\tpublic async blendOver(imageUrl: string): Promise<void> {}\r\n\r\n\tpublic async download(): Promise<void> {\r\n\t\tconst url = await this.sceneRender.download();\r\n\r\n\t\tthis.vuexHistory.transaction(async () => {\r\n\t\t\tconst oldUrl = this.$store.state.ui.lastDownload;\r\n\r\n\t\t\tthis.$store.commit('ui/setLastDownload', url);\r\n\t\t\tif (oldUrl) {\r\n\t\t\t\tURL.revokeObjectURL(oldUrl);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate invalidateRender() {\r\n\t\tif (this.queuedRender) return;\r\n\t\tthis.queuedRender = requestAnimationFrame(() => this.render_());\r\n\t}\r\n\r\n\tprivate async render_(): Promise<void> {\r\n\t\tif (this.queuedRender) {\r\n\t\t\tcancelAnimationFrame(this.queuedRender);\r\n\t\t\tthis.queuedRender = null;\r\n\t\t}\r\n\r\n\t\tif (this.$store.state.unsafe) return;\r\n\r\n\t\tawait this.sceneRender.render(!this.lqRendering);\r\n\t\tthis.display();\r\n\t}\r\n\r\n\tprivate async created(): Promise<void> {\r\n\t\teventBus.subscribe(InvalidateRenderEvent, command => this.invalidateRender);\r\n\t\tthis.$store.subscribe((mut: MutationPayload) => {\r\n\t\t\tif (mut.type === 'panels/setPanelPreview') return;\r\n\t\t\tif (mut.type === 'panels/currentPanel') return;\r\n\t\t\tthis.invalidateRender();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate mounted(): void {\r\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\r\n\t\tthis.sdCtx = sd.getContext('2d') || undefined;\r\n\r\n\t\tthis.renderLoadingScreen();\r\n\t\tthis.invalidateRender();\r\n\t}\r\n\r\n\tprivate renderLoadingScreen() {\r\n\t\tif (!this.sdCtx) return;\r\n\t\tconst loadingScreen = document.createElement('canvas');\r\n\t\tloadingScreen.height = this.bitmapHeight;\r\n\t\tloadingScreen.width = this.bitmapWidth;\r\n\t\tconst rctx = new RenderContext(\r\n\t\t\tloadingScreen.getContext('2d')!,\r\n\t\t\ttrue,\r\n\t\t\tfalse\r\n\t\t);\r\n\t\trctx.drawText({\r\n\t\t\ttext: 'Starting...',\r\n\t\t\tx: loadingScreen.width / 2,\r\n\t\t\ty: loadingScreen.height / 2,\r\n\t\t\talign: 'center',\r\n\t\t\toutline: {\r\n\t\t\t\twidth: 5,\r\n\t\t\t\tstyle: '#b59',\r\n\t\t\t},\r\n\t\t\tfont: '32px riffic',\r\n\t\t\tfill: {\r\n\t\t\t\tstyle: 'white',\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.sdCtx!.drawImage(loadingScreen, this.canvasWidth, this.canvasHeight);\r\n\t}\r\n\r\n\t@Watch('canvasWidth')\r\n\t@Watch('canvasHeight')\r\n\tprivate display(): void {\r\n\t\tif (!this.sdCtx) return;\r\n\t\tthis.showingLast = false;\r\n\t\tthis.sceneRender.paintOnto(\r\n\t\t\tthis.sdCtx,\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\tthis.bitmapWidth,\r\n\t\t\tthis.bitmapHeight\r\n\t\t);\r\n\t}\r\n\r\n\tprivate toRendererCoordinate(x: number, y: number): [number, number] {\r\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\r\n\t\tconst rx = x - sd.offsetLeft;\r\n\t\tconst ry = y - sd.offsetTop;\r\n\t\tconst sx = (rx / sd.offsetWidth) * sd.width;\r\n\t\tconst sy = (ry / sd.offsetWidth) * sd.width;\r\n\t\treturn [sx, sy];\r\n\t}\r\n\r\n\tprivate onUiClick(e: MouseEvent): void {\r\n\t\tif (this.dropPreventClick) {\r\n\t\t\tthis.dropPreventClick = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst [sx, sy] = this.toRendererCoordinate(e.clientX, e.clientY);\r\n\r\n\t\tconst objects = this.sceneRender.objectsAt(sx, sy);\r\n\r\n\t\tconst currentObjectIdx = objects.findIndex(id => id === this.selection);\r\n\t\tlet selectedObject: string | null;\r\n\r\n\t\tif (currentObjectIdx === 0) {\r\n\t\t\tselectedObject = null;\r\n\t\t} else if (currentObjectIdx !== -1) {\r\n\t\t\t// Select the next lower character\r\n\t\t\tselectedObject = objects[currentObjectIdx - 1];\r\n\t\t} else {\r\n\t\t\tselectedObject = objects[objects.length - 1] || null;\r\n\t\t}\r\n\r\n\t\tif (this.$store.state.ui.selection === selectedObject) return;\r\n\t\tthis.$store.commit('ui/setSelection', selectedObject);\r\n\t}\r\n\r\n\tprivate draggedObject: IObject | null = null;\r\n\tprivate dragXOffset: number = 0;\r\n\tprivate dragYOffset: number = 0;\r\n\tprivate dragXOriginal: number = 0;\r\n\tprivate dragYOriginal: number = 0;\r\n\r\n\tprivate onDragStart(e: DragEvent) {\r\n\t\te.preventDefault();\r\n\t\tif (!this.selection) return;\r\n\t\tthis.draggedObject = this.$store.state.objects.objects[this.selection];\r\n\t\tconst [x, y] = this.toRendererCoordinate(e.clientX, e.clientY);\r\n\t\tthis.dragXOffset = x - this.draggedObject.x;\r\n\t\tthis.dragYOffset = y - this.draggedObject.y;\r\n\t\tthis.dragXOriginal = this.draggedObject.x;\r\n\t\tthis.dragYOriginal = this.draggedObject.y;\r\n\t}\r\n\r\n\tprivate onTouchStart(e: TouchEvent) {\r\n\t\tif (!this.selection) return;\r\n\t\tthis.draggedObject = this.$store.state.objects.objects[this.selection];\r\n\t\tconst [x, y] = this.toRendererCoordinate(\r\n\t\t\te.touches[0].clientX,\r\n\t\t\te.touches[0].clientY\r\n\t\t);\r\n\t\tthis.dragXOffset = x - this.draggedObject.x;\r\n\t\tthis.dragYOffset = y - this.draggedObject.y;\r\n\t\tthis.dragXOriginal = this.draggedObject.x;\r\n\t\tthis.dragYOriginal = this.draggedObject.y;\r\n\t}\r\n\r\n\tprivate onDragOver(e: DragEvent) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t\te.dataTransfer!.dropEffect = 'copy';\r\n\t}\r\n\r\n\tprivate onSpriteDragMove(e: MouseEvent | TouchEvent) {\r\n\t\tif (this.draggedObject) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// Formatter quirk\r\n\t\t\t// tslint:disable:indent\r\n\t\t\tlet [x, y] =\r\n\t\t\t\te instanceof MouseEvent\r\n\t\t\t\t\t? this.toRendererCoordinate(e.clientX, e.clientY)\r\n\t\t\t\t\t: this.toRendererCoordinate(\r\n\t\t\t\t\t\t\te.touches[0].clientX,\r\n\t\t\t\t\t\t\te.touches[0].clientY\r\n\t\t\t\t\t  );\r\n\t\t\t// tslint:enable:indent\r\n\t\t\tx -= this.dragXOffset;\r\n\t\t\ty -= this.dragYOffset;\r\n\r\n\t\t\tconst deltaX = Math.abs(x - this.dragXOriginal);\r\n\t\t\tconst deltaY = Math.abs(y - this.dragYOriginal);\r\n\r\n\t\t\tif (deltaX + deltaY > 1) this.dropPreventClick = true;\r\n\r\n\t\t\tif (e.shiftKey) {\r\n\t\t\t\tif (deltaX > deltaY) {\r\n\t\t\t\t\ty = this.dragYOriginal;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tx = this.dragXOriginal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.vuexHistory.transaction(() => {\r\n\t\t\t\tthis.$store.dispatch('objects/setPosition', {\r\n\t\t\t\t\tid: this.draggedObject!.id,\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty,\r\n\t\t\t\t} as ISetObjectPositionMutation);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async onDrop(e: DragEvent) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tif (!e.dataTransfer) return;\r\n\r\n\t\tfor (const item of e.dataTransfer.items) {\r\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\r\n\t\t\t\tconst name = 'dropCustomAsset' + ++this.dropSpriteCount;\r\n\t\t\t\tconst url = registerAsset(name, item.getAsFile()!);\r\n\r\n\t\t\t\tthis.vuexHistory.transaction(async () => {\r\n\t\t\t\t\tawait this.$store.dispatch('objects/createSprite', {\r\n\t\t\t\t\t\tassets: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\thq: url,\r\n\t\t\t\t\t\t\t\tlq: url,\r\n\t\t\t\t\t\t\t\tsourcePack: 'dddg.generated.uploaded-sprites',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t} as ICreateSpriteAction);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onSpriteDrop(e: MouseEvent | TouchEvent) {\r\n\t\tif (this.draggedObject) {\r\n\t\t\tif ('TouchEvent' in window && e instanceof TouchEvent) {\r\n\t\t\t\tthis.dropPreventClick = false;\r\n\t\t\t}\r\n\t\t\tthis.draggedObject = null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onMouseEnter(e: MouseEvent) {\r\n\t\tif (e.buttons !== 1) {\r\n\t\t\tthis.draggedObject = null;\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./render.vue?vue&type=template&id=d2439c12&\"\nimport script from \"./render.vue?vue&type=script&lang=ts&\"\nexport * from \"./render.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog-wrapper\",on:{\"click\":_vm.leave}},[_c('dialog',{attrs:{\"open\":\"\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('single-box',{ref:\"packDialog\",on:{\"leave\":_vm.leave}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pages\",on:{\"keydown\":_vm.keydownHandler}},[(!_vm.selected)?_c('div',{staticClass:\"page fly-left\",class:{ blured: _vm.selected }},[_c('search-bar',{ref:\"searchBar\",staticClass:\"search-bar\",attrs:{\"disabled\":!!_vm.selected},on:{\"focus-list\":_vm.focusListHandler,\"leave\":function($event){return _vm.$emit('leave')}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('list',{ref:\"list\",staticClass:\"list\",attrs:{\"search\":_vm.search,\"authors\":_vm.authors,\"packs\":_vm.packsArgmented,\"disabled\":!!_vm.selected},on:{\"selected\":_vm.onSelect,\"select-search-bar\":function($event){return _vm.$refs.searchBar.focus()}}})],1):_vm._e(),(_vm.selected)?_c('div',{staticClass:\"page fly-right\"},[_c('pack-display',{ref:\"dialog\",staticClass:\"pack-display\",attrs:{\"authors\":_vm.authors,\"packs\":_vm.packsArgmented,\"selected\":_vm.selected,\"show-back\":\"\"},on:{\"leave\":_vm.leavePackDisplay}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-area\"},[_c('div',{staticClass:\"search-bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],ref:\"input\",staticClass:\"input\",attrs:{\"disabled\":_vm.disabled},domProps:{\"value\":(_vm.message)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.message=$event.target.value},_vm.onUpdate],\"click\":function($event){$event.dontCloseHelp = true},\"keydown\":_vm.keydownHandler}}),_c('button',{class:{ help: true, toggled: _vm.showHelp },attrs:{\"disabled\":_vm.disabled},on:{\"click\":function($event){$event.stopPropagation();_vm.showHelp = !_vm.showHelp;\n\t\t\t\t$event.dontCloseHelp = true;}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"info\")])]),_c('button',{staticClass:\"exit-button\",on:{\"click\":function($event){return _vm.$emit('leave', true)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"clear\")])])]),(_vm.showHelp)?_c('div',{staticClass:\"info-area\",on:{\"click\":function($event){$event.dontCloseHelp = true}}},[_vm._m(0),_vm._m(1),_vm._m(2),_c('p',[_vm._v(\" To limit your search to specific attributes of a pack, you can use the following prefixes: \")]),_vm._m(3),_vm._m(4)]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Enter the text you want to search for. E.g. \"),_c('code',[_vm._v(\"Monika\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" If multiple words are given, each word must be found. E.g. \"),_c('code',[_vm._v(\"Monika Pose\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" To search phrases with spaces, surround them with double quotes. E.g. \"),_c('code',[_vm._v(\"\\\"Monika R63\\\" Pose\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_c('th',[_vm._v(\"Prefix\")]),_c('th',[_vm._v(\"Description\")]),_c('th',[_vm._v(\"Example\")])]),_c('tr',[_c('td',[_vm._v(\"Character:\")]),_c('td'),_c('td',[_c('code',[_vm._v(\"Character: Monika\")])])]),_c('tr',[_c('td',[_vm._v(\"Artist:\")]),_c('td'),_c('td',[_c('code',[_vm._v(\"Artist: edave64\")])])]),_c('tr',[_c('td',[_vm._v(\"Type:\")]),_c('td',[_c('code',[_vm._v(\"Expressions\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Styles\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Poses\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"Characters\")])]),_c('td',[_c('code',[_vm._v(\"Type: Poses\")])])]),_c('tr',[_c('td',[_vm._v(\"Engine:\")]),_c('td',[_c('code',[_vm._v(\"Doki Doki Dialog Generator\")]),_vm._v(\", \"),_c('code',[_vm._v(\"DDDG\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"Doki Doki Comic Club\")]),_vm._v(\", \"),_c('code',[_vm._v(\"DDCC\")])]),_c('td',[_c('code',[_vm._v(\"Engine: DDCC\")])])]),_c('tr',[_c('td',[_vm._v(\"Pack:\")]),_c('td',[_vm._v(\"The pack itself must contain the text\")]),_c('td',[_c('code',[_vm._v(\"Pack: Angry\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" Prefixes can be shorted, so \"),_c('code',[_vm._v(\"Character: Monika\")]),_vm._v(\" can be shortend to \"),_c('code',[_vm._v(\"C: Monika\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Watch } from 'vue-property-decorator';\n\nconst debounce = 250;\n\n@Component({})\nexport default class SearchBar extends Vue {\n\t@Prop({ default: false }) private disabled!: boolean;\n\t@Prop() private value!: string;\n\n\tprivate showHelp = false;\n\tprivate message = '';\n\tprivate debounceTimeout: number | null = null;\n\tprivate lastSend = '';\n\n\tpublic focus() {\n\t\t(this.$refs.input as HTMLElement).focus();\n\t}\n\n\tprivate created() {\n\t\tdocument.body.addEventListener('click', this.documentClickHandler);\n\t\tthis.updateInternalValue();\n\t}\n\n\tprivate destroyed() {\n\t\tdocument.body.removeEventListener('click', this.documentClickHandler);\n\t}\n\n\tprivate documentClickHandler(\n\t\tevent: MouseEvent & { dontCloseHelp?: boolean }\n\t) {\n\t\tif (event.dontCloseHelp) return;\n\t\tthis.showHelp = false;\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'ArrowDown') {\n\t\t\tthis.$emit('focus-list');\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t@Watch('value')\n\tprivate updateInternalValue() {\n\t\tif (this.lastSend === this.value) {\n\t\t\tthis.lastSend = '';\n\t\t\treturn;\n\t\t}\n\t\tthis.message = this.value;\n\t}\n\n\tprivate onUpdate() {\n\t\tif (this.debounceTimeout) clearTimeout(this.debounceTimeout);\n\t\tthis.debounceTimeout = setTimeout(this.doUpdate, debounce);\n\t}\n\n\tprivate doUpdate() {\n\t\tif (this.debounceTimeout) clearTimeout(this.debounceTimeout);\n\t\tthis.debounceTimeout = null;\n\t\tconst div = document.createElement('div');\n\t\tdiv.innerHTML = this.message;\n\t\tthis.lastSend = div.innerText;\n\t\tthis.$emit('input', div.innerText);\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchBar.vue?vue&type=template&id=2bae2f1a&scoped=true&\"\nimport script from \"./SearchBar.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchBar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchBar.vue?vue&type=style&index=0&id=2bae2f1a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bae2f1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('table',[_c('thead',[_c('tr',{ref:\"header\"},_vm._l(([\n\t\t\t\t\t\t['name', 'Pack'],\n\t\t\t\t\t\t['characters', 'Character'],\n\t\t\t\t\t\t['kind', 'Type'],\n\t\t\t\t\t\t['authors', 'Authors'],\n\t\t\t\t\t\t['state', 'Status'] ]),function(header,idx){return _c('th',{key:idx,attrs:{\"tabindex\":_vm.disabled ? -1 : 0},on:{\"click\":function($event){return _vm.sortBy(header[0])},\"keydown\":function($event){return _vm.headerKeydownListener($event, header[0])}}},[_c('div',[_c('div',[_vm._v(_vm._s(header[1]))]),(_vm.sort === header[0])?_c('div',[_vm._v(_vm._s(_vm.desc ? '▼' : '▲'))]):_vm._e()])])}),0)]),_c('transition-group',{ref:\"tbody\",attrs:{\"name\":\"tbody-group\",\"tag\":\"tbody\",\"tabindex\":_vm.disabled ? -1 : 0},nativeOn:{\"keydown\":function($event){return _vm.keydownHandler($event)},\"focus\":function($event){return _vm.updateFocusedItem($event)}}},_vm._l((_vm.list),function(pack){return _c('tr',{key:pack.id,class:{\n\t\t\t\t\t'tbody-group-item': true,\n\t\t\t\t\tfocused: _vm.focusedItem === pack.id,\n\t\t\t\t},on:{\"mousedown\":function($event){_vm.focusedItem = pack.id},\"click\":function($event){return _vm.$emit('selected', { id: pack.id, source: 'pointer' })}}},[_c('td',[_vm._v(_vm._s(pack.name))]),_c('td',[_vm._v(_vm._s(pack.characters.join(', ')))]),_c('td',[_vm._v(_vm._s(pack.kind.join(', ')))]),_c('td',[_vm._v(_vm._s(pack.authors.join(', ')))]),_c('td',[_vm._v(_vm._s(pack.state === 'Unknown' ? 'Not added' : pack.state))])])}),0)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { IPack } from '@edave64/dddg-repo-filters/dist/pack';\nimport { IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\nimport run from '@edave64/dddg-repo-filters/dist/main';\n\n@Component\nexport default class List extends Vue {\n\t@Prop() private search!: string;\n\t@Prop() private authors!: IAuthors;\n\t@Prop() private packs!: IPack[];\n\t@Prop({ default: false }) private disabled!: boolean;\n\tprivate sort: keyof IPack | '' = '';\n\tprivate desc = false;\n\tprivate focusedItem = '';\n\n\tprivate wordCache: { [id: string]: Set<string> } = {};\n\n\tpublic get list(): IPack[] {\n\t\tconst filtered = this.filterList(this.packs, this.search);\n\t\tif (this.sort && filtered.length > 0) {\n\t\t\tconst sort = this.sort as keyof IPack;\n\t\t\tlet sortFunc: ((a: IPack, b: IPack) => number) | undefined = undefined;\n\t\t\tif (typeof filtered[0][sort] === 'string') {\n\t\t\t\tsortFunc = (a, b) => a.name.localeCompare(b.name);\n\t\t\t} else if (filtered[0][sort] instanceof Array) {\n\t\t\t\tsortFunc = (a, b) =>\n\t\t\t\t\t(a as any)[sort]\n\t\t\t\t\t\t.join(', ')\n\t\t\t\t\t\t.localeCompare((b as any)[sort].join(', '));\n\t\t\t}\n\t\t\tif (sortFunc) {\n\t\t\t\tif (this.desc) {\n\t\t\t\t\tconst oldSort = sortFunc;\n\t\t\t\t\tsortFunc = (b, a) => oldSort(a, b);\n\t\t\t\t}\n\t\t\t\tfiltered.sort(sortFunc);\n\t\t\t}\n\t\t}\n\t\treturn filtered;\n\t}\n\n\tpublic get listById(): Map<string, IPack> {\n\t\treturn new Map(this.packs.map(pack => [pack.id, pack]));\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tconst indexOf = this.list.findIndex(pack => pack.id === this.focusedItem);\n\t\tconsole.log(indexOf);\n\t\tswitch (event.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.$emit('selected', { id: this.focusedItem, source: 'keyboard' });\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tif (indexOf === 0) {\n\t\t\t\t\tthis.$emit('select-search-bar');\n\t\t\t\t} else {\n\t\t\t\t\tthis.focusedItem = this.list[indexOf - 1].id;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tif (indexOf < this.list.length - 1) {\n\t\t\t\t\tthis.focusedItem = this.list[indexOf + 1].id;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'PageUp': {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet newIdx = indexOf - 10;\n\t\t\t\tif (newIdx < 0) {\n\t\t\t\t\tnewIdx = 0;\n\t\t\t\t}\n\t\t\t\tthis.focusedItem = this.list[newIdx].id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'PageDown': {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet newIdx = indexOf + 10;\n\t\t\t\tconst max = this.list.length - 1;\n\t\t\t\tif (newIdx > max) {\n\t\t\t\t\tnewIdx = max;\n\t\t\t\t}\n\t\t\t\tthis.focusedItem = this.list[newIdx].id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate headerKeydownListener(event: KeyboardEvent, headerId: keyof IPack) {\n\t\tswitch (event.key) {\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\tthis.sortBy(headerId);\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.focus();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.$emit('select-search-bar');\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic focus(): void {\n\t\t((this.$refs.tbody as Vue).$el as HTMLElement).focus();\n\t}\n\n\t@Watch('focusedItem')\n\tprivate updateFocusedItem() {\n\t\tif (this.list.length === 0) {\n\t\t\tthis.focusedItem = '';\n\t\t\treturn;\n\t\t}\n\t\tif (this.focusedItem === '') {\n\t\t\tthis.focusedItem = this.list[0].id;\n\t\t}\n\n\t\tthis.$nextTick(() => {\n\t\t\tconst header = this.$refs.header as HTMLElement;\n\t\t\tconst element = document.querySelector(\n\t\t\t\t'.list tbody .focused'\n\t\t\t) as HTMLDivElement;\n\n\t\t\tconst containerHeight =\n\t\t\t\t(this.$el as HTMLElement).offsetHeight - header.offsetHeight;\n\t\t\tconst scrollTop = this.$el.scrollTop;\n\t\t\tconst scrollBottom = scrollTop + containerHeight;\n\n\t\t\tif (element) {\n\t\t\t\tconst itemTop = element.offsetTop - header.offsetHeight;\n\t\t\t\tconst itemBottom = itemTop + element.offsetHeight;\n\n\t\t\t\tif (itemBottom > scrollBottom) {\n\t\t\t\t\tthis.$el.scrollTop = itemBottom - containerHeight;\n\t\t\t\t} else if (itemTop < scrollTop) {\n\t\t\t\t\tthis.$el.scrollTop = itemTop;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate get uniqueCharacters(): string[] {\n\t\treturn Array.from(\n\t\t\tnew Set(\n\t\t\t\tthis.packs.flatMap(pack =>\n\t\t\t\t\tpack.characters.map(char => char.toLowerCase())\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n\n\tprivate sortBy(by: keyof IPack) {\n\t\tif (this.sort === by) {\n\t\t\tif (!this.desc) {\n\t\t\t\tthis.desc = true;\n\t\t\t} else {\n\t\t\t\tthis.sort = '';\n\t\t\t\tthis.desc = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sort = by;\n\t\t\tthis.desc = false;\n\t\t}\n\t}\n\n\tprivate filterList(list: IPack[], search: string): IPack[] {\n\t\tif (!search) return [...list];\n\t\treturn run(search, this.authors, list);\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=6f5388b3&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=ts&\"\nexport * from \"./List.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=6f5388b3&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f5388b3\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pack-display\",style:({ backgroundImage: _vm.backgroundImage }),on:{\"click\":function($event){$event.stopPropagation();}}},[_c('header',[_c('h1',[(_vm.showBack)?_c('button',{staticClass:\"exit-button\",on:{\"click\":function($event){return _vm.$emit('leave', true)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_back\")])]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.pack.name)+\" \")]),_c('h2',[_vm._v(_vm._s(_vm.pack.id))])]),(_vm.pack.disclaimer)?_c('section',{staticClass:\"disclaimer\"},[_vm._v(\" \"+_vm._s(_vm.pack.disclaimer)+\" \")]):_vm._e(),(_vm.pack.source)?_c('section',[_c('a',{attrs:{\"href\":_vm.pack.source,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Source\")])]):_vm._e(),_c('section',[(_vm.addable)?_c('button',{ref:\"toFocus\",staticClass:\"clipboard\",on:{\"click\":_vm.add}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add\")]),_vm._v(\" Add \"+_vm._s(_vm.installable ? 'Temporarily' : '')+\" \")]):_vm._e(),(_vm.removable)?_c('button',{ref:\"toFocus\",staticClass:\"clipboard\",on:{\"click\":_vm.remove}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove\")]),_vm._v(\" Remove \"+_vm._s(_vm.uninstallable ? 'Temporarily' : '')+\" \")]):_vm._e()]),_c('section',[_c('h3',[_vm._v(\"Authors\")]),_c('table',[_c('tbody',_vm._l((_vm.pack.authors),function(authorId){return _c('tr',{key:authorId},[_c('td',[_vm._v(_vm._s(_vm.authorName(authorId)))]),_c('td',_vm._l((_vm.authorsLinks(authorId)),function(link){return _c('a',{key:link.target,staticClass:\"platform_button\",attrs:{\"href\":link.target,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_c('img',{attrs:{\"title\":link.platform,\"src\":link.icon,\"height\":\"32\",\"width\":\"32\"}})])}),0)])}),0)])]),(_vm.pack.description)?_c('section',[_c('h3',[_vm._v(\"Credits\")]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.sanitize(_vm.pack.description))}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const allowedTags = [\r\n\t'h3',\r\n\t'h4',\r\n\t'h5',\r\n\t'h6',\r\n\t'blockquote',\r\n\t'p',\r\n\t'a',\r\n\t'ul',\r\n\t'ol',\r\n\t'nl',\r\n\t'li',\r\n\t'b',\r\n\t'i',\r\n\t'strong',\r\n\t'em',\r\n\t'strike',\r\n\t'code',\r\n\t'hr',\r\n\t'br',\r\n\t'div',\r\n\t'table',\r\n\t'thead',\r\n\t'caption',\r\n\t'tbody',\r\n\t'tr',\r\n\t'th',\r\n\t'td',\r\n\t'pre',\r\n];\r\nconst allowedAttributes: { [tagName: string]: string[] | undefined } = {\r\n\ta: ['href'],\r\n\timg: ['src'],\r\n};\r\nconst schemaLimitedAttributes = ['href', 'src'];\r\nconst allowedSchemas = ['http', 'https'];\r\nconst enforceAttributes: {\r\n\t[tagName: string]: { [attr: string]: string } | undefined;\r\n} = {\r\n\ta: {\r\n\t\ttarget: '_blank',\r\n\t\trel: 'noopener noreferrer',\r\n\t},\r\n};\r\n\r\nexport function sanitize(html: string) {\r\n\tconst retDoc = document.createElement('div');\r\n\tconst doc = document.createElement('div');\r\n\tdoc.innerHTML = html;\r\n\r\n\tfor (const node of Array.from(doc.childNodes)) {\r\n\t\tfor (const sanitizedNode of sanitizeElement(node as Element)) {\r\n\t\t\tretDoc.appendChild(sanitizedNode);\r\n\t\t}\r\n\t}\r\n\r\n\treturn retDoc.innerHTML;\r\n}\r\n\r\nconst protocolMatcher = /^(\\w+):/;\r\n\r\nfunction sanitizeElement(node: Node): Node[] {\r\n\tif (node.nodeType !== Node.ELEMENT_NODE) return [node];\r\n\tconst el = node as Element;\r\n\tlet ret: Node[] = [];\r\n\tconst tagName = el.tagName.toLowerCase();\r\n\tif (allowedTags.includes(tagName)) {\r\n\t\tret.push(el);\r\n\t\tconst attrs: Attr[] = Array.prototype.slice.call(el.attributes);\r\n\t\tconst allowedAttrs = allowedAttributes[tagName] || [];\r\n\t\tfor (const attr of attrs) {\r\n\t\t\tif (!allowedAttrs.includes(attr.name)) {\r\n\t\t\t\tel.removeAttribute(attr.name);\r\n\t\t\t} else if (schemaLimitedAttributes.includes(attr.name)) {\r\n\t\t\t\tconst protocolMatch = attr.value.match(protocolMatcher);\r\n\t\t\t\tif (protocolMatch && !allowedSchemas.includes(protocolMatch[1])) {\r\n\t\t\t\t\tel.removeAttribute(attr.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst enforce = enforceAttributes[tagName];\r\n\t\tif (enforce) {\r\n\t\t\tfor (const attrName in enforce) {\r\n\t\t\t\tif (!enforce.hasOwnProperty(attrName)) continue;\r\n\t\t\t\tel.setAttribute(attrName, enforce[attrName]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tret.push(document.createTextNode(`<${tagName}>`));\r\n\t\tfor (const subNode of el.childNodes) {\r\n\t\t\tret = ret.concat(sanitizeElement(subNode));\r\n\t\t}\r\n\t\tret.push(document.createTextNode(`</${tagName}>`));\r\n\t}\r\n\treturn ret;\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport { IAuthor, IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\r\nimport { sanitize } from '@/components/toolbox/panels/character-pack-sanitizer';\r\nimport environment from '@/environments/environment';\r\nimport { IRootState, IRemovePacksAction } from '../../store';\r\nimport { Store } from 'vuex';\r\nimport { PackState, ContentPackWithState } from '../../store/content';\r\nimport { IPackWithState } from './types';\r\n\r\nconst linkablePlatforms: Array<[keyof IAuthor, string, string]> = [\r\n\t['reddit', 'https://reddit.com/u/%1', 'reddit.png'],\r\n\t['deviantart', 'https://www.deviantart.com/%1', 'deviantart.png'],\r\n\t['twitter', 'https://twitter.com/%1', 'twitter.svg'],\r\n\t['pixiv', 'https://www.pixiv.net/users/%1', 'pixiv.ico'],\r\n\t['patreon', 'https://www.patreon.com/%1', 'patreon.png'],\r\n\t['facebook', 'https://www.facebook.com/%1', 'facebook.png'],\r\n\t['github', 'https://github.com/%1', 'github.png'],\r\n\t['website', '%1', 'website.svg'],\r\n];\r\n\r\n@Component({})\r\nexport default class PackDisplay extends Vue {\r\n\t@Prop() private selected!: string;\r\n\t@Prop() private authors!: IAuthors;\r\n\t@Prop() private packs!: IPackWithState[];\r\n\t@Prop({ type: Boolean, default: false }) private showBack!: boolean;\r\n\tpublic $store!: Store<IRootState>;\r\n\r\n\tpublic focus() {\r\n\t\t(this.$refs.toFocus as HTMLElement).focus();\r\n\t}\r\n\r\n\tprivate authorName(authorId: string) {\r\n\t\tconst author = this.authors[authorId];\r\n\t\tif (author && author.currentName) return author.currentName;\r\n\t\treturn authorId;\r\n\t}\r\n\r\n\tprivate authorsLinks(authorId: string): AuthorLink[] {\r\n\t\tconst author = this.authors[authorId];\r\n\t\tif (!author) return [];\r\n\t\treturn linkablePlatforms\r\n\t\t\t.filter(platform => author[platform[0]])\r\n\t\t\t.map(platform => {\r\n\t\t\t\tconst value = author[platform[0]]!;\r\n\t\t\t\tconst target = platform[1].replace('%1', value);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttarget,\r\n\t\t\t\t\tplatform: platform[0][0].toUpperCase() + platform[0].slice(1),\r\n\t\t\t\t\ticon: 'icons/' + platform[2],\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate sanitize(credits: string) {\r\n\t\treturn sanitize(credits);\r\n\t}\r\n\r\n\tprivate get pack(): IPackWithState {\r\n\t\treturn this.packs.find(pack => pack.id === this.selected)!;\r\n\t}\r\n\r\n\tprivate get backgroundImage(): string {\r\n\t\treturn this.pack.preview.map(preview => `url('${preview}')`).join(',');\r\n\t}\r\n\r\n\t/*\r\n\tprivate get knownPacks(): IInstalledPack[] {\r\n\t\tconst packs = this.$store.state.content.contentPacks;\r\n\t\treturn packs\r\n\t\t\t.filter(pack => pack.packId && !pack.packId.startsWith('dddg.buildin.'))\r\n\t\t\t.map(\r\n\t\t\t\tpack =>\r\n\t\t\t\t\t({\r\n\t\t\t\t\t\tname: pack.packId,\r\n\t\t\t\t\t\tcredits: pack.packCredits,\r\n\t\t\t\t\t\tinstalled: true,\r\n\t\t\t\t\t\tactive: true,\r\n\t\t\t\t\t\tqueuedUninstall: false,\r\n\t\t\t\t\t\tfreshInstall: false,\r\n\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t} as IInstalledPack)\r\n\t\t\t);\r\n\t}\r\n\r\n\tprivate get activatable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.installedPack) return false;\r\n\t\tif (!this.installedPack.installed) return false;\r\n\t\tif (this.installedPack.queuedUninstall) return false;\r\n\t\tif (this.installedPack.freshInstall) return false;\r\n\t\treturn !this.installedPack.active;\r\n\t}\r\n\tprivate get deactivatable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (!this.installedPack) return false;\r\n\t\tif (!this.installedPack.installed) return false;\r\n\t\tif (this.installedPack.queuedUninstall) return false;\r\n\t\tif (this.installedPack.freshInstall) return false;\r\n\t\treturn this.installedPack.active;\r\n\t}\r\n\t*/\r\n\tprivate get installable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (this.pack.state === 'Installed') return false;\r\n\t\treturn true;\r\n\t}\r\n\tprivate get uninstallable(): boolean {\r\n\t\tif (!environment.isPackInstallingSupported) return false;\r\n\t\tif (this.pack.state !== 'Installed') return false;\r\n\t\treturn true;\r\n\t}\r\n\t/*\r\n\tprivate install(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.installContentPack(this.pack.dddg2Path || this.pack.dddg1Path);\r\n\t\tif (this.installedPack.queuedUninstall) {\r\n\t\t\tthis.installedPack.queuedUninstall = false;\r\n\t\t} else {\r\n\t\t\tthis.installedPack.installed = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate uninstall(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.uninstallContentPack(this.installedPack.url);\r\n\t\tthis.installedPack.queuedUninstall = true;\r\n\t}\r\n\r\n\tprivate activate(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.activateContentPack(this.installedPack.url);\r\n\t\tthis.installedPack.active = true;\r\n\t}\r\n\r\n\tprivate deactivate(): void {\r\n\t\tif (!this.installedPack) return;\r\n\t\tenvironment.deactivateContentPack(this.installedPack.url);\r\n\t\tthis.installedPack.active = false;\r\n\t}\r\n\r\n*/\r\n\tprivate get removable(): boolean {\r\n\t\treturn this.pack.state === 'Added' || this.pack.state === 'Installed';\r\n\t}\r\n\r\n\tprivate async remove(): Promise<void> {\r\n\t\tawait this.$store.dispatch('removePacks', {\r\n\t\t\tpacks: new Set([this.pack.id]),\r\n\t\t} as IRemovePacksAction);\r\n\t}\r\n\r\n\tprivate get addable(): boolean {\r\n\t\treturn this.pack.state === 'Unknown';\r\n\t}\r\n\r\n\tprivate async add(): Promise<void> {\r\n\t\tawait this.$store.dispatch(\r\n\t\t\t'content/loadContentPacks',\r\n\t\t\tthis.pack.dddg2Path || this.pack.dddg1Path\r\n\t\t);\r\n\t}\r\n\r\n\tprivate isAdded() {\r\n\t\tthis.$store.state;\r\n\t}\r\n}\r\n\r\ninterface AuthorLink {\r\n\treadonly target: string;\r\n\treadonly platform: string;\r\n\treadonly icon: string;\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PackDisplay.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PackDisplay.vue?vue&type=template&id=5498262c&scoped=true&\"\nimport script from \"./PackDisplay.vue?vue&type=script&lang=ts&\"\nexport * from \"./PackDisplay.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PackDisplay.vue?vue&type=style&index=0&id=5498262c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5498262c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { Store } from 'vuex';\nimport { IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\nimport { IPack } from '@edave64/dddg-repo-filters/dist/pack';\nimport SearchBar from '../SearchBar.vue';\nimport List from '../List.vue';\nimport { SelectedEvent, IPackWithState } from '../types';\nimport PackDisplay from '../PackDisplay.vue';\nimport { IRootState } from '@/store';\n\nconst repoUrl = 'https://edave64.github.io/Doki-Doki-Dialog-Generator-Packs/';\n\n@Component({\n\tcomponents: {\n\t\tSearchBar,\n\t\tList,\n\t\tPackDisplay,\n\t},\n})\nexport default class SingleBox extends Vue {\n\tprivate search = '';\n\tprivate authors: IAuthors = {};\n\tprivate packs: IPack[] = [];\n\tpublic $store!: Store<IRootState>;\n\n\tprivate selected: string | null = null;\n\n\tpublic async created() {\n\t\t[this.packs, this.authors] = await Promise.all([\n\t\t\tthis.fetchJSON<IPack[]>(repoUrl + 'repo.json'),\n\t\t\tthis.fetchJSON<IAuthors>(repoUrl + 'people.json'),\n\t\t]);\n\t}\n\n\tpublic focus(): void {}\n\tpublic setSearch(str: string): void {\n\t\tthis.selected = null;\n\t\tthis.search = str;\n\t}\n\n\tprivate async fetchJSON<A>(path: string): Promise<A> {\n\t\tconst req = await fetch(path);\n\t\treturn await req.json();\n\t}\n\n\tprivate leavePackDisplay(moveFocus: boolean) {\n\t\tthis.selected = null;\n\t\tif (moveFocus) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t(this.$refs.searchBar as any).focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate keydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\tthis.selected = '';\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t(this.$refs.searchBar as any).focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate onSelect({ id, source }: SelectedEvent) {\n\t\tthis.selected = id;\n\t\tif (source === 'keyboard') {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst dialog = this.$refs.dialog as any;\n\t\t\t\tdialog.focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate focusListHandler() {\n\t\t(this.$refs.list as any).focus();\n\t}\n\n\tprivate get packsArgmented(): IPackWithState[] {\n\t\tconst repoPacks = this.packs;\n\t\tconst installedPacks = this.$store.state.content.contentPacks;\n\n\t\tconst repoLookup = new Map(repoPacks.map(pack => [pack.id, pack]));\n\t\tconst installedLookup = new Map(\n\t\t\tinstalledPacks.map(pack => [pack.packId, pack])\n\t\t);\n\n\t\tconst installedRet: IPackWithState[] = installedPacks.map(pack => {\n\t\t\tconst repoPack = repoLookup.get(pack.packId!);\n\t\t\tif (repoPack) {\n\t\t\t\treturn {\n\t\t\t\t\t...repoPack,\n\t\t\t\t\tstate: pack.state,\n\t\t\t\t} as IPackWithState;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tstate: pack.state,\n\t\t\t\t\tid: pack.packId,\n\t\t\t\t\tcharacters: [],\n\t\t\t\t\tname: pack.packId,\n\t\t\t\t\tinLocalRepo: false,\n\t\t\t\t\tpreview: [],\n\t\t\t\t\tkind: [],\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tdddg1Path: '',\n\t\t\t\t\tdddg2Path: '',\n\t\t\t\t\tsearchWords: [],\n\t\t\t\t\tauthors: [],\n\t\t\t\t} as IPackWithState;\n\t\t\t}\n\t\t});\n\n\t\tconst notInstalledPacks = repoPacks\n\t\t\t.filter(pack => !installedLookup.has(pack.id))\n\t\t\t.map(pack => {\n\t\t\t\treturn {\n\t\t\t\t\t...pack,\n\t\t\t\t\tstate: 'Unknown',\n\t\t\t\t} as IPackWithState;\n\t\t\t});\n\n\t\treturn [\n\t\t\t...installedRet.filter(ret => !ret.id.startsWith('dddg.buildin.')),\n\t\t\t...notInstalledPacks,\n\t\t];\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SingleBox.vue?vue&type=template&id=dc12a1fc&scoped=true&\"\nimport script from \"./SingleBox.vue?vue&type=script&lang=ts&\"\nexport * from \"./SingleBox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SingleBox.vue?vue&type=style&index=0&id=dc12a1fc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dc12a1fc\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { IAuthors } from '@edave64/dddg-repo-filters/dist/authors';\nimport { IPack } from '@edave64/dddg-repo-filters/dist/pack';\nimport SingleBox from './layouts/SingleBox.vue';\n\n@Component({ components: { SingleBox } })\nexport default class Dialog extends Vue {\n\tpublic focus() {\n\t\t(this.$refs.packDialog as SingleBox).focus();\n\t}\n\n\tpublic setSearch(search: string) {\n\t\t(this.$refs.packDialog as SingleBox).setSearch(search);\n\t}\n\n\tpublic leave(): void {\n\t\tthis.setSearch('');\n\t\tthis.$emit('leave');\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=a36692ee&scoped=true&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Dialog.vue?vue&type=style&index=0&id=a36692ee&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a36692ee\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IRenderable } from '@/renderables/renderable';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\nimport {\n\tIObject,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n} from '@/store/objects';\nimport { Character } from '@/renderables/character';\nimport {\n\tIShiftCharacterSlotAction,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport ToolBox from '@/components/toolbox/toolbox.vue';\nimport MessageConsole from '@/components/message-console.vue';\nimport Render from '@/components/render.vue';\nimport RepoDialog from '@/components/repo/Dialog.vue';\nimport { ISetCurrentMutation } from '@/store/panels';\nimport PackDisplay from './components/repo/PackDisplay.vue';\n\n// tslint:disable-next-line: no-magic-numbers\nconst aspectRatio = 16 / 9;\nconst arrowMoveStepSize = 20;\n\n@Component({\n\tcomponents: {\n\t\tToolBox,\n\t\tMessageConsole,\n\t\tRender,\n\t\tRepoDialog,\n\t},\n})\nexport default class App extends Vue {\n\tpublic canvasWidth: number = 0;\n\tpublic canvasHeight: number = 0;\n\tpublic $store!: Store<IRootState>;\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate blendOver: string | null = null;\n\n\tprivate uiSize: number = 192;\n\tprivate currentlyRendering: boolean = false;\n\n\tprivate panel: string = '';\n\tprivate dialogVisable: boolean = false;\n\n\tprivate drawLastDownload(): void {\n\t\tconst last = this.$store.state.ui.lastDownload;\n\t\tif (!last) return;\n\t\t(this.$refs.render as Render).blendOver(last);\n\t}\n\n\tprivate setBlendOver(): void {\n\t\tthis.blendOver = this.$store.state.ui.lastDownload;\n\t}\n\n\tprivate async created(): Promise<void> {\n\t\t// Moving this to the \"mounted\"-handler crashes safari over version 12.\n\t\t// My best guess is because it runs in a microtask, which have been added in that Version.\n\t\tthis.updateArea();\n\t\twindow.addEventListener('resize', this.updateArea);\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t\twindow.addEventListener('keydown', this.onKeydown);\n\t\tdocument.body.addEventListener(\n\t\t\t'drop',\n\t\t\t(event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'dragover',\n\t\t\t(event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.dispatch('content/loadContentPacks', [\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.backgrounds.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.monika.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.sayori.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.natsuki.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.yuri.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc_chad.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc_classic.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.femc.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.classic_amy.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.amy.json`,\n\t\t\t]);\n\n\t\t\tawait this.$store.dispatch('panels/createPanel');\n\t\t\tif (Object.keys(this.$store.state.objects.objects).length === 0) {\n\t\t\t\tthis.$store.dispatch(\n\t\t\t\t\t'objects/createTextBox',\n\t\t\t\t\t{} as ICreateTextBoxAction\n\t\t\t\t);\n\t\t\t}\n\t\t\tawait this.$store.commit('panels/setCurrentBackground', {\n\t\t\t\tcurrent: 'dddg.buildin.backgrounds:ddlc.clubroom',\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetCurrentMutation);\n\t\t});\n\t}\n\n\tprivate destroyed(): void {\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t}\n\n\tprivate mounted(): void {\n\t\twindow.addEventListener('keypress', e => {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tthis.vuexHistory.transaction(() => {\n\t\t\t\t\tif (this.$store.state.ui.selection === null) return;\n\t\t\t\t\tthis.$store.commit('ui/setSelection', null);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate optimum(sw: number, sh: number): [number, number] {\n\t\tlet rh = sw / aspectRatio;\n\t\tlet rw = sh * aspectRatio;\n\n\t\tif (rh > sh) {\n\t\t\trh = sh;\n\t\t} else {\n\t\t\trw = sw;\n\t\t}\n\n\t\treturn [rw, rh];\n\t}\n\n\tprivate optimizeWithMenu(sw: number, sh: number): [number, number, boolean] {\n\t\tconst opth = this.optimum(sw, sh - this.uiSize);\n\t\tconst optv = this.optimum(sw - this.uiSize, sh);\n\n\t\tif (opth[0] * opth[1] > optv[0] * optv[1]) {\n\t\t\treturn [opth[0], opth[1], false];\n\t\t} else {\n\t\t\treturn [optv[0], optv[1], true];\n\t\t}\n\t}\n\n\tprivate updateArea(): void {\n\t\tconst [cw, ch, v] = this.optimizeWithMenu(\n\t\t\tdocument.documentElement.clientWidth,\n\t\t\tdocument.documentElement.clientHeight\n\t\t);\n\n\t\tthis.canvasWidth = cw;\n\t\tthis.canvasHeight = ch;\n\t\tif (this.$store.state.ui.vertical === v) return;\n\t\tthis.$store.commit('ui/setVertical', v);\n\t}\n\n\tprivate showDialog(search: string | undefined) {\n\t\tthis.dialogVisable = true;\n\t\tif (search) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t(this.$refs.dialog as RepoDialog).setSearch(search);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate onKeydown(e: KeyboardEvent) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tconst selection = this.$store.state.objects.objects[\n\t\t\t\tthis.$store.state.ui.selection!\n\t\t\t];\n\t\t\tif (!selection) return;\n\t\t\tif (e.key === 'Delete') {\n\t\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\t\tid: selection.id,\n\t\t\t\t} as IRemoveObjectAction);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.key === 'z' && e.ctrlKey) {\n\t\t\t\t// this.$store.commit('history/undo');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else if (e.key === 'y' && e.ctrlKey) {\n\t\t\t\t// this.$store.commit('history/redo');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (selection.type === 'character') {\n\t\t\t\tconst character = selection as ICharacter;\n\t\t\t\tif (character.freeMove) {\n\t\t\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\t\tid: character.id,\n\t\t\t\t\t\t\tdelta: -1,\n\t\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\t\tid: character.id,\n\t\t\t\t\t\t\tdelta: 1,\n\t\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet { x, y } = selection;\n\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\tx -= e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowRight') {\n\t\t\t\tx += e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowUp') {\n\t\t\t\ty -= e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowDown') {\n\t\t\t\ty += e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: selection.id,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t\tconsole.log(e);\n\t\t\treturn;\n\t\t});\n\t}\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=934d05d6&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ICommand } from '@/eventbus/command';\nimport { getAAsset } from '@/asset-manager';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { IRootState } from '..';\nimport { IAsset } from '../content';\n\nexport interface ISprite extends IObject {\n\ttype: 'sprite';\n\tassets: IAsset[];\n}\n\nexport const spriteMutations: MutationTree<IObjectsState> = {};\n\nlet lastSpriteId = 0;\n\nexport const spriteActions: ActionTree<IObjectsState, IRootState> = {\n\tasync createSprite(\n\t\t{ state, commit, rootState },\n\t\tcommand: ICreateSpriteAction\n\t) {\n\t\tconst asset = await getAAsset(command.assets[0], false);\n\t\tif (!(asset instanceof HTMLImageElement)) return;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tassets: command.assets,\n\t\t\t\tflip: false,\n\t\t\t\theight: asset.height,\n\t\t\t\twidth: asset.width,\n\t\t\t\tid: 'sprite_' + ++lastSpriteId,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: asset.width / asset.height,\n\t\t\t\ttype: 'sprite',\n\t\t\t\tversion: 0,\n\t\t\t\tx: 640,\n\t\t\t\ty: 0,\n\t\t\t} as ISprite,\n\t\t} as ICreateObjectMutation);\n\t},\n};\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assets: IAsset[];\n}\n","import { ICommand } from '@/eventbus/command';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetObjectPositionMutation,\n\tISetObjectFlipMutation,\n} from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { NameboxY, TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { IRootState } from '..';\nimport {\n\tChoiceSpacing,\n\tChoiceButtonColor,\n\tChoiceY,\n\tChoiceButtonWidth,\n} from '@/constants/choices';\n\nexport interface IChoice {\n\ttext: string;\n\tselected: boolean;\n}\n\nexport interface IChoices extends IObject {\n\ttype: 'choice';\n\tcustomColor: string;\n\tchoices: IChoice[];\n\tchoiceDistance: number;\n}\n\nexport const choiceMutations: MutationTree<IObjectsState> = {\n\tsetChoices(state, command: ISetChoicesMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.choices = command.choices;\n\t\t++obj.version;\n\t},\n\tsetChoiceColor(state, command: ISetChoiceColorMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.customColor = command.customColor;\n\t\t++obj.version;\n\t},\n\tsetChoiceDistance(state, command: ISetChoiceDistanceMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.choiceDistance = command.choiceDistance;\n\t\t++obj.version;\n\t},\n};\n\nlet lastChoiceId = 0;\n\nexport const choiceActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateChoice({ commit, rootState }, command: ICreateChoicesAction): string {\n\t\tconst id = 'choice_' + ++lastChoiceId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tx: 640,\n\t\t\t\ty: ChoiceY,\n\t\t\t\twidth: ChoiceButtonWidth,\n\t\t\t\theight: 0,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'choice',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tchoiceDistance: ChoiceSpacing,\n\t\t\t\tchoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t\ttext: 'Click here to edit choice',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tcustomColor: ChoiceButtonColor,\n\t\t\t} as IChoices,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\n\taddChoice({ state, commit }, command: IAddChoiceAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices: [\n\t\t\t\t...obj.choices,\n\t\t\t\t{\n\t\t\t\t\tselected: false,\n\t\t\t\t\ttext: command.text,\n\t\t\t\t},\n\t\t\t],\n\t\t} as ISetChoicesMutation);\n\t},\n\n\tremoveChoise({ state, commit }, command: IRemoveChoiceAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tconst choices = [...obj.choices];\n\t\tif (!choices[command.choiceIdx]) return;\n\t\tchoices.splice(command.choiceIdx, 1);\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices,\n\t\t} as ISetChoicesMutation);\n\t},\n\n\tsetChoiceText({ state, commit }, command: ISetChoiceTextAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tconst choices = [...obj.choices];\n\t\tif (!choices[command.choiceIdx]) return;\n\t\tchoices[command.choiceIdx].text = command.text;\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices,\n\t\t} as ISetChoicesMutation);\n\t},\n};\n\nexport interface ISetChoicesMutation extends ICommand {\n\treadonly choices: IChoices['choices'];\n}\n\nexport interface ISetChoiceColorMutation extends ICommand {\n\treadonly customColor: IChoices['customColor'];\n}\n\nexport interface ISetChoiceDistanceMutation extends ICommand {\n\treadonly choiceDistance: IChoices['choiceDistance'];\n}\n\nexport interface ICreateChoicesAction extends ICommand {}\n\nexport interface IAddChoiceAction extends ICommand {\n\treadonly text: string;\n}\n\nexport interface ISetChoiceTextAction extends ICommand {\n\treadonly choiceIdx: number;\n\treadonly text: string;\n}\n\nexport interface IRemoveChoiceAction extends ICommand {\n\treadonly choiceIdx: number;\n}\n","import { ICommand } from '@/eventbus/command';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetObjectPositionMutation,\n\tISetObjectFlipMutation,\n} from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { NameboxY, TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { ISetSpriteSizeMutation } from './characters';\nimport { IRootState } from '..';\n\nexport interface ITextBox extends IObject {\n\ttype: 'textBox';\n\ttext: string;\n\ttalkingDefault:\n\t\t| 'No-one'\n\t\t| 'Sayori'\n\t\t| 'Monika'\n\t\t| 'Natsuki'\n\t\t| 'Yuri'\n\t\t| 'MC'\n\t\t| 'FeMC'\n\t\t| 'Chad'\n\t\t| 'Amy'\n\t\t| 'Other';\n\ttalkingOther: string;\n\tstyle: 'normal' | 'corrupt' | 'custom' | 'none';\n\tcustomColor: string;\n\tderiveCustomColors: boolean;\n\tcustomControlsColor: string;\n\tcustomNameboxColor: string;\n\tcustomNameboxStroke: string;\n\tcustomNameboxWidth: number;\n\tcontrols: boolean;\n\tskip: boolean;\n\tautoQuoting: boolean;\n\tcontinue: boolean;\n\tresetBounds: {\n\t\tx: number;\n\t\ty: number;\n\t\twidth: number;\n\t\theight: number;\n\t};\n}\n\nconst splitTextboxSpacing = 4;\n\nexport const textBoxMutations: MutationTree<IObjectsState> = {\n\tsetText(state, command: ISetTextBoxTextMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.text = command.text;\n\t\t++obj.version;\n\t},\n\tsetTalkingDefault(state, command: ISetTextBoxTalkingDefaultMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.talkingDefault = command.talkingDefault;\n\t\t++obj.version;\n\t},\n\tsetTalkingOther(state, command: ISetTextBoxTalkingOtherMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.talkingOther = command.talkingOther;\n\t\tobj.talkingDefault = 'Other';\n\t\t++obj.version;\n\t},\n\tsetStyle(state, command: ISetTextBoxStyleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.style = command.style;\n\t\t++obj.version;\n\t},\n\tsetControlsVisible(state, command: ISetTextBoxControlsVisibleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.controls = command.controls;\n\t\t++obj.version;\n\t},\n\tsetControlsColor(state, command: ISetTextBoxCustomControlsColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customControlsColor = command.customControlsColor;\n\t\t++obj.version;\n\t},\n\tsetDeriveCustomColors(state, command: ISetTextBoxDeriveCustomColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.deriveCustomColors = command.deriveCustomColors;\n\t\t++obj.version;\n\t},\n\tsetNameboxColor(state, command: ISetTextBoxNameboxColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxColor = command.customNameboxColor;\n\t\t++obj.version;\n\t},\n\tsetNameboxStroke(state, command: ISetTextBoxNameboxStrokeMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxStroke = command.customNameboxStroke;\n\t\t++obj.version;\n\t},\n\tsetNameboxWidth(state, command: ISetTextBoxNameboxWidthMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxWidth = command.customNameboxWidth;\n\t\t++obj.version;\n\t},\n\tsetSkipable(state, command: ISetTextBoxControlsSkipMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.skip = command.skip;\n\t\t++obj.version;\n\t},\n\tsetContinueArrow(state, command: ISetTextBoxControlsContinueMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.continue = command.continue;\n\t\t++obj.version;\n\t},\n\tsetCustomColor(state, command: ISetTextBoxCustomColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customColor = command.color;\n\t\t++obj.version;\n\t},\n\tsetAutoQuoting(state, command: ISetTextBoxAutoQuotingMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.autoQuoting = command.autoQuoting;\n\t\t++obj.version;\n\t},\n\tsetResetBounds(state, command: ISetResetBoundsMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.resetBounds = command.resetBounds;\n\t\tobj.x = command.resetBounds.x;\n\t\tobj.y = command.resetBounds.y;\n\t\tobj.height = command.resetBounds.height;\n\t\tobj.width = command.resetBounds.width;\n\t\t++obj.version;\n\t},\n};\n\nlet lastTextBoxId = 0;\n\nexport const textBoxActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateTextBox({ commit, rootState }, command: ICreateTextBoxAction): string {\n\t\tconst id = 'textBox_' + ++lastTextBoxId;\n\t\tconst resetBounds = command.resetBounds || {\n\t\t\tx: 640,\n\t\t\ty: NameboxY,\n\t\t\twidth: TextBoxWidth,\n\t\t\theight: TextBoxHeight,\n\t\t};\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\t...resetBounds,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'textBox',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tcontinue: true,\n\t\t\t\tcontrols: true,\n\t\t\t\tskip: true,\n\t\t\t\tautoQuoting: true,\n\t\t\t\tstyle: 'normal',\n\t\t\t\tcustomColor: '#ffa8d2',\n\t\t\t\tderiveCustomColors: true,\n\t\t\t\tcustomControlsColor: '#552222',\n\t\t\t\tcustomNameboxColor: '#ffeef6',\n\t\t\t\tcustomNameboxWidth: 168,\n\t\t\t\tcustomNameboxStroke: '#bb5599',\n\t\t\t\ttalkingDefault: 'No-one',\n\t\t\t\ttalkingOther: '',\n\t\t\t\ttext: '',\n\t\t\t\tresetBounds,\n\t\t\t} as ITextBox,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\n\tsetStyle({ commit }, command: ISetTextBoxStyleAction) {\n\t\tcommit('setStyle', {\n\t\t\tid: command.id,\n\t\t\tstyle: command.style,\n\t\t} as ISetTextBoxStyleMutation);\n\t},\n\n\tresetTextboxBounds(\n\t\t{ commit, state, dispatch },\n\t\tcommand: IResetTextboxBounds\n\t) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tcommit('setPosition', {\n\t\t\tid: command.id,\n\t\t\tx: obj.resetBounds.x,\n\t\t\ty: obj.resetBounds.y,\n\t\t} as ISetObjectPositionMutation);\n\t\tcommit('setSize', {\n\t\t\tid: command.id,\n\t\t\theight: obj.resetBounds.height,\n\t\t\twidth: obj.resetBounds.width,\n\t\t} as ISetSpriteSizeMutation);\n\t},\n\n\tasync splitTextbox({ commit, state, dispatch }, command: ISplitTextbox) {\n\t\tconst obj = state.objects[command.id];\n\t\tconst newWidth = (obj.width - splitTextboxSpacing) / 2;\n\t\tcommit('setResetBounds', {\n\t\t\tid: command.id,\n\t\t\tresetBounds: {\n\t\t\t\tx: obj.x - newWidth / 2,\n\t\t\t\ty: obj.y,\n\t\t\t\twidth: newWidth,\n\t\t\t\theight: obj.height,\n\t\t\t},\n\t\t} as ISetResetBoundsMutation);\n\t\tcommit('setStyle', {\n\t\t\tid: command.id,\n\t\t\tstyle: 'custom',\n\t\t} as ISetTextBoxStyleMutation);\n\t\tconst id = (await dispatch('createTextBox', {\n\t\t\tresetBounds: {\n\t\t\t\tx: obj.x + newWidth + splitTextboxSpacing / 2,\n\t\t\t\ty: obj.y,\n\t\t\t\twidth: newWidth,\n\t\t\t\theight: obj.height,\n\t\t\t},\n\t\t} as ICreateTextBoxAction)) as string;\n\t\tcommit('setStyle', {\n\t\t\tid,\n\t\t\tstyle: 'custom',\n\t\t} as ISetTextBoxStyleMutation);\n\t\tif (obj.flip) {\n\t\t\tcommit('setFlip', {\n\t\t\t\tid,\n\t\t\t\tflip: obj.flip,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t}\n\t},\n};\n\nexport interface ISetTextBoxTextMutation extends ICommand {\n\treadonly text: string;\n}\n\nexport interface ISetTextBoxTalkingDefaultMutation extends ICommand {\n\treadonly talkingDefault: ITextBox['talkingDefault'];\n}\n\nexport interface ISetTextBoxTalkingOtherMutation extends ICommand {\n\treadonly talkingOther: string;\n}\n\nexport interface ISetTextBoxStyleMutation extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n\nexport interface ISetTextBoxControlsVisibleMutation extends ICommand {\n\treadonly controls: boolean;\n}\n\nexport interface ISetTextBoxDeriveCustomColorMutation extends ICommand {\n\treadonly deriveCustomColors: boolean;\n}\n\nexport interface ISetTextBoxCustomControlsColorMutation extends ICommand {\n\treadonly customControlsColor: string;\n}\n\nexport interface ISetTextBoxNameboxColorMutation extends ICommand {\n\treadonly customNameboxColor: string;\n}\n\nexport interface ISetTextBoxNameboxStrokeMutation extends ICommand {\n\treadonly customNameboxStroke: string;\n}\n\nexport interface ISetTextBoxNameboxWidthMutation extends ICommand {\n\treadonly customNameboxWidth: number;\n}\n\nexport interface ISetTextBoxAutoQuotingMutation extends ICommand {\n\treadonly autoQuoting: boolean;\n}\n\nexport interface ISetResetBoundsMutation extends ICommand {\n\treadonly resetBounds: ITextBox['resetBounds'];\n}\n\nexport interface ISetTextBoxControlsSkipMutation extends ICommand {\n\treadonly skip: boolean;\n}\n\nexport interface ISetTextBoxControlsContinueMutation extends ICommand {\n\treadonly continue: boolean;\n}\n\nexport interface ISetTextBoxCustomColorMutation extends ICommand {\n\treadonly color: string;\n}\n\nexport interface ICreateTextBoxAction extends ICommand {\n\treadonly resetBounds?: ITextBox['resetBounds'];\n}\n\nexport interface ISetTextBoxStyleAction extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n\nexport interface ISplitTextbox extends ICommand {}\n\nexport interface IResetTextboxBounds extends ICommand {}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { IRootState } from '..';\nimport {\n\tChoiceButtonColor,\n\tChoiceY,\n\tChoiceButtonWidth,\n} from '@/constants/choices';\nimport { screenHeight, screenWidth } from '@/constants/base';\n\nexport interface INotification extends IObject {\n\ttype: 'notification';\n\tcustomColor: string;\n\ttext: string;\n\tbackdrop: boolean;\n}\n\nexport const notificationMutations: MutationTree<IObjectsState> = {\n\tsetNotificationColor(state, command: ISetChoiceColorMutation) {\n\t\tconst obj = state.objects[command.id] as INotification;\n\t\tobj.customColor = command.customColor;\n\t\t++obj.version;\n\t},\n\tsetNotificationText(state, { id, text }: ISetNotificationTextMutation) {\n\t\tconst obj = state.objects[id] as INotification;\n\t\tobj.text = text;\n\t\t++obj.version;\n\t},\n\tsetNotificationBackdrop(\n\t\tstate,\n\t\t{ id, backdrop }: ISetNotificationBackdropMutation\n\t) {\n\t\tconst obj = state.objects[id] as INotification;\n\t\tobj.backdrop = backdrop;\n\t\t++obj.version;\n\t},\n};\n\nlet lastNotificationId = 0;\n\nexport const notificationActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateNotification(\n\t\t{ commit, rootState },\n\t\tcommand: ICreateNotificationAction\n\t): string {\n\t\tconst id = 'choice_' + ++lastNotificationId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tx: screenWidth / 2,\n\t\t\t\ty: screenHeight / 2,\n\t\t\t\twidth: ChoiceButtonWidth,\n\t\t\t\theight: 0,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'notification',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tcustomColor: ChoiceButtonColor,\n\t\t\t\ttext: 'Click here to edit notification',\n\t\t\t\tbackdrop: true,\n\t\t\t} as INotification,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n};\n\nexport interface ISetNotificationTextMutation extends ICommand {\n\treadonly text: INotification['text'];\n}\n\nexport interface ISetNotificationBackdropMutation extends ICommand {\n\treadonly backdrop: INotification['backdrop'];\n}\n\nexport interface ISetChoiceColorMutation extends ICommand {\n\treadonly customColor: INotification['customColor'];\n}\n\nexport interface ICreateNotificationAction extends ICommand {}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { IRootState } from '..';\nimport {\n\tdefaultPoemBackground,\n\tdefaultX,\n\tdefaultY,\n\tdefaultPoemWidth,\n\tdefaultPoemHeight,\n\tconsoleHeight,\n\tconsoleWidth,\n\tdefaultPoemStyle,\n\tdefaultConsoleBackground,\n\tdefaultConsoleStyle,\n} from '@/constants/poem';\n\nexport interface IPoem extends IObject {\n\ttype: 'poem';\n\tsubType: 'poem' | 'console';\n\tbackground: number;\n\tfont: number;\n\ttext: string;\n}\n\nexport const poemMutations: MutationTree<IObjectsState> = {\n\tsetPoemBackground(state, { id, background }: ISetBackgroundMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.background = background;\n\t\t++obj.version;\n\t},\n\tsetPoemFont(state, { id, font }: ISetFontMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.font = font;\n\t\t++obj.version;\n\t},\n\tsetPoemText(state, { id, text }: ISetTextMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.text = text;\n\t\t++obj.version;\n\t},\n};\n\nlet lastPoemId = 0;\n\nexport const poemActions: ActionTree<IObjectsState, IRootState> = {\n\tcreatePoem({ commit, rootState }, command: ICreatePoemAction): string {\n\t\tconst id = 'poem_' + ++lastPoemId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tsubType: 'poem',\n\t\t\t\tx: defaultX,\n\t\t\t\ty: defaultY,\n\t\t\t\twidth: defaultPoemWidth,\n\t\t\t\theight: defaultPoemHeight,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'poem',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: defaultPoemWidth / defaultPoemHeight,\n\t\t\t\tbackground: defaultPoemBackground,\n\t\t\t\tfont: defaultPoemStyle,\n\t\t\t\ttext: 'New poem\\n\\nClick here to edit poem',\n\t\t\t} as IPoem,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\tcreateConsole({ commit, rootState }, command: ICreatePoemAction): string {\n\t\tconst id = 'poem_' + ++lastPoemId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tsubType: 'console',\n\t\t\t\tx: consoleWidth / 2,\n\t\t\t\ty: consoleHeight / 2,\n\t\t\t\twidth: consoleWidth,\n\t\t\t\theight: consoleHeight,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'poem',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: consoleWidth / consoleHeight,\n\t\t\t\tbackground: defaultConsoleBackground,\n\t\t\t\tfont: defaultConsoleStyle,\n\t\t\t\ttext: '> _\\n  \\n  Console command\\n  Click here to edit',\n\t\t\t} as IPoem,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n};\n\nexport interface ISetBackgroundMutation extends ICommand {\n\treadonly background: IPoem['background'];\n}\n\nexport interface ISetFontMutation extends ICommand {\n\treadonly font: IPoem['font'];\n}\n\nexport interface ISetTextMutation extends ICommand {\n\treadonly text: IPoem['text'];\n}\n\nexport interface ICreatePoemAction extends ICommand {}\n","import { Module } from 'vuex';\nimport { ICommand } from '@/eventbus/command';\nimport { spriteMutations, spriteActions } from './objectTypes/sprite';\nimport {\n\tcharacterActions,\n\tcharacterMutations,\n\tfixContentPackRemovalFromCharacter,\n} from './objectTypes/characters';\nimport { choiceMutations, choiceActions } from './objectTypes/choices';\nimport { textBoxActions, textBoxMutations } from './objectTypes/textbox';\nimport {\n\tnotificationMutations,\n\tnotificationActions,\n} from './objectTypes/notification';\nimport { poemMutations, poemActions } from './objectTypes/poem';\nimport { IRootState } from '.';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from './content';\nimport Vue from 'vue';\n\nexport interface IPanel {\n\tid: string;\n\torder: string[];\n\tonTopOrder: string[];\n}\n\nexport interface IObjectsState {\n\tobjects: { [id: string]: IObject };\n\tpanels: { [id: string]: IPanel };\n}\n\nexport interface IObject {\n\ttype: ObjectTypes;\n\tpanelId: string;\n\tid: string;\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tpreserveRatio: boolean;\n\tratio: number;\n\topacity: number;\n\tversion: number;\n\tflip: boolean;\n\tonTop: boolean;\n}\n\nexport type ObjectTypes =\n\t| 'sprite'\n\t| 'character'\n\t| 'textBox'\n\t| 'choice'\n\t| 'notification'\n\t| 'poem';\n\nlet lastCopyId = 0;\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tobjects: {},\n\t\tpanels: {},\n\t},\n\tmutations: {\n\t\tcreate(state, { object }: ICreateObjectMutation) {\n\t\t\tif (!state.panels[object.panelId]) {\n\t\t\t\tVue.set(state.panels, object.panelId, {\n\t\t\t\t\tid: object.panelId,\n\t\t\t\t\tonTopOrder: [],\n\t\t\t\t\torder: [],\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst panel = state.panels[object.panelId];\n\t\t\tconst collection = object.onTop ? panel.onTopOrder : panel.order;\n\t\t\tVue.set(state.objects, object.id, object);\n\t\t\tcollection.push(object.id);\n\t\t},\n\t\tremoveFromList(state, command: IRemoveFromListMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = command.onTop ? panel.onTopOrder : panel.order;\n\t\t\tconst idx = collection.indexOf(command.id);\n\t\t\tcollection.splice(idx, 1);\n\t\t},\n\t\taddToList(state, command: IAddToListMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = command.onTop ? panel.onTopOrder : panel.order;\n\t\t\tcollection.splice(command.position, 0, command.id);\n\t\t},\n\t\tsetOnTop(state, command: ISetOnTopMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.onTop = command.onTop;\n\t\t},\n\t\tsetPosition(state, command: ISetObjectPositionMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.x = command.x;\n\t\t\tobj.y = command.y;\n\t\t},\n\t\tsetFlip(state, command: ISetObjectFlipMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.flip = command.flip;\n\t\t},\n\t\tsetOpacity(state, command: ISetObjectOpacityMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.opacity = command.opacity;\n\t\t},\n\t\tsetSize(state, command: ISetSpriteSizeMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.width = command.width;\n\t\t\tobj.height = command.height;\n\t\t},\n\t\tsetRatio(state, command: ISetSpriteRatioMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.preserveRatio = command.preserveRatio;\n\t\t\tobj.ratio = command.ratio;\n\t\t},\n\t\tremoveObject(state, command: IRemoveObjectMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tdelete state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tif (panel.onTopOrder.length === 0 && panel.order.length === 0) {\n\t\t\t\tdelete state.panels[obj.panelId];\n\t\t\t}\n\t\t},\n\t\t...spriteMutations,\n\t\t...characterMutations,\n\t\t...textBoxMutations,\n\t\t...choiceMutations,\n\t\t...notificationMutations,\n\t\t...poemMutations,\n\t},\n\tactions: {\n\t\tremoveObject({ state, commit, rootState }, command: IRemoveObjectAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (rootState.ui.selection === command.id) {\n\t\t\t\tcommit('ui/setSelection', null, { root: true });\n\t\t\t}\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('removeObject', {\n\t\t\t\tid: command.id,\n\t\t\t} as IRemoveObjectMutation);\n\t\t},\n\t\tsetPosition({ state, commit, dispatch }, command: ISetPositionAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (obj.type === 'character') {\n\t\t\t\tdispatch('setCharacterPosition', command as ISetPositionAction);\n\t\t\t} else {\n\t\t\t\tcommit('setPosition', command as ISetObjectPositionMutation);\n\t\t\t}\n\t\t},\n\t\tsetOnTop({ state, commit }, command: IObjectSetOnTopAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tif (obj.onTop === command.onTop) return;\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: (command.onTop ? panel.onTopOrder : panel.order).length,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('setOnTop', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as ISetOnTopMutation);\n\t\t},\n\t\tshiftLayer({ state, commit }, command: IObjectShiftLayerAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = obj.onTop ? panel.onTopOrder : panel.order;\n\t\t\tconst position = collection.indexOf(obj.id);\n\n\t\t\tlet newPosition = position + command.delta;\n\t\t\tif (newPosition < 0) {\n\t\t\t\tnewPosition = 0;\n\t\t\t}\n\t\t\tif (newPosition > collection.length) {\n\t\t\t\tnewPosition = collection.length;\n\t\t\t}\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: newPosition,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IAddToListMutation);\n\t\t},\n\t\tsetPreserveRatio({ commit, state }, command: ISetRatioAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst ratio = command.preserveRatio ? obj.width / obj.height : 0;\n\t\t\tcommit('setRatio', {\n\t\t\t\tid: command.id,\n\t\t\t\tpreserveRatio: command.preserveRatio,\n\t\t\t\tratio,\n\t\t\t} as ISetSpriteRatioMutation);\n\t\t},\n\t\tsetWidth({ commit, state }, command: ISetWidthAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst height = !obj.preserveRatio\n\t\t\t\t? obj.height\n\t\t\t\t: command.width / obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight,\n\t\t\t\twidth: command.width,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\tsetHeight({ commit, state }, command: ISetHeightAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst width = !obj.preserveRatio ? obj.width : command.height * obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight: command.height,\n\t\t\t\twidth,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\tfixContentPackRemoval(context, oldContent: ContentPack<IAsset>) {\n\t\t\tObject.values(context.state.objects).map((obj) => {\n\t\t\t\tswitch (obj.type) {\n\t\t\t\t\tcase 'character':\n\t\t\t\t\t\tfixContentPackRemovalFromCharacter(context, obj.id, oldContent);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'sprite':\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'textBox':\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcopyObjects(\n\t\t\t{ commit, state },\n\t\t\t{ sourcePanelId, targetPanelId }: ICopyObjectsAction\n\t\t) {\n\t\t\tconst sourceOrders = state.panels[sourcePanelId];\n\t\t\tif (!sourceOrders) return;\n\t\t\tfor (const id of [...sourceOrders.onTopOrder, ...sourceOrders.order]) {\n\t\t\t\tconst oldObject = state.objects[id];\n\t\t\t\tcommit('create', {\n\t\t\t\t\tobject: {\n\t\t\t\t\t\t...JSON.parse(JSON.stringify(oldObject)),\n\t\t\t\t\t\tid: `copy_${oldObject.id}_${++lastCopyId}`,\n\t\t\t\t\t\tpanelId: targetPanelId,\n\t\t\t\t\t},\n\t\t\t\t} as ICreateObjectMutation);\n\t\t\t}\n\t\t},\n\t\tdeleteAllOfPanel({ state, dispatch }, { panelId }: IDeleteAllOfPanel) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tfor (const id of [...panel.onTopOrder, ...panel.order]) {\n\t\t\t\tdispatch('removeObject', { id } as IRemoveObjectAction);\n\t\t\t}\n\t\t},\n\t\t...spriteActions,\n\t\t...characterActions,\n\t\t...textBoxActions,\n\t\t...choiceActions,\n\t\t...notificationActions,\n\t\t...poemActions,\n\t},\n} as Module<IObjectsState, IRootState>;\n\nexport interface ICreateObjectMutation {\n\treadonly object: IObject;\n}\n\nexport interface IDeleteAllOfPanel {\n\treadonly panelId: string;\n}\n\nexport interface IObjectMutation {\n\treadonly id: string;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetObjectPositionMutation extends IObjectMutation {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface ISetOnTopMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetObjectFlipMutation extends IObjectMutation {\n\treadonly flip: boolean;\n}\n\nexport interface ISetObjectOpacityMutation extends IObjectMutation {\n\treadonly opacity: number;\n}\n\nexport interface IRemoveFromListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface IAddToListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n\treadonly position: number;\n}\n\nexport interface IObjectShiftLayerAction extends ICommand {\n\treadonly delta: number;\n}\n\nexport interface IObjectSetOnTopAction extends ICommand {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface IRemoveObjectMutation extends ICommand {}\nexport interface IRemoveObjectAction extends ICommand {}\n\nexport interface ISetPositionAction extends ICommand {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface IObjectContentPackRemovalAction extends ICommand {\n\treadonly oldPack: ContentPack<IAsset>;\n}\n\nexport interface ICopyObjectsAction {\n\treadonly sourcePanelId: string;\n\treadonly targetPanelId: string;\n}\n","import { Module } from 'vuex';\nimport { IRootState } from '.';\n\nexport interface IUiState {\n\tvertical: boolean;\n\tnsfw: boolean;\n\tselection: string | null;\n\tlqRendering: boolean;\n\tlastDownload: string | null;\n}\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tvertical: false,\n\t\tlqRendering: true,\n\t\tnsfw: false,\n\t\tselection: null,\n\t\tlastDownload: null,\n\t},\n\tmutations: {\n\t\tsetVertical(state, vertical: boolean) {\n\t\t\tstate.vertical = vertical;\n\t\t},\n\t\tsetNsfw(state, nsfw: boolean) {\n\t\t\tstate.nsfw = nsfw;\n\t\t},\n\t\tsetLqRendering(state, lqRendering: boolean) {\n\t\t\tstate.lqRendering = lqRendering;\n\t\t},\n\t\tsetSelection(state, selection: string | null) {\n\t\t\tstate.selection = selection;\n\t\t},\n\t\tsetLastDownload(state, download: string) {\n\t\t\tstate.lastDownload = download;\n\t\t},\n\t},\n} as Module<IUiState, IRootState>;\n","import {\r\n\tContentPack,\r\n\tBackground,\r\n\tCharacter,\r\n\tHeadCollections,\r\n\tPose,\r\n\tStyle,\r\n\tStyleClasses,\r\n\tStyleComponent,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport { IAsset } from '.';\r\n\r\nexport function mergeContentPacks(\r\n\tx: ContentPack<IAsset>,\r\n\ty: ContentPack<IAsset>\r\n): ContentPack<IAsset> {\r\n\treturn {\r\n\t\tbackgrounds: mergeBackgrounds(x.backgrounds, y.backgrounds),\r\n\t\tcharacters: mergeCharacters<IAsset>(x.characters, y.characters),\r\n\t\tdependencies: mergeArrayUnique(x.dependencies, y.dependencies),\r\n\t\tfonts: mergeIdArrays(\r\n\t\t\tx.fonts,\r\n\t\t\ty.fonts,\r\n\t\t\t(obj) => obj.id,\r\n\t\t\t(xObj, yObj) => ({\r\n\t\t\t\t...xObj,\r\n\t\t\t\tfiles: mergeArrayUnique(xObj.files, yObj.files),\r\n\t\t\t})\r\n\t\t),\r\n\t\tpoemStyles: mergeIdArrays(\r\n\t\t\tx.poemStyles,\r\n\t\t\ty.poemStyles,\r\n\t\t\t(obj) => obj.label,\r\n\t\t\t() => {\r\n\t\t\t\tthrow new Error();\r\n\t\t\t}\r\n\t\t),\r\n\t\tpoemBackgrounds: [...x.poemBackgrounds, ...y.poemBackgrounds],\r\n\t\tsprites: mergeIdArrays(\r\n\t\t\tx.sprites,\r\n\t\t\ty.sprites,\r\n\t\t\t(obj) => obj.id,\r\n\t\t\t(xObj, yObj) => ({\r\n\t\t\t\tid: xObj.id,\r\n\t\t\t\tlabel: xObj.label,\r\n\t\t\t\tvariants: [...xObj.variants, ...yObj.variants],\r\n\t\t\t})\r\n\t\t),\r\n\t\tcolors: mergeIdArrays(\r\n\t\t\tx.colors,\r\n\t\t\ty.colors,\r\n\t\t\t(obj) => obj.color,\r\n\t\t\t(xObj) => xObj\r\n\t\t),\r\n\t};\r\n}\r\n\r\nfunction mergeBackgrounds<A>(\r\n\tx: Array<Background<A>>,\r\n\ty: Array<Background<A>>\r\n): Array<Background<A>> {\r\n\treturn mergeIdArrays(x, y, (obj) => obj.id, mergeBackground);\r\n}\r\n\r\nfunction mergeBackground<A>(x: Background<A>, y: Background<A>): Background<A> {\r\n\treturn {\r\n\t\tid: x.id,\r\n\t\tlabel: x.label,\r\n\t\tvariants: [...x.variants, ...y.variants],\r\n\t};\r\n}\r\n\r\nfunction mergeCharacters<A>(\r\n\tx: Array<Character<A>>,\r\n\ty: Array<Character<A>>\r\n): Array<Character<A>> {\r\n\treturn mergeIdArrays(x, y, (obj) => obj.id, mergeCharacter);\r\n}\r\n\r\nfunction mergeCharacter<A>(x: Character<A>, y: Character<A>): Character<A> {\r\n\treturn {\r\n\t\tchibi: x.chibi,\r\n\t\tid: x.id,\r\n\t\tlabel: x.label,\r\n\t\theads: mergeHeadCollections(x.heads, y.heads),\r\n\t\tstyleGroups: mergeIdArrays(\r\n\t\t\tx.styleGroups,\r\n\t\t\ty.styleGroups,\r\n\t\t\t(obj) => obj.id,\r\n\t\t\t(xStyleGroup, yStyleGroup) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: xStyleGroup.id,\r\n\t\t\t\t\tstyleComponents: mergeIdArrays(\r\n\t\t\t\t\t\txStyleGroup.styleComponents,\r\n\t\t\t\t\t\tyStyleGroup.styleComponents,\r\n\t\t\t\t\t\t(obj) => obj.id,\r\n\t\t\t\t\t\t(xClasses, yClasses) => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tid: xClasses.id,\r\n\t\t\t\t\t\t\t\tlabel: xClasses.label,\r\n\t\t\t\t\t\t\t\tvariants: mergeStyleClasses(\r\n\t\t\t\t\t\t\t\t\txClasses.variants,\r\n\t\t\t\t\t\t\t\t\tyClasses.variants\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t),\r\n\t\t\t\t\tstyles: mergeIdArrays(\r\n\t\t\t\t\t\txStyleGroup.styles,\r\n\t\t\t\t\t\tyStyleGroup.styles,\r\n\t\t\t\t\t\t(obj) => JSON.stringify(obj.components),\r\n\t\t\t\t\t\t(xStyle, yStyle) => ({\r\n\t\t\t\t\t\t\tcomponents: xStyle.components,\r\n\t\t\t\t\t\t\tposes: mergeIdArrays(\r\n\t\t\t\t\t\t\t\txStyle.poses,\r\n\t\t\t\t\t\t\t\tyStyle.poses,\r\n\t\t\t\t\t\t\t\t(obj) => obj.id,\r\n\t\t\t\t\t\t\t\tmergePose\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t),\r\n\t};\r\n}\r\n\r\nfunction mergeStyleClasses<A>(\r\n\tx: StyleClasses<A>,\r\n\ty: StyleClasses<A>\r\n): StyleClasses<A> {\r\n\tconst ret: StyleClasses<A> = { ...x };\r\n\r\n\tfor (const classKey in y) {\r\n\t\tif (!y.hasOwnProperty(classKey)) continue;\r\n\t\tif (ret.hasOwnProperty(classKey)) continue;\r\n\t\tret[classKey] = y[classKey];\r\n\t}\r\n\r\n\treturn ret;\r\n}\r\n\r\nfunction mergePose<A>(x: Pose<A>, y: Pose<A>): Pose<A> {\r\n\tconst positions: Pose<A>['positions'] = { ...x.positions };\r\n\r\n\tfor (const key in y.positions) {\r\n\t\tif (positions[key]) {\r\n\t\t\tpositions[key] = [...positions[key], ...y.positions[key]] as A[][];\r\n\t\t} else {\r\n\t\t\tpositions[key] = y.positions[key];\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tid: x.id,\r\n\t\tcompatibleHeads: mergeArrayUnique(x.compatibleHeads, y.compatibleHeads),\r\n\t\tpreviewOffset: x.previewOffset,\r\n\t\tpreviewSize: x.previewSize,\r\n\t\tscale: x.scale,\r\n\t\tsize: x.size,\r\n\t\trenderCommands: x.renderCommands,\r\n\t\tpositions,\r\n\t};\r\n}\r\n\r\nfunction mergeHeadCollections<A>(\r\n\tx: HeadCollections<A>,\r\n\ty: HeadCollections<A>\r\n): HeadCollections<A> {\r\n\tconst ret = { ...x };\r\n\r\n\tfor (const headGroupKey in y) {\r\n\t\tif (!y.hasOwnProperty(headGroupKey)) continue;\r\n\t\tconst headGroup = y[headGroupKey];\r\n\t\tif (ret[headGroupKey]) {\r\n\t\t\tconst oldHeadGroup = ret[headGroupKey];\r\n\t\t\tret[headGroupKey] = {\r\n\t\t\t\tpreviewOffset: oldHeadGroup.previewOffset,\r\n\t\t\t\tpreviewSize: oldHeadGroup.previewSize,\r\n\t\t\t\tvariants: [...oldHeadGroup.variants, ...headGroup.variants],\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tret[headGroupKey] = headGroup;\r\n\t\t}\r\n\t}\r\n\r\n\treturn ret;\r\n}\r\n\r\nfunction mergeArrayUnique<A>(x: A[], y: A[]): A[] {\r\n\tconst ret = [...x];\r\n\tfor (const yObj of y) {\r\n\t\tif (!ret.includes(yObj)) {\r\n\t\t\tret.push(yObj);\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction mergeIdArrays<A, B>(\r\n\tx: A[],\r\n\ty: A[],\r\n\tgetId: (obj: A) => B,\r\n\tmerge: (x: A, y: A) => A\r\n): A[] {\r\n\tconst ret = [...x];\r\n\tconst definedIds = new Map<B, number>(\r\n\t\tx.map((xObj, idx) => [getId(xObj), idx])\r\n\t);\r\n\r\n\tfor (const yObj of y) {\r\n\t\tconst yId = getId(yObj);\r\n\t\tif (definedIds.has(yId)) {\r\n\t\t\tconst existingIdx = definedIds.get(yId)!;\r\n\t\t\tconst existing = ret[existingIdx];\r\n\t\t\tret.splice(existingIdx, 1, merge(existing, yObj));\r\n\t\t} else {\r\n\t\t\tdefinedIds.set(yId, ret.length);\r\n\t\t\tret.push(yObj);\r\n\t\t}\r\n\t}\r\n\r\n\treturn ret;\r\n}\r\n","import { Module } from 'vuex';\r\nimport {\r\n\tContentPack,\r\n\tCharacter,\r\n\tBackground,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\r\nimport {\r\n\tassetWalker,\r\n\tnormalizePath,\r\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/util';\r\nimport { normalizeContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/parser';\r\nimport { convert as convertV1 } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/convertV1';\r\n// tslint:disable-next-line: max-line-length\r\nimport { normalizeCharacter as normalizeCharacterV1 } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v1/parser';\r\nimport { isWebPSupported } from '@/asset-manager';\r\nimport { mergeContentPacks } from './merge';\r\nimport { IRootState } from '..';\r\n\r\nexport type PackState = 'Added' | 'Installed';\r\n\r\nexport type ContentPackWithState<T> = ContentPack<T> & { state: PackState };\r\n\r\nexport interface IContentState {\r\n\tcontentPacks: Array<ContentPackWithState<IAsset>>;\r\n\tcurrent: ContentPack<IAsset>;\r\n}\r\n\r\nexport interface IAsset {\r\n\thq: string;\r\n\tlq: string;\r\n\tsourcePack: string;\r\n}\r\n\r\nfunction baseDir(url: string): string {\r\n\treturn (\r\n\t\turl\r\n\t\t\t.split('/')\r\n\t\t\t.slice(0, -1)\r\n\t\t\t.join('/') + '/'\r\n\t);\r\n}\r\n\r\n// These types are assumed to always be supported\r\nconst baseTypes = new Set(['png', 'gif', 'bmp', 'svg']);\r\n\r\nexport type BackgroundLookup = Map<\r\n\tBackground<IAsset>['id'],\r\n\tBackground<IAsset>\r\n>;\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate: {\r\n\t\tcontentPacks: [],\r\n\t\tcurrent: {\r\n\t\t\tdependencies: [],\r\n\t\t\tbackgrounds: [],\r\n\t\t\tcharacters: [],\r\n\t\t\tfonts: [],\r\n\t\t\tpoemStyles: [],\r\n\t\t\tpoemBackgrounds: [],\r\n\t\t\tsprites: [],\r\n\t\t\tcolors: [],\r\n\t\t},\r\n\t},\r\n\tmutations: {\r\n\t\tsetContentPacks(\r\n\t\t\tstate: IContentState,\r\n\t\t\tpacks: Array<ContentPackWithState<IAsset>>\r\n\t\t) {\r\n\t\t\tstate.contentPacks = packs;\r\n\t\t},\r\n\t\tsetCurrentContent(state: IContentState, content: ContentPack<IAsset>) {\r\n\t\t\tstate.current = content;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync contentPack(\r\n\t\t\t{ commit, state },\r\n\t\t\tcontentPack: ContentPackWithState<string>\r\n\t\t) {\r\n\t\t\tconst convertedPack = (await convertContentPack(\r\n\t\t\t\tcontentPack\r\n\t\t\t)) as ContentPackWithState<IAsset>;\r\n\t\t\tconvertedPack.state = contentPack.state;\r\n\t\t\tcommit('setContentPacks', [...state.contentPacks, convertedPack]);\r\n\t\t\tcommit(\r\n\t\t\t\t'setCurrentContent',\r\n\t\t\t\tmergeContentPacks(state.current, convertedPack)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tasync removeContentPacks({ commit, state }, packIds: Set<string>) {\r\n\t\t\tconst newContentPacks = state.contentPacks.filter(\r\n\t\t\t\tpack => !packIds.has(pack.packId!)\r\n\t\t\t);\r\n\t\t\tcommit('setContentPacks', newContentPacks);\r\n\t\t\tcommit(\r\n\t\t\t\t'setCurrentContent',\r\n\t\t\t\t(newContentPacks as Array<ContentPack<IAsset>>).reduce((acc, value) =>\r\n\t\t\t\t\tmergeContentPacks(acc, value)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tasync replaceContentPack(\r\n\t\t\t{ commit, state },\r\n\t\t\taction: ReplaceContentPackAction\r\n\t\t) {\r\n\t\t\tconst convertedPack = action.processed\r\n\t\t\t\t? action.contentPack\r\n\t\t\t\t: await convertContentPack(action.contentPack);\r\n\t\t\tconst packs = state.contentPacks;\r\n\t\t\tconst packIdx = packs.findIndex(\r\n\t\t\t\tpack => pack.packId === action.contentPack.packId\r\n\t\t\t);\r\n\t\t\tif (packIdx === -1) {\r\n\t\t\t\tpacks.push(convertedPack);\r\n\t\t\t} else {\r\n\t\t\t\tpacks.splice(packIdx, 1, convertedPack);\r\n\t\t\t}\r\n\t\t\tcommit('setContentPacks', packs);\r\n\t\t\tcommit(\r\n\t\t\t\t'setCurrentContent',\r\n\t\t\t\t(packs as Array<ContentPack<IAsset>>).reduce((acc, value) =>\r\n\t\t\t\t\tmergeContentPacks(acc, value)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tasync loadContentPacks({ dispatch }, urls: string | string[]) {\r\n\t\t\tif (typeof urls === 'string') {\r\n\t\t\t\turls = [urls];\r\n\t\t\t}\r\n\t\t\tconst contentPacks = await Promise.all(\r\n\t\t\t\turls.map(async url => {\r\n\t\t\t\t\tconst response = await fetch(url);\r\n\t\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\t\terror(\r\n\t\t\t\t\t\t\t`Could not load content pack. Server responded with: ${response.statusText}`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet json;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tjson = await response.json();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\terror('Content pack is not valid json!');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet contentPack: ContentPackWithState<string>;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst paths = {\r\n\t\t\t\t\t\t\t'./': baseDir(url),\r\n\t\t\t\t\t\t\t'/': baseDir(location.href) + 'assets/',\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (json.version === '2.0') {\r\n\t\t\t\t\t\t\tcontentPack = normalizeContentPack(\r\n\t\t\t\t\t\t\t\tjson,\r\n\t\t\t\t\t\t\t\tpaths\r\n\t\t\t\t\t\t\t) as ContentPackWithState<string>;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontentPack = convertV1(\r\n\t\t\t\t\t\t\t\tnormalizeCharacterV1(json, paths),\r\n\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t) as ContentPackWithState<string>;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\terror('Content pack is not in a valid format!', e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontentPack.state = 'Added';\r\n\t\t\t\t\treturn contentPack;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\tfor (const contentPack of contentPacks) {\r\n\t\t\t\tawait dispatch('contentPack', contentPack);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\tgetCharacters({\r\n\t\t\tcurrent,\r\n\t\t}): Map<Character<IAsset>['id'], Character<IAsset>> {\r\n\t\t\tconst ret = new Map<Character<IAsset>['id'], Character<IAsset>>();\r\n\t\t\tfor (const character of current.characters) {\r\n\t\t\t\tret.set(character.id, character);\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\tgetBackgrounds({ current }): BackgroundLookup {\r\n\t\t\tconst ret = new Map<Background<IAsset>['id'], Background<IAsset>>();\r\n\t\t\tfor (const background of current.backgrounds) {\r\n\t\t\t\tret.set(background.id, background);\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t},\r\n} as Module<IContentState, IRootState>;\r\n\r\nasync function convertContentPack(\r\n\tpack: ContentPackWithState<string>\r\n): Promise<ContentPackWithState<IAsset>> {\r\n\tconst types: ReadonlySet<string> = new Set(\r\n\t\t(await isWebPSupported()) ? ['webp', ...baseTypes] : baseTypes\r\n\t);\r\n\r\n\tconst replacementMap = new Map([\r\n\t\t['ext', '{lq:.lq:}.{format:webp:webp:png:png}'],\r\n\t]);\r\n\r\n\tconst ret = assetWalker(\r\n\t\tpack,\r\n\t\t(path: string, type: 'image' | 'font'): IAsset => {\r\n\t\t\tconst hq = normalizePath(path, replacementMap, types, false);\r\n\t\t\tconst lq = normalizePath(path, replacementMap, types, true);\r\n\r\n\t\t\treturn {\r\n\t\t\t\thq,\r\n\t\t\t\tlq,\r\n\t\t\t\tsourcePack: pack.packId || 'buildIn',\r\n\t\t\t};\r\n\t\t}\r\n\t) as ContentPackWithState<IAsset>;\r\n\tret.state = pack.state;\r\n\treturn ret;\r\n}\r\n\r\nfunction error(msg: string, payload?: any): never {\r\n\tconsole.error(msg, payload);\r\n\tthrow new Error(msg);\r\n}\r\n\r\n// tslint:disable: indent\r\nexport type ReplaceContentPackAction =\r\n\t| {\r\n\t\t\tcontentPack: ContentPackWithState<string>;\r\n\t\t\tprocessed: false;\r\n\t  }\r\n\t| {\r\n\t\t\tcontentPack: ContentPackWithState<IAsset>;\r\n\t\t\tprocessed: true;\r\n\t  };\r\n// tslint:enable: indent\r\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport objects, { IObjectsState } from './objects';\nimport ui, { IUiState } from './ui';\nimport panels, { IPanels } from './panels';\nimport content, { IContentState, IAsset } from './content';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\n\nVue.use(Vuex);\n\nexport interface IRootState {\n\tobjects: IObjectsState;\n\tui: IUiState;\n\tpanels: IPanels;\n\tcontent: IContentState;\n\tunsafe: boolean;\n}\n\nexport default new Vuex.Store<IRootState>({\n\tmodules: {\n\t\tobjects,\n\t\tui,\n\t\tpanels,\n\t\tcontent,\n\t},\n\tstate: {\n\t\tunsafe: false,\n\t} as any,\n\tmutations: {\n\t\tsetUnsafe(state, unsafe: boolean) {},\n\t},\n\tactions: {\n\t\tasync removePacks(\n\t\t\t{ dispatch, commit, state },\n\t\t\t{ packs }: IRemovePacksAction\n\t\t) {\n\t\t\tconst oldState: ContentPack<IAsset> = JSON.parse(\n\t\t\t\tJSON.stringify(state.content.current)\n\t\t\t);\n\n\t\t\tcommit('setUnsafe', true);\n\t\t\tawait dispatch('content/removeContentPacks', packs);\n\t\t\tawait dispatch('panels/fixContentPackRemoval', oldState);\n\t\t\tawait dispatch('objects/fixContentPackRemoval', oldState);\n\t\t\tcommit('setUnsafe', false);\n\t\t},\n\t},\n});\n\nexport interface IRemovePacksAction {\n\tpacks: Set<string>;\n}\n","import { IHistoryOptions } from '@/plugins/vuex-history';\n\nexport default {\n\tmutations: {},\n} as IHistoryOptions;\n","import { IHistoryOptions } from '@/plugins/vuex-history';\nimport SpriteHistoryOptions from './objectTypes/sprite_history_properties';\n\nexport default {\n\tmutations: {\n\t\t'objects/*': {\n\t\t\tcombinable: (oldMut, newMut) =>\n\t\t\t\toldMut.type === newMut.type && oldMut.payload.id === newMut.payload.id,\n\t\t},\n\t\t'objects/create': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t'objects/removeObject': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t...SpriteHistoryOptions.mutations,\n\t},\n} as IHistoryOptions;\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport History from './plugins/vuex-history';\r\nimport App from './App.vue';\r\nimport store from '@/store';\r\n// import './registerServiceWorker';\r\nimport ObjectsHistoryProperties from './store/objects_history_properties';\r\nimport { VueErrorEvent } from '@/eventbus/event-bus';\r\n\r\nVue.config.productionTip = false;\r\n/*\r\nVue.config.errorHandler = async (err, vm, info) => {\r\n\t// handle error\r\n\t// `info` is a Vue-specific error info, e.g. which lifecycle hook\r\n\t// the error was found in. Only available in 2.2.0+\r\n\tconst eventBus = (await import('./eventbus/event-bus')).default;\r\n\teventBus.fire(new VueErrorEvent(err, info));\r\n};*/\r\n\r\nVue.use(Vuex);\r\nVue.use(History, {\r\n\tmutations: {\r\n\t\t...ObjectsHistoryProperties.mutations,\r\n\t},\r\n});\r\n\r\nnew Vue({\r\n\tstore: store as any,\r\n\trender: h => h(App),\r\n}).$mount('#app');\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=style&index=0&id=a8740b80&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=style&index=0&id=a8740b80&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=style&index=0&id=251f5837&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=style&index=0&id=251f5837&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=style&index=0&id=dc12a1fc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleBox.vue?vue&type=style&index=0&id=dc12a1fc&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=5c81f8c8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=5c81f8c8&lang=scss&scoped=true&\""],"sourceRoot":""}