(function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)o=s[d],a[o]&&h.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/Doki-Doki-Dialog-Generator/beta/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"27c8":function(e,t,n){"use strict";var r=n("5f23"),a=n.n(r);a.a},"2e9e":function(e,t,n){"use strict";var r=n("56e3"),a=n.n(r);a.a},4857:function(e,t,n){},"515d":function(e){e.exports={id:"ddlc.natsuki",name:"Natsuki",internalId:"natsuki",folder:"natsuki",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1t","scream","corrupt"],straight_nsfw:{all:["crying"],nsfw:!0},sideways:["2ta","2tb","2tc","2td","2te","2tf","2tg","2th","2ti"],sidewaysCasuals:["2bta","2btb","2btc","2btd","2bte","2btf","2btg","2bth","2bti"]},poses:[{compatibleHeads:["straight","straight_nsfw","sideways"],headInForeground:!0,left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight","straight_nsfw"],headAnchor:[18,22],static:"3"},{compatibleHeads:[],static:"old2/5"},{compatibleHeads:[],nsfw:!0,static:"vomit"},{compatibleHeads:["straight","straight_nsfw","sidewaysCasuals"],headInForeground:!0,left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight","straight_nsfw"],headAnchor:[18,22],static:"3b"},{compatibleHeads:[],nsfw:!0,variant:["ghost1","ghost2","ghost3"]},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],static:"glitch1"}]}},"56e3":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),a=n.n(r);a.a},"5d7c":function(e){e.exports={id:"ddlc.fan.amy1",name:"Amy (classic)",internalId:"classic_amy",folder:"classic_amy",heads:{straight:["aa","ab","ac","ad","ae","af","ag","ah","ai","ba","bb","bc","bd","be","bf","bg","bh","bi","ca","cb","cc","cd","ce","cf","cg","ch","ci","da","db","dc","dd","de","df","dg","dh","di","ea","eb","ec","ed","ee","ef","eg","eh","ei","fa","fb","fc","fd","fe","ff","fg","fh","fi"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r"],headInForeground:!0},{compatibleHeads:["straight"],static:"3"}]}},"5e27":function(e,t,n){},"5f23":function(e,t,n){},"61c9":function(e,t,n){},"640f":function(e,t,n){"use strict";var r=n("b4d7"),a=n.n(r);a.a},"65fe":function(e,t,n){},6785:function(e){e.exports={id:"ddlc.yuri",name:"Yuri",internalId:"yuri",folder:"yuri",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","k-old","l","l-old","m","m-old","n","o","p","q","r","s","t","u","v","w","w-old","y1","y2","y3","y4","y5","y6","y7","hisui"],sideways:["a2","b2","c2","d2","e2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r",{img:"2r_cuts",nsfw:!0}]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["sideways"],static:"3b"},{compatibleHeads:[],folder:"/stab/",variant:["1","2","3","4","5","6-full"],nsfw:!0},{compatibleHeads:[],variant:["0a","0b","eyesfull","glitch1","glitch2","glitch3","glitch4","glitch5"],nsfw:!0},{compatibleHeads:[],variant:["dragon1","dragon2"]}]}},"6b47":function(e){e.exports={id:"ddlc.monika",name:"Monika",internalId:"monika",folder:"monika",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r"],sideways:["a2","b2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],variant:["g1_scaled","g2","g3","g4"]}]}},"75a5":function(e,t,n){},"794c":function(e){e.exports={id:"ddlc.fan.amy2",name:"Amy",internalId:"amy",folder:"amy",heads:{straight:["a","b","c","d","e","f","g","h","i","h","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],straight_broken_glases:["!1","!2","!3","!4","!5"]},poses:[{compatibleHeads:["straight","straight_broken_glases"],left:["1l","2l","3l"],right:["1r","2r"],headInForeground:!0},{compatibleHeads:["straight","straight_broken_glases"],static:"5"},{compatibleHeads:["straight","straight_broken_glases"],static:"6"},{compatibleHeads:["straight"],left:["4l"],right:["1r","2r"]}]}},"7b43":function(e){e.exports={id:"ddlc.fan.mc_chad",name:"MC (Chad)",internalId:"chad",folder:"chad",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","y","z","error","error1","shock"],straight_closed:["u","w","v","x1","x2","x3","x4"],straight_red:{folder:"red",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","y","z","error","error1","shock"]}},poses:[{compatibleHeads:["straight","straight_closed"],left:["1l","2l","4l"],right:["1r","2r"]},{compatibleHeads:["straight","straight_closed"],static:"3"},{compatibleHeads:["straight","straight_closed"],left:["1bl","2bl","4bl"],right:["1br","2br"]},{compatibleHeads:["straight","straight_closed"],static:"3b"},{compatibleHeads:["straight_red","straight_closed"],left:["1l","2l","4l"],right:["1r","2r"]},{compatibleHeads:["straight_red","straight_closed"],static:"3"},{compatibleHeads:["straight_red","straight_closed"],left:["1bl","2bl","4bl"],right:["1br","2br"]},{compatibleHeads:["straight_red","straight_closed"],static:"3b"}]}},"7e4c":function(e,t,n){},"81c5":function(e){e.exports={id:"ddlc.sayori",name:"Sayori",internalId:"sayori",folder:"sayori",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y"],sideways:["a2","b2","c2","d2"]},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["sideways"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:[],folder:"/old/",variant:["1","2","3","4","5"]},{compatibleHeads:[],variant:["glitch1","glitch2","end-glitch1","end-glitch2"]},{compatibleHeads:[],variant:["dead1","dead2"],nsfw:!0}]}},"894f":function(e,t,n){"use strict";var r=n("7e4c"),a=n.n(r);a.a},b2d9:function(e,t,n){"use strict";var r=n("bf15"),a=n.n(r);a.a},b367:function(e,t,n){"use strict";var r=n("ea81"),a=n.n(r);a.a},b4d7:function(e,t,n){},bf15:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"container"}},[n("canvas",{ref:"sd",style:{width:e.canvasWidth+"px",height:e.canvasHeight+"px"},attrs:{id:"scaled_display",height:"720",width:"1280",draggable:""},on:{click:e.onUiClick,touchstart:e.onTouchStart,dragstart:e.onDragStart,touchmove:e.onSpriteDragMove,mousemove:e.onSpriteDragMove,touchend:e.onSpriteDrop,mouseup:e.onSpriteDrop,dragover:e.onDragOver,drop:e.onDrop,mouseenter:e.onMouseEnter}},[e._v("HTML5 is required to use the Doki Doki Dialog Generator.")])]),n("message-console",{class:{vertical:e.vertical},attrs:{loading:e.currentlyRendering,id:"messages"}}),n("div",{class:{vertical:e.vertical},attrs:{id:"panels"}},[n("div",{attrs:{id:"toolbar"}},[n("button",{class:{active:"add"===e.panel},on:{click:function(t){e.panel="add"===e.panel?"":"add"}}},[e._v("A")]),n("button",{class:{active:"backgrounds"===e.panel},on:{click:function(t){e.panel="backgrounds"===e.panel?"":"backgrounds"}}},[e._v("B")]),n("button",{class:{active:"credits"===e.panel},on:{click:function(t){e.panel="credits"===e.panel?"":"credits"}}},[e._v("C")]),n("button",{on:{click:e.download}},[e._v("D")])]),n("keep-alive",[""===e.panel?n("general-panel",{attrs:{options:e.textbox,vertical:e.vertical,"has-prev-render":""!==e.prevRender,lqRendering:e.lqRendering,nsfw:e.nsfw},on:{"update:lqRendering":function(t){e.lqRendering=t},"update:lq-rendering":function(t){e.lqRendering=t},"update:nsfw":function(t){e.nsfw=t},"show-prev-render":e.showPreviousRender}}):e._e(),"add"===e.panel?n("add-panel",{attrs:{vertical:e.vertical},on:{chosen:e.onCharacterCreate,"add-custom-asset":e.onAssetCreate}}):e._e(),"backgrounds"===e.panel?n("backgrounds-panel",{attrs:{vertical:e.vertical,nsfw:e.nsfw},on:{"invalidate-render":e.invalidateRender},model:{value:e.currentBackground,callback:function(t){e.currentBackground=t},expression:"currentBackground"}}):e._e(),"credits"===e.panel?n("credits-panel",{attrs:{vertical:e.vertical}}):e._e(),"character"===e.panel?n("character-panel",{attrs:{vertical:e.vertical,character:e.selectedCharacter,nsfw:e.nsfw},on:{shiftLayer:e.onObjectLayerShift,"invalidate-render":e.invalidateRender}}):e._e(),"sprite"===e.panel?n("sprite-panel",{attrs:{vertical:e.vertical,sprite:e.selectedSprite},on:{shiftLayer:e.onObjectLayerShift,"invalidate-render":e.invalidateRender}}):e._e()],1)],1)],1)},i=[],o=(n("4917"),n("768b")),s=(n("5df3"),n("ac4d"),n("8a81"),n("ac6a"),n("96cf"),n("3b8d")),c=n("d225"),l=n("b0b4"),u=n("308d"),d=n("6bb5"),h=n("4e2b"),p=n("9ab4"),f=n("60a3"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn",on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)},b=[],v=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(f["c"]);v=p["a"]([Object(f["a"])({components:{}})],v);var m=v,y=m,_=(n("b367"),n("2877")),w=Object(_["a"])(y,g,b,!1,null,null,null),k=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v("General")]),n("a",{staticClass:"btn_link",attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/edave64/Doki-Doki-Dialog-Generator/blob/v1/docs/index.md"}},[e._v("Help")]),n("toggle",{attrs:{label:"Low quality preview?",title:"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.",value:e.lqRendering},on:{input:function(t){return e.$emit("update:lqRendering",t)}}}),n("button",{attrs:{disabled:!e.hasPrevRender},on:{click:function(t){return e.$emit("show-prev-render")}}},[e._v("Compare to last download")]),n("toggle",{attrs:{label:"NSFW Mode?",value:e.nsfw},on:{input:function(t){return e.$emit("update:nsfw",t)}}}),n("toggle",{attrs:{label:"Textbox visible?"},model:{value:e.options.display,callback:function(t){e.$set(e.options,"display",t)},expression:"options.display"}}),n("toggle",{attrs:{label:"Textbox corrupt?"},model:{value:e.options.corrupted,callback:function(t){e.$set(e.options,"corrupted",t)},expression:"options.corrupted"}}),n("div",[n("label",{attrs:{for:"current_talking"}},[e._v("Person talking:")]),n("br"),n("select",{directives:[{name:"model",rawName:"v-model",value:e.options.talking,expression:"options.talking"}],attrs:{id:"current_talking"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.options,"talking",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[e._v("No-one")]),n("option",{attrs:{value:"Sayori"}},[e._v("Sayori")]),n("option",{attrs:{value:"Yuri"}},[e._v("Yuri")]),n("option",{attrs:{value:"Natsuki"}},[e._v("Natsuki")]),n("option",{attrs:{value:"Monika"}},[e._v("Monika")]),n("option",{attrs:{value:"FeMC"}},[e._v("FeMC")]),n("option",{attrs:{value:"MC"}},[e._v("MC")]),n("option",{attrs:{value:"Amy"}},[e._v("Amy")]),n("option",{attrs:{value:"other"}},[e._v("Other")])])]),n("div",[n("label",{attrs:{for:"custom_name"}},[e._v("Other name:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.options.customName,expression:"options.customName"}],attrs:{id:"custom_name"},domProps:{value:e.options.customName},on:{input:function(t){t.target.composing||e.$set(e.options,"customName",t.target.value)}}})]),n("toggle",{attrs:{label:"Controls visible?"},model:{value:e.options.showControls,callback:function(t){e.$set(e.options,"showControls",t)},expression:"options.showControls"}}),n("toggle",{attrs:{label:"Able to skip?"},model:{value:e.options.allowSkipping,callback:function(t){e.$set(e.options,"allowSkipping",t)},expression:"options.allowSkipping"}}),n("toggle",{attrs:{label:"Continue arrow?"},model:{value:e.options.showContinueArrow,callback:function(t){e.$set(e.options,"showContinueArrow",t)},expression:"options.showContinueArrow"}}),n("div",{attrs:{id:"dialog_text_wrapper"}},[n("label",{attrs:{for:"dialog_text"}},[e._v("Dialog:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.options.dialog,expression:"options.dialog"}],attrs:{id:"dialog_text"},domProps:{value:e.options.dialog},on:{input:function(t){t.target.composing||e.$set(e.options,"dialog",t.target.value)}}})]),e._m(0)],1)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tFormatting:\n\t\t"),n("br"),e._v("[In brackets] for editied style text\n\t")])}],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{ref:"checkbox",attrs:{id:e._uid,type:"checkbox"},domProps:{checked:e.value},on:{change:e.onChange}}),n("label",{attrs:{for:e._uid}},[e._v(e._s(e.label))])])},j=[],R=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"onChange",value:function(e){this.$emit("input",!!this.$refs.checkbox.checked)}},{key:"checkbox",get:function(){return this.$refs.checkbox}}]),t}(f["c"]);p["a"]([Object(f["b"])({type:String})],R.prototype,"label",void 0),p["a"]([Object(f["b"])({type:Boolean,default:!1})],R.prototype,"value",void 0),R=p["a"]([Object(f["a"])({components:{}})],R);var S=R,P=S,L=(n("e2da"),Object(_["a"])(P,C,j,!1,null,"7e803566",null)),$=L.exports,H=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"talkingChange",value:function(){this.options.talking="other"}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0})],H.prototype,"options",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],H.prototype,"vertical",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],H.prototype,"lqRendering",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],H.prototype,"hasPrevRender",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],H.prototype,"nsfw",void 0),p["a"]([Object(f["d"])("options.customName")],H.prototype,"talkingChange",null),H=p["a"]([Object(f["a"])({components:{Toggle:$}})],H);var A=H,M=A,D=(n("b2d9"),Object(_["a"])(M,x,O,!1,null,"79c38df6",null)),T=D.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return void 0!==e.isWebPSupported?n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v("Add character")]),e._l(e.characters,function(t){return n("div",{key:t.id,staticClass:"character",attrs:{title:t.name},on:{click:function(n){e.$emit("chosen",t.id.toLowerCase())}}},[n("img",{attrs:{src:e.assetPath(t),alt:t.name}})])}),n("div",{staticClass:"btn custom-sprite",on:{click:function(t){return e.$refs.upload.click()}}},[e._v("\n\t\tCustom sprite upload\n\t\t"),n("input",{ref:"upload",attrs:{type:"file"},on:{change:e.onFileUpload}})]),n("div",{staticClass:"btn custom-sprite",on:{click:e.uploadFromURL}},[e._v("Custom sprite from URL")])],2):e._e()},B=[],E=(n("a481"),n("bd86"));function F(e,t,n,r){var a=t,i=e.length;do{a+=n,a<0&&(a+=i),a>=i&&(a-=i)}while(e[a].nsfw&&!r);return a}var I=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(c["a"])(this,e),this.name=t,this.basefolder=n,this.nsfw=a,this.flip=!1,this.variantI=0,this.variants=r.map(function(e){return e instanceof Array?{images:e.map(function(e){return(n+e).replace(/\/+/g,"/")}),nsfw:!1}:{images:e.images.map(function(e){return(n+e).replace(/\/+/g,"/")}),nsfw:e.nsfw}}),this.path=this.variants[0].images[0]}return Object(l["a"])(e,[{key:"hasVariants",value:function(e){return this.variants.filter(function(t){return!t.nsfw||e}).length>1}},{key:"seekVariant",value:function(e,t){this.variantI=F(this.variants,this.variantI,e,t)}},{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.variants[this.variantI].images.map(function(e){return fe(e,t.hq)}));case 2:for(n=e.sent,r=!0,a=!1,i=void 0,e.prev=6,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)c=s.value,t.drawImage({image:c,x:0,y:0,flip:this.flip});e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),a=!0,i=e.t0;case 14:e.prev=14,e.prev=15,r||null==o.return||o.return();case 17:if(e.prev=17,!a){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"variant",get:function(){return this.variantI}}]),e}(),U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(c["a"])(this,e),this.name=n,this.nsfw=r,this.custom=a,this.flip=!1,this.path=(a?"":"/backgrounds/")+t}return Object(l["a"])(e,[{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Model Background:render"),e.t0=t,e.next=4,fe(this.path,t.hq);case 4:e.t1=e.sent,e.t2=this.flip,e.t3={image:e.t1,x:0,y:0,flip:e.t2},e.t0.drawImage.call(e.t0,e.t3);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),N={name:"Static color",color:"#000000",render:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.drawRect({x:0,y:0,w:1280,h:720,fill:{style:this.color}});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},W={name:"Transparent",render:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()};function Y(e){e instanceof I&&e.variants[e.variant].nsfw&&e.seekVariant(1,!1)}var X=n("81c5"),z=n("6785"),G=n("6b47"),K=n("515d"),V=n("f721"),J=n("fdec"),Q=n("7b43"),Z=n("d0ca"),ee=n("794c"),te=n("5d7c"),ne=new r["a"],re={fire:function(e){console.log("eventBus:fire"),ne.$emit(e.kind,e)},subscribe:function(e,t){console.log("eventBus:subscribe"),ne.$on(e.kind,t)},unsubscribe:function(e,t){console.log("eventBus:unsubscribe"),ne.$off(e.kind,t)}},ae=function e(t){Object(c["a"])(this,e),this.path=t,this.kind="AssetFailureEvent"};ae.kind="AssetFailureEvent";var ie=function e(t){Object(c["a"])(this,e),this.error=t,this.kind="CustomAssetFailureEvent"};ie.kind="CustomAssetFailureEvent";var oe,se,ce=function e(){Object(c["a"])(this,e)},le=[G,K,X,z,V,J,Q,Z,ee,te],ue=(oe={},Object(E["a"])(oe,X.id,X),Object(E["a"])(oe,z.id,z),Object(E["a"])(oe,K.id,K),Object(E["a"])(oe,G.id,G),Object(E["a"])(oe,V.id,V),Object(E["a"])(oe,J.id,J),Object(E["a"])(oe,Q.id,Q),Object(E["a"])(oe,Z.id,Z),Object(E["a"])(oe,ee.id,ee),Object(E["a"])(oe,te.id,te),oe);function de(){return se||(console.log("find if isWebPSupported"),se=new Promise(function(e,t){console.log("isWebPSupported promise: start");var n="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",r=document.createElement("img");r.addEventListener("load",function(){console.log("webP seems supported"),e(2===r.width&&1===r.height)}),r.addEventListener("error",function(){console.log("webP isn't supported"),e(!1)}),console.log("isWebPSupported promise: before src"),r.src=n,console.log("isWebPSupported promise: end")})),se}var he={},pe={};function fe(e){return ge.apply(this,arguments)}function ge(){return ge=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],!pe[t]){e.next=3;break}return e.abrupt("return",pe[t]);case 3:return console.log("load asset"),e.t0="".concat("/Doki-Doki-Dialog-Generator/beta/","/assets/").concat(t).concat(n?"":".lq"),e.next=7,de();case 7:if(!e.sent){e.next=11;break}e.t1=".webp",e.next=12;break;case 11:e.t1=".png";case 12:return e.t2=e.t1,r=e.t0.concat.call(e.t0,e.t2).replace(/\/+/,"/"),he[r]||(he[r]=new Promise(function(e,t){console.log("getAsset promise: start");var n=new Image;n.addEventListener("load",function(){console.log("Asset loaded"),e(n)}),n.addEventListener("error",function(){console.log("Asset failed"),re.fire(new ae(r)),he[r]=void 0,e(new ce)}),n.crossOrigin="Anonymous",n.src=r,n.style.display="none",document.body.appendChild(n),console.log("getAsset promise: start")})),e.abrupt("return",he[r]);case 16:case"end":return e.stop()}},e)})),ge.apply(this,arguments)}function be(e,t){var n=URL.createObjectURL(t);return pe[e]=new Promise(function(e,t){var r=new Image;r.addEventListener("load",function(){e(r)}),r.addEventListener("error",function(e){re.fire(new ie(e)),t('Failed to load "'.concat(n,'"'))}),r.crossOrigin="Anonymous",r.src=n,r.style.display="none",document.body.appendChild(r)}),n}function ve(e,t){return pe[e]=new Promise(function(e,n){var r=new Image;r.addEventListener("load",function(){e(r)}),r.addEventListener("error",function(e){re.fire(new ie(e)),n('Failed to load "'.concat(t,'"'))}),r.crossOrigin="Anonymous",r.src=t,r.style.display="none",document.body.appendChild(r)})}var me=[new I("Clubroom","/backgrounds/",[["club"],{nsfw:!0,images:["club-skill"]}]),new U("closet","Closet"),new U("corridor","Corridor"),new U("class","Classroom"),new U("residential","Street"),new U("house","House"),new U("bedroom","Bedroom"),new U("kitchen","Kitchen"),new I("Sayori's bedroom","",[["/backgrounds/sayori_bedroom"],["/cg/sayori_kill/s_kill_bg"],["/cg/sayori_kill/s_kill_bg2"]]),new U("bsod","Blue screen of death"),new U("unused-house","Unused house found in game files"),new I("Natsuki reading manga","/cg/natsuki_1/",[["n_cg1_bg"],["n_cg1_bg","n_cg1_base"],["n_cg1_bg","n_cg1_base","n_cg1_exp1"],["n_cg1_bg","n_cg1_base","n_cg1_exp2"],["n_cg1_bg","n_cg1_base","n_cg1_exp3"],["n_cg1_bg","n_cg1_base","n_cg1_exp4"],["n_cg1_bg","n_cg1_base","n_cg1_exp5"]]),new I("Natsuki in the closet","/cg/natsuki_2/",[["n_cg2_bg"],["n_cg2_bg","n_cg2_base"],["n_cg2_bg","n_cg2_base","n_cg2_exp1"],["n_cg2_bg","n_cg2_base","n_cg2_exp2"]]),new I("Natsuki against the wall","/cg/natsuki_3/",[["n_cg3_base"],["n_cg3_base","n_cg3_exp1"],["n_cg3_base","n_cg3_exp2"],["n_cg3_base","n_cg3_cake"],["n_cg3_base","n_cg3_exp1","n_cg3_cake"],["n_cg3_base","n_cg3_exp2","n_cg3_cake"]]),new U("../cg/sayori_1/s_cg1","Sayori dressing"),new I("Sayori bumped head","/cg/sayori_2/",[["s_cg2_base1"],["s_cg2_base1","s_cg2_exp1"],["s_cg2_base1","s_cg2_exp2"],["s_cg2_base1","s_cg2_exp3"],["s_cg2_base1","s_cg2_exp1","s_cg2_exp3"],["s_cg2_base1","s_cg2_exp2","s_cg2_exp3"],["s_cg2_base2"],["s_cg2_base2","s_cg2_exp1"],["s_cg2_base2","s_cg2_exp2"],["s_cg2_base2","s_cg2_exp3"],["s_cg2_base2","s_cg2_exp1","s_cg2_exp3"],["s_cg2_base2","s_cg2_exp2","s_cg2_exp3"]]),new U("../cg/sayori_3/s_cg3","Sayori hug"),new I("Yuri reading","/cg/yuri_1/",[["y_cg1_base"],["y_cg1_base","y_cg1_exp2"],["y_cg1_base","y_cg1_exp1"],["y_cg1_base","y_cg1_exp1","y_cg1_exp2"],["y_cg1_base","y_cg1_exp3"]]),new I("Yuri against the wall","/cg/yuri_2/",[["y_cg2_bg1"],["y_cg2_bg1","y_cg2_base","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base","y_cg2_exp2","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base","y_cg2_exp3","y_cg2_nochoc"],["y_cg2_bg1","y_cg2_base"],["y_cg2_bg1","y_cg2_base","y_cg2_exp2"],["y_cg2_bg1","y_cg2_base","y_cg2_exp3"],["y_cg2_bg2"],["y_cg2_bg2","y_cg2_base","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base","y_cg2_exp2","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base","y_cg2_exp3","y_cg2_nochoc"],["y_cg2_bg2","y_cg2_base"],["y_cg2_bg2","y_cg2_base","y_cg2_exp2"],["y_cg2_bg2","y_cg2_base","y_cg2_exp3"]]),new I("Yuri with towel","/cg/yuri_3/",[["y_cg3_base"],["y_cg3_base","y_cg3_exp1"]]),new I("Yuri's death","/cg/yuri_kill/",[["1a"],["1b"],["1c"],["2a"],["2b"],["2c"],["3a"],["3b"],["3c"]],!0),new I("The spaceroom","/cg/monika/",[["monika_room"],["space","monika_room"],["monika_room_highlight"],["space","monika_room_highlight"],["monika_bg"],["space","monika_bg"],["monika_bg_highlight"],["space","monika_bg_highlight"],["room"],["space","room"],["monika_bg_glitch"],["monika_bg_glitch","monika_glitch1"],["monika_bg_glitch","monika_glitch2"],["monika_bg_glitch","monika_glitch3"],["monika_bg_glitch","monika_glitch4"],{nsfw:!0,images:["monika_scare"]},{nsfw:!0,images:["space","monika_scare"]}]),N,W],ye=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.isWebPSupported=null,e.customAssetCount=0,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("AddPanel:created"),e.next=3,de();case 3:this.isWebPSupported=e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"assetPath",value:function(e){return"".concat("/Doki-Doki-Dialog-Generator/beta/","/assets/chibis/").concat(e.internalId,".lq.").concat(this.isWebPSupported?"webp":"png").replace(/\/+/,"/")}},{key:"onFileUpload",value:function(e){var t=this,n=this.$refs.upload;if(n.files){var r=!0,a=!1,i=void 0;try{for(var o,s=function(){var e=o.value;(function(n){var r="customAsset"+n;be(r,e);t.$emit("add-custom-asset",r)})(++t.customAssetCount)},c=n.files[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(l){a=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}}}},{key:"uploadFromURL",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=prompt("Enter the URL of the image"),t){e.next=3;break}return e.abrupt("return");case 3:return n="customAsset"+ ++this.customAssetCount,e.next=6,ve(n,t);case 6:this.$emit("add-custom-asset",n);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"characters",get:function(){return console.log("AddPanel:characters"),le}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],ye.prototype,"vertical",void 0),ye=p["a"]([Object(f["a"])({components:{}})],ye);var _e=ye,we=_e,ke=(n("894f"),Object(_["a"])(we,q,B,!1,null,"570e0094",null)),xe=ke.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v(e._s(e.character.label))]),e.hasMultiplePoses||e.parts.length>0?n("fieldset",[n("legend",[e._v("Pose:")]),n("table",[n("tbody",[e.hasMultiplePoses?n("tr",[n("td",[n("button",{on:{click:function(t){return e.character.seekPose(-1,e.nsfw)}}},[e._v("<")])]),n("td",[e._v("Pose")]),n("td",[n("button",{on:{click:function(t){return e.character.seekPose(1,e.nsfw)}}},[e._v(">")])])]):e._e(),e._l(e.parts,function(t){return n("tr",{key:t},[n("td",[n("button",{on:{click:function(n){return e.character.seekPart(t,-1,e.nsfw)}}},[e._v("<")])]),n("td",[e._v(e._s(e.captialize(t)))]),n("td",[n("button",{on:{click:function(n){return e.character.seekPart(t,1,e.nsfw)}}},[e._v(">")])])])})],2)])]):e._e(),n("fieldset",[n("legend",[e._v("Position:")]),n("toggle",{attrs:{label:"Move freely?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.character.allowFreeMove,callback:function(t){e.$set(e.character,"allowFreeMove",t)},expression:"character.allowFreeMove"}}),e.character.allowFreeMove?n("div",[n("label",{attrs:{for:"sprite_x"}},[e._v("X:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.character.x,expression:"character.x",modifiers:{number:!0}}],attrs:{id:"sprite_x",type:"number"},domProps:{value:e.character.x},on:{input:[function(t){t.target.composing||e.$set(e.character,"x",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}}),n("br"),n("label",{attrs:{for:"sprite_y"}},[e._v("Y:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.character.y,expression:"character.y",modifiers:{number:!0}}],attrs:{id:"sprite_y",type:"number"},domProps:{value:e.character.y},on:{input:[function(t){t.target.composing||e.$set(e.character,"y",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}})]):n("div",[n("button",{attrs:{disabled:0===e.character.pos},on:{click:function(t){--e.character.pos,e.$emit("invalidate-render")}}},[e._v("<")]),n("select",{directives:[{name:"model",rawName:"v-model.number",value:e.character.pos,expression:"character.pos",modifiers:{number:!0}}],attrs:{id:"current_talking"},on:{input:function(t){return e.$emit("invalidate-render")},change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(t){var n="_value"in t?t._value:t.value;return e._n(n)});e.$set(e.character,"pos",t.target.multiple?n:n[0])}}},e._l(e.positionNames,function(t,r){return n("option",{key:r,domProps:{value:r}},[e._v(e._s(t))])}),0),n("button",{attrs:{disabled:e.character.pos>=e.positionNames.length-1},on:{click:function(t){++e.character.pos,e.$emit("invalidate-render")}}},[e._v(">")])])],1),n("fieldset",{attrs:{id:"layerfs"}},[n("legend",[e._v("Layer:")]),n("button",{attrs:{title:"Move to back"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.character,move:"Back"})}}},[e._v("⤓")]),n("button",{attrs:{title:"Move backwards"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.character,move:"Backward"})}}},[e._v("↓")]),n("button",{attrs:{title:"Move forwards"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.character,move:"Forward"})}}},[e._v("↑")]),n("button",{attrs:{title:"Move to front"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.character,move:"Front"})}}},[e._v("⤒")]),n("toggle",{attrs:{label:"In front of textbox?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.character.infront,callback:function(t){e.$set(e.character,"infront",t)},expression:"character.infront"}})],1),n("div",[n("label",{attrs:{for:"characterOpacity"}},[e._v("Opacity:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.character.opacity,expression:"character.opacity",modifiers:{number:!0}}],attrs:{type:"number",max:"100",min:"0",id:"characterOpacity"},domProps:{value:e.character.opacity},on:{input:[function(t){t.target.composing||e.$set(e.character,"opacity",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}})]),n("toggle",{attrs:{label:"Close up?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.character.close,callback:function(t){e.$set(e.character,"close",t)},expression:"character.close"}}),n("toggle",{attrs:{label:"Flipped?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.character.flip,callback:function(t){e.$set(e.character,"flip",t)},expression:"character.flip"}}),n("button",{on:{click:function(t){e.$emit("shiftLayer",{object:e.character,move:"Delete"}),e.$emit("close")}}},[e._v("Delete")])],1)},Ce=[],je=(n("55dd"),n("6762"),n("2fdb"),n("7f7f"),n("75fc")),Re=n("01c8"),Se=["4-1","3-1","2-1","4-2","center","4-3","2-2","3-3","4-4"],Pe=[200,240,400,493,640,786,880,1040,1080],Le=(n("34ef"),n("28a5"),n("8e6e"),n("456d"),n("6c7b"),function e(){Object(c["a"])(this,e)});function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach(function(t){Object(E["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ae=function(){function e(t,n,r){Object(c["a"])(this,e),this.fsCtx=t,this.hq=n,this.preview=r,this.aborted=!1}return Object(l["a"])(e,[{key:"drawText",value:function(e){if(this.aborted)throw new Le;console.log("RenderContext:drawText start"),this.fsCtx.save();var t=He({},{font:"20px aller",align:"left"},{},e),n=t.font,r=t.align,a=t.x,i=void 0===a?0:a,o=t.y,s=void 0===o?0:o,c=t.text,l=void 0===c?"":c;this.fsCtx.lineJoin="round",this.fsCtx.textAlign=r,this.fsCtx.font=n,e.outline&&(this.fsCtx.strokeStyle=e.outline.style,this.fsCtx.lineWidth=e.outline.width,this.fsCtx.strokeText(l,i,s)),e.fill&&(this.fsCtx.fillStyle=e.fill.style,this.fsCtx.fillText(l,i,s)),this.fsCtx.restore(),console.log("RenderContext:drawText end")}},{key:"measureText",value:function(e){if(this.aborted)throw new Le;console.log("RenderContext:measureText start"),this.fsCtx.save();var t=He({},{font:"20px aller",align:"left"},{},e),n=t.font,r=t.align,a=t.text,i=void 0===a?"":a;this.fsCtx.lineJoin="round",this.fsCtx.textAlign=r,this.fsCtx.font=n,e.outline&&(this.fsCtx.strokeStyle=e.outline.style,this.fsCtx.lineWidth=e.outline.width),e.fill&&(this.fsCtx.fillStyle=e.fill.style);var o=this.fsCtx.measureText(i);return this.fsCtx.restore(),console.log("RenderContext:measureText end"),o}},{key:"drawImage",value:function(e){if(console.log("RenderContext:drawImage start"),this.aborted)throw new Le;if(!(e.image instanceof ce)){var t=He({flip:!1,w:e.image.width,h:e.image.height,opacity:100},e),n=t.image,r=t.flip,a=t.x,i=t.y,o=t.w,s=t.h,c=t.opacity;if(this.fsCtx.save(),c<100&&(this.fsCtx.globalAlpha=c/100),e.shadow){var l=e.shadow;l.color&&(this.fsCtx.shadowColor=l.color),l.blur&&(this.fsCtx.shadowBlur=l.blur),l.offsetX&&(this.fsCtx.shadowOffsetX=l.offsetX),l.offsetY&&(this.fsCtx.shadowOffsetY=l.offsetY)}this.fsCtx.translate(a+o/2,i+s/2),this.fsCtx.scale(r?-1:1,1),n instanceof Me?n.paintOnto(this.fsCtx,-o/2,-s/2,o,s):this.fsCtx.drawImage(n,-o/2,-s/2,o,s),this.fsCtx.restore(),console.log("RenderContext:drawImage end")}}},{key:"drawRect",value:function(e){var t=e.x,n=e.y,r=e.w,a=e.h,i=e.outline,o=e.fill;if(this.aborted)throw new Le;console.log("RenderContext:drawRect start"),this.fsCtx.save(),this.fsCtx.beginPath(),this.fsCtx.rect(t,n,r,a),o&&(this.fsCtx.fillStyle=o.style,this.fsCtx.fill()),i&&(this.fsCtx.strokeStyle=i.style,this.fsCtx.lineWidth=i.width,this.fsCtx.stroke()),this.fsCtx.restore(),console.log("RenderContext:drawRect end")}},{key:"abort",value:function(){this.aborted=!0}}]),e}(),Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1280,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:720;Object(c["a"])(this,e),this.runningContext=null,this.previewCanvas=document.createElement("canvas"),this.previewCanvas.width=t,this.previewCanvas.height=n}return Object(l["a"])(e,[{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],console.log("Renderer:render start"),this.runningContext&&this.runningContext.abort(),r=this.previewCanvas.getContext("2d"),r.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height),a=this.runningContext=new Ae(r,n,!0),e.prev=6,e.next=9,t(this.runningContext);case 9:e.next=18;break;case 11:if(e.prev=11,e.t0=e["catch"](6),!(e.t0 instanceof Le)){e.next=16;break}return console.log("Renderer:render end 1"),e.abrupt("return",!1);case 16:throw console.log("Renderer:render throw"),e.t0;case 18:return e.prev=18,a===this.runningContext&&(this.runningContext=null),e.finish(18);case 21:return console.log("Renderer:render end 2"),e.abrupt("return",!0);case 23:case"end":return e.stop()}},e,this,[[6,11,18,21]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"paintOnto",value:function(e,t,n,r,a){console.log("Renderer:paintOnto start"),r&&a?e.drawImage(this.previewCanvas,t,n,r,a):e.drawImage(this.previewCanvas,t,n),console.log("Renderer:paintOnto end")}},{key:"download",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Renderer:download start"),r=document.createElement("canvas"),r.width=this.previewCanvas.width,r.height=this.previewCanvas.height,a=r.getContext("2d"),a.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height),console.log("Renderer:download asyncCall"),e.next=9,t(new Ae(a,!0,!1));case 9:if(void 0!==window.navigator.msSaveOrOpenBlob){e.next=21;break}return o=document.createElement("a"),o.setAttribute("download",n),e.next=14,this.createObjectURL(r);case 14:i=e.sent,o.setAttribute("href",i),document.body.appendChild(o),o.click(),document.body.removeChild(o),e.next=25;break;case 21:i=r.toDataURL(),s=this.dataURItoBlob(i),window.URL&&window.URL.createObjectURL&&(i=URL.createObjectURL(s)),window.navigator.msSaveBlob(s,n);case 25:return console.log("Renderer:download end"),e.abrupt("return",i);case 27:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"createObjectURL",value:function(e){var t=this;return new Promise(function(n,r){if(e.toBlob&&window.URL&&window.URL.createObjectURL)e.toBlob(function(e){e?n(URL.createObjectURL(e)):r()},"image/png");else if(window.URL&&window.URL.createObjectURL){var a=e.toDataURL(),i=t.dataURItoBlob(a);n(URL.createObjectURL(i))}else n(e.toDataURL())})}},{key:"getDataAt",value:function(e,t){var n=this.previewCanvas.getContext("2d");return n.getImageData(e,t,1,1).data}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return new Blob([r],{type:"image/png"})}},{key:"width",get:function(){return this.previewCanvas.width}},{key:"height",get:function(){return this.previewCanvas.height}}]),e}(),De=-26,Te=-74,qe=function(){function e(t,n){Object(c["a"])(this,e),this.name=t,this.invalidator=n,this.infront=!1,this.close=!1,this.flip=!1,this.opacity=100,this.lq=!0,this.selected=!1,this.poseId=0,this.posePositions={variant:0,left:0,right:0,head:0,headType:0},this.localRenderer=new Me(960,960),this.dirty=!0,this.hitDetectionFallback=!1,this.freeMove=!1,this.pPos=4,this.pX=Pe[4],this.pY=De}return Object(l["a"])(e,[{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"nsfwCheck",value:function(){var e=this.pose,t=this.getParts();e.nsfw&&this.seekPose(1,!1);var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if("head"!==s){var c=e[s][this.posePositions[s]];c.nsfw&&this.seekPart(s,1,!1)}}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}this.currentHeads&&this.currentHeads.nsfw&&(this.posePositions.headType=0,this.posePositions.head=0,this.dirty=!0)}},{key:"getParts",value:function(){var e=this.pose,t=this.pose.compatibleHeads.length>0?["head"]:[];return"variant"in e?[].concat(t,["variant"]):"left"in e?[].concat(t,["left","right"]):t}},{key:"updateLocalCanvas",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.localRenderer.render(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n){var r,a,i,o,s,c,l,u,d,h,p,f,g,b,v,m,y,_,w,k,x,O,C,j;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.pose,a=[],i=t.getParts(),o=(t.data.folder?t.data.folder+"/":"")+(t.pose.folder?t.pose.folder+"/":""),s=(t.data.folder?t.data.folder+"/":"")+(t.currentHeads&&t.currentHeads.folder?t.currentHeads.folder+"/":""),!r.static){e.next=9;break}a.push(o+r.static),e.next=37;break;case 9:c=!0,l=!1,u=void 0,e.prev=12,d=i[Symbol.iterator]();case 14:if(c=(h=d.next()).done){e.next=23;break}if(p=h.value,"head"!==p){e.next=18;break}return e.abrupt("continue",20);case 18:f=r[p][t.posePositions[p]],a.push(o+("string"===typeof f?f:f.img));case 20:c=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](12),l=!0,u=e.t0;case 29:e.prev=29,e.prev=30,c||null==d.return||d.return();case 32:if(e.prev=32,!l){e.next=35;break}throw u;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return g=t.currentHeads?s+t.currentHeads.all[t.posePositions.head]:null,e.next=40,Promise.all([g?fe(g,n.hq):Promise.resolve(null)].concat(Object(je["a"])(a.map(function(e){return fe(e,n.hq)}))));case 40:for(b=e.sent,v=Object(Re["a"])(b),m=v[0],y=v.slice(1),_=function(){if(m){var e=t.pose.headAnchor?t.pose.headAnchor:[0,0];n.drawImage({image:m,x:e[0],y:("ddlc.monika"===t.name?1:0)+e[1]})}},t.pose.headInForeground||_(),w=!0,k=!1,x=void 0,e.prev=49,O=y[Symbol.iterator]();!(w=(C=O.next()).done);w=!0)j=C.value,n.drawImage({image:j,x:0,y:0});e.next=57;break;case 53:e.prev=53,e.t1=e["catch"](49),k=!0,x=e.t1;case 57:e.prev=57,e.prev=58,w||null==O.return||O.return();case 60:if(e.prev=60,!k){e.next=63;break}throw x;case 63:return e.finish(60);case 64:return e.finish(57);case 65:t.pose.headInForeground&&_();case 66:case"end":return e.stop()}},e,null,[[12,25,29,37],[30,,32,36],[49,53,57,65],[58,,60,64]])}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Model Character:render"),!this.dirty&&this.lq===!t.hq){e.next=5;break}return e.next=4,this.updateLocalCanvas();case 4:this.dirty=!1;case 5:n=this.close?1.6:.8,r=960*n,a=this.pX-r/2,i=(this.close?Te:0)+this.pY,t.drawImage({image:this.localRenderer,x:a,y:i,w:r,h:r,flip:this.flip,shadow:this.selected&&t.preview?{blur:20,color:"red"}:void 0,opacity:this.opacity});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"hitTest",value:function(e,t){var n=this.close?1.6:.8,r=960*n,a=(e-this.pX+r/2)/n,i=(t-(this.close?Te:0)-this.pY)/n;if(this.flip&&(a=960-a),!this.hitDetectionFallback)try{var o=this.localRenderer.getDataAt(a,i);return 0!==o[3]}catch(s){if(!(s instanceof DOMException&&s.message.includes("cross-origin")))throw s;this.hitDetectionFallback=!0}return!(i<50||i>680)&&Math.abs(a-480)<150}},{key:"seekHead",value:function(e,t){var n=this;this.currentHeads&&(this.posePositions.head+=e,(this.posePositions.head<0||this.posePositions.head>=this.currentHeads.all.length)&&(this.posePositions.headType=F(this.pose.compatibleHeads.map(function(e){return n.data.heads[e]}),this.posePositions.headType,e,t),this.posePositions.head=1===e?0:this.currentHeads.all.length-1),this.dirty=!0,this.invalidator())}},{key:"seekPart",value:function(e,t,n){if("head"===e)return this.seekHead(t,n);this.pose[e]&&(this.posePositions[e]=F(this.pose[e],this.posePositions[e],t,n),this.dirty=!0,this.invalidator())}},{key:"seekPose",value:function(e,t){var n=this.pose.compatibleHeads[this.posePositions.headType];this.poseId=F(this.data.poses,this.poseId,e,t);var r=this.pose.compatibleHeads.indexOf(n);r>=0?this.posePositions.headType=r:(this.posePositions.headType=0,this.posePositions.head=0),this.posePositions.left=0,this.posePositions.right=0,this.posePositions.variant=0,this.dirty=!0,this.invalidator()}},{key:"closestCharacterSlot",value:function(e){var t=Pe.map(function(t,n){return{pos:Math.abs(e-t),idx:n}}).sort(function(e,t){return e.pos-t.pos});return t[0].idx}},{key:"label",get:function(){return this.data.name}},{key:"data",get:function(){return ue[this.name]}},{key:"pose",get:function(){return this.data.poses[this.poseId]}},{key:"currentHeads",get:function(){if(!this.pose.compatibleHeads||0===this.pose.compatibleHeads.length)return null;var e=this.data.heads[this.pose.compatibleHeads[this.posePositions.headType]];return e instanceof Array?{all:e}:e}},{key:"allowFreeMove",get:function(){return this.freeMove},set:function(e){e?this.freeMove=!0:(this.freeMove=!1,this.pos=this.closestCharacterSlot(this.pX),this.pY=De)}},{key:"x",get:function(){return this.pX},set:function(e){this.allowFreeMove?this.pX=e:this.pos=this.closestCharacterSlot(e)}},{key:"y",get:function(){return this.pY},set:function(e){this.allowFreeMove?this.pY=e:this.pY=De}},{key:"pos",get:function(){return this.pPos},set:function(e){this.allowFreeMove||(e<0&&(e=0),e>=Pe.length&&(e=Pe.length-1),this.pPos=e,this.pX=Pe[e])}}]),e}(),Be=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.isWebPSupported=null,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:this.isWebPSupported=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"captialize",value:function(e){return e.charAt(0).toUpperCase()+e.substring(1)}},{key:"positionNames",get:function(){return Se}},{key:"parts",get:function(){return this.character.getParts()}},{key:"hasMultiplePoses",get:function(){return this.character.data.poses.length>1}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],Be.prototype,"vertical",void 0),p["a"]([Object(f["b"])({type:qe,required:!0})],Be.prototype,"character",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],Be.prototype,"nsfw",void 0),Be=p["a"]([Object(f["a"])({components:{Toggle:$}})],Be);var Ee=Be,Fe=Ee,Ie=(n("f2c8"),Object(_["a"])(Fe,Oe,Ce,!1,null,"dcb749ae",null)),Ue=Ie.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v("Custom Sprite")]),n("fieldset",[n("legend",[e._v("Position/Size:")]),n("label",{attrs:{for:"sprite_x"}},[e._v("X:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sprite.x,expression:"sprite.x",modifiers:{number:!0}}],attrs:{id:"sprite_x",type:"number"},domProps:{value:e.sprite.x},on:{input:[function(t){t.target.composing||e.$set(e.sprite,"x",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}}),n("br"),n("label",{attrs:{for:"sprite_y"}},[e._v("Y:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sprite.y,expression:"sprite.y",modifiers:{number:!0}}],attrs:{id:"sprite_y",type:"number"},domProps:{value:e.sprite.y},on:{input:[function(t){t.target.composing||e.$set(e.sprite,"y",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}}),n("br"),n("label",{attrs:{for:"sprite_w"}},[e._v("Width:")]),n("input",{attrs:{id:"sprite_w",type:"number"},domProps:{value:e.sprite.width},on:{input:e.setWidth,keydown:function(e){e.stopPropagation()}}}),n("br"),n("label",{attrs:{for:"sprite_h"}},[e._v("Height:")]),n("input",{attrs:{id:"sprite_h",type:"number"},domProps:{value:e.sprite.height},on:{input:e.setHeight,keydown:function(e){e.stopPropagation()}}}),n("toggle",{attrs:{value:e.sprite.lockedRatio,label:"Lock ratio?"},on:{input:e.setRatioLock}})],1),n("fieldset",{attrs:{id:"layerfs"}},[n("legend",[e._v("Layer:")]),n("button",{attrs:{title:"Move to back"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.sprite,move:"Back"})}}},[e._v("⤓")]),n("button",{attrs:{title:"Move backwards"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.sprite,move:"Backward"})}}},[e._v("↓")]),n("button",{attrs:{title:"Move forwards"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.sprite,move:"Forward"})}}},[e._v("↑")]),n("button",{attrs:{title:"Move to front"},on:{click:function(t){return e.$emit("shiftLayer",{object:e.sprite,move:"Front"})}}},[e._v("⤒")]),n("toggle",{attrs:{label:"In front of textbox?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.sprite.infront,callback:function(t){e.$set(e.sprite,"infront",t)},expression:"sprite.infront"}})],1),n("div",[n("label",{attrs:{for:"characterOpacity"}},[e._v("Opacity:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sprite.opacity,expression:"sprite.opacity",modifiers:{number:!0}}],attrs:{type:"number",max:"100",min:"0",id:"characterOpacity"},domProps:{value:e.sprite.opacity},on:{input:[function(t){t.target.composing||e.$set(e.sprite,"opacity",e._n(t.target.value))},function(t){return e.$emit("invalidate-render")}],keydown:function(e){e.stopPropagation()},blur:function(t){return e.$forceUpdate()}}})]),n("toggle",{attrs:{label:"Flip?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.sprite.flip,callback:function(t){e.$set(e.sprite,"flip",t)},expression:"sprite.flip"}}),n("button",{on:{click:function(t){e.$emit("shiftLayer",{object:e.sprite,move:"Delete"}),e.$emit("close")}}},[e._v("Delete")])],1)},We=[],Ye=(n("c5f6"),640),Xe=function(){function e(t,n){var r=this;Object(c["a"])(this,e),this.assetName=t,this.invalidator=n,this.infront=!1,this.x=Ye,this.y=0,this.width=0,this.height=0,this.ratio=0,this.lockedRatio=!0,this.flip=!1,this.opacity=100,this.asset=null,this.selected=!1,fe(t).then(function(e){e instanceof ce||(r.asset=e,r.width=e.width,r.height=e.height,r.ratio=r.width/r.height,r.invalidator())}).catch(function(e){console.error("Failed to load asset: ".concat(e))})}return Object(l["a"])(e,[{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.asset){e.next=2;break}return e.abrupt("return");case 2:n=this.x-this.width/2,t.drawImage({image:this.asset,x:n,y:this.y,w:this.width,h:this.height,shadow:this.selected&&t.preview?{blur:20,color:"red"}:void 0,flip:this.flip,opacity:this.opacity});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"hitTest",value:function(e,t){var n=e-this.x+this.width/2,r=t-this.y;return n>=0&&n<=this.width&&r>=0&&r<=this.height}}]),e}(),ze=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"setHeight",value:function(e){var t=Number(e.target.value);this.sprite.lockedRatio&&(this.sprite.width=t*this.sprite.ratio),this.sprite.height=t,this.$emit("invalidate-render")}},{key:"setWidth",value:function(e){var t=Number(e.target.value);this.sprite.lockedRatio&&(this.sprite.height=t/this.sprite.ratio),this.sprite.width=t,this.$emit("invalidate-render")}},{key:"setRatioLock",value:function(e){this.sprite.lockedRatio=e,e&&(this.sprite.ratio=this.sprite.width/this.sprite.height)}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],ze.prototype,"vertical",void 0),p["a"]([Object(f["b"])({type:Xe,required:!0})],ze.prototype,"sprite",void 0),ze=p["a"]([Object(f["a"])({components:{Toggle:$}})],ze);var Ge=ze,Ke=Ge,Ve=(n("640f"),Object(_["a"])(Ke,Ne,We,!1,null,"750788b8",null)),Je=Ve.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v("Credits")]),n("p",[e._v("All assets used are IP of Team Salvato and created by them, unless noted otherwise.")]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),n("p",[e._v("Classic Amy Sprite by Meddy-sin")]),n("p",[e._v("Amy Sprite by Meddy-sin and SlightlySimple")]),n("p",[e._v("Special thanks to SlightlySimple for testing and technical help")])])},Ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tUnused House Background by\n\t\t"),n("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.deviantart.com/fatelogic/art/VN-Background-Practice-295671161"}},[e._v("Fatelogic")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tDoki Doki Dialog Generator developed by EDave64\n\t\t"),n("br"),e._v("Based on gemdude46's DDLC Shitpost generator\n\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tMC Classic Sprite by Childish-N\n\t\t"),n("br"),e._v("MC Classic Chibi by GyleToTheRescue\n\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tMC Sprite by Childish-N\n\t\t"),n("br"),e._v("MC Casual Sprite by SlightlySimple\n\t\t"),n("br"),e._v("MC Chibi by SlightlySimple\n\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tMC Chad Sprite by Cylent-Nite\n\t\t"),n("br"),e._v("MC Chad Poses and expressions by SlightlySimple\n\t\t"),n("br"),e._v("MC Chad Poses and chibi by Meddy-sin\n\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n\t\tFeMC Sprite by Meddy-sin\n\t\t"),n("br"),e._v("FeMC Casual Sprite by SlightlySimple\n\t")])}],et=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],et.prototype,"vertical",void 0),et=p["a"]([Object(f["a"])({components:{}})],et);var tt=et,nt=tt,rt=(n("2e9e"),Object(_["a"])(nt,Qe,Ze,!1,null,"69d1c568",null)),at=rt.exports,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{panel:!0,vertical:e.vertical}},[n("h1",[e._v("Background")]),n("background-settings",{attrs:{value:e.value,nsfw:e.nsfw},on:{"invalidate-render":function(t){return e.$emit("invalidate-render")}}}),e._l(e.backgrounds,function(t){return n("background-button",{key:t.name,attrs:{background:t,value:e.value,customPathLookup:e.customPathLookup},on:{input:function(n){e.nsfwFilter(t),e.$emit("input",t)}}})}),n("div",{staticClass:"btn upload-background",on:{click:function(t){return e.$refs.upload.click()}}},[e._v("\n\t\tUpload\n\t\t"),n("input",{ref:"upload",attrs:{type:"file"},on:{change:e.onFileUpload}})])],2)},ot=[],st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{background:!0,active:e.background===e.value},style:e.style,attrs:{title:e.background.name},on:{click:function(t){return e.$emit("input",e.background)}}},[e._v(e._s(e.background.name))])},ct=[],lt=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.isWebPSupported=null,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:this.isWebPSupported=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"style",get:function(){return this.background===N?{backgroundColor:N.color}:this.background instanceof U?this.background.custom?{backgroundImage:"url(".concat(this.customPathLookup[this.background.path],")")}:void 0===this.isWebPSupported?{}:{backgroundImage:"url(".concat("/Doki-Doki-Dialog-Generator/beta/","/assets/").concat(this.background.path,".lq.").concat(this.isWebPSupported?"webp":"png",")").replace(/\/+/,"/")}:this.background instanceof I?void 0===this.isWebPSupported?{}:{backgroundImage:"url(".concat("/Doki-Doki-Dialog-Generator/beta/","/assets/").concat(this.background.path,".lq.").concat(this.isWebPSupported?"webp":"png",")").replace(/\/+/,"/")}:{}}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0})],lt.prototype,"background",void 0),p["a"]([Object(f["b"])({required:!0})],lt.prototype,"value",void 0),p["a"]([Object(f["b"])({required:!0})],lt.prototype,"customPathLookup",void 0),lt=p["a"]([Object(f["a"])({components:{}})],lt);var ut=lt,dt=ut,ht=(n("f222"),Object(_["a"])(dt,st,ct,!1,null,"0d824e70",null)),pt=ht.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value===e.colorBackground?n("fieldset",[n("legend",[e._v("Settings:")]),n("label",{attrs:{for:"bg_color"}},[e._v("Color:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.color,expression:"value.color"}],attrs:{id:"bg_color",type:"color"},domProps:{value:e.value.color},on:{input:[function(t){t.target.composing||e.$set(e.value,"color",t.target.value)},function(t){return e.$emit("invalidate-render")}]}})]):n("fieldset",[n("legend",[e._v("Settings:")]),n("table",[n("tr",[n("td",{attrs:{colspan:"3"}},[n("toggle",{attrs:{label:"Flipped?"},on:{input:function(t){return e.$emit("invalidate-render")}},model:{value:e.value.flip,callback:function(t){e.$set(e.value,"flip",t)},expression:"value.flip"}})],1)]),e.isVariant?n("tr",[n("td",[n("button",{on:{click:function(t){e.value.seekVariant(-1,e.nsfw),e.$emit("invalidate-render")}}},[e._v("<")])]),n("td",[e._v("Variant")]),n("td",[n("button",{on:{click:function(t){e.value.seekVariant(1,e.nsfw),e.$emit("invalidate-render")}}},[e._v(">")])])]):e._e()])])},gt=[],bt=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"isVariant",get:function(){return this.value instanceof I&&this.value.hasVariants(this.nsfw)}},{key:"colorBackground",get:function(){return N}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0})],bt.prototype,"value",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],bt.prototype,"nsfw",void 0),bt=p["a"]([Object(f["a"])({components:{Toggle:$}})],bt);var vt=bt,mt=vt,yt=(n("27c8"),Object(_["a"])(mt,ft,gt,!1,null,"3d91422a",null)),_t=yt.exports,wt=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.customPathLookup={},e.customBGCount=0,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"onFileUpload",value:function(e){var t=this,n=this.$refs.upload;if(n.files){var r=!0,a=!1,i=void 0;try{for(var o,s=function(){var e=o.value;(function(n){var r="customBg"+n,a=be(r,e);me.push(new U(r,e.name,!1,!0)),t.$set(t.customPathLookup,r,a)})(++t.customBGCount)},c=n.files[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(l){a=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}}}},{key:"nsfwFilter",value:function(e){this.nsfw||Y(e)}},{key:"backgrounds",get:function(){return console.log("BackgroundsPanel:backgrounds"),this.customBGCount,this.nsfw?me:me.filter(function(e){return!e.nsfw})}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],wt.prototype,"vertical",void 0),p["a"]([Object(f["b"])({required:!0})],wt.prototype,"value",void 0),p["a"]([Object(f["b"])({required:!0,type:Boolean})],wt.prototype,"nsfw",void 0),wt=p["a"]([Object(f["a"])({components:{BackgroundButton:pt,BackgroundSettings:_t}})],wt);var kt=wt,xt=kt,Ot=(n("d99d"),Object(_["a"])(xt,it,ot,!1,null,"712758c4",null)),Ct=Ot.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"messageConsole"},[e.showLoading?n("p",[e._v("Loading...")]):e._e(),e._l(e.messages,function(t,r){return n("p",{key:t+"_"+r},[e._v(e._s(t))])})],2)},Rt=[],St=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.showLoading=!1,e.showLoadingTimeout=0,e.hideLoadingTimeout=0,e.messages=[],e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=this;console.log("MessageConsole:created"),this.onLoadingChange(this.loading),re.subscribe(ae,function(t){console.log("MessageConsole: failed to load asset"),e.messages.push("Failed to load asset '".concat(t.path,"'")),setTimeout(function(){e.messages.pop()},5e3)}),re.subscribe(ie,function(t){console.log("MessageConsole: failed to load custom asset"),e.messages.push("Failed to load custom asset. Try to download it manually and then upload it."),setTimeout(function(){e.messages.pop()},5e4)})}},{key:"onLoadingChange",value:function(e){var t=this;console.log("MessageConsole:onLoadingChange start ",e),e?(this.hideLoadingTimeout&&(clearTimeout(this.hideLoadingTimeout),this.hideLoadingTimeout=0),this.showLoading||this.showLoadingTimeout||(console.log("MessageConsole:onLoadingChange setting show Timeout"),this.showLoadingTimeout=setTimeout(function(){t.showLoading=!0,console.log("MessageConsole:onLoadingChangeshowingLoading"),t.showLoadingTimeout=0},100))):(this.showLoadingTimeout&&(clearTimeout(this.showLoadingTimeout),this.showLoadingTimeout=0),this.showLoading&&!this.hideLoadingTimeout&&(console.log("MessageConsole:onLoadingChange setting hide Timeout"),this.hideLoadingTimeout=setTimeout(function(){t.showLoading=!1,console.log("MessageConsole:onLoadingChange hideLoading"),t.hideLoadingTimeout=0},100)))}}]),t}(f["c"]);p["a"]([Object(f["b"])({required:!0,type:Boolean})],St.prototype,"loading",void 0),p["a"]([Object(f["d"])("loading")],St.prototype,"onLoadingChange",null),St=p["a"]([Object(f["a"])({components:{}})],St);var Pt=St,Lt=Pt,$t=(n("e1a5"),Object(_["a"])(Lt,jt,Rt,!1,null,"9fbcebf2",null)),Ht=$t.exports;function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(n,!0).forEach(function(t){Object(E["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dt=1280,Tt=816,qt=900,Bt=568,Et=0,Ft=29,It=8,Ut=38,Nt=50,Wt=9,Yt=9,Xt=39,zt=168,Gt=34,Kt=29,Vt=134,Jt=282,Qt=336,Zt=370,en=1017.25,tn=688,nn={align:"center",font:"24px riffic",outline:{style:"#b59",width:6},fill:{style:"white"}},rn={align:"left",font:"13px aller",fill:{style:"#522"}},an=Mt({},rn,{fill:{style:"#a66"}}),on={align:"left",font:"24px aller",outline:{style:"#523140",width:4},fill:{style:"#fff"}},sn={align:"left",font:"24px verily",outline:{style:"#000",width:20},fill:{style:"#fff"}},cn=Dt/2-Tt/2,ln=Dt/2-qt/2,un=cn+Ut,dn=Bt+Nt,hn=Bt-Xt,pn=cn+Gt,fn=pn+zt/2,gn=hn+Kt,bn=Bt+Vt,vn=cn+Jt,mn=cn+Qt,yn=cn+Zt,_n=function(){function e(){Object(c["a"])(this,e),this.display=!0,this.corrupted=!1,this.showControls=!0,this.allowSkipping=!0,this.showContinueArrow=!0,this.talking="",this.customName="",this.dialog=""}return Object(l["a"])(e,[{key:"render",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.display){e.next=2;break}return e.abrupt("return");case 2:if(!this.corrupted){e.next=13;break}return e.t0=t,e.next=6,fe("textbox_monika");case 6:e.t1=e.sent,e.t2=ln,e.t3=Bt,e.t4={image:e.t1,x:e.t2,y:e.t3},e.t0.drawImage.call(e.t0,e.t4),e.next=21;break;case 13:return e.t5=t,e.next=16,fe("textbox");case 16:e.t6=e.sent,e.t7=cn,e.t8=Bt,e.t9={image:e.t6,x:e.t7,y:e.t8},e.t5.drawImage.call(e.t5,e.t9);case 21:if(n=this.talking,!n){e.next=32;break}return e.t10=t,e.next=26,fe("namebox");case 26:e.t11=e.sent,e.t12=pn,e.t13=hn,e.t14={image:e.t11,x:e.t12,y:e.t13},e.t10.drawImage.call(e.t10,e.t14),t.drawText(Mt({x:fn,y:gn,text:"other"===n?this.customName:n},nn));case 32:if(this.renderText(t),this.showControls&&(t.drawText(Mt({text:"History",x:vn,y:bn},rn)),t.drawText(Mt({text:"Skip",x:mn,y:bn},this.allowSkipping?rn:an)),t.drawText(Mt({text:"Auto   Save   Load   Settings",x:yn,y:bn},rn))),!this.showContinueArrow){e.next=43;break}return e.t15=t,e.next=38,fe("next");case 38:e.t16=e.sent,e.t17=en,e.t18=tn,e.t19={image:e.t16,x:e.t17,y:e.t18},e.t15.drawImage.call(e.t15,e.t19);case 43:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"renderText",value:function(e){console.log("Textbox:render start");var t=[],n=!1,r=!0,a=!1,i=void 0;try{for(var o,s=this.dialog.split("\n")[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,l=void 0;t.push(l=[]);var u=!0,d=!1,h=void 0;try{for(var p,f=c[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var g=p.value;"["===g?n=!0:"]"===g?n=!1:l.push({l:g,b:n})}}catch(P){d=!0,h=P}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}}}catch(P){a=!0,i=P}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}var b=dn;t[0]&&t[0][0]&&t[0][0].b&&(b+=Yt);for(var v=0,m=t;v<m.length;v++){var y=m[v],_=un;y[0]&&y[0].b&&(_+=Wt);var w=!0,k=!1,x=void 0;try{for(var O,C=y[Symbol.iterator]();!(w=(O=C.next()).done);w=!0){var j=O.value,R=j.l,S=j.b;e.drawText(Mt({text:R,x:_,y:b},S?sn:on)),_+=e.measureText(Mt({text:R},S?sn:on)).width,_+=S?It:Et}}catch(P){k=!0,x=P}finally{try{w||null==C.return||C.return()}finally{if(k)throw x}}b+=Ft}console.log("Textbox:render end")}}]),e}(),wn=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.canvasWidth=0,e.canvasHeight=0,e.currentBackground=null,e.characters=[],e.selectedCharacter=null,e.selectedSprite=null,e.characterSelectorOpen=!1,e.backgroundSelectorOpen=!1,e.editDialog=!1,e.vertical=!1,e.nsfw=!1,e.textbox=new _n,e.renderer=new Me,e.showUI=!0,e.loaded=!1,e.uiSize=192,e.lqRendering=!0,e.currentlyRendering=!1,e.panel="",e.queuedRender=null,e.prevRender="",e.showingLast=!1,e.dropSpriteCount=0,e.dropPreventClick=!1,e.draggedObject=null,e.dragXOffset=0,e.dragYOffset=0,e.dragXOriginal=0,e.dragYOriginal=0,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"onSelectedCharacterChange",value:function(e,t){console.log("begin selectedCharacter"),t&&t.unselect(),e&&(e.select(),this.panel="character"),this.invalidateRender(),console.log("end selectedCharacter")}},{key:"onSelectedSpriteChange",value:function(e,t){console.log("begin onSelectedSpriteChange"),t&&t.unselect(),e&&(e.select(),this.panel="sprite"),this.invalidateRender(),console.log("end onSelectedSpriteChange")}},{key:"onPanel",value:function(e){console.log("begin onPanel"),"character"!==e&&(this.selectedCharacter=null),console.log("end onPanel")}},{key:"invalidateRender",value:function(){var e=this;console.trace&&console.trace("invalidateRender"),console.log("begin invalidateRender"),this.queuedRender?console.log("end invalidateRender 1"):(this.queuedRender=requestAnimationFrame(function(){console.log("invalidateRender: queuedRender start"),e.render_(),console.log("invalidateRender: queuedRender end")}),console.log("end invalidateRender 2"))}},{key:"render_",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("begin render_"),this.queuedRender&&(cancelAnimationFrame(this.queuedRender),this.queuedRender=null),e.next=4,this.renderer.render(this.renderCallback,!this.lqRendering);case 4:t=e.sent,console.log("render_: after await! "+t),t&&this.display(),console.log("end render_");case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderCallback",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c,l,u,d,h,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("begin renderCallback"),this.currentlyRendering=!0,e.prev=2,this.loaded){e.next=7;break}t.drawText({text:"Starting...",x:this.renderer.width/2,y:this.renderer.height/2,align:"center",outline:{width:5,style:"#b59"},font:"32px riffic",fill:{style:"white"}}),e.next=73;break;case 7:if(!t.preview){e.next=14;break}return e.t0=t,e.next=11,fe("backgrounds/transparent");case 11:e.t1=e.sent,e.t2={x:0,y:0,image:e.t1},e.t0.drawImage.call(e.t0,e.t2);case 14:if(!this.currentBackground){e.next=17;break}return e.next=17,this.currentBackground.render(t);case 17:n=!0,r=!1,a=void 0,e.prev=20,i=this.characters[Symbol.iterator]();case 22:if(n=(o=i.next()).done){e.next=30;break}if(s=o.value,s.infront){e.next=27;break}return e.next=27,s.render(t);case 27:n=!0,e.next=22;break;case 30:e.next=36;break;case 32:e.prev=32,e.t3=e["catch"](20),r=!0,a=e.t3;case 36:e.prev=36,e.prev=37,n||null==i.return||i.return();case 39:if(e.prev=39,!r){e.next=42;break}throw a;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return e.next=46,this.textbox.render(t);case 46:c=!0,l=!1,u=void 0,e.prev=49,d=this.characters[Symbol.iterator]();case 51:if(c=(h=d.next()).done){e.next=59;break}if(p=h.value,!p.infront){e.next=56;break}return e.next=56,p.render(t);case 56:c=!0,e.next=51;break;case 59:e.next=65;break;case 61:e.prev=61,e.t4=e["catch"](49),l=!0,u=e.t4;case 65:e.prev=65,e.prev=66,c||null==d.return||d.return();case 68:if(e.prev=68,!l){e.next=71;break}throw u;case 71:return e.finish(68);case 72:return e.finish(65);case 73:return e.prev=73,this.currentlyRendering=!1,e.finish(73);case 76:console.log("end renderCallback");case 77:case"end":return e.stop()}},e,this,[[2,,73,76],[20,32,36,44],[37,,39,43],[49,61,65,73],[66,,68,72]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){console.log("begin created"),window.cats=this,this.updateArea(),window.addEventListener("resize",this.updateArea),window.removeEventListener("keydown",this.onKeydown),window.addEventListener("keydown",this.onKeydown),console.log("end created")}},{key:"destroyed",value:function(){console.log("begin destroyed"),window.removeEventListener("keydown",this.onKeydown),console.log("end destroyed")}},{key:"mounted",value:function(){var e=this;console.log("begin mounted");var t=this.$refs.sd;this.sdCtx=t.getContext("2d")||void 0,window.addEventListener("keypress",function(t){27===t.keyCode&&(e.selectedCharacter=null,e.panel="")}),this.currentBackground=me[0],this.invalidateRender(),Promise.all([fe(this.currentBackground.path,!1),fe("textbox"),fe("namebox"),fe("next"),fe("backgrounds/transparent")]).then(function(){console.log("All assets loaded!"),e.loaded=!0,e.invalidateRender()}).catch(function(){alert("Error while loading. Sorry :/")}),console.log("end mounted")}},{key:"optimum",value:function(e,t){console.log("start optimum");var n=e/(16/9),r=t*(16/9);return n>t?n=t:r=e,console.log("end optimum"),[r,n]}},{key:"optimizeWithMenu",value:function(e,t){console.log("start optimizeWithMenu");var n=this.optimum(e,t-this.uiSize),r=this.optimum(e-this.uiSize,t);return console.log("end optimizeWithMenu"),n[0]*n[1]>r[0]*r[1]?[n[0],n[1],!1]:[r[0],r[1],!0]}},{key:"updateArea",value:function(){var e=this;console.log("start updateArea");var t=!0;t&&(console.log(document),console.log(document.documentElement),console.log(document.body),console.log(document.body.clientWidth),console.log(document.body.clientHeight),console.log(document.documentElement.clientWidth),console.log(document.documentElement.clientHeight));var n=this.optimizeWithMenu(document.documentElement.clientWidth,document.documentElement.clientHeight),r=Object(o["a"])(n,3),a=r[0],i=r[1],s=r[2];this.canvasWidth=a,this.canvasHeight=i,this.vertical=s,this.$nextTick(function(){e.display()}),console.log("end updateArea")}},{key:"display",value:function(){console.log("start display"),this.sdCtx?(this.showingLast=!1,this.renderer.paintOnto(this.sdCtx,0,0,1280,720),console.log("end display 2")):console.log("end display 1")}},{key:"download",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("start download"),this.prevRender&&window.URL&&window.URL.revokeObjectURL&&URL.revokeObjectURL(this.prevRender),e.next=4,this.renderer.download(this.renderCallback,"panel.png");case 4:this.prevRender=e.sent,console.log("end download");case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"showPreviousRender",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("start showPreviousRender"),!this.showingLast){e.next=5;break}return this.display(),console.log("end showPreviousRender 1"),e.abrupt("return");case 5:this.showingLast=!0,t=new Image,t.onload=function(){n.sdCtx.drawImage(t,0,0,1280,720)},t.src=this.prevRender,console.log("end showPreviousRender 2");case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCharacterCreate",value:function(e){console.log("start onCharacterCreate"),this.characterSelectorOpen=!1,this.characters.push(new qe(e,this.invalidateRender)),this.invalidateRender(),console.log("end onCharacterCreate")}},{key:"toRendererCoordinate",value:function(e,t){console.log("start toRendererCoordinate");var n=this.$refs.sd,r=e-n.offsetLeft,a=t-n.offsetTop,i=r/n.offsetWidth*n.width,o=a/n.offsetWidth*n.width;return console.log("end toRendererCoordinate"),[i,o]}},{key:"onUiClick",value:function(e){if(console.log("start onUiClick"),this.dropPreventClick)return this.dropPreventClick=!1,void console.log("end onUiClick 1");this.panel="";var t,n=this.toRendererCoordinate(e.clientX,e.clientY),r=Object(o["a"])(n,2),a=r[0],i=r[1],s=this.objectsAt(a,i),c=s.indexOf(this.selectedCharacter||this.selectedSprite);if(t=0===c?null:-1!==c?s[c-1]:s[s.length-1]||null,t)if(t instanceof Xe)this.selectedCharacter=null,this.selectedSprite=t;else{if(!(t instanceof qe))throw new Error("Unknown selected object");this.selectedSprite=null,this.selectedCharacter=t}else this.selectedCharacter=null,this.selectedSprite=null;console.log("end onUiClick 2")}},{key:"objectsAt",value:function(e,t){return console.log("objectsAt"),this.characters.filter(function(n){return n.hitTest(e,t)})}},{key:"onObjectLayerShift",value:function(e){console.log("start onObjectLayerShift");var t=this.characters.indexOf(e.object),n=t;switch(this.characters.splice(t,1),e.move){case"Forward":n+=1;break;case"Backward":n-=1;break;case"Back":n=0;break;case"Front":n=this.characters.length;break;case"Delete":return this.panel="",void this.invalidateRender()}n<=0?this.characters.unshift(e.object):n>=this.characters.length?this.characters.push(e.object):this.characters.splice(n,0,e.object),this.invalidateRender(),console.log("end onObjectLayerShift")}},{key:"onAssetCreate",value:function(e){console.log("start onAssetCreate"),this.characters.push(new Xe(e,this.invalidateRender)),console.log("end onAssetCreate")}},{key:"onDragStart",value:function(e){console.log("start onDragStart"),e.preventDefault();var t=this.selectedCharacter||this.selectedSprite;if(t){this.draggedObject=t;var n=this.toRendererCoordinate(e.clientX,e.clientY),r=Object(o["a"])(n,2),a=r[0],i=r[1];this.dragXOffset=a-t.x,this.dragYOffset=i-t.y,this.dragXOriginal=t.x,this.dragYOriginal=t.y,console.log("end onDragStart 2")}else console.log("end onDragStart 1")}},{key:"onTouchStart",value:function(e){console.log("start onTouchStart");var t=this.selectedCharacter||this.selectedSprite;if(t){this.draggedObject=t;var n=this.toRendererCoordinate(e.touches[0].clientX,e.touches[0].clientY),r=Object(o["a"])(n,2),a=r[0],i=r[1];this.dragXOffset=a-t.x,this.dragYOffset=i-t.y,this.dragXOriginal=t.x,this.dragYOriginal=t.y,console.log("end onTouchStart 2")}else console.log("end onTouchStart 1")}},{key:"onDragOver",value:function(e){console.log("start onDragOver"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",console.log("end onDragOver")}},{key:"onSpriteDragMove",value:function(e){if(console.log("start onSpriteDragMove"),this.draggedObject){e.preventDefault();var t=e instanceof MouseEvent?this.toRendererCoordinate(e.clientX,e.clientY):this.toRendererCoordinate(e.touches[0].clientX,e.touches[0].clientY),n=Object(o["a"])(t,2),r=n[0],a=n[1];r-=this.dragXOffset,a-=this.dragYOffset;var i=Math.abs(r-this.dragXOriginal),s=Math.abs(a-this.dragYOriginal);if(i+s>1&&(this.dropPreventClick=!0),e.shiftKey){var c=Math.abs(r-this.dragXOriginal),l=Math.abs(a-this.dragYOriginal);c>l?a=this.dragYOriginal:r=this.dragXOriginal}this.draggedObject.x=r,this.draggedObject.y=a,this.invalidateRender()}console.log("end onSpriteDragMove")}},{key:"onDrop",value:function(e){if(console.log("start onDrop"),e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=!0,n=!1,r=void 0;try{for(var a,i=e.dataTransfer.items[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if("file"===o.kind&&o.type.match(/image.*/)){var s="dropCustomAsset"+ ++this.dropSpriteCount;be(s,o.getAsFile());this.onAssetCreate(s)}}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}console.log("end onDrop 2")}else console.log("end onDrop 1")}},{key:"onSpriteDrop",value:function(e){console.log("start onSpriteDrop"),this.draggedObject&&("TouchEvent"in window&&e instanceof TouchEvent&&(this.dropPreventClick=!1),this.draggedObject=null),console.log("end onSpriteDrop")}},{key:"onMouseEnter",value:function(e){console.log("start onMouseEnter"),1!==e.buttons&&(this.draggedObject=null),console.log("end onMouseEnter")}},{key:"onKeydown",value:function(e){console.log("start onKeydown");var t=this.selectedCharacter||this.selectedSprite;t&&"Delete"===e.key?this.onObjectLayerShift({object:t,move:"Delete"}):t&&"ArrowLeft"===e.key?(t instanceof qe&&!t.allowFreeMove?t.pos-=1:(t.x-=e.shiftKey?1:20,t.x|=0),this.invalidateRender()):t&&"ArrowRight"===e.key?(t instanceof qe&&!t.allowFreeMove?t.pos+=1:(t.x+=e.shiftKey?1:20,t.x|=0),this.invalidateRender()):t&&"ArrowUp"===e.key?(t.y-=e.shiftKey?1:20,t.y|=0,this.invalidateRender()):t&&"ArrowDown"===e.key?(t.y+=e.shiftKey?1:20,t.y|=0,this.invalidateRender()):console.log(e),console.log("end onKeydown")}},{key:"onNSFWChange",value:function(e){if(console.log("start newNSFW"),this.currentBackground)if(e)console.log("end newNSFW 2");else{this.currentBackground.nsfw&&(this.currentBackground=me[0]),Y(this.currentBackground);var t=!0,n=!1,r=void 0;try{for(var a,i=this.characters[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o instanceof qe&&o.nsfwCheck()}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.invalidateRender(),console.log("end newNSFW 3")}else console.log("end newNSFW 1")}}]),t}(f["c"]);p["a"]([Object(f["d"])("selectedCharacter")],wn.prototype,"onSelectedCharacterChange",null),p["a"]([Object(f["d"])("selectedSprite")],wn.prototype,"onSelectedSpriteChange",null),p["a"]([Object(f["d"])("panel")],wn.prototype,"onPanel",null),p["a"]([Object(f["d"])("textbox",{deep:!0}),Object(f["d"])("lqRendering"),Object(f["d"])("currentBackground")],wn.prototype,"invalidateRender",null),p["a"]([Object(f["d"])("nsfw")],wn.prototype,"onNSFWChange",null),wn=p["a"]([Object(f["a"])({components:{DokiButton:k,GeneralPanel:T,AddPanel:xe,BackgroundsPanel:Ct,CreditsPanel:at,CharacterPanel:Ue,SpritePanel:Je,MessageConsole:Ht}})],wn);var kn=wn,xn=kn,On=(n("5c0b"),Object(_["a"])(xn,a,i,!1,null,null,null)),Cn=On.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(Cn)}}).$mount("#app")},d0ca:function(e){e.exports={id:"ddlc.fan.mc1",name:"MC (Classic)",internalId:"classic_mc",folder:"classic_mc",heads:{straight:["a","b","c","d","e","f","g","h","i","j"]},poses:[{compatibleHeads:["straight"],static:"1"}]}},d99d:function(e,t,n){"use strict";var r=n("65fe"),a=n.n(r);a.a},e1a5:function(e,t,n){"use strict";var r=n("61c9"),a=n.n(r);a.a},e2da:function(e,t,n){"use strict";var r=n("4857"),a=n.n(r);a.a},ea5a:function(e,t,n){},ea81:function(e,t,n){},f222:function(e,t,n){"use strict";var r=n("ea5a"),a=n.n(r);a.a},f2c8:function(e,t,n){"use strict";var r=n("75a5"),a=n.n(r);a.a},f721:function(e){e.exports={id:"ddlc.fan.femc",internalId:"femc",name:"FeMC",heads:{straight:{folder:"femc",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","glitch1","glitch2","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_10alt","_11","_12","_13","_14"]},straight_lh:{folder:"femc_lh",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","glitch1","glitch2","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_10alt","_11","_12","_13","_14"]}},poses:[{compatibleHeads:["straight"],folder:"femc",left:["1l","2l","4l","5l"],right:["1r","4r"]},{compatibleHeads:["straight"],folder:"femc",static:"3"},{compatibleHeads:["straight"],folder:"femc",left:["1bl","2bl","4bl","5bl"],right:["1br","4br"]},{compatibleHeads:["straight"],folder:"femc",static:"3b"},{compatibleHeads:["straight"],folder:"femc",left:["1cl","2cl","4cl","5cl"],right:["1cr","4cr"]},{compatibleHeads:["straight"],folder:"femc",static:"3c"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1l","2l","4l","5l"],right:["1r","4r"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1bl","2bl","4bl","5bl"],right:["1br","4br"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3b"},{compatibleHeads:["straight_lh"],folder:"femc_lh",left:["1cl","2cl","4cl","5cl"],right:["1cr","4cr"]},{compatibleHeads:["straight_lh"],folder:"femc_lh",static:"3c"}]}},fdec:function(e){e.exports={id:"ddlc.fan.mc2",name:"MC",internalId:"mc",folder:"mc",heads:{straight:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","error","error1","shock"],straight_red:{folder:"red",all:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","error","error1","shock"]}},poses:[{compatibleHeads:["straight"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight"],static:"3"},{compatibleHeads:["straight"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight"],static:"3b"},{compatibleHeads:["straight_red"],left:["1l","2l"],right:["1r","2r"]},{compatibleHeads:["straight_red"],static:"3"},{compatibleHeads:["straight_red"],left:["1bl","2bl"],right:["1br","2br"]},{compatibleHeads:["straight_red"],static:"3b"}]}}});
//# sourceMappingURL=app.8becd155.js.map